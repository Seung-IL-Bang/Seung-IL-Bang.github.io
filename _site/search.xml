<?xml version="1.0" encoding="utf-8"?>
<search>
  
    <entry>
      <title><![CDATA[Spring Batch ë°ì´í„° ì§‘ê³„(Aggregation) ìµœì í™”]]></title>
      <url>/spring%20batch/2025/03/23/Spring-Batch-Optimized-aggregation/</url>
      <content type="text"><![CDATA[  ë°ì´í„° ì§‘ê³„ë¥¼ ìœ„í•œ ë°°ì¹˜ ì²˜ë¦¬ ì‹œ GROUP BYì™€ SUM ëŒ€ì‹  Redisë¥¼ í™œìš©í•˜ì—¬ ì„±ëŠ¥ì„ ëŒ€í­ ê°œì„ í•  ìˆ˜ ìžˆëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤!ðŸš€ ë“¤ì–´ê°€ê¸°ëŒ€ìš©ëŸ‰ ë°ì´í„°ì˜ ì§‘ê³„ ì²˜ë¦¬ëŠ” ë°°ì¹˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ìžì£¼ ë°œìƒí•˜ëŠ” ìž‘ì—…ì´ì§€ë§Œ, ì²˜ë¦¬í•´ì•¼ í•  ë°ì´í„° ì–‘ì´ ì¦ê°€í• ìˆ˜ë¡ ì„±ëŠ¥ ì´ìŠˆê°€ ë°œìƒí•©ë‹ˆë‹¤. ë³¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ê¸°ì¡´ GROUP BY, SUM ë“± SQL ê¸°ë°˜ ì§‘ê³„ ëŒ€ì‹  Redisë¥¼ í™œìš©í•œ ê³ ì„±ëŠ¥ ì§‘ê³„ ë°©ë²•ê³¼ ê·¸ ìµœì í™” ê³¼ì •ì— ëŒ€í•´ ë‹¨ê³„ë³„ë¡œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.ê¸°ì¡´ GROUP BY, SUM ì¿¼ë¦¬ì˜ í•œê³„í†µê³„ ì²˜ë¦¬ ì‹œ ì¼ë°˜ì ìœ¼ë¡œ GROUP BY, SUM ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë°ì´í„°ê°€ ì ì„ ë•ŒëŠ” íš¨ìœ¨ì ìž…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë°ì´í„°ê°€ ëŒ€ìš©ëŸ‰ìœ¼ë¡œ ì¦ê°€í•˜ê³  ì¿¼ë¦¬ê°€ ë³µìž¡í•´ì§ˆìˆ˜ë¡ ì—¬ëŸ¬ ì„±ëŠ¥ ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤:  ì—¬ëŸ¬ í…Œì´ë¸”ì„ JOINí•˜ê³  GROUP BYí•˜ëŠ” ë³µìž¡í•œ ì¿¼ë¦¬ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì˜µí‹°ë§ˆì´ì €ê°€ ë¹„íš¨ìœ¨ì ì¸ ì‹¤í–‰ ê³„íšì„ ìƒì„±í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  ëŒ€ëŸ‰ì˜ ë°ì´í„° ì²˜ë¦¬ ê³¼ì •ì—ì„œ ìž„ì‹œ í…Œì´ë¸” ìƒì„±ìœ¼ë¡œ ì¸í•œ ë””ìŠ¤í¬ I/O ë¶€í•˜ê°€ ì¦ê°€í•©ë‹ˆë‹¤.  ë°ì´í„° ì–‘ì´ ì¦ê°€í• ìˆ˜ë¡ ì¿¼ë¦¬ ì‹¤í–‰ ì‹œê°„ì´ ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ ì¦ê°€í•©ë‹ˆë‹¤.  ì¿¼ë¦¬ íŠœë‹ì´ ë³µìž¡í•´ì§€ê³  ë°ì´í„°ë² ì´ìŠ¤ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì´ ê¸‰ì¦í•©ë‹ˆë‹¤.ì•„ëž˜ ì½”ë“œëŠ” ë°°ì¹˜ ê³¼ì •ì—ì„œ ì •ì‚° ë°ì´í„°ë¥¼ ì§‘ê³„í•˜ê¸° ìœ„í•´ GROUP BY, SUMì„ ì‚¬ìš©í•œ SQLë¬¸ ìž…ë‹ˆë‹¤:String sql = """            SELECT                    ds.settlement_id,                    ds.seller_id,                    ds.settlement_date,                    SUM(IF(dsd.settlement_status = 'COMPLETED', 1, 0)) AS total_order_count,                    SUM(IF(dsd.settlement_status = 'REFUNDED', 1, 0)) AS total_claim_count,                    SUM(CASE                            WHEN dsd.settlement_status = 'COMPLETED' THEN dsd.quantity                            WHEN dsd.settlement_status = 'REFUNDED' THEN -dsd.quantity                            ELSE 0                        END) AS total_quantity,                    SUM(CASE                            WHEN dsd.settlement_status = 'COMPLETED' THEN dsd.sales_amount                            WHEN dsd.settlement_status = 'REFUNDED' THEN -dsd.sales_amount                            ELSE 0                        END) AS total_sales_amount,                    SUM(CASE                            WHEN dsd.settlement_status = 'COMPLETED' THEN dsd.tax_amount                            WHEN dsd.settlement_status = 'REFUNDED' THEN -dsd.tax_amount                            ELSE 0                        END) AS total_tax_amount,                    SUM(CASE                            WHEN dsd.settlement_status = 'COMPLETED' THEN dsd.promotion_discount_amount                            WHEN dsd.settlement_status = 'REFUNDED' THEN -dsd.promotion_discount_amount                            ELSE 0                        END) AS total_promotion_discount_amount,                    SUM(CASE                            WHEN dsd.settlement_status = 'COMPLETED' THEN dsd.coupon_discount_amount                            WHEN dsd.settlement_status = 'REFUNDED' THEN -dsd.coupon_discount_amount                            ELSE 0                        END) AS total_coupon_discount_amount,                    SUM(CASE                            WHEN dsd.settlement_status = 'COMPLETED' THEN dsd.point_used_amount                            WHEN dsd.settlement_status = 'REFUNDED' THEN -dsd.point_used_amount                            ELSE 0                        END) AS total_point_used_amount,                    SUM(CASE                            WHEN dsd.settlement_status = 'COMPLETED' THEN dsd.shipping_fee                            WHEN dsd.settlement_status = 'REFUNDED' THEN -dsd.shipping_fee                            ELSE 0                        END) AS total_shipping_fee,                    SUM(IF(dsd.settlement_status = 'REFUNDED', dsd.claim_shipping_fee, 0)) AS total_claim_shipping_fee,                    SUM(CASE                            WHEN dsd.settlement_status = 'COMPLETED' THEN dsd.commission_amount                            WHEN dsd.settlement_status = 'REFUNDED' THEN -dsd.commission_amount                            ELSE 0                        END) AS total_commission_amount,                    SUM(CASE                            WHEN dsd.settlement_status = 'COMPLETED' THEN dsd.settlement_amount                            WHEN dsd.settlement_status = 'REFUNDED' THEN -dsd.settlement_amount                            ELSE 0                        END) AS total_settlement_amount            FROM daily_settlement_detail dsd            JOIN daily_settlement ds on dsd.daily_settlement_id = ds.settlement_id            WHERE ds.settlement_date = ?            GROUP BY ds.settlement_id, ds.seller_id, ds.settlement_date        """;Redisë¥¼ í™œìš©í•œ íš¨ìœ¨ì ì¸ ì§‘ê³„ ì²˜ë¦¬ëŒ€ìš©ëŸ‰ ë°ì´í„° ì§‘ê³„ ì‹œ ë°œìƒí•˜ëŠ” GROUP BY ì¿¼ë¦¬ì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì§‘ê³„ ì—°ì‚°ì„ ë””ìŠ¤í¬ ê¸°ë°˜ RDB ë°ì´í„°ë² ì´ìŠ¤ê°€ ì•„ë‹Œ ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ì¸ Redisë¡œ ì´ê´€í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.Redisë¥¼ ì§‘ê³„ ì²˜ë¦¬ì— í™œìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ìž¥ì ì´ ìžˆìŠµë‹ˆë‹¤:  ì§‘ê³„ì— ìµœì í™”ëœ ì—°ì‚° API ì§€ì› (hincrby, hincrbyfloat ë“±)  ë©”ëª¨ë¦¬ ê¸°ë°˜ ì²˜ë¦¬ë¡œ ë””ìŠ¤í¬ I/O ë³‘ëª© í˜„ìƒ ì œê±°  ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì´ˆê³ ì† ì—°ì‚° ì²˜ë¦¬ ëŠ¥ë ¥ðŸš¨ ì£¼ì˜ì‚¬í•­:Redisë¥¼ ì‚¬ìš©í•˜ë©´ ì§‘ê³„ ì—°ì‚°ì„ ë¹ ë¥´ê²Œ ì²˜ë¦¬í•  ìˆœ ìžˆì§€ë§Œ, ë³‘ëª© ì§€ì ì´ ë  ìˆ˜ ìžˆëŠ” ì§€ì ì´ ë„¤íŠ¸ì›Œí¬ ë ˆì´í„´ì‹œìž…ë‹ˆë‹¤. 1,000ë§Œ ê°œì˜ ë°ì´í„°ë¥¼ í•©ì‚°í•˜ê¸° ìœ„í•´ 1,000ë§Œ ë²ˆì˜ ê°œë³„ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì´ ë°œìƒí•œë‹¤ë©´, ì´ë¡œ ì¸í•œ ì„±ëŠ¥ ì €í•˜ëŠ” í”¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. â˜ ï¸Redis Pipelineì„ í†µí•œ ë„¤íŠ¸ì›Œí¬ ë ˆì´í„´ì‹œ ìµœì†Œí™”Redis Pipelineì„ í™œìš©í•˜ë©´ ìˆ˜ë§Žì€ Redis ëª…ë ¹ì„ ë¬¶ì–´ì„œ í•œ ë²ˆì˜ ë„¤íŠ¸ì›Œí¬ ì™•ë³µìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ 1,000ë§Œ ë²ˆì˜ ê°œë³„ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ì²­í¬ ë‹¨ìœ„ë¡œ ë¬¶ì–´ 1ë§Œ ë²ˆ ì •ë„ë¡œ ì¤„ì´ë©´ ì§‘ê³„ ì²˜ë¦¬ ì‹œê°„ì„ íšê¸°ì ìœ¼ë¡œ ë‹¨ì¶•í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ê°œë³„ ìš”ì²­ ë°©ì‹Pipeline ë°©ì‹ðŸ’¡ ì¤‘ìš”í•œ êµ¬í˜„ í¬ì¸íŠ¸:Spring Batchì˜ ì²­í¬ í”„ë¡œì„¸ì‹± ì•„í‚¤í…ì²˜ë¥¼ ê³ ë ¤í•  ë•Œ, Redis íŒŒì´í”„ë¼ì¸ì€ ë°˜ë“œì‹œ ItemWriterì—ì„œ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤. Spring BatchëŠ” ItemReader â†’ ItemProcessor ë‹¨ê³„ì—ì„œëŠ” í•­ëª©ì„ í•˜ë‚˜ì”© ì²˜ë¦¬í•˜ë‹¤ê°€, ì§€ì •ëœ Chunk í¬ê¸°ë§Œí¼ í•­ëª©ì´ ì²˜ë¦¬ë˜ë©´ ItemWriterì—ê²Œ ë¬¶ìŒìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.ë§Œì•½ ItemProcessorì—ì„œ Redis Pipelineì„ ìƒì„±í•œë‹¤ë©´, í•­ëª©ë§ˆë‹¤ Redis ì—°ê²°ì„ ë§ºê³  ëŠëŠ” ë¶ˆí•„ìš”í•œ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•©ë‹ˆë‹¤. ë”°ë¼ì„œ ItemWriterì—ì„œ ì²­í¬ ë‹¨ìœ„ë¡œ íŒŒì´í”„ë¼ì¸ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ìµœì ì˜ êµ¬í˜„ ë°©ì‹ìž…ë‹ˆë‹¤.(ì²˜ìŒì— ì²­í¬ í”„ë¡œì„¸ì‹± ì•„í‚¤í…ì²˜ë¥¼ ê³ ë ¤í•˜ì§€ ì•Šê³ , ë‹¨ìˆœížˆ ItemProcessorì—ì„œ ì²˜ë¦¬í•˜ëŠ”ê²Œ ìžì—°ìŠ¤ëŸ½ë‹¨ ì°©ê° ë•ë¶„ì— ì„±ëŠ¥ì´ ë‚˜ë¹ ì§„ ì œ ê²½í—˜ìœ¼ë¡œë¶€í„° ì•Œë ¤ë“œë¦½ë‹ˆë‹¤. ðŸ˜‚)ë‹¤ìŒì€ ì •ì‚° ë°ì´í„°(settlement_detail) ì²­í¬ë¥¼ ì •ì‚° í•­ëª©ë³„ë¡œ Redisì—ì„œ íŒŒì´í”„ë¼ì¸ì„ ì‚¬ìš©í•´ ì§‘ê³„ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œìž…ë‹ˆë‹¤:@Beanpublic ItemWriter&lt;SettlementAggregate&gt; optimizedRedisAggregateWriter() {    return items -&gt; {        // ì²­í¬ì˜        // íŒŒì´í”„ë¼ì¸ ì‹œìž‘        redisAsyncCommands.multi();        log.info("Processing {} items in a single Redis pipeline transaction", items.size());        for (SettlementAggregate detail : items) {            String key = "daily_settlement:" + detail.getSettlementId();            // ìƒíƒœë³„ ì²˜ë¦¬            if (COMPLETED.name().equals(detail.getSettlementStatus())) {                redisAsyncCommands.hincrby(key, "totalOrderCount", 1);                redisAsyncCommands.hincrby(key, "totalQuantity", detail.getQuantity());            } else if (REFUNDED.name().equals(detail.getSettlementStatus())) {                redisAsyncCommands.hincrby(key, "totalClaimCount", 1);                redisAsyncCommands.hincrby(key, "totalQuantity", -detail.getQuantity());            }            // ê¸ˆì•¡ ê´€ë ¨ í•„ë“œ ì²˜ë¦¬            String statusMultiplier = REFUNDED.name().equals(detail.getSettlementStatus()) ? "-" : "";            redisAsyncCommands.hincrbyfloat(key, "totalSalesAmount",                    Double.parseDouble(statusMultiplier + detail.getSalesAmount().toString()));            redisAsyncCommands.hincrbyfloat(key, "totalTaxAmount",                    Double.parseDouble(statusMultiplier + detail.getTaxAmount().toString()));            redisAsyncCommands.hincrbyfloat(key, "totalPromotionDiscountAmount",                    Double.parseDouble(statusMultiplier + detail.getPromotionDiscountAmount().toString()));            redisAsyncCommands.hincrbyfloat(key, "totalCouponDiscountAmount",                    Double.parseDouble(statusMultiplier + detail.getCouponDiscountAmount().toString()));            redisAsyncCommands.hincrbyfloat(key, "totalPointUsedAmount",                    Double.parseDouble(statusMultiplier + detail.getPointUsedAmount().toString()));            redisAsyncCommands.hincrbyfloat(key, "totalShippingFee",                    Double.parseDouble(statusMultiplier + detail.getShippingFee().toString()));            redisAsyncCommands.hincrbyfloat(key, "totalCommissionAmount",                    Double.parseDouble(statusMultiplier + detail.getCommissionAmount().toString()));            redisAsyncCommands.hincrbyfloat(key, "totalSettlementAmount",                    Double.parseDouble(statusMultiplier + detail.getSettlementAmount().toString()));            // REFUNDEDì¸ ê²½ìš° í´ë ˆìž„ ë°°ì†¡ë¹„ ì¶”ê°€            if (REFUNDED.name().equals(detail.getSettlementStatus())) {                redisAsyncCommands.hincrbyfloat(key, "totalClaimShippingFee",                        Double.parseDouble(detail.getClaimShippingFee().toString()));            }            // seller_idì™€ settlement_date ì €ìž¥ (ë®ì–´ì“°ê¸° - ëª¨ë“  ë ˆì½”ë“œê°€ ë™ì¼í•œ ê°’ì„ ê°€ì§)            redisAsyncCommands.hset(key, "sellerId", detail.getSellerId().toString());            redisAsyncCommands.hset(key, "settlementDate", detail.getSettlementDate().toString());            // í•´ë‹¹ settlementì— ëŒ€í•œ í‚¤ ëª©ë¡ì— ì¶”ê°€            redisAsyncCommands.sadd("settlement_keys:" + detail.getSettlementDate().toString(), key);        }        // ëª¨ë“  ëª…ë ¹ì„ í•œ ë²ˆì— ì‹¤í–‰        redisAsyncCommands.exec();        log.info("Successfully processed batch of {} settlement details to Redis", items.size());    };}ì´ ë°©ì‹ì„ ì ìš©í•œ í›„ì—ë„ redisAsyncCommands í´ë¼ì´ì–¸íŠ¸ë¥¼ í†µí•´ ë°˜ë³µë˜ëŠ” ì—°ì‚° ìš”ì²­ì„ ë§¤ë²ˆ íŒŒì´í”„ë¼ì¸ì— ì ìž¬í•´ì•¼ í•˜ë¯€ë¡œ, ê¸°ì¡´ GROUP BY ëŒ€ë¹„ ì„±ëŠ¥ ê°œì„ ì´ ê¸°ëŒ€ë³´ë‹¤ í¬ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.ë” ë†’ì€ ì„±ëŠ¥ ê°œì„ ì„ ìœ„í•´ êµ¬ê¸€ë§ê³¼ AIì—ê²Œ ì¡°ì–¸ì„ êµ¬í•˜ì—¬, ì €ìˆ˜ì¤€ API í™œìš© ë°©ë²• ì¤‘ Lua ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©ì„ ê³ ë ¤í•´ ë³´ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.Lua ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™œìš©í•œ ì§‘ê³„ ì²˜ë¦¬íŒŒì´í”„ë¼ì¸ì— ì—°ì‚° ëª…ë ¹ì–´ë¥¼ ì ìž¬í•˜ëŠ” ê³¼ì •ì—ì„œë„ ì—¬ì „ížˆ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸¡ì—ì„œ ë§Žì€ ì—°ì‚° ë¡œì§ì´ í•„ìš”í•˜ë‹¤ëŠ” ì‚¬ì‹¤ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.(ðŸ¤” StepListenerë¥¼ í™œìš©í•˜ì—¬ ëª…ë ¹ì–´ë¥¼ ì ìž¬í•˜ëŠ” ê³¼ì •ì´ ì–¼ë§ˆë‚˜ ì‹œê°„ì´ ê±¸ë¦¬ëŠ”ì§€ ì¸¡ì •í–ˆìŠµë‹ˆë‹¤.)ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Lua ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„°ë§Œ Redis ì„œë²„ë¡œ ì „ì†¡í•˜ê³ , ëª¨ë“  ì§‘ê³„ ì—°ì‚°ì€ Redis ì„œë²„ì—ì„œ ì§ì ‘ ìˆ˜í–‰í•˜ë„ë¡ ê°œì„ í–ˆìŠµë‹ˆë‹¤.ì´ ì ‘ê·¼ ë°©ì‹ì˜ í•µì‹¬ ìž¥ì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:  ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸¡ì˜ ì—°ì‚° ì˜¤ë²„í—¤ë“œ ì œê±°  ë°ì´í„° ì „ì†¡ëŸ‰ ìµœì†Œí™”  Redis ì„œë²„ì—ì„œì˜ ì›ìžì  ì‹¤í–‰ ë³´ìž¥  ë³µìž¡í•œ ë¡œì§ì„ ë‹¨ì¼ ìŠ¤í¬ë¦½íŠ¸ë¡œ ìº¡ìŠí™”ë‹¤ìŒì€ ì •ì‚° ì§‘ê³„ë¥¼ ìœ„í•œ Lua ìŠ¤í¬ë¦½íŠ¸ìž…ë‹ˆë‹¤:// ì§‘ê³„ë¥¼ ìœ„í•œ Lua ìŠ¤í¬ë¦½íŠ¸private static final String AGGREGATE_SCRIPT = """        local key = KEYS[1]        local settlement_key = KEYS[2]        local status = ARGV[1]        local seller_id = ARGV[2]        local settlement_date = ARGV[3]        local quantity = tonumber(ARGV[4])        local tax_amount = tonumber(ARGV[5])        local sales_amount = tonumber(ARGV[6])        local promotion_discount_amount = tonumber(ARGV[7])        local coupon_discount_amount = tonumber(ARGV[8])        local point_used_amount = tonumber(ARGV[9])        local shipping_fee = tonumber(ARGV[10])        local claim_shipping_fee = tonumber(ARGV[11])        local commission_amount = tonumber(ARGV[12])        local settlement_amount = tonumber(ARGV[13])                if status == 'COMPLETED' then          redis.call('hincrby', key, 'totalOrderCount', 1)          redis.call('hincrby', key, 'totalQuantity', quantity)        else          redis.call('hincrby', key, 'totalClaimCount', 1)          redis.call('hincrby', key, 'totalQuantity', -quantity)        end                local multiplier = status == 'REFUNDED' and -1 or 1        redis.call('hincrbyfloat', key, 'totalSalesAmount', multiplier * sales_amount)        redis.call('hincrbyfloat', key, 'totalTaxAmount', multiplier * tax_amount)        redis.call('hincrbyfloat', key, 'totalPromotionDiscountAmount', multiplier * promotion_discount_amount)        redis.call('hincrbyfloat', key, 'totalCouponDiscountAmount', multiplier * coupon_discount_amount)        redis.call('hincrbyfloat', key, 'totalPointUsedAmount', multiplier * point_used_amount)        redis.call('hincrbyfloat', key, 'totalShippingFee', multiplier * shipping_fee)        redis.call('hincrbyfloat', key, 'totalCommissionAmount', multiplier * commission_amount)        redis.call('hincrbyfloat', key, 'totalSettlementAmount', multiplier * settlement_amount)                if status == 'REFUNDED' then          redis.call('hincrbyfloat', key, 'totalClaimShippingFee', claim_shipping_fee)        end                redis.call('hset', key, 'sellerId', seller_id)        redis.call('hset', key, 'settlementDate', settlement_date)        redis.call('sadd', settlement_key, key)                return 1        """;ë‹¤ìŒì€ Lua ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™œìš©í•´ Redisì—ì„œ ì§‘ê³„ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ItemWriter êµ¬í˜„ìž…ë‹ˆë‹¤:@Beanpublic ItemWriter&lt;SettlementAggregate&gt; luaScriptDirectWriter() {    return items -&gt; {        log.info("Processing {} items with Redis Lua Script direct execution", items.size());        // Lua ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™œìš©í•œ ì²˜ë¦¬        try (StatefulRedisConnection&lt;String, String&gt; connection = redisClient.connect()) {            RedisAsyncCommands&lt;String, String&gt; async = connection.async();            async.setAutoFlushCommands(false);            List&lt;RedisFuture&lt;?&gt;&gt; futures = new ArrayList&lt;&gt;();            for (SettlementAggregate detail : items) {                String key = "daily_settlement:" + detail.getSettlementId();                String settlementKeysKey = "settlement_keys:" + detail.getSettlementDate().toString();                // Lua ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ - ëª¨ë“  ì—°ì‚°ì„ ë ˆë””ìŠ¤ ì„œë²„ì—ì„œ ì²˜ë¦¬                futures.add(async.eval(                        AGGREGATE_SCRIPT,                        ScriptOutputType.INTEGER,                        new String[]{key, settlementKeysKey},                        detail.getSettlementStatus(),                        detail.getSellerId().toString(),                        detail.getSettlementDate().toString(),                        String.valueOf(detail.getQuantity()),                        detail.getTaxAmount().toString(),                        detail.getSalesAmount().toString(),                        detail.getPromotionDiscountAmount().toString(),                        detail.getCouponDiscountAmount().toString(),                        detail.getPointUsedAmount().toString(),                        detail.getShippingFee().toString(),                        detail.getClaimShippingFee().toString(),                        detail.getCommissionAmount().toString(),                        detail.getSettlementAmount().toString()                ));            }            // ëª¨ë“  ëª…ë ¹ì–´ í•œë²ˆì— ì „ì†¡            async.flushCommands();            // ëª¨ë“  ìž‘ì—… ì™„ë£Œ ëŒ€ê¸°            CompletableFuture.allOf(futures.toArray(new CompletableFuture[0]))                    .get(30, TimeUnit.SECONDS);        } catch (Exception e) {            log.error("Error processing settlements with Lua script: {}", e.getMessage(), e);            throw new RuntimeException("Error executing Redis Lua script", e);        }        log.info("Successfully processed batch of {} settlement details to Redis using Lua script", items.size());    };}Lua ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­ê³¼ íŠ¸ë ˆì´ë“œ ì˜¤í”„Lua ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•œ ìµœì í™”ëŠ” í° ì„±ëŠ¥ í–¥ìƒì„ ê°€ì ¸ì˜¬ ìˆ˜ ìžˆì§€ë§Œ, ëª‡ ê°€ì§€ ì¤‘ìš”í•œ ê³ ë ¤ì‚¬í•­ê³¼ íŠ¸ë ˆì´ë“œ ì˜¤í”„ê°€ ì¡´ìž¬í•©ë‹ˆë‹¤:ðŸ“Œ Redis ì„œë²„ ë¶€í•˜ ì¦ê°€:  ì§‘ê³„ ì—°ì‚°ì˜ ë¶€í•˜ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ Redis ì„œë²„ë¡œ ì´ë™í•©ë‹ˆë‹¤.  ë³µìž¡í•œ ìŠ¤í¬ë¦½íŠ¸ëŠ” Redisì˜ ì‹±ê¸€ ìŠ¤ë ˆë“œ íŠ¹ì„±ìœ¼ë¡œ ì¸í•´ ë‹¤ë¥¸ ìž‘ì—…ì„ ì°¨ë‹¨í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  íŠ¹ížˆ ê³ ë¶€í•˜ ìƒí™©ì—ì„œ Redis ì„œë²„ì˜ CPU ì‚¬ìš©ë¥ ì„ ëª¨ë‹ˆí„°ë§í•´ì•¼ í•©ë‹ˆë‹¤.ðŸ“Œ ë””ë²„ê¹… ë³µìž¡ì„±:  Lua ìŠ¤í¬ë¦½íŠ¸ ë‚´ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ëŠ” ë””ë²„ê¹…ì´ ì–´ë µìŠµë‹ˆë‹¤.  ë¡œê·¸ ì¶œë ¥ ë“± ë””ë²„ê¹… ì •ë³´ë¥¼ ì–»ê¸° ì–´ë ¤ìš°ë¯€ë¡œ ì² ì €í•œ í…ŒìŠ¤íŠ¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.  ìŠ¤í¬ë¦½íŠ¸ ì˜¤ë¥˜ ì‹œ ì „ì²´ íŠ¸ëžœìž­ì…˜ì´ ì‹¤íŒ¨í•  ìˆ˜ ìžˆì–´ ë¡¤ë°± ì „ëžµì´ í•„ìš”í•©ë‹ˆë‹¤.ðŸ“Œ ìœ ì§€ë³´ìˆ˜ ë³µìž¡ì„±:  Lua ìŠ¤í¬ë¦½íŠ¸ì— ëŒ€í•œ ë²„ì „ ê´€ë¦¬ì™€ ë°°í¬ ì „ëžµì´ í•„ìš”í•©ë‹ˆë‹¤.ðŸ“Œ Lua ì–¸ì–´ í•™ìŠµ ê³¡ì„ :  ê°œë°œíŒ€ì´ Lua ì–¸ì–´ì— ìµìˆ™í•˜ì§€ ì•Šì„ ê²½ìš° ì¶”ê°€ì ì¸ í•™ìŠµ ë¹„ìš©ì´ ë°œìƒí•©ë‹ˆë‹¤.ðŸ“Œ ì›ìžì„± ì œí•œ:  Lua ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¨ì¼ Redis ì¸ìŠ¤í„´ìŠ¤ì—ì„œëŠ” ì›ìžì ì´ì§€ë§Œ, í´ëŸ¬ìŠ¤í„° í™˜ê²½ì—ì„œëŠ” ì›ìžì„±ì´ ë³´ìž¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  í´ëŸ¬ìŠ¤í„°ì—ì„œ ì—¬ëŸ¬ í‚¤ì— ê±¸ì¹œ ìž‘ì—…ì„ ìˆ˜í–‰í•  ë•ŒëŠ” ëª¨ë“  í‚¤ê°€ ë™ì¼í•œ ìŠ¬ë¡¯ì— ìžˆì–´ì•¼ í•©ë‹ˆë‹¤.ðŸ“Œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€:  Lua ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì¤‘ ìƒì„±ë˜ëŠ” ìž„ì‹œ ë°ì´í„°ëŠ” Redis ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.  ëŒ€ê·œëª¨ ë°ì´í„° ì²˜ë¦¬ ì‹œ maxmemory ì„¤ì •ê³¼ ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.ì´ëŸ¬í•œ íŠ¸ë ˆì´ë“œ ì˜¤í”„ë¥¼ ê³ ë ¤í•˜ì—¬, ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì—ì„œ Lua ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©ì„ ê¶Œìž¥í•©ë‹ˆë‹¤:  ì§‘ê³„, ì¹´ìš´íŒ… ë“± ë‹¨ìˆœí•˜ê³  ë°˜ë³µì ì¸ ì—°ì‚°ì´ í•„ìš”í•œ ê²½ìš°  ë„¤íŠ¸ì›Œí¬ ì™•ë³µì„ ìµœì†Œí™”í•´ì•¼ í•˜ëŠ” ì„±ëŠ¥ ë§¤ìš° ì¤‘ìš”í•œ ìƒí™©  Redis ì„œë²„ì˜ ë¦¬ì†ŒìŠ¤ê°€ ì¶©ë¶„í•œ ê²½ìš°ë°˜ë©´, ë‹¤ìŒê³¼ ê°™ì€ ê²½ìš°ëŠ” íŒŒì´í”„ë¼ì¸ì´ë‚˜ ë‹¤ë¥¸ ë°©ì‹ì„ ê³ ë ¤í•´ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤:  ë¡œì§ì´ ë§¤ìš° ë³µìž¡í•˜ê³  ìžì£¼ ë³€ê²½ë˜ëŠ” ê²½ìš°  Redis í´ëŸ¬ìŠ¤í„° í™˜ê²½ì—ì„œ ì—¬ëŸ¬ í‚¤ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°  Redis ì„œë²„ê°€ ì´ë¯¸ ë†’ì€ ë¶€í•˜ë¥¼ ê²ªê³  ìžˆëŠ” ê²½ìš°ì„±ëŠ¥ ë¹„êµ ë° ê²°ë¡ ì„¸ ê°€ì§€ êµ¬í˜„ ë°©ì‹ì˜ ì„±ëŠ¥ì„ ë¹„êµí•œ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:  ì²˜ë¦¬ ì†ë„ í–¥ìƒ: GROUP BY ì¿¼ë¦¬ ëŒ€ë¹„ ìµœëŒ€ 9ë°° ì„±ëŠ¥ ê°œì„   ë°ì´í„°ë² ì´ìŠ¤ ë¶€í•˜ ê°ì†Œ: ë°ì´í„°ë² ì´ìŠ¤ì˜ ì§‘ê³„ ì—°ì‚° ë¶€ë‹´ ì œê±°  í™•ìž¥ì„± í–¥ìƒ: ë°ì´í„° ì¦ê°€ì—ë„ ì„ í˜•ì ì¸ ì„±ëŠ¥ ìœ ì§€  ì‹¤ì‹œê°„ ì§‘ê³„ ê°€ëŠ¥: ë°°ì¹˜ ìž‘ì—…ê³¼ ì‹¤ì‹œê°„ ì§‘ê³„ë¥¼ ë³‘í–‰ ê°€ëŠ¥ê²°ë¡ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì§‘ê³„ê°€ í•„ìš”í•œ Spring Batch ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ë‹¨ìˆœížˆ SQLì˜ GROUP BYì— ì˜ì¡´í•˜ê¸°ë³´ë‹¤ Redisì™€ ê°™ì€ ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í™œìš©í•˜ê³ , Lua ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•œ ì„œë²„ ì‚¬ì´ë“œ ì²˜ë¦¬ë¥¼ êµ¬í˜„í•˜ì—¬ ìµœì ì˜ ì„±ëŠ¥ì„ ì–»ì„ ìˆ˜ë„ ìžˆìŠµë‹ˆë‹¤. ë³¸ í¬ìŠ¤íŠ¸ê°€ ë°°ì¹˜ ì²˜ë¦¬ì˜ ì„±ëŠ¥ì„ ë†’ì´ëŠ” ë° ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.ê°ì‚¬í•©ë‹ˆë‹¤.ì°¸ê³  ìžë£Œ  Batch Performance ê·¹í•œìœ¼ë¡œ ëŒì–´ì˜¬ë¦¬ê¸°: 1ì–µ ê±´ ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ ë…¸ë ¥ / if(kakao)dev2022  Spring Batch ì• í”Œë¦¬ì¼€ì´ì…˜ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ ì£¼ìš” íŒ (kakao tech)  Redis Commands Docs - hincrby  Redis Commands Docs - hincrbyfloat  Redis Docs - Scripting with Lua]]></content>
      <categories>
        
          <category> Spring Batch </category>
        
      </categories>
      <tags>
        
          <tag> Spring Batch </tag>
        
          <tag> Redis </tag>
        
          <tag> Aggregation </tag>
        
          <tag> Performance Optimization </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Spring Batch íš¨ìœ¨ì ì¸ ëŒ€ëŸ‰ ë°ì´í„° Write ì „ëžµ]]></title>
      <url>/spring%20batch/2025/03/23/Spring-Batch-Optimized-Write/</url>
      <content type="text"><![CDATA[  ìŠ¤í”„ë§ ë°°ì¹˜ í™˜ê²½ì—ì„œ JPA ê¸°ë°˜ ItemWriterì˜ ì„±ëŠ¥ ì €í•˜ ìš”ì¸ì„ ë¶„ì„í•˜ê³ , JDBC ë°°ì¹˜ ì¸ì„œíŠ¸ ì „ëžµì„ í†µí•œ ì„±ëŠ¥ ê°œì„  ë°©ì•ˆì„ ì•Œì•„ë´…ë‹ˆë‹¤.ðŸš€ ë“¤ì–´ê°€ê¸°ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ëŠ” ì—”í„°í”„ë¼ì´ì¦ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í”ížˆ ë§ˆì£¼í•˜ëŠ” ë„ì „ ê³¼ì œìž…ë‹ˆë‹¤. íŠ¹ížˆ Spring Batch í™˜ê²½ì—ì„œ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì €ìž¥í•˜ëŠ” ê²ƒì€ ì „ì²´ ë°°ì¹˜ í”„ë¡œì„¸ìŠ¤ì˜ ì„±ëŠ¥ì— ì§ì ‘ì ì¸ ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤. ë³¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” JPA ê¸°ë°˜ ItemWriter ì‚¬ìš© ì‹œ ë°œìƒí•˜ëŠ” ì„±ëŠ¥ ì œì•½ ìš”ì¸ì„ ìƒì„¸ížˆ ë¶„ì„í•˜ê³ , JDBC ê¸°ë°˜ ë°°ì¹˜ ì¸ì„œíŠ¸ë¥¼ í™œìš©í•œ ì„±ëŠ¥ ìµœì í™” ì „ëžµì— ëŒ€í•´ ì‚´íŽ´ë³´ê² ìŠµë‹ˆë‹¤.JPA ê¸°ë°˜ ItemWriterì˜ ì„±ëŠ¥ ì œì•½ ìš”ì¸ë¨¼ì € ë°°ì¹˜ ì²˜ë¦¬ í™˜ê²½ì—ì„œ JPAì˜ ì í•©ì„±ì— ëŒ€í•´ ê³ ë¯¼í•´ë³¼ í•„ìš”ê°€ ìžˆìŠµë‹ˆë‹¤. JPAëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ í†µí•´ ê°œë°œìžì—ê²Œ ë§Žì€ íŽ¸ì˜ì„±ì„ ì œê³µí•˜ì§€ë§Œ, ì´ëŸ¬í•œ ì¶”ìƒí™” ê³„ì¸µì€ ë‚´ë¶€ì ìœ¼ë¡œ ë³µìž¡í•œ ë¡œì§ì„ ìˆ˜í–‰í•˜ë©° ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œë¡œ ìž‘ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ ë”í‹° ì²´í‚¹ ì˜¤ë²„í—¤ë“œJPAëŠ” ì •êµí•œ ORM í”„ë ˆìž„ì›Œí¬ë¡œì„œ ì—”í‹°í‹°ì˜ ìƒíƒœ ë³€í™”ë¥¼ ê°ì§€í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ ë”í‹° ì²´í‚¹(Dirty Checking) ë©”ì»¤ë‹ˆì¦˜ì„ í™œìš©í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•©ë‹ˆë‹¤:  ì—”í‹°í‹° ìƒíƒœ ì¶”ì : ëª¨ë“  ì—”í‹°í‹°ì˜ ì›ë³¸ ìƒíƒœë¥¼ ë©”ëª¨ë¦¬ì— ìœ ì§€í•˜ê³  ë³€ê²½ì‚¬í•­ì„ ê°ì§€  ìŠ¤ëƒ…ìƒ· ë¹„êµ: íŠ¸ëžœìž­ì…˜ ì»¤ë°‹ ì‹œì ì— ì›ë³¸ ìŠ¤ëƒ…ìƒ·ê³¼ í˜„ìž¬ ìƒíƒœë¥¼ ë¹„êµí•˜ëŠ” ì—°ì‚° ìˆ˜í–‰  ìºì‹œ ê´€ë¦¬: 1ì°¨ ìºì‹œì™€ 2ì°¨ ìºì‹œì˜ ë™ê¸°í™” ë° ê´€ë¦¬ ë¹„ìš©ë°°ì¹˜ ì²˜ë¦¬ì—ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ì˜ ì½ê¸°ì™€ ì“°ê¸° ë‹¨ê³„ê°€ ëª…í™•ížˆ êµ¬ë¶„ë˜ì–´ ìžˆì–´, ì´ëŸ¬í•œ ì •êµí•œ ìƒíƒœ ê´€ë¦¬ ë©”ì»¤ë‹ˆì¦˜ì´ ë¶ˆí•„ìš”í•œ ì˜¤ë²„í—¤ë“œë¡œ ìž‘ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ë¶ˆí•„ìš”í•œ ì»¬ëŸ¼ ì—…ë°ì´íŠ¸ ë¬¸ì œJPAëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë³€ê²½ ê°ì§€ ì‹œ ì—”í‹°í‹°ì˜ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•œ UPDATE ì¿¼ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œë¥¼ ì•¼ê¸°í•©ë‹ˆë‹¤:  ë¹„íš¨ìœ¨ì ì¸ SQL ìƒì„±: ì‹¤ì œë¡œ ë³€ê²½ëœ í•„ë“œë§Œ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•œ SQL ìƒì„±  ë°ì´í„°ë² ì´ìŠ¤ ë¶€í•˜ ì¦ê°€: ë¶ˆí•„ìš”í•œ ì»¬ëŸ¼ê¹Œì§€ ì—…ë°ì´íŠ¸í•¨ìœ¼ë¡œì¨ ë°ì´í„°ë² ì´ìŠ¤ ë¦¬ì†ŒìŠ¤ ë‚­ë¹„  ìµœì í™” ì œí•œ: íŠ¹ì • ì»¬ëŸ¼ë§Œ ì„ íƒì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ëŠ” ìµœì í™” ì „ëžµ ì ìš© ì–´ë ¤ì›€ì´ëŸ¬í•œ JPAì˜ íŠ¹ì„±ì€ ëŒ€ê·œëª¨ ë°°ì¹˜ ì²˜ë¦¬ í™˜ê²½ì—ì„œ ì‹¬ê°í•œ ì„±ëŠ¥ ë³‘ëª© í˜„ìƒì„ ì´ˆëž˜í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì•„ëž˜ëŠ” ìŠ¤í”„ë§ ë°°ì¹˜ì—ì„œ JPA ê¸°ë°˜ì˜ ItemWriterë¥¼ ì‚¬ìš©í•˜ëŠ” ì¼ë°˜ì ì¸ ì½”ë“œìž…ë‹ˆë‹¤:@Beanpublic JpaItemWriter&lt;DailySettlement&gt; aggregateDailySettlementWriter() {    JpaItemWriter&lt;DailySettlement&gt; writer = new JpaItemWriter&lt;&gt;();    writer.setEntityManagerFactory(entityManagerFactory);    return writer;}ì´ ì½”ë“œëŠ” ê°„ê²°í•˜ê³  ì§ê´€ì ì´ì§€ë§Œ, ë‚´ë¶€ì ìœ¼ë¡œëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬, ë³€ê²½ ê°ì§€, ê·¸ë¦¬ê³  ê° ì—”í‹°í‹°ë³„ ê°œë³„ ì—…ë°ì´íŠ¸ë¼ëŠ” ì˜¤ë²„í—¤ë“œë¥¼ ìˆ˜ë°˜í•©ë‹ˆë‹¤.JDBC ë°°ì¹˜ ì¸ì„œíŠ¸ë¥¼ í†µí•œ ì„±ëŠ¥ ìµœì í™”JDBC ë°°ì¹˜ ì¸ì„œíŠ¸ëŠ” ì—¬ëŸ¬ SQL ëª…ë ¹ì„ ê·¸ë£¹í™”í•˜ì—¬ ë‹¨ì¼ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì „ì†¡í•˜ëŠ” ê¸°ë²•ìž…ë‹ˆë‹¤. ì´ ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ì€ ì´ì ì„ ì œê³µí•©ë‹ˆë‹¤:  ë„¤íŠ¸ì›Œí¬ ì˜¤ë²„í—¤ë“œ ê°ì†Œ: ì—¬ëŸ¬ ì¿¼ë¦¬ë¥¼ í•˜ë‚˜ì˜ ìš”ì²­ìœ¼ë¡œ ë¬¶ì–´ ë„¤íŠ¸ì›Œí¬ ì™•ë³µ ì‹œê°„ ìµœì†Œí™”  ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”: ë°ì´í„°ë² ì´ìŠ¤ê°€ ì—¬ëŸ¬ ì—°ì‚°ì„ ì¼ê´„ ì²˜ë¦¬í•˜ì—¬ ë‚´ë¶€ ìµœì í™” ì ìš© ê°€ëŠ¥  ë¦¬ì†ŒìŠ¤ íš¨ìœ¨ì„±: ì»¤ë„¥ì…˜ ê´€ë¦¬ ë° íŠ¸ëžœìž­ì…˜ ì˜¤ë²„í—¤ë“œ ê°ì†Œë‹¤ìŒì€ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ ì¼ì¼ ì •ì‚° ì§‘ê³„ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸ í•˜ê¸° ìœ„í•´ JDBC ë°°ì¹˜ ì¸ì„œíŠ¸ë¥¼ í™œìš©í•œ ìµœì í™”ëœ ItemWriter êµ¬í˜„ ì˜ˆì‹œìž…ë‹ˆë‹¤:@Beanpublic ItemWriter&lt;SettlementAggregationResult&gt; optimizedAggregateDailySettlementJdbcWriter() {    return new ItemWriter&lt;SettlementAggregationResult&gt;() {        @Autowired        private JdbcTemplate jdbcTemplate;        @Override        public void write(Chunk&lt;? extends SettlementAggregationResult&gt; items) throws Exception {            if (items.isEmpty()) {                return;            }            log.info("Processing {} settlement aggregation results with JDBC batch update", items.size());            String updateSql = """                        UPDATE daily_settlement SET                            total_order_count = ?,                            total_claim_count = ?,                            total_quantity = ?,                            sales_amount = ?,                            tax_amount = ?,                            promotion_discount_amount = ?,                            coupon_discount_amount = ?,                            point_used_amount = ?,                            shipping_fee = ?,                            claim_shipping_fee = ?,                            commission_amount = ?,                            total_settlement_amount = ?,                            updated_at = ?                        WHERE settlement_id = ?                    """;            jdbcTemplate.batchUpdate(updateSql, new BatchPreparedStatementSetter() {                @Override                public void setValues(PreparedStatement ps, int i) throws SQLException {                    SettlementAggregationResult result = items.getItems().get(i);                    LocalDateTime now = LocalDateTime.now();                    int idx = 1;                    // SET clause parameters                    ps.setInt(idx++, result.getTotalOrderCount());                    ps.setInt(idx++, result.getTotalClaimCount());                    ps.setInt(idx++, result.getTotalQuantity());                    ps.setBigDecimal(idx++, result.getTotalSalesAmount());                    ps.setBigDecimal(idx++, result.getTotalTaxAmount());                    ps.setBigDecimal(idx++, result.getTotalPromotionDiscountAmount());                    ps.setBigDecimal(idx++, result.getTotalCouponDiscountAmount());                    ps.setBigDecimal(idx++, result.getTotalPointUsedAmount());                    ps.setBigDecimal(idx++, result.getTotalShippingFee());                    ps.setBigDecimal(idx++, result.getTotalClaimShippingFee());                    ps.setBigDecimal(idx++, result.getTotalCommissionAmount());                    ps.setBigDecimal(idx++, result.getTotalSettlementAmount());                    ps.setTimestamp(idx++, Timestamp.valueOf(now));                    // WHERE clause parameter                    ps.setLong(idx++, result.getSettlementId());                }                @Override                public int getBatchSize() {                    return items.size();                }            });            log.info("Successfully updated {} daily settlements with batch update", items.size());        }    };}ì´ êµ¬í˜„ì—ì„œëŠ” JPAì˜ ë¶ˆí•„ìš”í•œ ì˜¤ë²„í—¤ë“œë¥¼ ì œê±°í•˜ê³ , ì£¼ì–´ì§„ ì²­í¬ ë‚´ì˜ ëª¨ë“  í•­ëª©ì„ ë‹¨ì¼ ë°°ì¹˜ ì—°ì‚°ìœ¼ë¡œ ì²˜ë¦¬í•¨ìœ¼ë¡œì¨ ë„¤íŠ¸ì›Œí¬ ì™•ë³µ ì‹œê°„ì„ í¬ê²Œ ê°ì†Œì‹œí‚µë‹ˆë‹¤.JPA ID ìƒì„± ì „ëžµê³¼ ë°°ì¹˜ ì¸ì„œíŠ¸ ì œì•½JPAì—ì„œë„ hibernate.jdbc.batch_size ì†ì„±ì„ í†µí•´ ë°°ì¹˜ ì¸ì„œíŠ¸ë¥¼ ì§€ì›í•˜ì§€ë§Œ, ID ìƒì„± ì „ëžµì— ë”°ë¼ ì¤‘ìš”í•œ ì œì•½ì´ ì¡´ìž¬í•©ë‹ˆë‹¤:  IDENTITY ì „ëžµ ì œì•½:          IDENTITY ì „ëžµì„ ì‚¬ìš©í•  ê²½ìš° HibernateëŠ” ë°°ì¹˜ ì¸ì„œíŠ¸ë¥¼ ë¹„í™œì„±í™”í•©ë‹ˆë‹¤.      ì´ëŠ” ë°ì´í„°ë² ì´ìŠ¤ê°€ ìžë™ ì¦ê°€ ID ê°’ì„ ìƒì„±í•˜ê³ , HibernateëŠ” ì´ ê°’ì„ ì¦‰ì‹œ ì¡°íšŒí•´ì•¼ í•˜ê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤.        SEQUENCE ì „ëžµ í™œìš©:          SEQUENCE ì „ëžµì„ ì‚¬ìš©í•˜ë©´ Hibernateê°€ ì‚¬ì „ì— ID ê°’ì„ í• ë‹¹í•˜ì—¬ ë°°ì¹˜ ì¸ì„œíŠ¸ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.      SEQUENCE ì „ëžµì€ Hibernateê°€ ë¯¸ë¦¬ ì—¬ëŸ¬ ê°œì˜ ID ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìžˆìŠµë‹ˆë‹¤(allocationSize í™œìš©).      ì¦‰, HibernateëŠ” ID ê°’ì„ ë¯¸ë¦¬ í• ë‹¹í•œ í›„, ì—¬ëŸ¬ ê°œì˜ INSERT ë¬¸ì„ í•œ ë²ˆì˜ JDBC batchë¡œ ì‹¤í–‰í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.        TABLE ì „ëžµ ì˜¤ë²„í—¤ë“œ:          TABLE ì „ëžµì€ ë³„ë„ì˜ í…Œì´ë¸”ì„ ì‚¬ìš©í•˜ì—¬ IDë¥¼ ìƒì„±í•˜ëŠ” ë°©ì‹ì´ë©°, ë°°ì¹˜ ì¸ì„œíŠ¸ ìžì²´ëŠ” ê°€ëŠ¥í•˜ì§€ë§Œ ì‹œí€€ìŠ¤ í…Œì´ë¸”ì— ëŒ€í•œ ë™ì‹œ ì ‘ê·¼ìœ¼ë¡œ ì¸í•´ ìž ê¸ˆ ê²½í•©(lock contention)ì´ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.      ë”°ë¼ì„œ ëŒ€ëŸ‰ ì‚½ìž… ìž‘ì—… ì‹œ ì„±ëŠ¥ ì €í•˜ê°€ ë°œìƒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.      ì‹¤ë¬´ í™˜ê²½ì—ì„œëŠ” ì¢…ì¢… ë°ì´í„°ë² ì´ìŠ¤ì˜ ìžë™ ì¦ê°€ ê¸°ëŠ¥ì— ì˜ì¡´í•˜ëŠ” IDENTITY ì „ëžµì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, JPAì˜ ë°°ì¹˜ ì¸ì„œíŠ¸ ê¸°ëŠ¥ì„ í™œìš©í•˜ê¸°ì— í˜„ì‹¤ì ìœ¼ë¡œ ì–´ë ¤ìš´ ê²½ìš°ê°€ ë§ŽìŠµë‹ˆë‹¤. ì´ëŸ° ìƒí™©ì—ì„œëŠ” ìˆœìˆ˜ JDBCë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ë°°ì¹˜ ì¸ì„œíŠ¸ê°€ íš¨ê³¼ì ì¸ ëŒ€ì•ˆì´ ë  ê²ƒìž…ë‹ˆë‹¤.ì¶”ê°€ ê°œì„  ë°©ì•ˆJDBC ë°©ì‹ì„ í™œìš©í•˜ë©´ì„œ ë°œìƒí•  ìˆ˜ ìžˆëŠ” SQLë¬¸ì˜ íƒ€ìž… ì•ˆì „ì„± ë¶€ìž¬ì™€ ìœ ì§€ë³´ìˆ˜ì„± ì €í•˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ê°œì„  ë°©ì•ˆì„ ê³ ë ¤í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤:QueryDSL ë„ìž…QueryDSLì„ í™œìš©í•˜ë©´ íƒ€ìž… ì•ˆì „í•œ ë°©ì‹ìœ¼ë¡œ SQL ì¿¼ë¦¬ë¥¼ ìž‘ì„±í•˜ë©´ì„œë„ ë°°ì¹˜ ì¸ì„œíŠ¸ì˜ ì„±ëŠ¥ ì´ì ì„ ìœ ì§€í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì•„ëž˜ ì½”ë“œëŠ” QueryDSLì„ ì ìš©í•œ ì˜ˆì‹œ ì½”ë“œìž…ë‹ˆë‹¤. ê¸°ì¡´ ë¬¸ìžì—´ë¡œ SQLë¥¼ ë‹¤ë£° ë•Œë³´ë‹¤ ê¹”ë”í•˜ê³ , ì»´íŒŒì¼ ì‹œì ì— ì˜¤ë¥˜ë¥¼ ìž¡ì•„ë‚¼ ìˆ˜ ìžˆì–´ì„œ ì•ˆì •ì ìž…ë‹ˆë‹¤:@Beanpublic ItemWriter&lt;SettlementAggregationResult&gt; querydslBatchWriter() {    return new ItemWriter&lt;SettlementAggregationResult&gt;() {        @Autowired        private SQLQueryFactory queryFactory;                @Override        public void write(Chunk&lt;? extends SettlementAggregationResult&gt; items) {            // QueryDSLì„ ì‚¬ìš©í•œ ë°°ì¹˜ ì—…ë°ì´íŠ¸ êµ¬í˜„            List&lt;SQLInsertBatch&gt; batch = items.getItems().stream()                .map(this::createBatchUpdate)                .collect(Collectors.toList());                            queryFactory.batch(batch.toArray(new SQLInsertBatch[0])).execute();        }                private SQLInsertBatch createBatchUpdate(SettlementAggregationResult result) {            // íƒ€ìž… ì•ˆì „í•œ ì—…ë°ì´íŠ¸ êµ¬ë¬¸ ìž‘ì„±            QDailySettlement settlement = QDailySettlement.dailySettlement;            return queryFactory.update(settlement)                .set(settlement.totalOrderCount, result.getTotalOrderCount())                // ê¸°íƒ€ í•„ë“œ ì„¤ì •                .where(settlement.settlementId.eq(result.getSettlementId()));        }    };}ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë° ìµœì í™” - ì•žìœ¼ë¡œì˜ ê³„íší˜„ìž¬ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œëŠ” ê¸°ë³¸ì ì¸ ë°°ì¹˜ ì¸ì„œíŠ¸ êµ¬í˜„ì— ì§‘ì¤‘í•˜ê³  ìžˆì§€ë§Œ, í–¥í›„ ì„±ëŠ¥ì„ ë”ìš± ê°œì„ í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ì¶”ê°€ ì „ëžµì„ ì ìš©í•  ê³„íšìž…ë‹ˆë‹¤:  ì²­í¬ í¬ê¸° ìµœì í™”: ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ê³¼ ì²˜ë¦¬ ì†ë„ì˜ ê· í˜•ì„ ê³ ë ¤í•œ ìµœì ì˜ ì²­í¬ í¬ê¸°ë¥¼ ì°¾ëŠ” ì‹¤í—˜ì„ ì§„í–‰í•  ì˜ˆì •ìž…ë‹ˆë‹¤. í˜„ìž¬ëŠ” ê³ ì •ê°’(size: 1000)ì„ ì‚¬ìš© ì¤‘ì´ì§€ë§Œ, ì‹¤ì œ ë°ì´í„° íŠ¹ì„±ì— ë§žëŠ” ìµœì í™”ê°€ í•„ìš”í•©ë‹ˆë‹¤.  ì‹¤í–‰ ê³„íš ë¶„ì„: ë°°ì¹˜ ì²˜ë¦¬ ì‹œ ìƒì„±ë˜ëŠ” SQLì˜ ì‹¤í–‰ ê³„íšì„ ë¶„ì„í•˜ì—¬ ì¸ë±ìŠ¤ í™œìš©ì„ ìµœì í™”í•˜ëŠ” ìž‘ì—…ë„ ì§„í–‰í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. í˜„ìž¬ëŠ” ê¸°ë³¸ ì¸ë±ìŠ¤ë§Œ í™œìš© ì¤‘ì´ì§€ë§Œ, ì‹¤í–‰ íŒ¨í„´ì— ë”°ë¥¸, ì¢€ ë” ì„¸ë°€í•œ ì¸ë±ìŠ¤ ì „ëžµì´ í•„ìš”í•´ ë³´ìž…ë‹ˆë‹¤.      Rewrite ë°°ì¹˜ ì „ëžµ: ëŒ€ëŸ‰ ë°ì´í„° ê°±ì‹  ì‹œ ìž„ì‹œ í…Œì´ë¸”ì„ í™œìš©í•œ Rewrite ì „ëžµë„ ê²€í†  ì¤‘ìž…ë‹ˆë‹¤. ì´ ì „ëžµì€ ë‹¤ìŒê³¼ ê°™ì€ ì´ìœ ë¡œ íŠ¹ížˆ ëŒ€ê·œëª¨ ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•œ ì›”ë³„ ì •ì‚° ì²˜ë¦¬ì—ì„œ íš¨ê³¼ì ì¼ ê²ƒìœ¼ë¡œ ì˜ˆìƒë©ë‹ˆë‹¤:          í…Œì´ë¸” ìž ê¸ˆ ìµœì†Œí™”: ê°œë³„ UPDATE ë¬¸ì€ í•´ë‹¹ ë ˆì½”ë“œì— ëŒ€í•œ ìž ê¸ˆì„ ë°œìƒì‹œì¼œ ë™ì‹œì„±ì„ ì €í•˜ì‹œí‚¬ ìˆ˜ ìžˆì§€ë§Œ, ìž„ì‹œ í…Œì´ë¸”ì— ë°ì´í„°ë¥¼ ë¨¼ì € ì¤€ë¹„í•œ í›„ í•œ ë²ˆì— êµì²´í•˜ë©´ ìž ê¸ˆ ì‹œê°„ì„ ìµœì†Œí™”í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.      íŠ¸ëžœìž­ì…˜ ë¡œê·¸ ê°ì†Œ: ìˆ˜ë§Žì€ ê°œë³„ UPDATE ë¬¸ì€ ëŒ€ëŸ‰ì˜ íŠ¸ëžœìž­ì…˜ ë¡œê·¸ë¥¼ ìƒì„±í•˜ì§€ë§Œ, INSERT-SELECT ë˜ëŠ” MERGE íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ë¡œê·¸ëŸ‰ì„ í¬ê²Œ ì¤„ì¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.      ì¸ë±ìŠ¤ ë¶€í•˜ ê°ì†Œ: ë°˜ë³µì ì¸ UPDATEëŠ” ì¸ë±ìŠ¤ ìž¬êµ¬ì„± ë¶€í•˜ë¥¼ ì§€ì†ì ìœ¼ë¡œ ë°œìƒì‹œí‚¤ì§€ë§Œ, ìž„ì‹œ í…Œì´ë¸” ë°©ì‹ì€ ì¸ë±ìŠ¤ ìœ ì§€ ë¹„ìš©ì„ ì¼ê´„ ì²˜ë¦¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.      I/O íŒ¨í„´ ìµœì í™”: ìˆœì°¨ì  I/OëŠ” ëžœë¤ I/Oë³´ë‹¤ í›¨ì”¬ íš¨ìœ¨ì ì¸ë°, ìž„ì‹œ í…Œì´ë¸”ì„ ìƒì„±í•˜ê³  ëŒ€ëŸ‰ ë°ì´í„°ë¥¼ ì‚½ìž…í•˜ëŠ” ê²½ìš°ëŠ” ì£¼ë¡œ ìˆœì°¨ì  I/O íŒ¨í„´ì„ ë”°ë¥´ê²Œ ë©ë‹ˆë‹¤.      ì´ëŸ¬í•œ ê³ ê¸‰ ìµœì í™” ì „ëžµë“¤ì€ í˜„ìž¬ ê¸°ë³¸ êµ¬í˜„ì„ ì™„ë£Œí•œ í›„ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ì ì§„ì ìœ¼ë¡œ ë„ìž…í•  ì˜ˆì •ìž…ë‹ˆë‹¤. ì‹¤ì œ ì ìš© ê²°ê³¼ì™€ ì„±ëŠ¥ ê°œì„  ì§€í‘œëŠ” í›„ì† í¬ìŠ¤íŒ…ì—ì„œ ê³µìœ í•˜ê² ìŠµë‹ˆë‹¤.ê²°ë¡ Spring Batch í™˜ê²½ì—ì„œ ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ” ì‚¬ìš© ì‚¬ë¡€ì— ì í•©í•œ ê¸°ìˆ ì„ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. JPAëŠ” ê°œë°œ ìƒì‚°ì„±ê³¼ ê°ì²´ ì§€í–¥ì  ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ, ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œì—ëŠ” ì„±ëŠ¥ ì œì•½ì´ ì¡´ìž¬í•©ë‹ˆë‹¤. ë°˜ë©´ JDBC ë°°ì¹˜ ì¸ì„œíŠ¸ëŠ” ë¡œìš° ë ˆë²¨ ì ‘ê·¼ì„ í†µí•´ ìµœì ì˜ ì„±ëŠ¥ì„ ì œê³µí•˜ì§€ë§Œ íƒ€ìž… ì•ˆì „ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„± ì¸¡ë©´ì—ì„œ ì¶”ê°€ì ì¸ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.ì‹¤ë¬´ì—ì„œëŠ” ì´ëŸ¬í•œ íŠ¸ë ˆì´ë“œì˜¤í”„ë¥¼ ì¶©ë¶„ížˆ ì´í•´í•˜ê³ , ì²˜ë¦¬í•´ì•¼ í•  ë°ì´í„°ì˜ ë³¼ë¥¨ê³¼ ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ì ì ˆí•œ ì „ëžµì„ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤. íŠ¹ížˆ ëŒ€ê·œëª¨ ë°ì´í„° ì²˜ë¦¬ê°€ í•„ìš”í•œ ë°°ì¹˜ ìž‘ì—…ì—ì„œëŠ” JDBC ë°°ì¹˜ ì¸ì„œíŠ¸ì™€ ê°™ì€ ìµœì í™” ê¸°ë²•ì„ ì ê·¹ì ìœ¼ë¡œ í™œìš©í•˜ë˜, QueryDSLê³¼ ê°™ì€ ë„êµ¬ë¥¼ í•¨ê»˜ ë„ìž…í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„±ë„ í•¨ê»˜ í™•ë³´í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.ë§ˆë¬´ë¦¬ë³¸ í¬ìŠ¤íŠ¸ê°€ Spring Batch í™˜ê²½ì—ì„œ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ ë°œìƒí•  ìˆ˜ ìžˆëŠ” ì„±ëŠ¥ ë³‘ëª© í˜„ìƒì„ ì´í•´í•˜ê³ , ì‹¤ì§ˆì ì¸ ìµœì í™” ì „ëžµì„ ìˆ˜ë¦½í•˜ëŠ” ë° ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. í•´ë‹¹ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ê¸°ìˆ ì  íŽ¸ì˜ì„±ê³¼ ì„±ëŠ¥ ì‚¬ì´ì˜ ê· í˜•ì„ ì°¾ëŠ” ê³¼ì •ì´ ì—”ì§€ë‹ˆì–´ë§ì˜ í•µì‹¬ì´ë¼ëŠ” ê²ƒì„ ë‹¤ì‹œ í•œ ë²ˆ ëŠë‚„ ìˆ˜ ìžˆì—ˆìŠµë‹ˆë‹¤. ì•žìœ¼ë¡œë„ ì‹¤ë¬´ì—ì„œ ì–»ì€ ê²½í—˜ê³¼ í•™ìŠµì„ í†µí•´ ë” ë‚˜ì€ ê¸°ìˆ ì  í•´ê²°ì±…ì„ ëª¨ìƒ‰í•˜ê³  ê³µìœ í•˜ê² ìŠµë‹ˆë‹¤.ê°ì‚¬í•©ë‹ˆë‹¤.ì°¸ê³  ìžë£Œ  Hibernate - Enabling statement batching  Batch Insert/Update with Hibernate/JPA  Basic Batch Operations with JdbcTemplate  Optimizing for Random I/O and Sequential I/O]]></content>
      <categories>
        
          <category> Spring Batch </category>
        
      </categories>
      <tags>
        
          <tag> Spring Batch </tag>
        
          <tag> JPA </tag>
        
          <tag> JDBC </tag>
        
          <tag> Batch Insert </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Spring Batch ëŒ€ìš©ëŸ‰ ì²˜ë¦¬ì˜ ì´í•´]]></title>
      <url>/spring%20batch/2025/03/22/Spring-Batch-high-volume-processing/</url>
      <content type="text"><![CDATA[  ìŠ¤í”„ë§ ë°°ì¹˜ë¥¼ í†µí•œ ëŒ€ìš©ëŸ‰ ì²˜ë¦¬ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤!ðŸš€ ë“¤ì–´ê°€ê¸°ë³¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ë°°ì¹˜ ì²˜ë¦¬ì˜ ê°œë…ê³¼ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ, ì¼ê´„ ìƒì„±, ì¼ê´„ ìˆ˜ì •, í†µê³„ ì²˜ë¦¬ì— ëŒ€í•´ ì•Œì•„ë³´ê³  ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ ë°œìƒí•˜ëŠ” ì¼ë°˜ì ì¸ ë¬¸ì œì ê¹Œì§€ ì‚´íŽ´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ë°°ì¹˜ ì²˜ë¦¬ì˜ ê°œë…ê³¼ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ë°°ì¹˜(batch) ì²˜ë¦¬ëŠ” íŠ¹ì • ì‹œê°„ì— ë§Žì€ ë°ì´í„°ë¥¼ ì¼ê´„ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, e-ì»¤ë¨¸ìŠ¤ í”Œëž«í¼ì—ì„œ ì˜¤í›„ 4ì‹œì— ìƒí’ˆ ë°°ì†¡ ì •ë³´ë¥¼ ê³ ê°ë“¤ì—ê²Œ ë¬¸ìžë¡œ ì¼ê´„ ì „ì†¡í•˜ëŠ” ê²½ìš°ê°€ ì´ì— í•´ë‹¹í•©ë‹ˆë‹¤. ì„œë²„ ê°œë°œìžë“¤ì€ íŠ¹ì • ì‹œê°„ì— ì¼ê´„ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ìž‘ì—…ì´ í•„ìš”í•  ë•Œ ì´ë¥¼ ë°°ì¹˜ í”„ë¡œì„¸ìŠ¤ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ìž…ë‹ˆë‹¤.ì¼ê´„ ìƒì„±, ì¼ê´„ ìˆ˜ì •, í†µê³„ ì²˜ë¦¬ ê°œë…ë°°ì¹˜ ì²˜ë¦¬ëŠ” í¬ê²Œ ì„¸ ê°€ì§€ í˜•íƒœë¡œ êµ¬ë¶„í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.1. ì¼ê´„ ìƒì„±(Read-Create-Write)ê¸°ì¡´ ì €ìž¥ëœ ì •ë³´ë¥¼ ì¡°í•©í•´ ìƒˆë¡œìš´ ì •ë³´ë¥¼ ë§Œë“­ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì£¼ë¬¸ ì •ë³´ë¥¼ ì½ì–´ ì‚¬ìš©ìž ì •ë³´ì™€ í•©ì¹œ í›„ ë¬¸ìž ì •ë³´ë¥¼ ìƒì„±í•˜ëŠ” ê²½ìš°ê°€ ì´ì— í•´ë‹¹í•©ë‹ˆë‹¤.2. ì¼ê´„ ìˆ˜ì •(Read-Update-Write)A ë°ì´í„°ë¥¼ ì½ê³  B ë°ì´í„°ë¥¼ ì°¸ê³ í•˜ì—¬ A ë°ì´í„°ë¥¼ ìˆ˜ì • í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì£¼ë¬¸ ì •ë³´ë¥¼ ì½ê³  ë°°ì†¡ ì •ë³´ë¥¼ ì°¸ê³ í•´ ì£¼ë¬¸ ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.3. í†µê³„ ì²˜ë¦¬(Read-Sum-Write)ë°ì´í„°ë¥¼ ì§‘ê³„í•˜ì—¬ í†µê³„ í˜•ì‹ì˜ ë°ì´í„°ë¥¼ ë§Œë“­ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì£¼ë¬¸ ì •ë³´ë¥¼ GROUP BY í˜•íƒœë¡œ ì§ˆì˜í•´ì˜¨ ë‹¤ìŒ ìƒí’ˆë³„ ì£¼ë¬¸ ê¸ˆì•¡ í•©ì‚° ë°ì´í„°ë¥¼ ë§Œë“¤ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ ì†Œê°œìŠ¤í”„ë§ ë°°ì¹˜ì˜ ì„±ëŠ¥ì„ ìµœì í™”í•˜ëŠ” ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” e-ì»¤ë¨¸ìŠ¤ í”Œëž«í¼ì—ì„œ ìƒí’ˆì„ ë“±ë¡í•œ íŒë§¤ìžì—ê²Œ ì¼ì¼ ì •ì‚°ì„ ì œê³µí•˜ê¸° ìœ„í•´, í•˜ë£¨ ë™ì•ˆ ë°œìƒí•œ êµ¬ë§¤ í™•ì • ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§¤ì¼ íŠ¹ì • ì‹œê°ì— íŒë§¤ìžë³„ ì¼ì¼ ì •ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ë°°ì¹˜ í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.ë‹¤ìŒ ì´ë¯¸ì§€ëŠ” ì¼ì¼ ì •ì‚° ë°°ì¹˜ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê° ë‹¨ê³„ë³„ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚¸ ë‹¤ì´ì–´ê·¸ëž¨ìž…ë‹ˆë‹¤.  ì£¼ë¬¸-ìƒí’ˆ êµ¬ë§¤ í™•ì • ì²˜ë¦¬: íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚¤ëŠ” ì£¼ë¬¸-ìƒí’ˆ ê±´ì— ëŒ€í•˜ì—¬ êµ¬ë§¤ í™•ì • ìƒíƒœë¡œ ì¼ê´„ ìˆ˜ì • í•©ë‹ˆë‹¤.  í´ë ˆìž„ ì²˜ë¦¬ ì™„ë£Œ: í´ë ˆìž„(ì·¨ì†Œ/í™˜ë¶ˆ/ë°˜í’ˆ)ì´ ëë‚œ ê±´ì— ëŒ€í•˜ì—¬ í´ë ˆìž„ ì™„ë£Œ ì²˜ë¦¬ ìƒíƒœë¡œ ì¼ê´„ ìˆ˜ì • í•©ë‹ˆë‹¤.  íŒë§¤ìžë³„ ì¼ì¼ ì •ì‚° ìƒì„±: ê¸ˆì¼ íŒë§¤ê±´ì´ ì¡´ìž¬í•˜ëŠ” íŒë§¤ìžì— ëŒ€í•˜ì—¬ ì¼ì¼ ì •ì‚°ì„ ì¼ê´„ ìƒì„± í•©ë‹ˆë‹¤.  ì£¼ë¬¸-ìƒí’ˆ ì •ì‚° Detail ìƒì„±: êµ¬ë§¤ í™•ì • ìƒíƒœì˜ ì£¼ë¬¸-ìƒí’ˆ ê±´ì— ëŒ€í•˜ì—¬ (+) ì •ì‚° ì²˜ë¦¬í•œ ë°ì´í„°ë¥¼ ì¼ê´„ ìƒì„±í•©ë‹ˆë‹¤.  í´ë ˆìž„-í™˜ë¶ˆ ì •ì‚° Detail ìƒì„±: í´ë ˆìž„ ì²˜ë¦¬ ì™„ë£Œ ê±´ ì¤‘ í™˜ë¶ˆê±´ì— ëŒ€í•˜ì—¬ (-) ì •ì‚° ì²˜ë¦¬í•œ ë°ì´í„°ë¥¼ ì¼ê´„ ìƒì„±í•©ë‹ˆë‹¤.  íŒë§¤ìžë³„ ì •ì‚° Detail ì§‘ê³„: íŒë§¤ìžë³„ë¡œ (+)ì •ì‚°ê³¼ (-)ì •ì‚°ì„ ì§‘ê³„í•˜ì—¬ í†µê³„ ë°ì´í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.  íŒë§¤ìžë³„ ì¼ì¼ ì •ì‚° ì—…ë°ì´íŠ¸: ì´ì „ ë‹¨ê³„ì—ì„œ ìƒì„±í•´ë‘ì—ˆë˜ ì¼ì¼ ì •ì‚°ì— ì§‘ê³„ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ ë°œìƒí•˜ëŠ” ì¼ë°˜ì ì¸ ë¬¸ì œì ê°œë°œìžë“¤ì€ ì¢…ì¢… ë°°ì¹˜ ì„±ëŠ¥ì— ìƒëŒ€ì ìœ¼ë¡œ ë¬´ê´€ì‹¬í•œ ê²½í–¥ì´ ìžˆìŠµë‹ˆë‹¤. ì´ëŠ” ë°°ì¹˜ ìž‘ì—…ì´ ì£¼ë¡œ íŠ¸ëž˜í”½ì´ ì ì€ ì‹œê°„ëŒ€ì¸ ìƒˆë²½ì— ìžë™ìœ¼ë¡œ ìŠ¤ì¼€ì¤„ë§ë˜ì–´ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì—, ë°°ì¹˜ ì²˜ë¦¬ ì‹œê°„ì´ ì˜¤ëž˜ ê±¸ë¦¬ë”ë¼ë„ í° ë¬¸ì œë¡œ ì¸ì‹ë˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ë§Žê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤. ë˜í•œ ë°°ì¹˜ë¥¼ ê°œë°œí•œ ë’¤ ë°°í¬ í›„ ì´ˆê¸°ì—ë§Œ ë¡œê·¸ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ë‹¤ê°€, ë¬¸ì œê°€ ì—†ë‹¤ê³  í™•ì¸ëœ í›„ì—ëŠ” ì‹¤ì œ ë¬¸ì œê°€ ë°œìƒí•˜ê¸° ì „ê¹Œì§€ ìž˜ ì‚´íŽ´ë³´ì§€ ì•ŠëŠ” ê´€ë¦¬ ì†Œí™€ë¡œ ì´ì–´ì§€ê¸°ë„ í•©ë‹ˆë‹¤. íŠ¹ížˆ ë°°ì¹˜ ëª¨ë‹ˆí„°ë§ í™˜ê²½ì´ ì œëŒ€ë¡œ êµ¬ì¶•ë˜ì–´ ìžˆì§€ ì•Šë‹¤ë©´, ë¬¸ì œë¥¼ íŒŒì•…í•˜ê³  í•´ê²°í•˜ëŠ” ë° ìƒë‹¹í•œ ì‹œê°„ì´ ì†Œìš”ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ í”ížˆ ë°œìƒí•˜ëŠ” ë¬¸ì œì ë“¤ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:  ì²˜ë¦¬ ì‹œê°„ì´ ì˜ˆìƒë³´ë‹¤ í¬ê²Œ ê¸¸ì–´ì§€ëŠ” í˜„ìƒ  ë©”ëª¨ë¦¬ ë¶€ì¡±(OOM, Out Of Memory) ì˜¤ë¥˜ ë°œìƒ  ë°ì´í„°ë² ì´ìŠ¤ ë¶€í•˜ ì¦ê°€ ë° ì„±ëŠ¥ ì €í•˜  ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” ë°°ì¹˜ ìž‘ì—… ê°„ ìžì› ê²½ìŸìœ¼ë¡œ ì¸í•œ ì„±ëŠ¥ ì €í•˜  ë°°ì¹˜ ì²˜ë¦¬ ì´ë ¥ ê´€ë¦¬ ë° ëª¨ë‹ˆí„°ë§ì˜ ì–´ë ¤ì›€ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ìœ„ ë¬¸ì œë“¤ì„ ì–´ë–»ê²Œ ê°œì„ í•´ë‚˜ê°”ëŠ”ì§€ ë‹¤ìŒ í¬ìŠ¤íŠ¸ë“¤ì—ì„œ í•˜ë‚˜ì”© ìžì„¸ížˆ ì‚´íŽ´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ê°ì‚¬í•©ë‹ˆë‹¤.]]></content>
      <categories>
        
          <category> Spring Batch </category>
        
      </categories>
      <tags>
        
          <tag> Spring Batch </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Spring Batch íš¨ê³¼ì ì¸ ëŒ€ëŸ‰ ë°ì´í„° ë¦¬ë“œ(Read) ì „ëžµ]]></title>
      <url>/spring%20batch/2025/03/22/Spring-Batch-Optimized-read-strategy/</url>
      <content type="text"><![CDATA[  ìŠ¤í”„ë§ ë°°ì¹˜ë¥¼ ì´ìš©í•  ë•Œ íš¨ê³¼ì ì¸ ëŒ€ëŸ‰ ë°ì´í„°ë¥¼ ì½ê¸° ìœ„í•œ ì „ëžµì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤!ðŸš€ ë“¤ì–´ê°€ê¸°ë³¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ìŠ¤í”„ë§ ë°°ì¹˜ì˜ í•µì‹¬ ê°œë…ì¸ ì²­í¬ í”„ë¡œì„¸ì‹±(Chunk Processing)ì— ëŒ€í•´ ì•Œì•„ë³´ê³ , ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì½ê¸° ìœ„í•´ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ ì‹¤ì œ ì ìš©í•œ ì „ëžµê³¼ ê·¸ ì„±ëŠ¥ ê°œì„  ê²°ê³¼ë¥¼ ê³µìœ í•˜ê³ ìž í•©ë‹ˆë‹¤.ì²­í¬ í”„ë¡œì„¸ì‹± ê°œë…ê³¼ ì¤‘ìš”ì„±1,000ë§Œ ê°œì˜ ë°ì´í„°ë¥¼ ë°°ì¹˜ ì²˜ë¦¬í•œë‹¤ê³  ê°€ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ í•œ ë²ˆì— ë©”ëª¨ë¦¬ì— ë¡œë“œí•˜ëŠ” ê²ƒì€ ë¬¼ë¦¬ì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•˜ê±°ë‚˜ ì‹¬ê°í•œ ì„±ëŠ¥ ì €í•˜ë¥¼ ì´ˆëž˜í•©ë‹ˆë‹¤. ë”°ë¼ì„œ 1,000ê°œì”© ë‚˜ëˆ„ì–´ ì´ 10,000ë²ˆì— ê±¸ì³ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤.ì´ë ‡ê²Œ ë©”ëª¨ë¦¬ ì œì•½ì„ ê³ ë ¤í•˜ì—¬ ë°ì´í„°ë¥¼ ì¼ì • í¬ê¸°ë¡œ ë‚˜ëˆ„ì–´ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ ì²­í¬ í”„ë¡œì„¸ì‹±(Chunk Processing)ì´ë¼ê³  í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ ë°°ì¹˜ëŠ” ì´ëŸ¬í•œ ì²­í¬ ë‹¨ìœ„ ì²˜ë¦¬ë¥¼ ê¸°ë³¸ ì•„í‚¤í…ì²˜ë¡œ ì±„íƒí•˜ê³  ìžˆì–´ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ì— ìµœì í™”ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.ItemReaderìŠ¤í”„ë§ ë°°ì¹˜ì—ì„œ ì²­í¬ í”„ë¡œì„¸ì‹±ì„ êµ¬í˜„í•  ë•Œ, ë°ì´í„° ì½ê¸°(Read) ì—­í• ì€ ItemReader ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ êµ¬í˜„ì²´ê°€ ë‹´ë‹¹í•©ë‹ˆë‹¤. ì €ëŠ” ì´ˆê¸°ì— JPAì˜ ê°œë°œ íŽ¸ì˜ì„±ê³¼ íŽ˜ì´ì§• ê¸°ëŠ¥ì„ ë™ì‹œì— í™œìš©í•  ìˆ˜ ìžˆëŠ” JpaPagingItemReaderë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ê³¼ì •ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì‹¬ê°í•œ í•œê³„ì ì„ ê²½í—˜í–ˆìŠµë‹ˆë‹¤.JpaPagingItemReaderì˜ ì£¼ìš” ë¬¸ì œì :  ë°ì´í„° ì¼ê´€ì„± ë¬¸ì œ: ì¡°ê±´ì ˆì— ì‚¬ìš©í•˜ëŠ” ì»¬ëŸ¼ì´ ë°°ì¹˜ ìž‘ì—… ì¤‘ ì—…ë°ì´íŠ¸ë  ê²½ìš° íŽ˜ì´ì§€ë„¤ì´ì…˜ ë¶ˆì¼ì¹˜ ë°œìƒ  JPA ì˜¤ë²„í—¤ë“œ: ë¶ˆí•„ìš”í•œ JPA ê¸°ëŠ¥ìœ¼ë¡œ ì¸í•œ ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œ  Limit-Offset ë°©ì‹ì˜ êµ¬ì¡°ì  í•œê³„: ì˜¤í”„ì…‹ì´ ì¦ê°€í• ìˆ˜ë¡ ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ ì„±ëŠ¥ ì €í•˜íŽ˜ì´ì§€ë„¤ì´ì…˜ ì˜¤ë¥˜JpaPagingItemReaderë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ê°€ìž¥ ë¨¼ì € ì§ë©´í•œ ë¬¸ì œëŠ” íŽ˜ì´ì§€ë„¤ì´ì…˜ì´ ì •í™•í•˜ê²Œ ë™ìž‘í•˜ì§€ ì•ŠëŠ” í˜„ìƒì´ì—ˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì˜ˆìƒí–ˆë˜ 10ë§Œ ê±´ì˜ ì²˜ë¦¬ ëŒ€ìƒ ë°ì´í„° ì¤‘ ì•½ 2ë§Œ ê±´ë§Œ ì²˜ë¦¬ë˜ê³  ìž‘ì—…ì´ ì¢…ë£Œë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.ì´ ë¬¸ì œì˜ ê·¼ë³¸ ì›ì¸ì€ JpaPagingItemReaderì˜ ë‚´ë¶€ ë™ìž‘ ë°©ì‹ê³¼ OFFSET ê¸°ë°˜ íŽ˜ì´ì§•ì˜ í•œê³„ì— ìžˆì—ˆìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ ë°°ì¹˜ëŠ” ê° ì²­í¬ ë‹¨ìœ„ë¡œ ì½ê¸°(ItemReader) â†’ ì²˜ë¦¬(ItemProcessor) â†’ ì“°ê¸°(ItemWriter) ì‚¬ì´í´ì„ ë°˜ë³µí•©ë‹ˆë‹¤. JpaPagingItemReaderê°€ ë™ìž‘í•  ë•Œ ë°œìƒí•˜ëŠ” ì£¼ìš” ì´ìŠˆëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:  JpaPagingItemReaderëŠ” ìžì²´ì ìœ¼ë¡œ EntityManagerë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.  íŠ¸ëžœìž­ì…˜ ë‚´ì—ì„œ ì²˜ë¦¬ë  ë•Œ, ì½ì–´ì˜¨ ì—”í‹°í‹°ë“¤ì€ ì˜ì† ìƒíƒœë¡œ ìœ ì§€ë©ë‹ˆë‹¤.  Processorë‚˜ Writerì—ì„œ ì—”í‹°í‹°ë¥¼ ì—…ë°ì´íŠ¸í•˜ë©´, ì´ ë³€ê²½ì‚¬í•­ì€ ì—¬ì „ížˆ Readerì˜ EntityManagerì— ì˜í•´ ê´€ë¦¬ë©ë‹ˆë‹¤.  ë‹¤ìŒ ì²­í¬ë¥¼ ì½ê¸° ìœ„í•´ ItemReaderê°€ ì‹¤í–‰ë  ë•Œ, ë³€ê²½ëœ ë‚´ìš©ì´ ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜ë©ë‹ˆë‹¤.  LIMIT-OFFSET ë°©ì‹ì˜ íŽ˜ì´ì§•ì€ ë°ì´í„° ë³€ê²½ í›„ì—ë„ ì›ëž˜ ê°œìˆ˜ë§Œí¼ OFFSETì„ ì¦ê°€ì‹œí‚¤ë¯€ë¡œ ë°ì´í„° ëˆ„ë½ì´ ë°œìƒí•©ë‹ˆë‹¤.ì´ˆê¸° ìž‘ì„±í–ˆë˜ ë‹¤ìŒ ì½”ë“œëŠ” ì´ëŸ¬í•œ ë¬¸ì œ ìƒí™©ì„ ë³´ì—¬ì¤ë‹ˆë‹¤:@Override@NonNullpublic Query createQuery() {    return this.getEntityManager()            .createQuery(                      "SELECT op " +                            "FROM OrderProduct op " +                            "LEFT JOIN Claim cl ON op.orderProductId = cl.orderProductId " +                            "WHERE op.deliveryCompletedAt BETWEEN :startTime AND :endTime " +                            "AND op.deliveryStatus = 'DELIVERED' " +                            "AND op.purchaseConfirmedAt IS NULL " +                            "AND (cl.claimId IS NULL OR cl.completedAt IS NOT NULL) " +                            "ORDER BY op.orderProductId ASC", OrderProduct.class)            .setParameter("startTime", startTime)            .setParameter("endTime", endTime);}ìœ„ ì¿¼ë¦¬ì™€ í•¨ê»˜ ë°œìƒí•˜ëŠ” êµ¬ì²´ì ì¸ ë¬¸ì œ ì‹œë‚˜ë¦¬ì˜¤:  ì¡°ê±´ì ˆì— purchaseConfirmedAt IS NULL ì¡°ê±´ì´ í¬í•¨ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.  ì²­í¬ í¬ê¸°ë¥¼ 1,000ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ì²« ë²ˆì§¸ 1,000ê°œ ë ˆì½”ë“œ(ID 1~1000)ë¥¼ ì½ê³  ì²˜ë¦¬í•©ë‹ˆë‹¤.  ItemWriter ë‹¨ê³„ì—ì„œ ì²˜ë¦¬ëœ ë ˆì½”ë“œì˜ purchaseConfirmedAt í•„ë“œê°€ í˜„ìž¬ ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.  ë‘ ë²ˆì§¸ ì²­í¬ ìž‘ì—… ì‹œ, JpaPagingItemReaderëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‚´ë¶€ ì¿¼ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:SELECT op FROM OrderProduct opWHERE op.deliveryCompletedAt BETWEEN :startTime AND :endTimeAND op.deliveryStatus = 'DELIVERED'AND op.purchaseConfirmedAt IS NULLAND (cl.claimId IS NULL OR cl.completedAt IS NOT NULL)ORDER BY op.orderProductId ASCOFFSET 1000 LIMIT 1000  ê·¸ëŸ¬ë‚˜ ì´ ì‹œì ì—ì„œ ì²˜ìŒ 1,000ê°œ ë ˆì½”ë“œëŠ” ì´ë¯¸ purchaseConfirmedAt IS NULL ì¡°ê±´ì„ ë” ì´ìƒ ë§Œì¡±í•˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.  ë”°ë¼ì„œ ì›ëž˜ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ 1001~2000 IDë¥¼ ê°€ì§„ ë ˆì½”ë“œë“¤ì´ ì•„ë‹Œ, ìƒˆë¡­ê²Œ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì²˜ìŒ 1,000ê°œ ì¤‘ì—ì„œ OFFSET 1000ì„ ì ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.  ì´ë¡œ ì¸í•´ ì›ëž˜ ì²˜ë¦¬ë˜ì–´ì•¼ í•  ë°ì´í„° ì¤‘ ì¼ë¶€(OFFSETìœ¼ë¡œ ì¸í•´ ê±´ë„ˆë›°ëŠ” ë°ì´í„°)ê°€ ëˆ„ë½ë˜ëŠ” í˜„ìƒì´ ë°œìƒí•©ë‹ˆë‹¤.ì´ëŸ¬í•œ ë¬¸ì œì˜ ê·¼ë³¸ì ì¸ ì›ì¸ì€ JpaPagingItemReaderê°€ ë‚´ë¶€ì ìœ¼ë¡œ ì±„íƒí•˜ê³  ìžˆëŠ” LIMIT-OFFSET ë°©ì‹ì˜ íŽ˜ì´ì§•ê³¼ EntityManagerì˜ ì˜ì†ì„± ê´€ë¦¬ ë°©ì‹ì´ ì¡°í•©ë˜ì–´ ë°œìƒí•˜ëŠ” êµ¬ì¡°ì  í•œê³„ì— ìžˆìŠµë‹ˆë‹¤.ë”°ë¼ì„œ JpaPagingItemReaderì€ ì²˜ë¦¬ ê³¼ì •ì—ì„œ ì¡°ê±´ì ˆì˜ ì»¬ëŸ¼ì´ ë³€ê²½ë  ê²½ìš°, íŽ˜ì´ì§€ë„¤ì´ì…˜ ë¡œì§ì´ ì •ìƒì ìœ¼ë¡œ ë™ìž‘í•˜ì§€ ì•Šì•„ ë°ì´í„° ëˆ„ë½ì´ ë°œìƒí•©ë‹ˆë‹¤.Limit-Offset ë°©ì‹ì˜ í•œê³„JpaPagingItemReaderê°€ ì‚¬ìš©í•˜ëŠ” Limit-Offset íŽ˜ì´ì§€ë„¤ì´ì…˜ ë°©ì‹ì€ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ ì¹˜ëª…ì ì¸ ì„±ëŠ¥ ì €í•˜ë¥¼ ì´ˆëž˜í•©ë‹ˆë‹¤. ì´ ë°©ì‹ì˜ í•µì‹¬ì ì¸ ë¬¸ì œëŠ” ì˜¤í”„ì…‹ì´ ì»¤ì§ˆìˆ˜ë¡ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ìž‘ì—…ëŸ‰ì´ ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ ì¦ê°€í•œë‹¤ëŠ” ì ìž…ë‹ˆë‹¤.ì˜ˆë¥¼ ë“¤ì–´, LIMIT 1000 OFFSET 9000ê³¼ ê°™ì€ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•  ê²½ìš°:  ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì²˜ìŒë¶€í„° 9,000ë²ˆì§¸ ë ˆì½”ë“œê¹Œì§€ ëª¨ë‘ ìŠ¤ìº”í•©ë‹ˆë‹¤.  ê·¸ í›„ 9,001ë²ˆì§¸ë¶€í„° 10,000ë²ˆì§¸ê¹Œì§€ì˜ 1,000ê°œ ë ˆì½”ë“œë§Œ ì‹¤ì œë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.ì¦‰, ì˜¤í”„ì…‹ì´ ì»¤ì§ˆìˆ˜ë¡ ì‹¤ì œë¡œ í•„ìš”í•œ ë°ì´í„°ëŠ” ì¼ì •í•œë° ë°˜í•´, ìŠ¤ìº”í•´ì•¼ í•˜ëŠ” ë°ì´í„°ëŠ” ê³„ì† ì¦ê°€í•˜ê²Œ ë©ë‹ˆë‹¤. ìˆ˜ì²œë§Œ ê±´ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ë°°ì¹˜ ìž‘ì—…ì—ì„œ ì´ëŸ¬í•œ ë°©ì‹ì€ ì‹¬ê°í•œ ì„±ëŠ¥ ë³‘ëª©ì„ ì•¼ê¸°í•©ë‹ˆë‹¤.Limit-Offset vs Zero-Offset ë¹„êµ ë‹¤ì´ì–´ê·¸ëž¨ìœ„ ë‹¤ì´ì–´ê·¸ëž¨ì€ ë‘ ë°©ì‹ì˜ ì°¨ì´ì ì„ ëª…í™•í•˜ê²Œ ë³´ì—¬ì£¼ëŠ” ìžë£Œìž…ë‹ˆë‹¤. Limit-Offsetì˜ êµ¬ì¡°ì  í•œê³„ì  ë•Œë¬¸ì— ì™œ Zero-Offset ë°©ì‹ì´ í•„ìš”í•œì§€ë¥¼ ì´í•´í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.Zero-Offset ì•„ì´í…œ ë¦¬ë” êµ¬í˜„ê³¼ ì„±ëŠ¥ ê°œì„ JpaPagingItemReaderì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´, ì €ëŠ” Zero-Offset ë°©ì‹(ë˜ëŠ” í‚¤ì…‹ íŽ˜ì´ì§•)ì„ êµ¬í˜„í•œ ì»¤ìŠ¤í…€ ItemReaderë¥¼ ê°œë°œí–ˆìŠµë‹ˆë‹¤.Zero-Offset ë°©ì‹ì˜ í•µì‹¬ ì•„ì´ë””ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:  í•­ìƒ ì˜¤í”„ì…‹ì„ 0ìœ¼ë¡œ ìœ ì§€: íŽ˜ì´ì§€ ì´ë™ ì‹œì—ë„ í•­ìƒ OFFSET 0ì„ ì‚¬ìš©  ID ê¸°ë°˜ í•„í„°ë§: ì´ì „ íŽ˜ì´ì§€ì—ì„œ ì²˜ë¦¬í•œ ë§ˆì§€ë§‰ ë ˆì½”ë“œì˜ IDë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‹¤ìŒ ë°ì´í„°ë¥¼ ì¡°íšŒ  PK ì¸ë±ìŠ¤ í™œìš©: ê¸°ë³¸í‚¤(PK) ì¸ë±ìŠ¤ë¥¼ ìµœëŒ€í•œ í™œìš©í•˜ì—¬ ì¡°íšŒ ì„±ëŠ¥ ìµœì í™”êµ¬í˜„ì„ ìœ„í•œ í•„ìˆ˜ ì¡°ê±´:  PKë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì •ë ¬ (ì˜ˆ: ORDER BY id ASC)  ê° íŽ˜ì´ì§€ ì¡°íšŒ ì‹œ, ì´ì „ íŽ˜ì´ì§€ì˜ ë§ˆì§€ë§‰ ID ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ í•„í„°ë§ ì¡°ê±´ ì¶”ê°€ (ì˜ˆ: WHERE id &gt; :lastId)ì˜ˆë¥¼ ë“¤ì–´, ì²« ë²ˆì§¸ íŽ˜ì´ì§€ì—ì„œ 1,000ê±´ì„ ì¡°íšŒí•œ í›„ ë§ˆì§€ë§‰ ë ˆì½”ë“œì˜ IDê°€ 1000ì´ë¼ë©´, ë‘ ë²ˆì§¸ íŽ˜ì´ì§€ ì¡°íšŒ ì‹œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì¿¼ë¦¬ì— :lastIdì— 1000ì„ ì„¤ì •í•´ì£¼ë©´ ë©ë‹ˆë‹¤.SELECT * FROM order_product WHERE ... AND order_product_id &gt; :lastIdORDER BY order_product_id ASC LIMIT 1000ì´ ë°©ì‹ì˜ ìž¥ì ì€ íŽ˜ì´ì§€ ë²ˆí˜¸ê°€ ì•„ë¬´ë¦¬ ë’¤ë¡œ ê°€ë”ë¼ë„ í•­ìƒ ì¸ë±ìŠ¤ë¥¼ íƒ€ëŠ” íš¨ìœ¨ì ì¸ ì¿¼ë¦¬ê°€ ì‹¤í–‰ëœë‹¤ëŠ” ì ìž…ë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ì¼ê´€ëœ ì„±ëŠ¥ì„ ìœ ì§€í•  ìˆ˜ ìžˆìœ¼ë©°, ë°ì´í„° ì¼ê´€ì„± ë¬¸ì œë„ í•´ê²°í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì»¤ì„œ ê¸°ë°˜ ì•„ì´í…œ ë¦¬ë” í™œìš©ê³¼ ì„±ëŠ¥ ê°œì„ Zero-Offset ë°©ì‹ ì™¸ì—ë„, ì»¤ì„œ ê¸°ë°˜(Cursor-based) ì•„ì´í…œ ë¦¬ë”ë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ë„ íš¨ê³¼ì ìž…ë‹ˆë‹¤. ìŠ¤í”„ë§ ë°°ì¹˜ëŠ” JdbcCursorItemReaderì™€ ê°™ì€ ì»¤ì„œ ê¸°ë°˜ êµ¬í˜„ì²´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.ì»¤ì„œ ê¸°ë°˜ ë°©ì‹ì˜ ì£¼ìš” íŠ¹ì§•:  ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹: ë°ì´í„°ë² ì´ìŠ¤ ì»¤ì„œë¥¼ í†µí•´ í•„ìš”í•œ ë§Œí¼ë§Œ ë°ì´í„°ë¥¼ ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ ê°€ì ¸ì˜´  ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±: ì „ì²´ ê²°ê³¼ì…‹ì„ ë©”ëª¨ë¦¬ì— ë¡œë“œí•˜ì§€ ì•Šê³  í•„ìš”í•œ ë§Œí¼ë§Œ ê°€ì ¸ì˜¤ë¯€ë¡œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì   ì„±ëŠ¥ ì¼ê´€ì„±: Limit-Offset ë°©ì‹ì˜ ì„±ëŠ¥ ì €í•˜ ì—†ì´ ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ê°€ëŠ¥ðŸš¨ ë‹¤ë§Œ, ì»¤ì„œ ê¸°ë°˜ ì ‘ê·¼ë²•ì€ ë‹¤ìŒê³¼ ê°™ì€ ê³ ë ¤ì‚¬í•­ì´ ìžˆìŠµë‹ˆë‹¤:  ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìœ ì§€: ì²˜ë¦¬ê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ìœ ì§€í•´ì•¼ í•¨. (ì¶©ë¶„í•œ Connection-time ì„¤ì • í•„ìš”.)  íŠ¸ëžœìž­ì…˜ ë²”ìœ„: ìž¥ì‹œê°„ ì‹¤í–‰ë˜ëŠ” ìž‘ì—…ì˜ ê²½ìš° íŠ¸ëžœìž­ì…˜ ê´€ë¦¬ì— ì£¼ì˜ í•„ìš”.  ë¦¬ì†ŒìŠ¤ ê´€ë¦¬: ì»¤ì„œë¥¼ ëª…ì‹œì ìœ¼ë¡œ ë‹«ì•„ì•¼ í•˜ë¯€ë¡œ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ì— ì‹ ê²½ ì¨ì•¼ í•¨. (JdbcCursorItemReaderëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ìžë™ìœ¼ë¡œ ì •ë¦¬.)ìµœì¢… ì„ íƒ: ì»¤ì„œ ê¸°ë°˜ ì ‘ê·¼ë²• JdbcCursorItemReaderì´ë¡ ì ìœ¼ë¡œëŠ” Zero-Offset ë°©ì‹ì´ ë§¤ìš° íš¨ìœ¨ì ì´ì§€ë§Œ, ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì»¤ì„œ ê¸°ë°˜ ì ‘ê·¼ë²•(Cursor-based approach)ì„ ìµœì¢…ì ìœ¼ë¡œ ì±„íƒí–ˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê²°ì •ì„ ë‚´ë¦° ì£¼ìš” ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:  ê°œë°œ ë¦¬ì†ŒìŠ¤ íš¨ìœ¨ì„±: Zero-Offset ë°©ì‹ì€ ë§¤ë²ˆ ìƒˆë¡œìš´ Readerë¥¼ êµ¬í˜„í•  ë•Œë§ˆë‹¤ ìƒë‹¹í•œ ê°œë°œ ê³µìˆ˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë°˜ë©´ Spring Batchì—ì„œ ê¸°ë³¸ ì œê³µí•˜ëŠ” JdbcCursorItemReaderë¥¼ ì‚¬ìš©í•˜ë©´ ì¦‰ì‹œ í™œìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.  ìœ ì§€ë³´ìˆ˜ ìš©ì´ì„±: ì»¤ìŠ¤í…€ êµ¬í˜„ì²´ë³´ë‹¤ Spring Batchì˜ ê³µì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•˜ê³  ë²„ì „ ì—…ê·¸ë ˆì´ë“œ ì‹œ í˜¸í™˜ì„± ë¬¸ì œê°€ ì ìŠµë‹ˆë‹¤.  ì„±ëŠ¥ ëŒ€ë¹„ ë¹„ìš©: Zero-Offset ë°©ì‹ì´ ì´ë¡ ì ìœ¼ë¡œ ì•½ê°„ ë” ë›°ì–´ë‚œ ì„±ëŠ¥ì„ ë³´ì¼ ìˆ˜ ìžˆì§€ë§Œ, ì»¤ì„œ ê¸°ë°˜ ì ‘ê·¼ë²•ë„ ì¶©ë¶„ížˆ ìš°ìˆ˜í•œ ì„±ëŠ¥ì„ ì œê³µí•˜ë©´ì„œ ê°œë°œ ë¹„ìš©ì€ í¬ê²Œ ì ˆê°í•  ìˆ˜ ìžˆì—ˆìŠµë‹ˆë‹¤.â­ï¸ ë”°ë¼ì„œ, ì„±ëŠ¥ìƒ í¬ê²Œ ì°¨ì´ê°€ ì•ˆ ë‚˜ëŠ” Zero-Offset ë°©ì‹ê³¼ Cursor-Based ë°©ì‹ ì¤‘ ì‹¤ìš©ì ì¸ ì¸¡ë©´ì„ ìƒê°í•˜ì—¬ Cursor-basedì¸ JdbcCursorItemReader ë¥¼ í”„ë¡œì íŠ¸ì— ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.ë‹¤ìŒì€ ì‹¤ì œ êµ¬í˜„ì— ì‚¬ìš©í•œ JdbcCursorItemReader ì„¤ì •ì˜ ì½”ë“œìž…ë‹ˆë‹¤:@Bean@StepScopepublic JdbcCursorItemReader&lt;OrderProduct&gt; deliveryCompletedJdbcItemReader(        @Value("#{jobParameters['settlementDate']}") String settlementDateStr) {    LocalDate date = JobParameterUtils.parseSettlementDate(settlementDateStr);    LocalDateTime startTime = date.atStartOfDay();    LocalDateTime endTime = date.plusDays(1).atStartOfDay();    // SQL ì¿¼ë¦¬ ìž‘ì„±    String sql = """        SELECT op.*        FROM order_product op        LEFT JOIN claim cl ON op.order_product_id = cl.order_product_id        WHERE op.delivery_completed_at BETWEEN ? AND ?        AND op.delivery_status = 'DELIVERED'        AND op.purchase_confirmed_at IS NULL        AND (cl.claim_id IS NULL OR cl.completed_at IS NOT NULL)        ORDER BY op.order_product_id ASC        """;    // PreparedStatement íŒŒë¼ë¯¸í„° ì„¤ì •    Object[] parameters = new Object[] {            startTime.format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss")),            endTime.format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"))    };    return new JdbcCursorItemReaderBuilder&lt;OrderProduct&gt;()            .name("deliveryCompletedJdbcItemReader")            .dataSource(dataSource)            .sql(sql)            .preparedStatementSetter(new ArgumentPreparedStatementSetter(parameters))            .rowMapper(new BeanPropertyRowMapper&lt;&gt;(OrderProduct.class))            .build();}  Zero-Offset ë°©ì‹ì˜ ItemReaderë¥¼ ì§ì ‘ ê°œë°œí•˜ëŠ” ê²ƒë³´ë‹¤ Spring Batchì—ì„œ ì§€ì›í•´ì£¼ëŠ” JdbcCursorItemReaderë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ë§¤ë²ˆ :lastIdë¥¼ ì‹ ê²½ì“°ì§€ ì•Šê³ ë„ íŽ¸ë¦¬í•˜ê²Œ ê°œë°œí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì„±ëŠ¥ ë¹„êµ: JPA Paging vs Cursor-basedì‹¤ì œ ë™ì¼í•œ ë°ì´í„°ì…‹(ìµœëŒ€ 100ë§Œ ê±´ì˜ ì£¼ë¬¸ ë°ì´í„°)ì— ëŒ€í•´ ë‘ ê°€ì§€ ë°©ì‹ì„ ì ìš©í•œ ì„±ëŠ¥ ë¹„êµ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:ì°¸ê³ ë¡œ, JpaPagingItemReader ì½ê¸°ê°€ 2ë§Œê±´ ì²˜ë¦¬ì— 6ë¶„ì´ ê±¸ë ¸ê³ , ê·¸ ì´ìƒì˜ ë°ì´í„°ëŠ” í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ì› ë˜ í˜„ì‹¤ì ì¸ ìƒí™©ì„ ë°˜ì˜í•˜ì—¬ ì¶”ì •ì¹˜ë¥¼ í‘œì‹œí–ˆìŠµë‹ˆë‹¤.ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¶„ì„:  JPA Paging: ë°ì´í„°ëŸ‰ì´ ì¦ê°€í• ìˆ˜ë¡ ì²˜ë¦¬ ì‹œê°„ì´ ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ ì¦ê°€í•¨.  Cursor-based: ë¹ ë¥¸ ì²˜ë¦¬ ì†ë„ë¥¼ ë³´ì´ë©°, ë°ì´í„°ëŸ‰ì´ ì¦ê°€í•˜ë”ë¼ë„ ì²˜ë¦¬ ì‹œê°„ì´ ì„ í˜•ì ìœ¼ë¡œ ì¦ê°€í•¨.ë³´ì™„í•  ì í˜„ìž¬ êµ¬í˜„ì—ì„œ ê°€ìž¥ í° ê°œì„ ì ì€ íƒ€ìž… ì•ˆì „ì„±ìž…ë‹ˆë‹¤. ë¬¸ìžì—´ ê¸°ë°˜ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” í˜„ìž¬ ë°©ì‹ì€ ì˜¤íƒ€ë‚˜ ì»¬ëŸ¼ëª… ë³€ê²½ ì‹œ ì»´íŒŒì¼ íƒ€ìž„ì— ì˜¤ë¥˜ë¥¼ ìž¡ì•„ë‚´ê¸° ì–´ë µìŠµë‹ˆë‹¤.í–¥í›„ ê°œì„  ë°©í–¥:  QueryDSL ë„ìž…: Java ì½”ë“œë¡œ íƒ€ìž… ì•ˆì „í•œ ì¿¼ë¦¬ë¥¼ ìž‘ì„±í•˜ì—¬ ì»´íŒŒì¼ íƒ€ìž„ì— ì˜¤ë¥˜ ê°ì§€  í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ê°•í™”: ë‹¤ì–‘í•œ ë°ì´í„° íŒ¨í„´ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì¶”ê°€  ëª¨ë‹ˆí„°ë§ ê¸°ëŠ¥ ê°œì„ : ë°°ì¹˜ ìž‘ì—…ì˜ ì§„í–‰ ìƒí™© ë° ì„±ëŠ¥ ì§€í‘œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§Kotlin ê¸°ë°˜ í”„ë¡œì íŠ¸ì˜ ê²½ìš°, Exposed ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ë©´ ë”ìš± ê°„ê²°í•˜ê³  íƒ€ìž… ì•ˆì „í•œ ë°©ì‹ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ìž‘ì„±í•˜ì‹¤ ìˆ˜ ìžˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.â­ï¸ ê²°ë¡ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ Spring Batchì˜ ItemReader ì „ëžµì€ ì „ì²´ ë°°ì¹˜ í”„ë¡œì„¸ìŠ¤ì˜ ì„±ëŠ¥ê³¼ ì•ˆì •ì„±ì— ê²°ì •ì ì¸ ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤. íŠ¹ížˆ Limit-Offset ë°©ì‹ì˜ íŽ˜ì´ì§• ëŒ€ì‹  Zero-Offset ë˜ëŠ” ì»¤ì„œ ê¸°ë°˜ ì ‘ê·¼ë²•ì„ í™œìš©í•¨ìœ¼ë¡œì¨ ë‹¤ìŒê³¼ ê°™ì€ ì´ì ì„ ì–»ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤:  ì¼ê´€ëœ ì„±ëŠ¥: ì²˜ë¦¬ ë°ì´í„°ëŸ‰ì— ê´€ê³„ì—†ì´ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì„±ëŠ¥ ìœ ì§€  ë°ì´í„° ì¼ê´€ì„±: ë°°ì¹˜ ì²˜ë¦¬ ì¤‘ ë°ì´í„° ë³€ê²½ì—ë„ íŽ˜ì´ì§€ë„¤ì´ì…˜ ì •í™•ì„± ë³´ìž¥  ë¦¬ì†ŒìŠ¤ íš¨ìœ¨ì„±: ë°ì´í„°ë² ì´ìŠ¤ì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì˜ ë¦¬ì†ŒìŠ¤ íš¨ìœ¨ì  í™œìš©ëŒ€ê·œëª¨ ë°°ì¹˜ ìž‘ì—…ì„ ì„¤ê³„í•  ë•ŒëŠ” ë‹¨ìˆœížˆ ì½”ë“œ ìž‘ì„±ì˜ íŽ¸ì˜ì„±ë³´ë‹¤ ì„±ëŠ¥ê³¼ í™•ìž¥ì„±ì„ ìš°ì„ ì ìœ¼ë¡œ ê³ ë ¤í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ë³¸ í¬ìŠ¤íŠ¸ì—ì„œ ì†Œê°œí•œ ì „ëžµë“¤ì´ íš¨ìœ¨ì ì¸ ë°°ì¹˜ ì‹œìŠ¤í…œ êµ¬ì¶•ì— ë„ì›€ì´ ë˜ê¸¸ ë°”ëžë‹ˆë‹¤.ì°¸ê³  ìžë£Œ  Batch Performance ê·¹í•œìœ¼ë¡œ ëŒì–´ì˜¬ë¦¬ê¸°: 1ì–µ ê±´ ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ ë…¸ë ¥ / if(kakao)dev2022  Spring Batch ì• í”Œë¦¬ì¼€ì´ì…˜ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ ì£¼ìš” íŒ (kakao tech)  Spring Batch Documentation: Cursor-based ItemReader Implementations]]></content>
      <categories>
        
          <category> Spring Batch </category>
        
      </categories>
      <tags>
        
          <tag> Spring Batch </tag>
        
          <tag> Zero Offset </tag>
        
          <tag> Limit-Offset </tag>
        
          <tag> Cursor-Based </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Spring Boot + Prometheus + Grafanaë¡œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬ì¶•]]></title>
      <url>/msa/monitoring/prometheus/grafana/2025/02/24/Prometheus-Grafana-Monitoring/</url>
      <content type="text"><![CDATA[  Prometheusì™€ Grafanaë¥¼ í™œìš©í•˜ì—¬ Spring Boot ê¸°ë°˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ëª¨ë‹ˆí„°ë§ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤!ðŸ“Œ ë“¤ì–´ê°€ê¸°í˜„ëŒ€ì˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ëŠ” ì—¬ëŸ¬ ê°œì˜ ë…ë¦½ì ì¸ ì„œë¹„ìŠ¤ê°€ ìœ ê¸°ì ìœ¼ë¡œ í˜‘ë ¥í•˜ì—¬ í•˜ë‚˜ì˜ í° ì‹œìŠ¤í…œì„ êµ¬ì„±í•©ë‹ˆë‹¤. ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œëŠ” ê° ì„œë¹„ìŠ¤ê°€ ë…ë¦½ì ìœ¼ë¡œ ë°°í¬ë˜ê³  ìš´ì˜ë˜ê¸° ë•Œë¬¸ì—, íŠ¹ì • ì„œë¹„ìŠ¤ì˜ ìž¥ì• ë‚˜ ì„±ëŠ¥ ì €í•˜ê°€ ì „ì²´ ì‹œìŠ¤í…œì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë§Œì•½ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì´ ì—†ë‹¤ë©´ ì„œë¹„ìŠ¤ ìž¥ì• ë‚˜ ì„±ëŠ¥ ì €í•˜ ë°œìƒ ì‹œ ì›ì´ íŒŒì•…ì— ì˜¤ëžœ ì‹œê°„ì´ ì†Œìš”ë˜ì–´ ë¹„ì¦ˆë‹ˆìŠ¤ì— ì‹¬ê°í•œ ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ëŸ° ì„œë¹„ìŠ¤ ìž¥ì• ê°€ ì§€ì†ë˜ë©´ ì‚¬ìš©ìž ê²½í—˜ì´ ì•…í™”ë˜ê³ , ê²°ê³¼ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ì˜ ì‹ ë¢°ë¥¼ ìžƒì–´ë²„ë¦¬ëŠ” ìµœì•…ì˜ ìƒí™©ì´ ì˜¬ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ MSA í™˜ê²½ì—ì„œëŠ” ê° ì„œë¹„ìŠ¤ì˜ ìƒíƒœì™€ ì„±ëŠ¥ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ê²ƒì´ í•„ìˆ˜ì ìž…ë‹ˆë‹¤.ë³¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” Prometheusì™€ Grafanaë¥¼ í™œìš©í•˜ì—¬ Spring Boot ê¸°ë°˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.Promethus &amp; Grafanaìš°ì„  Prometheusì™€ Grafanaê°€ ê°ê° ë¬´ì—‡ì¸ì§€ ì•Œì•„ë´…ì‹œë‹¤.Prometheusëž€?PrometheusëŠ” ì˜¤í”ˆì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§ ë° ê²½ê³  ë„êµ¬ë¡œ, ì£¼ë¡œ ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì—¬ ì €ìž¥, ì¿¼ë¦¬, ë¶„ì„í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì €ìž¥ì†Œìž…ë‹ˆë‹¤. íŠ¹ížˆ ì‹œê³„ì—´ ë°ì´í„°ì— íŠ¹í™”ëœ ì¿¼ë¦¬ ì–¸ì–´ì¸ PromQLì„ ì œê³µí•˜ì—¬, ìˆ˜ì§‘í•œ ë©”íŠ¸ë¦­ì„ ì¡°íšŒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.Grafanaëž€?GrafanaëŠ” Prometheusì—ì„œ ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ì§ê´€ì ì¸ ëŒ€ì‹œë³´ë“œ í˜•íƒœë¡œ ì‹œê°í™”í•˜ëŠ” ì‹œê°í™” ë„êµ¬ìž…ë‹ˆë‹¤. Prometheus ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤ì™€ì˜ ì—°ë™ë„ ì§€ì›í•©ë‹ˆë‹¤. ëŒ€ì‹œë³´ë“œë¥¼ ì»¤ìŠ¤í…€í•  ìˆ˜ ìžˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ ê²½ê³  ì‹œìŠ¤í…œë„ êµ¬ì¶• ê°€ëŠ¥í•©ë‹ˆë‹¤.Spring Bootì™€ Prometheus ì—°ë™Spring BootëŠ” Actuator ëª¨ë“ˆì„ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‹¤ì–‘í•œ ìƒíƒœ ì •ë³´(metrics)ë¥¼ ì‰½ê²Œ ë…¸ì¶œí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ë¥¼ í™œìš©í•˜ì—¬ Prometheusê°€ Pull ë°©ì‹ìœ¼ë¡œ ë©”íŠ¸ë¦­ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìžˆë„ë¡ ì„¤ì •í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.Actuator ëª¨ë“ˆì„ í†µí•´ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”íŠ¸ë¦­ ì •ë³´ë“¤ì„ Prometheusì—ê²Œ ë…¸ì¶œí•˜ê¸° ìœ„í•´ ë‹¤ìŒ ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.implementation 'org.springframework.boot:spring-boot-starter-actuator'implementation 'io.micrometer:micrometer-registry-prometheus'ê·¸ë¦¬ê³ , Prometheusê°€ Pull ë°©ì‹ìœ¼ë¡œ ë©”íŠ¸ë¦­ì„ ì¡°íšŒí•  Actuator ì—”ë“œí¬ì¸íŠ¸ë¥¼ í™œì„±í™”ì‹œì¼œ ì¤˜ì•¼ í•©ë‹ˆë‹¤.management:  endpoints:    web:      exposure:        include: prometheusë§ˆì§€ë§‰ìœ¼ë¡œ Promethues.yml ì„¤ì • íŒŒì¼ì„ í†µí•´ Prometheusê°€ Pull í•˜ê³ ìž í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìœ„ì¹˜ ì •ë³´ë¥¼ ì„¤ì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.ì•„ëž˜ ì„¤ì •ì€ ë™ì¼í•œ ë„ì»¤ ë„¤íŠ¸ì›Œí¬ ìƒì— ì¡´ìž¬í•˜ëŠ” user service, product service, order serviceì— ëŒ€í•œ ë©”íŠ¸ë¦­ì„ Pullì„ 5ì´ˆ ê°„ê²©ìœ¼ë¡œ ì§„í–‰í•˜ê² ë‹¨ ì„¤ì •ìž…ë‹ˆë‹¤.global:  scrape_interval: 15s  external_labels:    monitor: 'codelab-monitor'scrape_configs:  - job_name: 'prometheus'    scrape_interval: 5s    static_configs:      - targets: ['localhost:9090']  - job_name: 'user-actuator'    metrics_path: '/actuator/prometheus'    scrape_interval: 5s    static_configs:      - targets: ['user-service:8080']      - targets: ['product-service:8081']      - targets: ['order-service:8082']ë§Œì•½ ë¡œì»¬ì— ì„¤ì¹˜ëœ Prometheusê°€ ì•„ë‹Œ ë„ì»¤ë¡œ ì‹¤í–‰ ì‹œ, Prometheusì˜ /etc/prometheus/prometheus.yml ê²½ë¡œì™€ ì»¤ìŠ¤í…€ ì„¤ì • íŒŒì¼ì„ ë³¼ë¥¨ ë§ˆìš´íŒ… í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.version: '3.8'services:  prometheus:    image: prom/prometheus:latest    container_name: prometheus    volumes:      - ./prometheus.yml:/etc/prometheus/prometheus.yml    ports:      - "9090:9090"ìœ„ ì„¤ì •ì´ ì™„ë£Œë˜ë©´ PrometheusëŠ” http://&lt;í˜¸ìŠ¤íŠ¸&gt;:&lt;í¬íŠ¸&gt;/actuator/prometheus ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ì˜ ë©”íŠ¸ë¦­ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.Prometheus ë©”íŠ¸ë¦­ -&gt; Grafana ì‹œê°í™”ë©”íŠ¸ë¦­ ë°ì´í„°ë“¤ì´ Prometheusì— ì €ìž¥ë˜ë©´ ì´ì™€ ì—°ë™í•˜ì—¬ Grafanaë¥¼ í†µí•´ ì‹œê°í™”í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.Grafana ê´€ë¦¬ íŽ˜ì´ì§€ì—ì„œ ë°ì´í„° ì†ŒìŠ¤ë¡œ Prometheusë¥¼ ì¶”ê°€í•œ ë‹¤ìŒ, URLì— Prometheus ì„œë²„ì˜ ì£¼ì†Œ(http://&lt;prometheus-host&gt;:9090)ë¥¼ ìž…ë ¥í•©ë‹ˆë‹¤.ëŒ€ì‹œë³´ë“œë¥¼ ê°œì¸ì´ ì§ì ‘ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•  ìˆ˜ë„ ìžˆì§€ë§Œ, ì´ë¯¸ ìž˜ ë§Œë“¤ì–´ì§„ ëŒ€ì‹œë³´ë“œ í…œí”Œë¦¿ì„ ê°€ì ¸ë‹¤ ì‚¬ìš©í•˜ë©´ íŽ¸ë¦¬í•©ë‹ˆë‹¤.ðŸš€ ê²°ë¡ Prometheusì™€ Grafanaë¥¼ í™œìš©í•œ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ ì„œë¹„ìŠ¤ì˜ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•˜ê³ , ìž¥ì•  ë°œìƒ ì‹œ ë¹ ë¥¸ ëŒ€ì‘ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì€ í•„ìˆ˜ì ì´ë©°, ì´ë¥¼ ë¶€ìž¬í•  ê²½ìš° ì‹¬ê°í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¦¬ìŠ¤í¬ë¥¼ ì´ˆëž˜í•  ìˆ˜ ìžˆë‹¤ëŠ” ê²ƒì„ ëª…ì‹¬í•´ì•¼ ë©ë‹ˆë‹¤.ì¶”ê°€ë¡œ ê³µë¶€í•˜ë©´ ì¢‹ì„ ë‚´ìš©  Grafana Alerting ê¸°ëŠ¥ (íŠ¹ì • ë©”íŠ¸ë¦­ ê°’ì´ ìž„ê³„ì¹˜ ì´ˆê³¼ ì‹œ ì•Œë¦¼ ë°œì†¡)]]></content>
      <categories>
        
          <category> MSA </category>
        
          <category> Monitoring </category>
        
          <category> Prometheus </category>
        
          <category> Grafana </category>
        
      </categories>
      <tags>
        
          <tag> Prometheus </tag>
        
          <tag> Grafana </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ELK ìŠ¤íƒì„ í™œìš©í•œ MSA ì¤‘ì•™ ì§‘ì¤‘ì‹ ë¡œê·¸ ëª¨ë‹ˆí„°ë§]]></title>
      <url>/msa/elk/2025/02/24/ELK-Stack-Log-Analysis/</url>
      <content type="text"><![CDATA[  ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œ ELK(Elasticsearch + Logstash + Kibana) ìŠ¤íƒì„ í™œìš©í•œ ì¤‘ì•™ ì§‘ì¤‘ì‹ ë¡œê·¸ ëª¨ë‹ˆí„°ë§ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤!ðŸ“Œ ë“¤ì–´ê°€ê¸°ìµœê·¼ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ê°€ ë„ë¦¬ ì‚¬ìš©ë˜ë©´ì„œ, ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ì—ì„œ ë°œìƒí•˜ëŠ” ë¡œê·¸ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ìˆ˜ì§‘ ë° ë¶„ì„í•  ìˆ˜ ìžˆëŠ” ë°©ë²•ì´ í•„ìš”í•´ì¡ŒìŠµë‹ˆë‹¤. ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œëŠ” ê° ì„œë¹„ìŠ¤ë§ˆë‹¤ ë³„ë„ì˜ ë¡œê·¸ íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤. ê°œë³„ ì„œë²„ë§ˆë‹¤ ë¶„ì‚°ë˜ì–´ ì €ìž¥ëœ ë¡œê·¸ íŒŒì¼ì„ ì¼ì¼ì´ ë¶„ì„í•˜ëŠ” ê²ƒì€ ë§¤ìš° ê³ ëœ ì¼ì´ ë  ê²ƒìž…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë¬¸ì œ ë°œìƒ ì‹œ ì‹ ì†í•˜ê²Œ ë¡œê·¸ë¥¼ ì¶”ì í•˜ì—¬ ì›ì¸ì„ íŒŒì•…í•˜ê³  ëŒ€ì‘í•˜ëŠ” ë°ì— ë§Žì€ ì‹œê°„ì´ ì†Œëª¨ë  ê²ƒìž…ë‹ˆë‹¤. ì´ì²˜ëŸ¼ MSA í™˜ê²½ì—ì„œ ë¡œê·¸ë¥¼ ì¤‘ì•™ ì§‘ì¤‘ì‹ìœ¼ë¡œ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì—¬ëŸ¬ ê°€ì§€ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤.ì´ì— ë”°ë¼ ELK(Elasticsearch + Logstash + Kibana)ë¥¼ í™œìš©í•œ ì¤‘ì•™ ì§‘ì¤‘ì‹ ë¡œê·¸ ëª¨ë‹ˆí„°ë§ì˜ í•„ìš”ì„±ì´ ë”ìš± ë¶€ê°ë˜ê³  ìžˆìŠµë‹ˆë‹¤.ë³¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ELK ìŠ¤íƒ ê¸°ë°˜ì˜ ë¡œê·¸ ëª¨ë‹ˆí„°ë§ êµ¬ì„±ê³¼, Zipkin ë¡œê·¸ íŠ¸ë ˆì´ì‹±ê³¼ì˜ ì—°ê³„ë¥¼ í†µí•œ íš¨ìœ¨ì ì¸ ëª¨ë‹ˆí„°ë§ ë°©ë²•ì— ëŒ€í•´ ì‚´íŽ´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. Zipkin ë¡œê·¸ íŠ¸ë ˆì´ì‹±ê³¼ ê´€ë ¨í•œ í¬ìŠ¤íŠ¸ê°€ ìžˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.ELK ë„ìž…ì˜ íš¨ê³¼Logstashë¥¼ í†µí•œ ë¡œê·¸ ìˆ˜ì§‘ ë° í•„í„°ë§LogstashëŠ” ë‹¤ì–‘í•œ ì†ŒìŠ¤ì˜ ë¡œê·¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜ì§‘í•˜ê³ , í•„í„°ë§ ë° ê°€ê³µí•˜ì—¬ ì¼ê´€ëœ í¬ë§·ìœ¼ë£Œ ë³€í™˜í•´ì¤ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ìˆ˜ì§‘ëœ ë¡œê·¸ì˜ í’ˆì§ˆì„ ë†’ì´ê³ , ë¶„ì„ì˜ íš¨ìœ¨ì„±ì„ ë†’ì¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ê°œì¸ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œëŠ” ê° ì„œë¹„ìŠ¤ê°€ ë¡œê·¸ íŒŒì¼ì„ ê° ì„œë²„ê°€ ì €ìž¥í•˜ë„ë¡ í–ˆê³ , í•´ë‹¹ ë¡œê·¸ íŒŒì¼ì„ Logstashê°€ ìˆ˜ì§‘í•˜ë„ë¡ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.Elasticsearch ê¸°ë°˜ì˜ ë¹ ë¥¸ ê²€ìƒ‰ElasticsearchëŠ” ë¶„ì‚°í˜• ê²€ìƒ‰ ì—”ì§„ìœ¼ë¡œ, ëŒ€ìš©ëŸ‰ ë¡œê·¸ ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì¸ë±ì‹± ë° ê²€ìƒ‰í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë•ë¶„ì— ì„œë¹„ìŠ¤ ìž¥ì•  ì‹œ ë¹ ë¥¸ ì†ë„ì˜ ë¡œê·¸ ê²€ìƒ‰ìœ¼ë¡œ ì¸í•˜ì—¬ ë¬¸ì œë¥¼ ì‹ ì†í•˜ê²Œ ëŒ€ì‘í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.Kibana ëŒ€ì‹œë³´ë“œë¥¼ í†µí•œ ì‹œê°í™”KibanaëŠ” Elasticsearchì— ì €ìž¥ëœ ë¡œê·¸ ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ì—¬ ëŒ€ì‹œë³´ë“œë¥¼ êµ¬ì„±í•  ìˆ˜ ìžˆê²Œ í•´ì¤ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë¡œê·¸ì˜ íë¦„ê³¼ ì´ìƒ ì§•í›„ë¥¼ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìžˆìœ¼ë©°, ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ í™˜ê²½ì„ êµ¬ì¶•í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.Logbackê³¼ ELK ì—°ë™ ë° êµ¬ì„± ë°©ë²•Logbackì´ëž€?ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ë¡œê¹… ì‹œìŠ¤í…œì˜ ê¸°ë³¸ êµ¬í˜„ì²´ë¡œ Logbackì„ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ì¸ ì„±ëŠ¥ê³¼ ê¸°ëŠ¥ì´ ì¢‹ê¸° ë•Œë¬¸ì— ë§Žì´ ì‚¬ìš©ë˜ê³  ìžˆìŠµë‹ˆë‹¤. ë§Œì•½ ì„¤ì •ì„ ì»¤ìŠ¤í…€í•˜ê³  ì‹¶ë‹¤ë©´ logback.xml íŒŒì¼ë¡œ ì„¤ì •ì„ ì¡°ì •í•˜ì‹¤ ìˆ˜ë„ ìžˆìŠµë‹ˆë‹¤.ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ì—ì„œ ê°œë°œ íŽ¸ì˜ì„±ì„ ìœ„í•´ Lombokì„ ëŒ€ë¶€ë¶„ ì‚¬ìš©í•˜ì‹¤ ê²ë‹ˆë‹¤. í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” Slf4j(Simple Logging Facade For Java)ë¼ëŠ” ë¡œê·¸ ì‹œìŠ¤í…œì— ëŒ€í•œ ì¶”ìƒí™” ê³„ì¸µì„ ì œê³µí•˜ëŠ” ì¸í„°íŽ˜ì´ìŠ¤ê°€ ì¡´ìž¬í•©ë‹ˆë‹¤. Slf4jì˜ ê¸°ë³¸ êµ¬í˜„ì²´ëŠ” Logbackìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤. Slf4j ìžì²´ëŠ” ì¸í„°íŽ˜ì´ìŠ¤ì´ë¯€ë¡œ ë¡œê¹…ì„ ìˆ˜í–‰í•˜ì§€ ì•Šê³ , ì‹¤ì œ ë¡œê¹…ì„ ìˆ˜í–‰í•˜ëŠ” êµ¬í˜„ì²´(ex: Logback, Log4j ë“±)ì—ê²Œ ìœ„ìž„í•©ë‹ˆë‹¤. ë§Œì•½ ë¡œê¹… êµ¬í˜„ì²´ë¥¼ êµì²´í•˜ê³  ì‹¶ë‹¤ë©´, ì˜ì¡´ì„±ì„ ë³€ê²½í•¨ìœ¼ë¡œì¨ ì‰½ê²Œ êµì²´í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.Logback -&gt; Logstash ë¡œê·¸ ì „ì†¡logback ë¡œê¹… ì‹œìŠ¤í…œì„ í†µí•´ Logstashë¡œ ë¡œê·¸ë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•´ì„  ë‹¤ìŒ ì˜ì¡´ì„±ë¶€í„° ì¶”ê°€í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ logback.xml ì„¤ì •ì— Logstashë¡œ ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ëŠ” Appenderë¥¼ ì¶”ê°€í•´ì£¼ë©´ ë©ë‹ˆë‹¤.implementation 'net.logstash.logback:logstash-logback-encoder:8.0'ì•„ëž˜ XML ì„¤ì •ì€ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì„¤ì •ëœ logback.xml ì„¤ì •ìž…ë‹ˆë‹¤. í•´ë‹¹ ì„¤ì •ì€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¡œê·¸ë¥¼ ì½˜ì†”, íŒŒì¼, Logstashì— ê°ê° ì¶œë ¥í•˜ëŠ” ì„¤ì •ìž…ë‹ˆë‹¤.&lt;configuration&gt;    &lt;springProperty scope="context" name="applicationName" source="spring.application.name" defaultValue="defaultAppName" /&gt;    &lt;springProperty scope="context" name="logstashDestination" source="logstash.destination" defaultValue="localhost:5044" /&gt;    &lt;property name="LOG_FILE" value="application.log"/&gt;    &lt;!-- Logstashë¡œ ì „ì†¡í•  Appender --&gt;    &lt;appender name="LOGSTASH" class="net.logstash.logback.appender.LogstashTcpSocketAppender"&gt;        &lt;destination&gt;${logstashDestination}&lt;/destination&gt;        &lt;encoder class="net.logstash.logback.encoder.LogstashEncoder" /&gt;    &lt;/appender&gt;    &lt;!-- ì½˜ì†” ì¶œë ¥ --&gt;    &lt;appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender"&gt;        &lt;encoder&gt;            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} %5p [${applicationName:-},%X{traceId:-},%X{spanId:-}] [%thread] %logger{36} - %msg%n&lt;/pattern&gt;        &lt;/encoder&gt;    &lt;/appender&gt;    &lt;!-- íŒŒì¼ ì¶œë ¥ --&gt;    &lt;appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;        &lt;file&gt;${LOG_FILE}&lt;/file&gt;        &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;            &lt;fileNamePattern&gt;application.%d{yyyy-MM-dd_HH-mm}.log.gz&lt;/fileNamePattern&gt;            &lt;maxHistory&gt;2&lt;/maxHistory&gt;        &lt;/rollingPolicy&gt;        &lt;encoder&gt;            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} %5p [${applicationName:-},%X{traceId:-},%X{spanId:-}] [%thread] %logger{36} - %msg%n&lt;/pattern&gt;        &lt;/encoder&gt;    &lt;/appender&gt;    &lt;!-- Logger ì„¤ì • --&gt;    &lt;root level="info"&gt;        &lt;appender-ref ref="CONSOLE" /&gt;        &lt;appender-ref ref="FILE" /&gt;        &lt;appender-ref ref="LOGSTASH" /&gt;    &lt;/root&gt;&lt;/configuration&gt;  ì°¸ê³ ë¡œ Logstash ì˜ ê¸°ë³¸ PortëŠ” 5044ë¡œ êµ¬ë™ë©ë‹ˆë‹¤. ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ ë„ì»¤ë¡œ Logstashë¥¼ êµ¬ë™í•˜ì—¬ ì‹¤ìŠµì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.ìœ„ ì²˜ëŸ¼ ì„¤ì •ì„ ë§ˆì¹˜ë©´ ì´ì œ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¡œê¹… ì‹œìŠ¤í…œ(Logback)ì´ ìžë™ìœ¼ë¡œ ë¡œê·¸ë¥¼ Logstash ë¡œ ì „ì†¡í•  ê²ƒìž…ë‹ˆë‹¤.Logstash -&gt; Elasticsearch ë¡œê·¸ ì €ìž¥LogstashëŠ” ë‹¨ìˆœížˆ ë°ì´í„° íŒŒì´í”„ë¼ì¸ ì—­í• ë§Œ í•˜ê¸° ë•Œë¬¸ì—, ê²°êµ­ ë¡œê·¸ë¥¼ ì €ìž¥í•  ë°ì´í„°ë² ì´ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ Elasticsearchê°€ ë¡œê·¸ë¥¼ ì €ìž¥í•˜ëŠ” ì—­í• ì„ ë§¡ê²Œ ë©ë‹ˆë‹¤. ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ëŠ” ì•žì„œ ë§í–ˆë“¯ì´, ëŒ€ìš©ëŸ‰ ë¡œê·¸ ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì¸ë±ì‹± ë° ê²€ìƒ‰í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë•ë¶„ì— ì°¾ê³ ìž í•˜ëŠ” ë¡œê·¸ë¥¼ ë¹ ë¥´ê²Œ íƒìƒ‰í•  ìˆ˜ ìžˆê²Œ ë˜ëŠ” ê²ƒì´ì£ .ì•„ëž˜ëŠ” Logstashì˜ ì„¤ì • íŒŒì¼ìž…ë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ -&gt; Logstash (ìˆ˜ì§‘) -&gt; Elasticsearch (ì €ìž¥)ì²˜ëŸ¼ ì¼ë ¨ì˜ ë°ì´í„° íŒŒì´í”„ë¼ì¸ì˜ ì„¤ì • ê°’ìž…ë‹ˆë‹¤.  ì´ë¥¼ Logstashë¥¼ êµ¬ë™ì‹œí‚¬ ë•Œ ì„¤ì •í•´ì£¼ì–´ì•¼ í•˜ëŠ” ê°’ìž…ë‹ˆë‹¤.input {    tcp {        port =&gt; 5044        codec =&gt; json    }}output {    elasticsearch {        hosts =&gt; ["http://elasticsearch:9200"]        index =&gt; "application-logs-%{+YYYY.MM.dd}"    }}  input: í•´ë‹¹ ì„¤ì •ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìž…ë ¥ë°›ê² ë‹¤ëŠ” ì •ë³´ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. (TCP 5044, JSON í¬ë§·ìœ¼ë¡œ ë°ì´í„° ìž…ë ¥ ë°›ìŒ.)  output: ì¶œë ¥í•˜ê³ ìž í•˜ëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ ì €ìž¥ì†Œì˜ ì •ë³´ë¥¼ ì ì–´ì¤ë‹ˆë‹¤.          hosts: ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì˜ í˜¸ìŠ¤íŠ¸ ì •ë³´ë¥¼ ì ì–´ì¤ë‹ˆë‹¤. ìœ„ ì„¤ì •ì€ ë™ì¼í•œ ë„ì»¤ ë„¤íŠ¸ì›Œí¬ ìƒì—ì„œ êµ¬ë™ë˜ê³  ìžˆëŠ” í™˜ê²½ì´ê¸° ë•Œë¬¸ì— ë„ì»¤ ì»¨í…Œì´ë„ˆëª…ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.      index: ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì˜ ì–´ë–¤ ì¸ë±ìŠ¤ì— ì €ìž¥í•  ì§€ ëª…ì‹œí•´ì¤ë‹ˆë‹¤. (RDBMSì˜ í…Œì´ë¸”ëª…ì´ë¼ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤.)      ìœ„ ì²˜ëŸ¼ logstash.conf íŒŒì¼ì„ ì„¤ì •í–ˆë‹¤ë©´, ì´ì œ Logstashê°€ ìˆ˜ì§‘í•œ ë¡œê·¸ ë°ì´í„°ë¥¼ Elasticsearch ì €ìž¥ì†Œë¡œ ì „ì†¡í•  ê²ƒìž…ë‹ˆë‹¤.ë§Œì•½, Logstashë¥¼ ë„ì»¤ë¡œ êµ¬ë™í•˜ì‹ ë‹¤ë©´ ì•„ëž˜ ë„ì»¤ ì»´í¬ì¦ˆ íŒŒì¼ì²˜ëŸ¼ logstash.conf íŒŒì¼ì„ ë³¼ë¥¨ ë§ˆìš´íŒ… í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.version: '3'services:  logstash:    image: docker.elastic.co/logstash/logstash:8.10.0    container_name: logstash    ports:      - "5044:5044"    volumes:      - ./logstash.conf:/usr/share/logstash/pipeline/logstash.confElasticsearch -&gt; Kibana ë¡œê·¸ ë°ì´í„° ì‹œê°í™”ì´ì œ Elasticsearchì— ë¡œê·¸ ë°ì´í„°ê°€ ì ìž¬ëœë‹¤ë©´, Kibanaë¥¼ í™œìš©í•˜ì—¬ ë¡œê·¸ ë°ì´í„°ë¥¼ ì‹œê°í™”í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì´ë•Œ Zipkinì„ í™œìš©í•œ ë¶„ì‚° ë¡œê·¸ íŠ¸ë ˆì´ì‹±ì„ í†µí•© ì ìš©í•œë‹¤ë©´, ì—¬ëŸ¬ ì„œë¹„ìŠ¤ì— ê±¸ì³ ì²˜ë¦¬ë  ë•Œ ë°œìƒí•˜ëŠ” ë¡œê·¸ì˜ íë¦„ì„ ì¶”ì í•  ìˆ˜ ìžˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. ê° ìš”ì²­ì— ê³ ìœ í•œ TraceIDë¥¼ ë¶€ì—¬í•˜ì—¬, ì—¬ëŸ¬ ì„œë¹„ìŠ¤ì— ë¶„ì‚°ë˜ì–´ ê¸°ë¡ëœ ë¡œê·¸ë“¤ì„ Elasticsearchì—ì„œ í•˜ë‚˜ì˜ íë¦„ìœ¼ë¡œ ì—°ê²°ì§€ì–´ ê²€ìƒ‰í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.Kibanaì˜ Discovery ì„œë¹„ìŠ¤ì—ì„œ TraceIDë¥¼ ìž…ë ¥í•˜ë©´ í•´ë‹¹ ìš”ì²­ì— ê´€ë ¨ëœ ëª¨ë“  ë¡œê·¸ê°€ íƒ€ìž„ìŠ¤íƒ¬í”„ ìˆœì„œëŒ€ë¡œ ì •ë ¬ì‹œì¼œ ëª¨ë‹ˆí„°ë§ í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë‹¨ì¼ ìš”ì²­ì´ ì„œë¹„ìŠ¤ ì „ë°˜ì—ì„œ ì–´ë–»ê²Œ ì²˜ë¦¬ë˜ì—ˆëŠ”ì§€ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.ë˜í•œ, ë¡œê·¸ ë ˆë²¨ì˜ ë¶„ë¥˜ë¥¼ í†µí•´ ì „ì²´ ë¡œê·¸ì— ëŒ€í•œ í†µê³„ë¥¼ ëŒ€ì‹œë³´ë“œë¡œ í™•ì¸ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.ðŸš€ ê²°ë¡ ELK ìŠ¤íƒì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ì¤‘ì•™ ì§‘ì¤‘ì‹ ë¡œê·¸ ëª¨ë‹ˆí„°ë§ì€ MSA í™˜ê²½ì—ì„œ í•„ìˆ˜ì ì¸ ìš”ì†Œë¼ê³  ìƒê°í•©ë‹ˆë‹¤. ë¶„ì‚°ëœ ë¡œê·¸ë¥¼ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•´ì£¼ê³ , ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ëŒ€ì‘ ëŠ¥ë ¥ì„ í–¥ìƒì‹œì¼œì¤Œê³¼ ë™ì‹œì—, Zipkinê³¼ì˜ í†µí•©ì„ í†µí•´ ìš”ì²­ì˜ ì „ì²´ íë¦„ì„ ì¶”ì í•  ìˆ˜ ìžˆë‹¤ëŠ” ì ì€ ì‹œìŠ¤í…œ ìš´ì˜ì˜ íš¨ìœ¨ì„±ì„ í¬ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ELKìŠ¤íƒê³¼ Zipkinê³¼ ê°™ì€ ë„êµ¬ë“¤ì„ ì ì ˆížˆ í™œìš©í•œë‹¤ë©´, ìž¥ì•  ë°œìƒ ì‹œ ë¹ ë¥¸ ì›ì¸ ë¶„ì„ê³¼ ë¬¸ì œ í•´ê²°ì´ ê°€ëŠ¥í•´ì ¸, ì „ì²´ ì„œë¹„ìŠ¤ì˜ ì•ˆì •ì„± ìœ ì§€ì— ê¸°ì—¬í•  ìˆ˜ ìžˆì„ ê²ƒìž…ë‹ˆë‹¤.ì´ìƒìœ¼ë¡œ ELK ìŠ¤íƒê³¼ Zipkin í†µí•©ì„ í†µí•œ ì¤‘ì•™ ì§‘ì¤‘ì‹ ë¡œê·¸ ëª¨ë‹ˆí„°ë§ì˜ í•„ìš”ì„±ê³¼ ìž¥ì ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ë³¸ í¬ìŠ¤íŠ¸ë¥¼ ì°¸ê³ í•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í™˜ê²½ì— ë§žëŠ” ìµœì ì˜ ë¡œê·¸ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶•ì— ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.ðŸ“‚ ì°¸ê³  ìžë£Œ  ì¸í”„ëŸ° - ê°œë°œìžì—ê²Œ í•„ìš”í•œ ë¡œê·¸ ê´€ë¦¬  LINE ê´‘ê³  í”Œëž«í¼ì˜ MSA í™˜ê²½ì—ì„œ Zipkinì„ í™œìš©í•´ ë¡œê·¸ íŠ¸ë ˆì´ì‹±í•˜ê¸°]]></content>
      <categories>
        
          <category> MSA </category>
        
          <category> ELK </category>
        
      </categories>
      <tags>
        
          <tag> Elatsticsearch </tag>
        
          <tag> Logstash </tag>
        
          <tag> Kibana </tag>
        
          <tag> Logback </tag>
        
          <tag> Zipkin </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Zipkinì„ í™œìš©í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë¶„ì‚° íŠ¸ë ˆì´ì‹±]]></title>
      <url>/spring%20cloud/zipkin/msa/2025/02/23/Zipkin-Distributed-Tracing/</url>
      <content type="text"><![CDATA[  ë¶„ì‚° í™˜ê²½ì—ì„œ Zipkinì„ í™œìš©í•œ ìš”ì²­ì˜ ì „ì²´ íë¦„ì„ ì¶”ì í•´ë´…ì‹œë‹¤!ðŸ“Œ ë“¤ì–´ê°€ê¸°ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ëŠ” ë…ë¦½ì ìœ¼ë¡œ ë°°í¬ë˜ê³  ê´€ë¦¬ë˜ëŠ” ìž‘ì€ ì„œë¹„ìŠ¤ë“¤ì´ ëª¨ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì„±í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ í™˜ê²½ì—ì„œëŠ” ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì´ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ë©°, ê° ì„œë¹„ìŠ¤ê°€ ë…ìžì ì¸ ë¡œê·¸ë¥¼ ë‚¨ê¸°ê¸° ë•Œë¬¸ì— ì „ì²´ íŠ¸ëžœìž­ì…˜ì˜ íë¦„ì„ íŒŒì•…í•˜ê¸°ê°€ ì–´ë µìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì£¼ë¬¸ ì„œë¹„ìŠ¤ -&gt; ê²°ì œ ì„œë¹„ìŠ¤ -&gt; ë°°ì†¡ ì„œë¹„ìŠ¤ ë“±ì˜ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ í˜¸ì¶œë˜ëŠ” ê³¼ì •ì—ì„œ ê° ì„œë¹„ìŠ¤ëŠ” ë³„ë„ì˜ ë¡œê·¸ë¥¼ ê°ìž ë‚¨ê¸°ê¸° ë•Œë¬¸ì— ì–´ë–¤ ì„œë¹„ìŠ¤ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.ì´ëŸ¬í•œ ë¬¸ì œì  ë•Œë¬¸ì— ë¶„ì‚° íŠ¸ë ˆì´ì‹±ì€ ë¬¸ì œ ë°œìƒ ì‹œ ì›ì¸ì„ ì‹ ì†í•˜ê²Œ íŒŒì•…í•˜ê³ , ì„±ëŠ¥ ë³‘ëª©ì„ ì°¾ì•„ë‚´ëŠ” ë° í•„ìˆ˜ì ì¸ ë„êµ¬ë¡œ ë“±ìž¥í•©ë‹ˆë‹¤.ë³¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ë¶„ì‚° íŠ¸ë ˆì´ì‹± ë„êµ¬ ì¤‘ Zipkinì„ í™œìš©í•œ ë¶„ì‚° íŠ¸ë ˆì´ì‹±ì„ ë‹¤ë£¨ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì˜ ë³µìž¡ì„±ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œëŠ” í•˜ë‚˜ì˜ ì‚¬ìš©ìž ìš”ì²­ì´ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¥¼ ê±°ì¹˜ë©° ì²˜ë¦¬ë©ë‹ˆë‹¤. ì£¼ë¬¸, ê²°ì œ, ë°°ì†¡ ì„œë¹„ìŠ¤ ë“± ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¥¼ ê±°ì¹˜ê²Œ ë˜ëŠ” ê²ƒì´ì£ . ì´ëŸ¬í•œ ë¶„ì‚°ëœ í˜¸ì¶œ êµ¬ì¡°ëŠ” ì—¬ëŸ¬ ë¬¸ì œì ì„ ìœ ë°œí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ê° ì„œë¹„ìŠ¤ë§ˆë‹¤ ë³„ë„ì˜ ë¡œê·¸ë¥¼ ë‚¨ê¸°ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ íŠ¸ëžœìž­ì…˜ì´ ì–´ë””ì—ì„œ ì§€ì—°ë˜ê±°ë‚˜ ìž¥ì• ê°€ ë°œìƒí–ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì „ì²´ íë¦„ì—ì„œ ì–´ëŠ ë¶€ë¶„ì´ ì‘ë‹µ ì‹œê°„ì„ ì§€ì—°ì‹œí‚¤ëŠ”ì§€ë„ íŒŒì•…í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.ëª¨ë†€ë¦¬ì‹(Monolihic)ì˜ ê²½ìš° í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ êµ¬ë™ë˜ê¸° ë•Œë¬¸ì—, ì „ì²´ íë¦„ì— ëŒ€í•œ ë¡œê·¸ë¥¼ í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ì—ì„œ ë””ë²„ê¹… í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ MSAì—ì„œëŠ” ë¬¸ì œë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•´ ê´€ë ¨ëœ ëª¨ë“  ì„œë¹„ìŠ¤ë“¤ì˜ ë¡œê·¸ë¥¼ í•˜ë‚˜í•˜ë‚˜ ë‹¤ ì‚´íŽ´ë´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ì¡´ìž¬í•©ë‹ˆë‹¤.ë§Œì•½ ë¶„ì‚° íŠ¸ë ˆì´ì‹± ë„êµ¬ê°€ ì—†ë‹¤ë©´, ìœ„ì™€ ê°™ì€ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ê° ì„œë¹„ìŠ¤ì—ì„œ ê°œë³„ì ìœ¼ë¡œ ë¡œê·¸ë¥¼ ë¶„ì„í•´ì•¼ í•˜ë©°, ì´ëŠ” ì‹œê°„ ì†Œëª¨ì ì´ì´ê³  ë¹„íš¨ìœ¨ì ì¼ ë¿ë§Œ ì•„ë‹ˆë¼, ë¬¸ì œ ì§„ë‹¨ì˜ ì–´ë ¤ì›€ì´ ë”°ë¥´ê¸° ë•Œë¬¸ì— ì‹ ì†í•˜ê²Œ ëŒ€ì‘í•˜ì§€ ëª»í•  ìœ„í—˜ì´ ë†’ì•„ì§‘ë‹ˆë‹¤.Zipkinì„ í™œìš©í•œ ìš”ì²­ ì¶”ì Zipkinì€ ì˜¤í”ˆ ì†ŒìŠ¤ ë¶„ì‚° íŠ¸ë ˆì´ì‹± ì‹œìŠ¤í…œìœ¼ë¡œ, ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ ì„œë¹„ìŠ¤ ê°„ í˜¸ì¶œ íë¦„ì„ ì‹œê°í™”í•˜ê³  ë¶„ì„í•  ìˆ˜ ìžˆë„ë¡ ë„ì™€ì£¼ëŠ” ë„êµ¬ìž…ë‹ˆë‹¤. Zipkinì„ í™œìš©í•˜ë©´ ê° ì„œë¹„ìŠ¤ì˜ í˜¸ì¶œ ë°ì´í„°ë¥¼ ì¤‘ì•™ì—ì„œ ìˆ˜ì§‘í•˜ì—¬ ì•„ëž˜ ë¬¸ì œì ë“¤ì„ í•´ê²°í•´ì¤ë‹ˆë‹¤.  ì „ì²´ í˜¸ì¶œ íë¦„ ì‹œê°í™”: ì‚¬ìš©ìž ìš”ì²­ì´ ì–´ë–¤ ê²½ë¡œë¡œ ì „ë‹¬ë˜ëŠ”ì§€ ì‹œê°í™”í•˜ì—¬ í•œ ëˆˆì— íŒŒì•… í• ìˆ˜ ìžˆë„ë¡ í•´ì¤ë‹ˆë‹¤.  Latency ë¶„ì„: ê° ì„œë¹„ìŠ¤ ê°„ í˜¸ì¶œì˜ ì‘ë‹µ ì‹œê°„ ì •ë³´ë¥¼ ì œê³µí•˜ì—¬ ì–´ë–¤ ì„œë¹„ìŠ¤ì˜ ì–´ë–¤ ë¡œì§ì—ì„œ ì„±ëŠ¥ ë³‘ëª©ì´ ì¼ì–´ë‚˜ëŠ”ì§€ ì‰½ê²Œ ì‹ë³„í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  ìž¥ì•  ì›ì¸ ë¶„ì„: íŠ¸ëžœìž­ì…˜ ì¤‘ ë°œìƒí•œ ì˜ˆì™¸ë‚˜ ì˜¤ë¥˜ë¥¼ ì‹ ì†í•˜ê²Œ íƒì§€í•˜ê³ , ì–´ëŠ ì„œë¹„ìŠ¤ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆëŠ”ì§€ ë¶„ì„ í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.Zipkin ì ìš© ë°©ë²•ì˜ˆì „ì—ëŠ” Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‰½ê²Œ ë¶„ì‚° íŠ¸ë ˆì´ì‹± ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìžˆë„ë¡ ë„ì™€ì£¼ëŠ” Spring Cloud Sleuthë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í–ˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ìµœê·¼ ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ë˜ë©´ì„œ Spring Cloud SleuthëŠ” Deprecated ë  ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ìµœê·¼ ë²„ì „ì—ì„œëŠ” Micrometerë¡œ ë¶„ì‚° íŠ¸ë ˆì´ì‹± ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë„ë¡ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.Dependency	implementation 'org.springframework.boot:spring-boot-starter-actuator'	implementation 'io.micrometer:micrometer-observation'	implementation 'io.micrometer:micrometer-tracing-bridge-brave'	implementation 'io.zipkin.brave:brave-instrumentation-spring-web'	implementation 'io.zipkin.reporter2:zipkin-reporter-brave'application.ymlspring:  application:    name: product-servicemanagement:  tracing:    sampling:      probability: 1.0    propagation:      type: b3  zipkin:    tracing:      endpoint: ${MANAGEMENT_ZIPKIN_TRACING_ENDPOINT:http://localhost:9411/api/v2/spans}  ì—¬ê¸°ì„œ spring.application.nameì€ ì„œë¹„ìŠ¤ íƒœê¹…ì— í™œìš©ë˜ë©°, ê° ì„œë¹„ìŠ¤ì˜ ì´ë¦„ì´ Zipkin UIì— í‘œì‹œë˜ì–´ í˜¸ì¶œ íë¦„ì„ ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  ìœ„ì™€ ê°™ì´ ì˜ì¡´ì„±ê³¼ ì„¤ì •ì„ ë§ˆì¹˜ë©´, ìžë™ìœ¼ë¡œ ê° ìš”ì²­ì— ê³ ìœ í•œ Trace IDì™€ Span IDë¥¼ ë¶€ì—¬í•˜ì—¬, ì„œë¹„ìŠ¤ ê°„ì˜ í˜¸ì¶œ ê´€ê³„ë¥¼ ì¶”ì í•˜ê²Œ ë©ë‹ˆë‹¤.Zipkin UIë¥¼ í™œìš©í•œ íŠ¸ë ˆì´ìŠ¤ ë¶„ì„ì„œë¹„ìŠ¤ ê°„ í˜¸ì¶œ íë¦„ ì‹œê°í™”Zipkin UIëŠ” ìˆ˜ì§‘ëœ íŠ¸ë ˆì´ìŠ¤ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ, ì„œë¹„ìŠ¤ ê°„ í˜¸ì¶œ íë¦„ì„ ì§ê´€ì ìœ¼ë¡œ ì‹œê°í™”í•´ì¤ë‹ˆë‹¤. ê°œë°œìžëŠ” UIë¥¼ í†µí•´ ê° ì„œë¹„ìŠ¤ê°€ í˜¸ì¶œí•œ ìˆœì„œì™€ ê´€ê³„ë¥¼ ê·¸ëž˜í”½ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë˜í•œ íŠ¹ì • íŠ¸ëžœìž­ì…˜ì˜ ì„¸ë¶€ì ì¸ ìŠ¤íŒ¬ ì •ë³´ì™€ íƒ€ìž„ë¼ì¸ì„ ë¶„ì„í•  ìˆ˜ë„ ìžˆìŠµë‹ˆë‹¤.Latency ë¶„ì„ ë° ìž¥ì•  ê°ì§€Zipkin UIì—ì„œëŠ” ê° ìŠ¤íŒ¬ì˜ ì‘ë‹µ ì‹œê°„ì„ ì‹œê°ì ìœ¼ë¡œ í‘œì‹œí•˜ì—¬, ì–´ëŠ ë¶€ë¶„ì—ì„œ ì§€ì—°ì´ ë°œìƒí–ˆëŠ”ì§€ ì‰½ê²Œ ì‹ë³„í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì„±ëŠ¥ ë³‘ëª© êµ¬ê°„ì„ ì°¾ì•„ë‚´ê³ , ìž¥ì•  ë°œìƒ ì‹œ ì›ì¸ ë¶„ì„ì— í•„ìš”í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë§Œì•½ ì´ëŸ¬í•œ ì‹œê°í™” ë„êµ¬ê°€ ì—†ìœ¼ë©´, ë¡œê·¸ íŒŒì¼ë§Œìœ¼ë¡œ ê° ì„œë¹„ìŠ¤ ê°„ì˜ í˜¸ì¶œ ê´€ê³„ì™€ ì§€ì—° ì‹œê°„ì„ ë¶„ì„í•´ì•¼ í•˜ë¯€ë¡œ, ë¬¸ì œ ë°œìƒ ì‹œ ì¦‰ê°ì ì¸ ëŒ€ì‘ì´ ì–´ë ¤ì›Œì§ˆ ê²ƒìž…ë‹ˆë‹¤.Spring AOPë¥¼ í™œìš©í•œ ë¯¸ë“¤ì›¨ì–´ ê°„ì˜ ìš”ì²­ ì¶”ì ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì—ì„œëŠ” HTTP í˜¸ì¶œ ì™¸ì—ë„ Kafka, Redisì™€ ê°™ì€ ë¯¸ë“¤ì›¨ì–´ë¥¼ í™œìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ŽìŠµë‹ˆë‹¤. Zipkinê³¼ Micrometerì˜ ê¸°ë³¸ ì˜ì¡´ì„±ê³¼ ì„¤ì •ë§Œìœ¼ë¡œëŠ” ë¯¸ë“¤ì›¨ì–´ í†µì‹  ê²½ë¡œë¥¼ ìžë™ ì¶”ì í•˜ì§„ ì•ŠìŠµë‹ˆë‹¤. ë¯¸ë“¤ì›¨ì–´ê°„ì˜ í˜¸ì¶œ íë¦„ê¹Œì§€ ì¶”ì í•˜ê¸° ìœ„í•´, ì¶”ì ì— í•„ìš”í•œ ë¡œì§ì„ ìŠ¤í”„ë§ AOPë¥¼ í™œìš©í•˜ì—¬ ì‚¬ìš©ìž ì •ì˜ íŠ¸ë ˆì´ì‹± ì½”ë“œë¥¼ ì‚½ìž…í•  ìˆ˜ ìžˆì—ˆìŠµë‹ˆë‹¤.ì˜ˆë¥¼ ë“¤ì–´, ìŠ¤í”„ë§ AOPë¥¼ í™œìš©í•˜ì—¬ Kafkaë¥¼ í†µí•œ ë©”ì‹œì§€ ë°œí–‰/êµ¬ë… íë¦„ë„ ì¶”ì í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë©”ì‹œì§€ íë¥¼ í†µí•œ ë¹„ë™ê¸° í˜¸ì¶œë„ ëª…í™•í•˜ê²Œ ì¶”ì í•  ìˆ˜ ìžˆìœ¼ë©°, ë©”ì‹œì§€ ì†ì‹¤ì´ë‚˜ ì§€ì—° ë¬¸ì œë¥¼ ì‰½ê²Œ ì¶”ì í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ë§Œì•½ ì´ëŸ¬í•œ ë¯¸ë“¤ì›¨ì–´ ì¶”ì  ë©”ì»¤ë‹ˆì¦˜ì´ ì—†ë‹¤ë©´, ê° ë¯¸ë“¤ì›¨ì–´ ê°„ì˜ í˜¸ì¶œ íë¦„ì´ ë‹¨ì ˆë˜ì–´ ë¬¸ì œ ë°œìƒ ì‹œ ì›ì¸ íŒŒì•…ì— í° ì–´ë ¤ì›€ì´ ë”°ë¥¼ ê²ƒìž…ë‹ˆë‹¤. ì´ëŠ” ë””ë²„ê¹… í•˜ëŠ” ì‹œê°„ì´ ê¸‰ê²©ížˆ ì¦ê°€í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ðŸš€ ê²°ë¡ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œëŠ” ì„œë¹„ìŠ¤ ê°„ í˜¸ì¶œ íë¦„ì´ ë³µìž¡í•´ì§ì— ë”°ë¼, ë‹¨ìˆœ ë¡œê·¸ ë¶„ì„ë§Œìœ¼ë¡œëŠ” ë¬¸ì œì˜ ì›ì¸ì„ íŒŒì•…í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤. Zipkinê³¼ Micrometerë¥¼ í™œìš©í•˜ë©´, ì „ì²´ íŠ¸ëžœìž­ì…˜ì˜ íë¦„ì„ ì‹œê°í™”í•˜ê³  ê° ì„œë¹„ìŠ¤ì˜ ì„±ëŠ¥ì„ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìžˆì–´ ë¬¸ì œ ë°œìƒ ì‹œ ì‹ ì†í•˜ê²Œ ëŒ€ì‘í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë„êµ¬ë“¤ì´ ì—†ë‹¤ë©´, ì‹œìŠ¤í…œ ìž¥ì• ë‚˜ ì„±ëŠ¥ ë³‘ëª©ì„ ì°¾ì•„ë‚´ëŠ” ë°ì— ë§Žì€ ì‹œê°„ê³¼ ë¦¬ì†ŒìŠ¤ê°€ ì†Œëª¨ë˜ë©°, ì´ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ì— ì‹¬ê°í•œ ì˜í–¥ì„ ë¯¸ì¹  ê²ƒìž…ë‹ˆë‹¤. MSA í™˜ê²½ì—ì„œ Zipkinì„ í†µí•œ ë¶„ì‚° íŠ¸ë ˆì´ì‹±ì€ ë‹¨ìˆœížˆ ë¡œê·¸ë¥¼ ë‚¨ê¸°ëŠ” ê²ƒì„ ë„˜ì–´, ì‹œìŠ¤í…œì˜ ì „ì²´ì ì¸ ê±´ê°• ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³ , ìž¥ì•  ë°œìƒ ì‹œ ì‹ ì†í•œ ì›ì¸ ë¶„ì„ ë° ëŒ€ì‘ ì „ëžµì„ ë§ˆë ¨í•˜ëŠ” ë° í•„ìˆ˜ì ì¸ ìš”ì†Œë¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì°¸ê³  ìžë£Œ  LINE ê´‘ê³  í”Œëž«í¼ì˜ MSA í™˜ê²½ì—ì„œ Zipkinì„ í™œìš©í•´ ë¡œê·¸ íŠ¸ë ˆì´ì‹±í•˜ê¸°  b3-propagation]]></content>
      <categories>
        
          <category> Spring Cloud </category>
        
          <category> Zipkin </category>
        
          <category> MSA </category>
        
      </categories>
      <tags>
        
          <tag> Distributed Tracing </tag>
        
          <tag> b3 propagation </tag>
        
          <tag> Micrometer </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Spring Cloud + Kafkaë¡œ êµ¬í˜„í•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì´ë²¤íŠ¸ ì•„í‚¤í…ì²˜]]></title>
      <url>/spring%20cloud/msa/kafka/2025/02/22/Spring-Cloud-Kafka-EventArchitecture/</url>
      <content type="text"><![CDATA[  Kafkaë¥¼ ì´ìš©í•œ ì´ë²¤íŠ¸ ë“œë¦¬ë¸ ì•„í‚¤í…ì²˜ì˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í†µì‹ ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤!ðŸ“Œ 1. ë“¤ì–´ê°€ê¸°1-1. ì™œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê°„ í†µì‹  ë°©ì‹ì´ ì¤‘ìš”í• ê¹Œìš”?ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìž‘ì€ ë…ë¦½ì ì¸ ì„œë¹„ìŠ¤ë¡œ ë‚˜ëˆ„ì–´ ê°œë°œ, ë°°í¬ ë° í™•ìž¥ì„±ì„ ê·¹ëŒ€í™”í•  ìˆ˜ ìžˆê²Œ í•´ì¤ë‹ˆë‹¤.í•˜ì§€ë§Œ ì„œë¹„ìŠ¤ ê°„ì— ë°ì´í„°ì™€ ëª…ë ¹ì„ ì–´ë–»ê²Œ ì£¼ê³ ë°›ì„ì§€ê°€ ì‹œìŠ¤í…œì˜ í™•ìž¥ì„±, ì„±ëŠ¥ ê·¸ë¦¬ê³  ì‹ ë¢°ì„±ì— ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤. ê·¸ëž˜ì„œ ì„œë¹„ìŠ¤ ê°„ í†µì‹  ë°©ì‹ì— ëŒ€í•œ ê³ ë¯¼ì´ ì¤‘ìš”í•œ í¬ì¸íŠ¸ê°€ ë©ë‹ˆë‹¤.ê°€ìž¥ í”ížˆ ì‚¬ìš©ë˜ëŠ” ë‘ ê°€ì§€ í†µì‹  ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.  REST API ê¸°ë°˜ í†µì‹  (ë™ê¸° ë°©ì‹, Synchronous)  Message Queueë¥¼ í™œìš©í•œ Event driven í†µì‹  (ë¹„ë™ê¸° ë°©ì‹, Asynchronous)ì´ì „ì— MSAì— ê´€í•œ í†µì‹  ë°©ë²•ë“¤ì˜ ìž¥ë‹¨ì ì„ ë¹„êµí•˜ëŠ” í¬ìŠ¤íŠ¸ë¥¼ ìž‘ì„±í–ˆì—ˆìŠµë‹ˆë‹¤. ì´ë²ˆ í¬ìŠ¤íŠ¸ì™€ í•¨ê»˜ ì½ì–´ë³´ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.1-2. REST API ê¸°ë°˜ í†µì‹ ì˜ í•œê³„ì REST APIë¥¼ í™œìš©í•œ ë™ê¸° í†µì‹ ì€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì´ˆê¸° êµ¬í˜„ ì‹œ ê°„ë‹¨í•˜ê²Œ ì ìš©í•  ìˆ˜ ìžˆê³ , HTTPë¥¼ ì´ìš©í•œ ìš”ì²­/ì‘ë‹µ íŒ¨í„´ì€ ì¹œìˆ™í•˜ê¸°ì— ê°€ìž¥ ë§Žì´ ì„ íƒë˜ëŠ” ë°©ì‹ìž…ë‹ˆë‹¤.í•˜ì§€ë§Œ, ì„œë¹„ìŠ¤ ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ REST API í†µì‹ ì˜ í•œê³„ì ì— ì§ë©´í•˜ê²Œ ë©ë‹ˆë‹¤.ê°•í•œ ê²°í•© (Tightly Coupled)  ë¬¸ì œ: ì„œë¹„ìŠ¤ Aê°€ ì„œë¹„ìŠ¤ Bì˜ APIë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤ë©´, ì„œë¹„ìŠ¤ Bê°€ ë°˜ë“œì‹œ ì •ìƒ ë™ìž‘í•˜ê³  ìžˆì–´ì•¼ í•©ë‹ˆë‹¤.  ì˜ˆì‹œ: Order Serviceê°€ Payment Serviceì˜ APIë¥¼ í˜¸ì¶œí–ˆëŠ”ë°, ê²°ì œ ì„œë¹„ìŠ¤ê°€ ë‹¤ìš´ë˜ë©´ ì£¼ë¬¸ ìƒì„± ìžì²´ê°€ ì‹¤íŒ¨í•˜ê²Œ ë©ë‹ˆë‹¤.í™•ìž¥ì„± ë° ì„±ëŠ¥ ì´ìŠˆ  ë¬¸ì œ: ë™ê¸°ì‹ í˜¸ì¶œë¡œ ì¸í•´ ìš”ì²­ì´ ë³‘ëª© ì§€ì ì´ ë©ë‹ˆë‹¤.  ì˜ˆì‹œ: Order Serviceê°€ ì£¼ë¬¸ ìƒì„± -&gt; ê²°ì œ ìš”ì²­ -&gt; ë°°ì†¡ ìš”ì²­ê¹Œì§€ ìˆœì°¨ì ìœ¼ë¡œ(ë™ê¸°ì‹)ìœ¼ë¡œ í˜¸ì¶œí•œë‹¤ë©´, ì „ì²´ ì‘ë‹µ ì‹œê°„ì´ ê¸¸ì–´ì§€ê²Œ ë©ë‹ˆë‹¤. ê²°êµ­ ì „ì²´ íŠ¸ëžœìž­ì…˜ì´ ëŠë ¤ì§€ê³ , ë™ì‹œì— ë§Žì€ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ì–´ë ¤ì›Œì§ˆ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ìž¥ì•  ì „íŒŒ  ë¬¸ì œ: í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ ìž¥ì• ê°€ ì—°ì‡„ì ìœ¼ë¡œ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¨ì¼ ìž¥ì• ê°€ ì „ì²´ ì‹œìŠ¤í…œì˜ ë¬¸ì œë¡œ í™•ì‚°ë  ìˆ˜ ë„ ìžˆìŠµë‹ˆë‹¤.  ì˜ˆì‹œ: ê²°ì œ ì‹œìŠ¤í…œì´ ëŠë ¤ì§€ê±°ë‚˜ ìž¥ì• ê°€ ë°œìƒí•˜ë©´, ì£¼ë¬¸ ì²˜ë¦¬ ì‹œìŠ¤í…œë„ ì •ìƒì ìœ¼ë¡œ ìž‘ë™í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.ë†’ì€ ì¢…ì†ì„±  ë¬¸ì œ: API êµ¬ì¡° ë³€ê²½ ì‹œ, ì´ë¥¼ í˜¸ì¶œí•˜ëŠ” ëª¨ë“  ì„œë¹„ìŠ¤ì— ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ê° ì„œë¹„ìŠ¤ì˜ ë…ë¦½ì„±ì´ ë‚®ì•„ì§€ê³ , ë°°í¬ì‹œ ì„œë¹„ìŠ¤ ê°„ì˜ ì¡°ìœ¨ì´ í•„ìš”í•©ë‹ˆë‹¤.1-3. âœ… ìš”ì•½  REST API ë°©ì‹ì€ ë‹¨ìˆœí•˜ê³  ì§ê´€ì ì´ì§€ë§Œ, í™•ìž¥ì„±, ì‹ ë¢°ì„±, ìœ ì—°ì„± ì¸¡ë©´ì—ì„œ í•œê³„ê°€ ë°œìƒí•©ë‹ˆë‹¤.2. Kafka ê¸°ë°˜ ì´ë²¤íŠ¸ ë“œë¦¬ë¸(Event-driven) ì•„í‚¤í…ì²˜ì•žì„œ ì‚´íŽ´ë³¸ ë™ê¸°ì‹ í†µì‹ ì˜ í•œê³„ì ì„ ê·¹ë³µí•˜ê¸° ìœ„í•´ ëŒ€ê·œëª¨ì˜ MSA í™˜ê²½ì—ì„œëŠ” Kafka ê¸°ë°˜ì˜ ë¹„ë™ê¸° ì´ë²¤íŠ¸ í†µì‹ ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì í•©í•©ë‹ˆë‹¤.KafkaëŠ” ë©”ì‹œì§€ ë¸Œë¡œì»¤ ì—­í• ì„ ìˆ˜í–‰í•˜ë©´ì„œ, ì„œë¹„ìŠ¤ ê°„ì— ë¹„ë™ê¸° ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•´ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ë“¤ì€ í† í”½(Topic)ì— ë©”ì‹œì§€ë¥¼ ë°œí–‰(Publish)í•˜ê±°ë‚˜ êµ¬ë…(Subscribe)í•¨ìœ¼ë¡œì¨ ì„œë¡œ í†µì‹ í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.2-1. ì´ë²¤íŠ¸ ë“œë¦¬ë¸(Event-driven) ì•„í‚¤í…ì²˜ì˜ ìž¥ì ëŠìŠ¨í•œ ê²°í•© (Loosely Coupled)  ìž¥ì : ì„œë¹„ìŠ¤ ê°„ ì§ì ‘ì ì¸ í˜¸ì¶œì´ ì—†ìœ¼ë¯€ë¡œ, ì„œë¡œì˜ ì¡´ìž¬ë¥¼ ëª°ë¼ë„ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ íŠ¹ì • ì„œë¹„ìŠ¤ê°€ ë‹¤ìš´ë˜ë”ë¼ë„ ì „ì²´ ì‹œìŠ¤í…œì—ëŠ” ì˜í–¥ì´ ì ìŠµë‹ˆë‹¤.  ì˜ˆì‹œ: Order ServiceëŠ” ORDER_CREATED ì£¼ë¬¸ ìƒì„± ì´ë²¤íŠ¸ë§Œ ë°œí–‰í•˜ê³ , ì´ë¥¼ Payment Serviceì—ì„œ êµ¬ë…í•´ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì¦‰, ê° ì„œë¹„ìŠ¤ë“¤ì€ ë…ë¦½ì ìœ¼ë¡œ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ì¸í•œ ì„±ëŠ¥ í–¥ìƒ  ìž¥ì : ìš”ì²­ì„ íì— ë„£ê³  ë°”ë¡œ ì‘ë‹µì„ ì¤„ ìˆ˜ ìžˆì–´, ë¹ ë¥¸ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë¹ ë¥¸ ì‘ë‹µì€ ì‚¬ìš©ìžì˜ ê²½í—˜ì„ ê°œì„ í•´ì¤ë‹ˆë‹¤.  ì˜ˆì‹œ: ì‚¬ìš©ìžê°€ ì£¼ë¬¸ì„ ìƒì„±í•˜ë©´, ì£¼ë¬¸ IDë¥¼ ë°”ë¡œ ì‘ë‹µë°›ê³ , ê²°ì œ ë° ë°°ì†¡ì²˜ë¦¬ëŠ” ë°±ì—”ë“œì—ì„œ ë¹„ë™ê¸°ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.ìž¥ì•  ê²©ë¦¬ ë° ë‚´ê²°í•¨ì„± (Fault Tolerance)  ìž¥ì : Kafkaì— ë°œí–‰ëœ ë©”ì‹œì§€ëŠ” ë””ìŠ¤í¬ì— ì €ìž¥ë˜ë¯€ë¡œ, êµ¬ë…ìžê°€ ìž ì‹œ ë‹¤ìš´ë˜ì–´ë„ ë©”ì‹œì§€ ìž¬ì²˜ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì„œë¹„ìŠ¤ ìž¥ì•  ë°œìƒ ì‹œì—ë„ ë°ì´í„° ìœ ì‹¤ ì—†ì´ ë³µêµ¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.  ì˜ˆì‹œ: Payment Serviceê°€ ë‹¤ìš´ë˜ì–´ë„, Kafkaì— ìŒ“ì¸ ORDER_CREATED ë©”ì‹œì§€ë¥¼ ì„œë¹„ìŠ¤ ë³µêµ¬ í›„ ë‹¤ì‹œ ì²˜ë¦¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.í™•ìž¥ì„±ê³¼ ìœ ì—°ì„±  ìž¥ì : ì„œë¹„ìŠ¤ ê°„ì— ì§ì ‘ì ì¸ í†µì‹ ì„ í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í™•ìž¥ì„±ì´ ë†’ì•„ì§€ê³ , ë…ë¦½ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ ë°°í¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ë¡œì¨ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  ì˜ˆì‹œ: Order Serviceì—ì„œ ë°œí–‰í•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ êµ¬ë…í•˜ëŠ” ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ì¶”ê°€í•´ë„ ê¸°ì¡´ ì‹œìŠ¤í…œì— ì˜í–¥ì´ ì—†ìŠµë‹ˆë‹¤.2-2. âœ… ìš”ì•½  Kafka ê¸°ë°˜ ì´ë²¤íŠ¸ ë“œë¦¬ë¸ ì•„í‚¤í…ì²˜ëŠ” í™•ìž¥ì„±, ìœ ì—°ì„±, ë‚´ê²°í•¨ì„± ë“± ì—¬ëŸ¬ ì¸¡ë©´ì—ì„œ ìœ ë¦¬í•©ë‹ˆë‹¤.3. ê°œì„  ê³¼ì •: REST API â†’ Kafka ê¸°ë°˜ ì•„í‚¤í…ì²˜ë¡œ ì „í™˜3-1. ê¸°ì¡´ êµ¬ì¡°: REST API ê¸°ë°˜Order -&gt; Payment -&gt; Delivery íë¦„ì„ REST APIë¡œ ì²˜ë¦¬í•˜ë©´ ë‹¤ìŒ ê³¼ì •ë“¤ì´ ë™ê¸°ì‹ìœ¼ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.  ì‚¬ìš©ìžê°€ ì£¼ë¬¸ ìƒì„± ìš”ì²­ -&gt; Order Service  Order Serviceê°€ ê²°ì œ ìš”ì²­ -&gt; Payment Service  ê²°ì œ ì„±ê³µ ì‹œ ë°°ì†¡ ìš”ì²­ -&gt; Delivery ServiceREST API ê¸°ë°˜ ë°©ì‹ì˜ ë¬¸ì œì ì€ ì„œë¹„ìŠ¤ ê°„ ê°•í•œ ê²°í•©ìœ¼ë¡œ ì¸í•´, ì¼ë¶€ ê³¼ì • ì¤‘ ìž¥ì• ê°€ ë°œìƒ ì‹œ ì „íŽ˜ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤íŒ¨í•˜ê²Œ ë©ë‹ˆë‹¤. ì¦‰ ì „ì²´ íŠ¸ëžœìž­ì…˜ì´ ëª¨ë“  ì„œë¹„ìŠ¤ë“¤ì˜ ì„±ê³µ ì—¬ë¶€ì— ì¢…ì†í•˜ê²Œ ë©ë‹ˆë‹¤.3-2. ê°œì„ ëœ êµ¬ì¡°: Kafka ì´ë²¤íŠ¸ ë“œë¦¬ë¸ ê¸°ë°˜Kafkaë¥¼ ë„ìž…í•˜ì—¬ ê° ë‹¨ê³„ì—ì„œ ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•˜ê³ , í•„ìš”í•œ ì„œë¹„ìŠ¤ê°€ ì´ë¥¼ êµ¬ë…í•˜ëŠ” êµ¬ì¡°ë¡œ ì „í™˜í•©ë‹ˆë‹¤.  ì‚¬ìš©ìžê°€ ì£¼ë¬¸ ìƒì„± ìš”ì²­ì„ í•˜ë©´ Order ServiceëŠ” ORDER_CREATED ì´ë²¤íŠ¸ë¥¼ Kafkaì— ë°œí–‰í•©ë‹ˆë‹¤.  Payment Serviceê°€ ì£¼ë¬¸ ìƒì„± ë©”ì‹œì§€ë¥¼ êµ¬ë…í•˜ì—¬ ê²°ì œ ì²˜ë¦¬ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.  ê²°ì œ ì„±ê³µ ì‹œ PAYMENT_COMPLETED ê²°ì œ ì„±ê³µ ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•©ë‹ˆë‹¤.  Delivery Serviceê°€ ê²°ì œ ì„±ê³µ ì´ë²¤íŠ¸ë¥¼ êµ¬ë…í•˜ì—¬ ë°°ì†¡ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.Kafkaë¥¼ ë„ìž…í•¨ìœ¼ë¡œì¨ ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ì¸í•œ ë¹ ë¥¸ ì‚¬ìš©ìž ì‘ë‹µì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ê°„ ëŠìŠ¨í•œ ê²°í•©ê³¼ Kafkaì˜ ë‚´ê²°í•¨ì„± ë•ë¶„ì— ìž¥ì•  ì „íŒŒ ì˜í–¥ë„ ìµœì†Œí™” ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê°ê°ì˜ ì„œë¹„ìŠ¤ë“¤ì´ ë…ë¦½ì ìœ¼ë¡œ ë°°í¬ê°€ ê°€ëŠ¥í•˜ê³ , ì‹ ê·œ ì„œë¹„ìŠ¤ ì¶”ê°€ê°€ ìš©ì´í•´ì§‘ë‹ˆë‹¤.4. ðŸš¨ Kafka ê¸°ë°˜ ì´ë²¤íŠ¸ ì•„í‚¤í…ì²˜ ì„¤ê³„ ì‹œ ê³ ë ¤ì‚¬í•­ë©”ì‹œì§€ ì¤‘ë³µ ì²˜ë¦¬  ì´ë²¤íŠ¸ê°€ ì¤‘ë³µìœ¼ë¡œ ì „ë‹¬ë  ìˆ˜ ìžˆê¸° ë•Œë¬¸ì—, ìˆ˜ì‹ ìž ì¸¡ì— ì¤‘ë³µ ë°©ì§€ ë¡œì§ì„ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.ë°ì´í„° ì •í•©ì„±  ë¹„ë™ê¸° êµ¬ì¡°ë¡œ ì¸í•´ ë°ì´í„° ì •í•©ì„±ì´ ê¹¨ì§ˆ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  í•´ê²°ì±…ìœ¼ë¡œ Sage íŒ¨í„´ ë˜ëŠ” Outbox íŒ¨í„´ì„ ë„ìž…í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì—ëŸ¬ í•¸ë“¤ë§ ë° ë³´ìƒ íŠ¸ëžœìž­ì…˜  íŠ¹ì • ì´ë²¤íŠ¸ ì²˜ë¦¬ ì‹¤íŒ¨ì— ëŒ€í•´ ë¹„ì¦ˆë‹ˆìŠ¤ ì‹¤íŒ¨ ì¼€ì´ìŠ¤ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ë³´ìƒ íŠ¸ëžœìž­ì…˜ ì„¤ê³„ê°€ í•„ìš”í•©ë‹ˆë‹¤.Kafka ëª¨ë‹ˆí„°ë§ ë° ìš´ì˜  Kafkaì˜ í† í”½, ë©”ì‹œì§€ ì ìž¬ëŸ‰, Lag ë“±ì„ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ì ì ˆí•œ ëŒ€ì‘ì„ í•  ìˆ˜ ìžˆë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤.  Kafkaê°€ SPOF(Single Point Of Failure)ì´ ë˜ì§€ ì•Šë„ë¡ ë©€í‹° í´ëŸ¬ìŠ¤í„°ë¡œ ìš´ì˜í•  í•„ìš”ê°€ ìžˆìŠµë‹ˆë‹¤.5. ì¶”ê°€ë¡œ ê³µë¶€í•˜ë©´ ì¢‹ì„ ë‚´ìš©  Kafkaì˜ At-Least-Once/Exactly-Once ë³´ìž¥ ë°©ì‹  Kafka ë©€í‹° í´ëŸ¬ìŠ¤í„° êµ¬ì„±  Saga íŒ¨í„´ê³¼ ë³´ìƒ íŠ¸ëžœìž­ì…˜6. ðŸ’¡ ì •ë¦¬  REST API ê¸°ë°˜ ë™ê¸°ì‹ í†µì‹ ì€ ì´ˆê¸°ì—ëŠ” ë¹ ë¥´ê²Œ ê°œë°œ ê°€ëŠ¥í•˜ì§€ë§Œ, í™•ìž¥ì„±ê³¼ ìœ ì—°ì„± ì¸¡ë©´ì—ì„œ í•œê³„ê°€ ì¡´ìž¬í•©ë‹ˆë‹¤.  Kafkaë¥¼ í™œìš©í•œ ì´ë²¤íŠ¸ ë“œë¦¬ë¸ ì•„í‚¤í…ì²˜ëŠ” ì„œë¹„ìŠ¤ ê°„ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³ , ìž¥ì•  ê²©ë¦¬ ë° í™•ìž¥ì„± ì¸¡ë©´ì—ì„œ ë›°ì–´ë‚œ ì´ì ì„ ì œê³µí•©ë‹ˆë‹¤.  í•˜ì§€ë§Œ, ì´ë²¤íŠ¸ ê¸°ë°˜ ì‹œìŠ¤í…œì„ ì„¤ê³„í•  ë•ŒëŠ” ì¤‘ë³µ ì²˜ë¦¬, ë°ì´í„° ì •í•©ì„±, ì—ëŸ¬ í•¸ë“¤ë§ê³¼ ê°™ì€ ì¶”ê°€ì ì¸ ê³ ë ¤ ì‚¬í•­ì„ ë°˜ë“œì‹œ ì‹ ê²½ì¨ì•¼ í•©ë‹ˆë‹¤.  ê¶ê·¹ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ Kafka ê¸°ë°˜ì˜ ì´ë²¤íŠ¸ ë“œë¦¬ë¸ ì•„í‚¤í…ì²˜ëŠ” ì„±ëŠ¥ê³¼ ìœ ì—°ì„± ì¸¡ë©´ì—ì„œ REST API ë°©ì‹ë³´ë‹¤ ìž¥ì ì´ ë§Žë‹¤ê³  ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.]]></content>
      <categories>
        
          <category> Spring Cloud </category>
        
          <category> MSA </category>
        
          <category> Kafka </category>
        
      </categories>
      <tags>
        
          <tag> REST API </tag>
        
          <tag> Event-driven </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Redissonì„ í™œìš©í•œ ë¶„ì‚° ë½ ê·¸ë¦¬ê³  AOP ì ìš©]]></title>
      <url>/msa/redis/2025/02/22/Redisson-Lock-and-AOP/</url>
      <content type="text"><![CDATA[  ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ Redisë¥¼ ì´ìš©í•œ ë¶„ì‚° ë½ì˜ í•„ìš”ì„±ê³¼ ë¶„ì‚° ë½ ì ìš© ë¶€ë¶„ì˜ AOP í™œìš© ë°©ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤.ðŸ“Œ ë“¤ì–´ê°€ê¸°MSAì™€ ê°™ì€ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œëŠ” ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ê°€ ë™ì‹œì— í•˜ë‚˜ì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ëŠ” ê²½ìš°ê°€ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì£¼ë¬¸ì´ ë™ì‹œë‹¤ë°œì ìœ¼ë¡œ ë°œìƒí•˜ì—¬ ìƒí’ˆì˜ ìž¬ê³ ë¥¼ ì°¨ê°í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ê°€ ìž¬ê³ ì— ì ‘ê·¼í•˜ëŠ” ê²½ìš°ê°€ ê·¸ë ‡ìŠµë‹ˆë‹¤.ì´ë•Œ ë™ì‹œì„± ì´ìŠˆê°€ ë°œìƒí•˜ì—¬ ë°ì´í„° ë¬´ê²°ì„±ì— ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ë¶„ì‚° ë½(Distributed Lock)ì´ í•„ìš”í•œ ê²ƒìž…ë‹ˆë‹¤.ë³¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” Redisê¸°ë°˜ì˜ ë¶„ì‚° ë½ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ Redissonë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ê³¼, ìŠ¤í”„ë§ AOP(Aspect Oriented Programming)ë¥¼ í†µí•´ ë½ ì²˜ë¦¬ ë¡œì§ì„ ë¶„ë¦¬í•˜ì—¬ ì½”ë“œì˜ ì‘ì§‘ë„ì™€ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì´ëŠ” ë°©ë²•ì„ ì‚´íŽ´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.Redis ë¼ì´ë¸ŒëŸ¬ë¦¬: Redissonì„ í™œìš©í•œ ë¶„ì‚° ë½RedisëŠ” ì¸ë©”ëª¨ë¦¬ ë°ì´í„° ì €ìž¥ì†Œë¡œ ë†’ì€ ì„±ëŠ¥ê³¼ ë¹ ë¥¸ ì‘ë‹µ ì†ë„ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ë¥¼ í™œìš©í•˜ì—¬ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ í˜¹ì€ ì„œë²„ ê°„ì— ë¶„ì‚° ë½ì„ êµ¬í˜„í•  ìˆ˜ ìžˆìœ¼ë©°, ë¶„ì‚° í™˜ê²½ì—ì„œì˜ ë™ì‹œì„± ì œì–´ì™€ ë°ì´í„° ë¬´ê²°ì„± í™•ë³´ì— í° ì—­í• ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.Redissonì€ Redisë¥¼ Java ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìžˆë„ë¡ ì§€ì›í•˜ëŠ” Redis í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ìž…ë‹ˆë‹¤. Redissonì€ ë¶„ì‚° ë½, ì„¸ë§ˆí¬ì–´ ë“± ì—¬ëŸ¬ ë™ì‹œì„± ê´€ë ¨ ê¸°ëŠ¥ì„ ì œê³µí•˜ë©°, ë³µìž¡í•œ ë½ ë¡œì§ì„ ë‹¨ìˆœí™”ì‹œì¼œ ì¤ë‹ˆë‹¤.Lettuce vs RedissonSpring Data Redis ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ Lettuce ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ Redis í´ë¼ì´ì–¸íŠ¸ë¡œ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” Lettuceê°€ ìžˆìŒì—ë„ ë¶„ì‚° ë½ì— Redissonì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?ë¶„ì‚° ë½ì— Lettuce ëŒ€ì‹  Redissonì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë½ íšë“ ë°©ì‹ ì°¨ì´ì ì— ìžˆìŠµë‹ˆë‹¤.LettuceëŠ” ìŠ¤ë ˆë“œê°€ ë½ íšë“ ëŒ€ê¸° ìƒíƒœì¼ ê²½ìš°, spin lock ë°©ì‹ìœ¼ë¡œ ëŒ€ê¸°í•˜ê²Œ ë©ë‹ˆë‹¤. ë§Žì€ ìŠ¤ë ˆë“œê°€ ìŠ¤í•€ ë½ìœ¼ë¡œ Redisì— ë½ì„ ìš”ì²­í•˜ê²Œ ë  ê²½ìš° Redisì— í° ë¶€í•˜ê°€ ìƒê¸¸ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë°˜ë©´ì— Redissonì€ ë½ íšë“ ë°©ì‹ì´ pub/sub ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìžˆê¸° ë•Œë¬¸ì— ìŠ¤í•€ ë½ ë°©ì‹ë³´ë‹¤ëŠ” Redisì— ë¶€í•˜ ë¶€ë‹´ì´ ì¤„ì–´ë“¤ê²Œ ë©ë‹ˆë‹¤. ë”ë¶ˆì–´ Redissonì€ ë½ íšë“ ìž¬ì‹œë„ë¥¼ ê¸°ë³¸ ë¡œì§ìœ¼ë¡œ ì œê³µí•´ì£¼ê¸° ë•Œë¬¸ì— íŽ¸ë¦¬í•˜ê²Œ Lockì„ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ í•´ì¤ë‹ˆë‹¤.Redisson Lock ì˜ˆì œ ì½”ë“œì•„ëž˜ëŠ” ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ Redissonì„ í™œìš©í•˜ì—¬ ë¶„ì‚° ë½ì„ êµ¬í˜„í•œ ì½”ë“œìž…ë‹ˆë‹¤. ë™ì‹œì„± ì´ìŠˆê°€ ë°œìƒí•  ìˆ˜ ìžˆëŠ” ìž‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ì „ì— ë¶„ì‚° ë½ì„ íšë“í•˜ê³ , ìž‘ì—…ì„ ë§ˆì³¤ë‹¤ë©´ ë½ì„ ë°˜ë‚©í•˜ë©´ ë©ë‹ˆë‹¤. ì´ë¡œì¨ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì ‘ê·¼í•˜ë”ë¼ë„ ë™ì‹œì„± ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.@Service@Slf4j@RequiredArgsConstructorpublic class RedissonLockService {    private final RedissonClient redissonClient;    public boolean tryLock(String key, long waitTime, long leaseTime) {        RLock lock = redissonClient.getLock(key);        try {            return lock.tryLock(waitTime, leaseTime, TimeUnit.SECONDS);            // waitTime: ë½ì„ ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„            // leaseTime: ë½ì´ ìžë™ìœ¼ë¡œ í•´ì œë˜ê¸°ê¹Œì§€ ìœ ì§€ë˜ëŠ” ì‹œê°„        } catch (InterruptedException e) {            log.error("Failed to acquire lock", e);            return false;        }    }    public void unlock(String key) {        RLock lock = redissonClient.getLock(key);        if (lock.isHeldByCurrentThread()) {            lock.unlock();        }    }}  tryLock ë©”ì„œë“œë¥¼ í†µí•´ ë½ íšë“ ì‹œë„ë¥¼ í•˜ê²Œ ë©ë‹ˆë‹¤. íšë“ì— ì„±ê³µí•œë‹¤ë©´ trueë¥¼ ë°˜í™˜í•˜ê³ , waitTimeë™ì•ˆ ë½ì„ íšë“í•˜ì§€ ëª»í•œë‹¤ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•˜ê³  falseë¥¼ ë°˜í™˜í•˜ê²Œ ë©ë‹ˆë‹¤.  tryLock ë©”ì„œë“œëŠ” ë¸”ë½í‚¹(blocking) ë©”ì„œë“œë¡œ, ë½ì„ íšë“í•˜ì§€ ëª» í•œ ê²½ìš° ìŠ¤ë ˆë“œê°€ ëŒ€ê¸° ìƒíƒœì— ë†“ì´ê²Œ ë©ë‹ˆë‹¤.  ë½ íšë“ keyëŠ” ë™ì‹œì„± ì´ìŠˆë¥¼ ì˜ˆë°©í•˜ê³ ìž í•˜ëŠ” ëŒ€ìƒì˜ ê³ ìœ í•œ ì‹ë³„ìžê°€ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ex: productId  waitTimeë™ì•ˆ ë½ íšë“ ëŒ€ê¸° ìƒíƒœì— ë†“ì´ê²Œ ë˜ë©°, ë½ì„ ì‚¬ìš©í•˜ë˜ ìŠ¤ë ˆë“œê°€ ë½ì„ í•´ì œí•˜ë©´ pub/sub ë°©ì‹ì„ í†µí•´ ëŒ€ê¸° ìƒíƒœì— ë†“ì—¬ìžˆë˜ ìŠ¤ë ˆë“œì—ê²Œ ë½ íšë“ ì‹œë„ë¥¼ í•˜ë¼ê³  ì•Œë¦¼ì„ ë³´ë‚´ê²Œ ë©ë‹ˆë‹¤.  ë§Œì•½ ë½ì„ íšë“í•˜ê³  ìž‘ì—… ì‹œê°„ì´ leaseTimeì„ ë„˜ì–´ê°€ê²Œ ë˜ë©´ ìžë™ìœ¼ë¡œ ë½ì´ í•´ì œë©ë‹ˆë‹¤. ë”°ë¼ì„œ leaseTime ì´ë‚´ë¡œ ìž‘ì—…ì´ ëë‚´ëŠ” ê²ƒì„ ë³´ìž¥í•´ì•¼ ë™ì‹œì„± ì´ìŠˆê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  ìž‘ì—…ì„ ë§ˆì¹œ ìŠ¤ë ˆë“œëŠ” unlockì„ í†µí•´ ë½ì„ í•´ì œí•˜ê²Œ ë©ë‹ˆë‹¤.ë¶„ì‚° ë½ í™œìš© ì˜ˆì œ ì½”ë“œ (ìž¬ê³  ì°¨ê°)ìƒí’ˆì˜ ìž¬ê³  ìˆ˜ëŸ‰ì„ ë³€ê²½ì‹œí‚¤ëŠ” ìž‘ì—…ì€ ë™ì‹œì„± ì´ìŠˆê°€ ë°œìƒí•˜ëŠ” ëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ìƒí’ˆ ìž¬ê³ ì˜ ìˆ˜ëŸ‰ì„ ë³€ê²½í•˜ê¸° ìœ„í•´ ë™ì‹œì— ì ‘ê·¼í•  ìˆ˜ ìžˆê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤.ì•žì„œ ì‚´íŽ´ë³¸ Redissonì„ í™œìš©í•œ ë¶„ì‚° ë½ì„ ìž¬ê³  ìˆ˜ëŸ‰ì„ ë³€ê²½í•˜ëŠ” ë¡œì§ ì „í›„ë¡œ ë½ì„ íšë“/í•´ì œë¥¼ í•œë‹¤ë©´ ë™ì‹œì„± ì´ìŠˆë¥¼ ì˜ˆë°©í•  ìˆ˜ ìžˆì„ ê²ë‹ˆë‹¤.@Transactional@Overridepublic Product decreaseStock(String productId, Integer quantity) {    long leaseTime = 5;    long waitTime = 10;    String lockKey = "lock:product:stock:" + productId;    try {      if (redissonLockService.tryLock(lockKey, waitTime, leaseTime)) { // ë½ íšë“ ì‹œë„        Optional&lt;Product&gt; findProduct = productRepository.findByProductId(productId);        if (findProduct.isEmpty()) {            throw new IllegalArgumentException("Product not found");        }        Product product = findProduct.get();        product.decreaseStock(quantity); // ìž¬ê³  ì°¨ê°        return product;      }    } finally {      redissonLockService.unlock(lockKey); // ë½ í•´ì œ     }}  ìƒí’ˆ ê³ ìœ  ì‹ë³„ìž(productId)ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒí’ˆ ë³„ë¡œ ë¶„ì‚° ë½ì„ ì œì–´í•  ìˆ˜ ìžˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.  ë½ì„ íšë“í•œ ê²½ìš°ì—ë§Œ ìž¬ê³  ìˆ˜ëŸ‰ì„ ì°¨ê°ì‹œí‚¬ ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.  ë½ íšë“ì— ì‹¤íŒ¨í•˜ê²Œ ë˜ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•˜ì—¬, ìž¬ê³  ìˆ˜ëŸ‰ ì°¨ê° ë¡œì§ì€ ìˆ˜í–‰í•˜ì§€ ëª» í•˜ê²Œ ë©ë‹ˆë‹¤.  ë½ íšë“ í›„ ìž‘ì—…ì„ ì™„ë£Œí–ˆë‹¤ë©´ ë½ì„ í•´ì œí•´ì¤ë‹ˆë‹¤.ë¶„ì‚° ë½ ì ìš© ë¶€ë¶„ì˜ AOP ë¶„ë¦¬ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë¶„ì‚° ë½ê³¼ ê°™ì€ íš¡ë‹¨ ê´€ì‹¬ì‚¬(cross-cutting concern)ëŠ” ì—¬ëŸ¬ ì„œë¹„ìŠ¤ ë©”ì„œë“œì—ì„œ ë°˜ë³µì ìœ¼ë¡œ êµ¬í˜„ë˜ê¸° ë•Œë¬¸ì—, ì´ë¥¼ ê°œë³„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë¶„ë¦¬í•˜ë©´ ì½”ë“œì˜ ê°€ë…ì„± ë° ìœ ì§€ë³´ìˆ˜ì„±ì´ í¬ê²Œ í–¥ìƒë©ë‹ˆë‹¤. ìŠ¤í”„ë§ AOPë¥¼ í™œìš©í•˜ë©´ ë©”ì„œë“œ í˜¸ì¶œ ì „í›„ì— ìžë™ìœ¼ë¡œ ë½ì„ íšë“í•˜ê³  í•´ì œí•˜ëŠ” ë¡œì§ì„ ì‚½ìž…í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  ì•„ëž˜ ë‚´ìš©ì€ AOPì— ëŒ€í•œ ì´í•´ê°€ í•„ìš”í•©ë‹ˆë‹¤!AOP ì ìš© ë°©ë²•ìŠ¤í”„ë§ AOPë¥¼ ì ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ë‹¨ê³„ë³„ë¡œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.ì–´ë…¸í…Œì´ì…˜ ì •ì˜ë½ì´ í•„ìš”í•œ ë©”ì„œë“œì— ì ìš©í•  ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜(@StockLock)ì„ ì •ì˜í•©ë‹ˆë‹¤.@Target(ElementType.METHOD)@Retention(RetentionPolicy.RUNTIME)public @interface StockLock {    long waitTime() default 5;    long leaseTime() default 10;}Aspect í´ëž˜ìŠ¤ ìž‘ì„±@Around ì–´ë“œë°”ì´ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ ë©”ì„œë“œì˜ ì‹¤í–‰ ì „í›„ì— ë¶„ì‚° ë½ íšë“ ë° í•´ì œ ë¡œì§ì„ ì‚½ìž…í•©ë‹ˆë‹¤.@Aspect@Slf4j@Component@Order(value = Integer.MAX_VALUE - 1) // AOP ìš°ì„ ìˆœìœ„ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.@RequiredArgsConstructorpublic class StockAspect {    private final RedissonLockService redissonLockService;    @Around("@annotation(stockLock) &amp;&amp; args(productId,..)")    public Object doLock(ProceedingJoinPoint joinPoint, StockLock stockLock, String productId) throws Throwable {        log.info("StockLockAspect.doLock {}", joinPoint.getSignature());        long leaseTime = stockLock.leaseTime();        long waitTime = stockLock.waitTime();        String lockKey = "lock:product:stock:" + productId;        if (redissonLockService.tryLock(lockKey, waitTime, leaseTime)) {            try {                return joinPoint.proceed();            } finally {                redissonLockService.unlock(lockKey);            }        } else {            log.error("ë½ì„ íšë“í•˜ì§€ ëª»í•˜ì—¬ ì¢…ë£Œí•©ë‹ˆë‹¤. productId={}", productId);            return false;        }    }}  ðŸš¨ AOP ìš°ì„  ìˆœìœ„ ì§€ì •  ìŠ¤í”„ë§ì˜ íŠ¸ëžœìž­ì…˜ ì²˜ë¦¬ë„ AOPë¥¼ í™œìš©í•©ë‹ˆë‹¤. ì´ë•Œ ë¶„ì‚° ë½ì˜ AOPì™€ íŠ¸ëžœìž­ì…˜ì˜ AOPì˜ ìˆœì„œê°€ êµ‰ìž¥ížˆ ì¤‘ìš”í•©ë‹ˆë‹¤. ë§Œì•½ íŠ¸ëžœìž­ì…˜ AOPê°€ ë¨¼ì € ì‹¤í–‰ëœë‹¤ë©´, ì—¬ì „ížˆ ë™ì‹œì„± ì´ìŠˆê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ì¡´ìž¬í•˜ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ë¶„ì‚° ë½ AOPë¥¼ ë¨¼ì € ì ìš©í•˜ê¸° ìœ„í•´ @Orderë¥¼ í†µí•´ ìˆœì„œë¥¼ ì§€ì •í•´ì¤ë‹ˆë‹¤. ì˜ˆì œ ì½”ë“œì—ì„œëŠ” Integer.MAX_VALUE - 1 ê°’ì„ ì§€ì •í•´ì£¼ì—ˆëŠ”ë°, ì´ëŠ” íŠ¸ëžœìž­ì…˜ì˜ ìš°ì„ ìˆœìœ„ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì œì¼ í›„ìˆœìœ„(INTEGER.MAX_VALUE)ì´ê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤.ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë¶„ë¦¬ì‹¤ì œ ì„œë¹„ìŠ¤ ë©”ì„œë“œëŠ” ë½ ê´€ë ¨ ì½”ë“œë¥¼ í¬í•¨í•˜ì§€ ì•Šê³ , AOPê°€ ì´ë¥¼ ëŒ€ì‹  ì²˜ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤.    @Transactional    @Override    @StockLock    public Product decreaseStock(String productId, Integer quantity) {        log.info("product-service: ìž¬ê³  ì°¨ê°");        Optional&lt;Product&gt; findProduct = productRepository.findByProductId(productId);        if (findProduct.isEmpty()) {            throw new IllegalArgumentException("Product not found");        }        Product product = findProduct.get();        product.decreaseStock(quantity);        return product;    }AOP ì ìš©ì˜ ìž¥ì ë½ íšë“ ë° í•´ì œ ë¡œì§ì„ í•œ ê³³ì—ì„œ ê´€ë¦¬í•˜ì—¬ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ ë©”ì„œë“œì— ì¤‘ë³µëœ ì½”ë“œë¥¼ ì œê±°í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë§Œì•½ ë½ ì²˜ë¦¬ ë¡œì§ì„ ë³€ê²½í•  ê²½ìš°, Aspect í´ëž˜ìŠ¤ë§Œ ìˆ˜ì •í•˜ë©´ ë˜ë¯€ë¡œ ê´€ë¦¬ê°€ ìš©ì´í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì„œë¹„ìŠ¤ ë©”ì„œë“œì—ì„œëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ë§Œ ì§‘ì¤‘í•  ìˆ˜ ìžˆì–´ ì½”ë“œì˜ ê°€ë…ì„±ì´ ì¢‹ì•„ì§‘ë‹ˆë‹¤.ê²°ë¡ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë¶„ì‚° ë½ì€ í•„ìˆ˜ì ì¸ ìš”ì†Œìž…ë‹ˆë‹¤. Redisì˜ Redissonì„ í™œìš©í•˜ë©´ ë†’ì€ ì„±ëŠ¥ê³¼ íŽ¸ë¦¬í•œ ë¶„ì‚° ë½ êµ¬í˜„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë˜í•œ AOPë¥¼ ì ìš©í•¨ìœ¼ë¡œì¨ ë½ ê´€ë ¨ ë¡œì§ì„ ë¶„ë¦¬í•˜ë©´ ì½”ë“œì˜ ìœ ì§€ë³´ìˆ˜ì„±ê³¼ ê°€ë…ì„±ì´ í¬ê²Œ í–¥ìƒë©ë‹ˆë‹¤. ë³¸ í¬ìŠ¤íŠ¸ë¥¼ ì°¸ê³ í•˜ì—¬ ë¶„ì‚° ë½ì„ ì‹¤ì œ êµ¬í˜„í•˜ëŠ” ë° ë„ì›€ì´ ë˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.ì°¸ê³  ìžë£Œ  ì¸í”„ëŸ° - ìž¬ê³ ì‹œìŠ¤í…œìœ¼ë¡œ ì•Œì•„ë³´ëŠ” ë™ì‹œì„±ì´ìŠˆ í•´ê²°ë°©ë²•  ì¹´ì¹´ì˜¤íŽ˜ì´ëŠ” ì–´ë–»ê²Œ ìˆ˜ì²œë§Œ ê²°ì œë¥¼ ì²˜ë¦¬í• ê¹Œ? ìš°ì•„í•œ ê²°ì œ ë¶„ì‚°ë½ ë…¸í•˜ìš° / if(kakaoAI)2024  í’€í•„ë¨¼íŠ¸ ìž…ê³  ì„œë¹„ìŠ¤íŒ€ì—ì„œ ë¶„ì‚°ë½ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²• - ë§ˆì¼“ ì»¬ë¦¬]]></content>
      <categories>
        
          <category> MSA </category>
        
          <category> Redis </category>
        
      </categories>
      <tags>
        
          <tag> AOP </tag>
        
          <tag> Distributed Lock </tag>
        
          <tag> Redisson </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[MSAì—ì„œ ë°ì´í„° ì¼ê´€ì„± ìœ ì§€ë¥¼ ìœ„í•œ Saga íŒ¨í„´]]></title>
      <url>/spring%20cloud/msa/2025/02/22/MSA-SAGA-Pattern/</url>
      <content type="text"><![CDATA[  Saga íŒ¨í„´ì´ ë¬´ì—‡ì´ê³ , MSA í™˜ê²¨ì—ì„œ ì™œ í•„ìš”í•œì§€ ì•Œì•„ë´…ì‹œë‹¤!ðŸ“Œ ë“¤ì–´ê°€ê¸°ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œëŠ” ê° ì„œë¹„ìŠ¤ê°€ ë…ë¦½ì ì¸ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê°€ì§€ê³  ìžˆìœ¼ë©°, ì„œë¹„ìŠ¤ ê°„ í†µì‹ ì„ í†µí•´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì—°ê²°ë˜ëŠ” ê²½ìš°ê°€ ë§ŽìŠµë‹ˆë‹¤.ì´ë•Œ, ë°ì´í„° ì¼ê´€ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•œë°, ì „í†µì ì¸ ë¶„ì‚° íŠ¸ëžœìž­ì…˜ ë°©ì‹ìœ¼ë¡œëŠ” í•œê³„ê°€ ìžˆìŠµë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” Saga íŒ¨í„´ì˜ í•„ìš”ì„±ê³¼ ì´ë¥¼ ë„ìž…í•˜ì§€ ì•Šì„ ê²½ìš° ë°œìƒí•  ìˆ˜ ìžˆëŠ” ë¬¸ì œì ì— ëŒ€í•´ ì‚´íŽ´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.1. ì „í†µì ì¸ ë¶„ì‚° íŠ¸ëžœìž­ì…˜MSA í™˜ê²½ì—ì„œ ê° ì„œë¹„ìŠ¤ëŠ” ë…ë¦½ì ì¸ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê°€ì§€ê³  ìžˆê¸° ë•Œë¬¸ì— ë°ì´í„° ì •í•©ì„±ì„ ìœ ì§€í•˜ê¸°ê°€ í›¨ì”¬ ì–´ë ¤ì›Œì§‘ë‹ˆë‹¤.ì „í†µì ì¸ ë¶„ì‚° íŠ¸ëžœìž­ì…˜ì€ ë°ì´í„° ì •í•©ì„± ë¶ˆì¼ì¹˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ì´ˆê¸° ì ‘ê·¼ ë°©ì‹ìœ¼ë¡œ, ì—¬ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤ì— ê±¸ì³ ì›ìžì„±(Atomicity)ì„ ë³´ìž¥í•˜ë ¤ëŠ” ë°©ì‹ì´ì—ˆìŠµë‹ˆë‹¤.ê·¸ëŸ¬ë‚˜ ì´ ë°©ì‹ì€ í•œê³„ì ê³¼ ë¬¸ì œì ì„ ë™ë°˜í•˜ê²Œ ë˜ë©°, ê²°ê³¼ì ìœ¼ë¡œ Saga íŒ¨í„´ê³¼ ê°™ì€ ëŒ€ì•ˆì´ ë“±ìž¥í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.ì „í†µì ì¸ ë¶„ì‚° íŠ¸ëžœìž­ì…˜ í•µì‹¬: 2-Phase Commit(2PC)MSA ë‹¤ì¤‘ ë°ì´í„°ë² ì´ìŠ¤ í™˜ê²½ì—ì„œ í•˜ë‚˜ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ìˆ˜í–‰ë  ë•Œ, ì—¬ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤ì— ê±¸ì³ ê´€ë ¨ ë°ì´í„°ë“¤ì´ ì €ìž¥ë©ë‹ˆë‹¤. ì „í†µì ì¸ ë¶„ì‚° íŠ¸ëžœìž­ì…˜ì—ì„œ ê°€ìž¥ ë„ë¦¬ ì‚¬ìš©ëœ í”„ë¡œí† ì½œë¡œ 2-Phase Commit(2PC)ê°€ ìžˆìŠµë‹ˆë‹¤. ì´ëŠ” íŠ¸ëžœìž­ì…˜ ê´€ë¦¬ìž(Transaction Coordinator)ê°€ ì¡´ìž¬í•˜ì—¬ ì „ì²´ íŠ¸ëžœìž­ì…˜ì„ ì¡°ìœ¨í•˜ëŠ” ë°©ì‹ìž…ë‹ˆë‹¤.ì „í†µì ì¸ ë¶„ì‚° íŠ¸ëžœìž­ì…˜ í•œê³„ì ì „í†µì ì¸ ë¶„ì‚° íŠ¸ëžœìž­ì…˜ í•œê³„ì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.  ë½í‚¹(Locking)ìœ¼ë¡œ ì¸í•œ ì„±ëŠ¥ ì €í•˜, ë³‘ëª© ì§€ì ì´ ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  íŠ¸ëžœìž­ì…˜ì€ ê´€ë¦¬í•˜ëŠ” ì½”ë””ë„¤ì´í„°ê°€ ë‹¨ì¼ ì‹¤íŒ¨ ì§€ì ì´ ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  ë„¤íŠ¸ì›Œí¬ ë¬¸ì œë¡œ ì¸í•´ íŠ¸ëžœìž­ì…˜ ê´€ë¦¬ìžì˜ ì§€ì‹œë¥¼ ë°›ì§€ ëª»í•˜ë©´, êµì°© ìƒíƒœ(Deadlock)ì— ë¹ ì§ˆ ìˆ˜ë„ ìžˆìŠµë‹ˆë‹¤.  ê´€ë¦¬í•˜ëŠ” ë…¸ë“œê°€ ë§Žì•„ì§ˆìˆ˜ë¡ íŠ¸ëžœìž­ì…˜ì„ ì¡°ìœ¨í•˜ê¸° ë³µìž¡í•´ì§‘ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì‹œìŠ¤í…œì˜ í™•ìž¥ì„±ì´ ì €í•˜ë©ë‹ˆë‹¤.ðŸ’¡ ìœ„ì™€ ê°™ì€ í•œê³„ì ë“¤ë¡œ ì¸í•´ ì „í†µì ì¸ 2PC ë°©ì‹ì€ ë‹¨ì¼ ì‹œìŠ¤í…œì´ë‚˜ ì ì€ ìˆ˜ì˜ ì„œë¹„ìŠ¤ì— ì í•©í•˜ì§€ë§Œ, í™•ìž¥ì„±, ê³ ê°€ìš©ì„±, ë¹„ë™ê¸°ì„±ì´ ì¤‘ìš”í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ëŠ” ì í•©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.â—ï¸ ì°¸ê³ ë¡œ, ì´ë²ˆ í¬ìŠ¤íŠ¸ì˜ ì£¼ì œëŠ” ì „í†µì ì¸ ë¶„ì‚° íŠ¸ëžœìž­ì…˜ì˜ í•œê³„ì ìœ¼ë¡œ ì¸í•œ Saga íŒ¨í„´ ë„ìž…ì˜ í•„ìš”ì„±ì„ ë‹¤ë£¨ëŠ” í¬ìŠ¤íŠ¸ìž…ë‹ˆë‹¤. ë”°ë¼ì„œ ì „í†µì ì¸ ë¶„ì‚° íŠ¸ëžœìž­ì…˜ì— ëŒ€í•œ ë‚´ìš©ì€ ì¶”í›„ ë‹¤ë¥¸ í¬ìŠ¤íŠ¸ì—ì„œ ìžì„¸ížˆ ë‹¤ë£¨ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.2. ì „í†µì ì¸ ë¶„ì‚° íŠ¸ëžœìž­ì…˜ì˜ ëŒ€ì•ˆì „í†µì ì¸ ë¶„ì‚° íŠ¸ëžœìž­ì…˜ì˜ ëŒ€ì•ˆìœ¼ë¡œ Saga íŒ¨í„´ê³¼ Outbox íŒ¨í„´ì´ ìžˆìŠµë‹ˆë‹¤.ë‘ íŒ¨í„´ ì¤‘ ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” Spring Cloud ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ Saga íŒ¨í„´ì„ ì ìš©í•œ ë‚´ìš©ì„ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.3. Saga íŒ¨í„´ì´ëž€?Saga íŒ¨í„´ì€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê°„ ë¶„ì‚° íŠ¸ëžœìž­ì…˜ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ íŒ¨í„´ìž…ë‹ˆë‹¤.ê° ì„œë¹„ìŠ¤ì˜ ë¡œì»¬ íŠ¸ëžœìž­ì…©ì„ í†µí•´ì„œ ì „ì²´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ëŠ” ë°©ë²•ì´ì£ .Saga íŒ¨í„´ì˜ í•µì‹¬ ì•„ì´ë””ì–´ëŠ” í•˜ë‚˜ì˜ í° íŠ¸ëžœìž­ì…˜ì„ ì—¬ëŸ¬ ê°œì˜ íŠ¸ëžœìž­ì…˜ìœ¼ë¡œ ë‚˜ëˆ„ê³ , ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë³´ìƒ íŠ¸ëžœìž­ì…˜(Compensating Transaction)ì„ ìˆ˜í–‰í•˜ì—¬ ì¼ê´€ì„±ì„ ë§žì¶”ëŠ” ê²ƒìž…ë‹ˆë‹¤.3-1. Saga íŒ¨í„´ ì˜ˆì‹œSaga íŒ¨í„´ì´ ë¬´ì—‡ì¸ì§€ ì´í•´í•˜ê¸° ì‰½ë„ë¡ ì˜ˆì‹œë¥¼ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.ì˜ˆë¥¼ ë“¤ì–´, Order Service -&gt; Payment Service -&gt; Product Service ì˜ ìˆœì„œë¡œ ì£¼ë¬¸ê³¼ ê²°ì œ ê·¸ë¦¬ê³  ìž¬ê³  ì°¨ê°ì´ ì´ë¤„ì§€ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ìžˆë‹¤ê³  í•˜ê² ìŠµë‹ˆë‹¤.  Order Service: ì£¼ë¬¸ ìƒì„± -&gt; ORDER_CREATED ì´ë²¤íŠ¸ ë°œí–‰.  Payment Service: ê²°ì œ ìš”ì²­ -&gt; ê²°ì œ ì„±ê³µ ì‹œ PAYMENT_COMPLETED ì´ë²¤íŠ¸ ë°œí–‰.  Product Service: ìž¬ê³  ì°¨ê° -&gt; ë§Œì•½ ìž¬ê³  ë¶€ì¡± ì‹œ, ì‹¤íŒ¨ ì´ë²¤íŠ¸ ë°œí–‰.ðŸŽ¯ ë§Œì•½ Product Serviceì—ì„œ ìž¬ê³  ë¶€ì¡±ìœ¼ë¡œ ì¸í•´ ì‹¤íŒ¨ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´, ë³´ìƒ íŠ¸ëžœìž­ì…˜ìœ¼ë¡œ ì£¼ë¬¸ ì·¨ì†Œ ë° ê²°ì œ ì·¨ì†Œë¥¼ ì§„í–‰í•´ì£¼ê²Œ ë©ë‹ˆë‹¤. ì´ì²˜ëŸ¼ ì‹¤íŒ¨ì— ëŒ€í•œ ë³´ìƒ ì²˜ë¦¬ë¥¼ í•´ì£¼ëŠ” ê²ƒì´ Saga íŒ¨í„´ìž…ë‹ˆë‹¤.4. Saga íŒ¨í„´ì˜ ì¢…ë¥˜Saga íŒ¨í„´ì—ëŠ” ì¢…ë¥˜ê°€ ì¡´ìž¬í•©ë‹ˆë‹¤. í¬ê²Œ Choreography(ì½”ë ˆì˜¤ê·¸ëž˜í”¼) ë°©ì‹ê³¼ Orchestration(ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜) ë°©ì‹ìœ¼ë¡œ ë‚˜ë‰˜ê²Œ ë©ë‹ˆë‹¤.ê° ë°©ì‹ì—ëŠ” ìž¥ë‹¨ì ì´ ì¡´ìž¬í•˜ë©°, í”„ë¡œì íŠ¸ í™˜ê²½ì— ë”°ë¼ ì ì ˆí•œ íŒ¨í„´ì„ ì ìš©í•˜ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.ê·¸ëŸ¼, ê° íŒ¨í„´ ì¢…ë¥˜ì˜ ìž¥ë‹¨ì ì„ ì‚´íŽ´ë³´ê² ìŠµë‹ˆë‹¤.4-1. Saga pattern - Choreography(ì½”ë ˆì˜¤ê·¸ëž˜í”¼)ì´ë²¤íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ê° ì„œë¹„ìŠ¤ê°€ ì§ì ‘ ì´ë²¤íŠ¸ë¥¼ êµ¬ë…í•˜ê³  ë‹¤ìŒ ìž‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” íŒ¨í„´ìž…ë‹ˆë‹¤. ì´ëŠ” ì¤‘ì•™ ì¡°ì •ìžê°€ ì—†ë‹¤ëŠ” ê²ƒì´ íŠ¹ì§•ìž…ë‹ˆë‹¤.  ìž¥ì : ë‹¨ìˆœí•œ êµ¬í˜„, ë‚®ì€ ë³µìž¡ì„±  ë‹¨ì : ì„œë¹„ìŠ¤ ê°„ ì˜ì¡´ì„± ì¦ê°€, ë³µìž¡í•œ ì´ë²¤íŠ¸ í”Œë¡œìš° ê´€ë¦¬ ì–´ë ¤ì›€ðŸ‘‰ ì˜ˆì‹œ  Order Service -&gt; ORDER_CREATED ì£¼ë¬¸ ìƒì„± ì´ë²¤íŠ¸ ë°œí–‰  Payment Service ê°€ ì£¼ë¬¸ ìƒì„± êµ¬ë… í›„ ê²°ì œ ì²˜ë¦¬ -&gt; PAYMENT_COMPLETED ê²°ì œ ì„±ê³µ ì´ë²¤íŠ¸ ë°œí–‰  Delivery Serviceê°€ ê²°ì œ ì„±ê³µ êµ¬ë… í›„ ë°°ì†¡ ìš”ì²­ ì²˜ë¦¬.4-2. Saga Pattern - Orchestration(ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜)ì¤‘ì•™ ì¡°ì •ìž(Service Orchestration)ê°€ ê° ì„œë¹„ìŠ¤ì— ìš”ì²­ì„ ë³´ë‚´ê³  ì „ì²´ íŠ¸ëžœìž­ì…˜ì„ ê´€ë¦¬ ë° ì¡°ìœ¨í•˜ëŠ” íŒ¨í„´ìž…ë‹ˆë‹¤.  ìž¥ì : ì„œë¹„ìŠ¤ ê°„ ì˜ì¡´ì„± ê°ì†Œ, ì¤‘ì•™ ì§‘ì¤‘ì‹ìœ¼ë¡œ ì „ì²´ í”Œë¡œìš° ê´€ë¦¬ ê°€ëŠ¥.  ë‹¨ì : Orchestrator(ì¤‘ì•™ ì¡°ì •ìž)ë¥¼ ì¶”ê°€ êµ¬í˜„í•´ì•¼ í•˜ë©°, ë‹¨ì¼ ì‹¤íŒ¨ ì§€ì (SPOF)ì´ ë  ìˆ˜ ìžˆìŒ.ðŸ‘‰ ì˜ˆì‹œ  Orchestratorê°€ Order Service ì— ì£¼ë¬¸ ìƒì„± ìš”ì²­  ì£¼ë¬¸ ìƒì„± -&gt; ê²°ì œ ìš”ì²­ -&gt; ìž¬ê³  ì°¨ê° -&gt; ë°°ì†¡ ìš”ì²­ ìˆœìœ¼ë¡œ ì „ì²´ ì´ë²¤íŠ¸ ë°œí–‰ ë° íŠ¸ëžœìž­ì…˜ ê´€ë¦¬  ì‹¤íŒ¨ ì‹œ ë³´ìƒ íŠ¸ëžœìž­ì…˜ì„ ì§ì ‘ í˜¸ì¶œâœ… 4-3 Saga Pattern ì¢…ë¥˜ ì •ë¦¬Saga íŒ¨í„´ì—ëŠ” Choreographyì™€ Orchestration ë‘ ë°©ì‹ì´ ì¡´ìž¬í•©ë‹ˆë‹¤.ë‘ ë°©ì‹ì€ ê°ê°ì˜ ìž¥ë‹¨ì ì´ ìƒë°˜ë˜ë©°, í”„ë¡œì íŠ¸ í™˜ê²½ì— ì•Œë§žê²Œ ì ì ˆí•œ íŒ¨í„´ ì¢…ë¥˜ë¥¼ ì„ íƒí•˜ë©´ ë©ë‹ˆë‹¤.ì°¸ê³ ë¡œ ì €ëŠ” ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ë•Œ ë‹¨ìˆœí•œ êµ¬í˜„ê³¼ ë‚®ì€ ë³µìž¡ì„±ìœ¼ë¡œ êµ¬ì„±ë˜ë„ë¡ ì›í–ˆê³ , ì¤‘ì•™ ì¡°ì •ìž ë„ìž…ì´ ì˜¤ížˆë ¤ ì„œë¹„ìŠ¤ê°€ ë§Žì•„ì§ˆ ìˆ˜ë¡ ì¤‘ì•™ ì¡°ì •ìžë¥¼ ê´€ë¦¬í•˜ê¸° ì–´ë ¤ì›Œ ì§ˆ ê²ƒì´ëž€ íŒë‹¨í•˜ì— Choreography(ì½”ë ˆì˜¤ê·¸ëž˜í”¼) ë°©ì‹ì„ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.5. Saga íŒ¨í„´ ì ìš© ì˜ˆì œ ì½”ë“œì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ Saga íŒ¨í„´(Choreography)ì„ ì ìš©í•œ ì˜ˆì œ ì½”ë“œë¥¼ ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤.ì°¸ê³ ë¡œ ì‹¤ì œ ì½”ë“œ ì „ë¶€ê°€ ì•„ë‹Œ Saga íŒ¨í„´ ì´í•´ë¥¼ ìœ„í•œ ê°„ì†Œí™”ëœ ì½”ë“œë¡œ ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤.Order Service - ORDER_CREATED ì´ë²¤íŠ¸ ë°œí–‰@Transactional@Overridepublic OrderDto createOrder(OrderDto orderDto) {    log.info("Order-service: ì£¼ë¬¸ ìƒì„±");        // ì£¼ë¬¸ ìƒì„± ë¡œì§ ...    // ORDER_CREATED ì´ë²¤íŠ¸ ë°œí–‰    OrderCreatedEvent orderCreatedEvent = new OrderCreatedEvent(            order.getOrderId(),            BigDecimal.valueOf(totalPrice),            orderDto.getPaymentInfos(),            orderDto.getDeliveryInfo());    orderEventProducer.send(ORDER_CREATED, orderCreatedEvent);}Payment Service - ORDER_CREATED ì´ë²¤íŠ¸ êµ¬ë… í›„ ê²°ì œ ì²˜ë¦¬@KafkaListener(topics = "ORDER_CREATED", groupId = "${spring.kafka.consumer.group-id:payment-service-group}")public void consume(ConsumerRecord&lt;String, String&gt; record) throws JsonProcessingException {    try {        String message = record.value();        log.info("Consumed message: {}", message);        OrderCreatedEvent orderCreatedEvent = objectMapper.readValue(message, OrderCreatedEvent.class);        log.info("Order created event: {}", orderCreatedEvent);        paymentHandler.handle(orderCreatedEvent); // ê²°ì œ ì²˜ë¦¬     } catch (Exception e) {        log.error("Error Consume OrderCreatedEvent", e);    }}ë§Œì•½, ê²°ì œ ì²˜ë¦¬ ì‹¤íŒ¨ ì‹œ ë³´ìƒ íŠ¸ëžœìž­ì…˜ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.PAYMENT_FAILED ì´ë²¤íŠ¸ ë°œí–‰ -&gt; Order Serviceì—ì„œ ê²°ì œ ì‹¤íŒ¨ë¥¼ êµ¬ë…í•˜ì—¬ ì£¼ë¬¸ ì·¨ì†Œë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.public void handle(Event event) {    try {        handleEvent(event);    } catch (Exception e) {        handleException(event, e);    }}private void handleException(Event event, Exception e) {    log.error("Error handling payment", e);    if (event instanceof OrderCreatedEvent orderCreatedEvent) {        paymentEventProducer.send(PAYMENT_FAILED, new PaymentFailedEvent(                orderCreatedEvent.getOrderId(),                null,                FAILED, e.getMessage()));    }    ...}6. Saga íŒ¨í„´ ë„ìž… ì‹œ ìž¥ì ë¶„ì‚° íŠ¸ëžœìž­ì…˜ ì²˜ë¦¬ë¥¼ ìœ„í•´ Saga íŒ¨í„´ì„ ë„ìž…í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ìž¥ì ì´ ìžˆìŠµë‹ˆë‹¤.6-1. ë°ì´í„° ì •í•©ì„± ë³´ìž¥ì„œë¹„ìŠ¤ ê°„ ë¹„ë™ê¸° ì²˜ë¦¬ì—ë„ Eventually Consistent(ìµœì¢… ì¼ê´€ì„±) ìƒíƒœë¥¼ ìœ ì§€í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì£¼ë¬¸ ìƒì„± í›„ ê²°ì œë¥¼ ì‹¤íŒ¨í•œë‹¤ë©´, ì£¼ë¬¸ì„ ì·¨ì†Œí•˜ì—¬ ë°ì´í„° ë¶ˆì¼ì¹˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì´ì²˜ëŸ¼, ë³´ìƒ íŠ¸ëžœìž­ì…˜ì„ í†µí•´ ë°ì´í„° ì¼ê´€ì„±ì´ ìœ ì§€ë©ë‹ˆë‹¤.6-2. ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë…ë¦½ì„± ìœ ì§€ê° ì„œë¹„ìŠ¤ëŠ” ë¡œì»¬ íŠ¸ëžœìž­ì…˜ë§Œ ê´€ë¦¬í•˜ë©´ ë˜ë¯€ë¡œ, ê°•í•œ ê²°í•©(Tightly Coupled)ì„ í”¼í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.6-3. í™•ìž¥ì„± í–¥ìƒì„œë¹„ìŠ¤ ê°„ì˜ ì§ì ‘ì ì¸ ì˜ì¡´ì„±ì´ ì¤„ì–´ë“¤ì–´, ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ì¶”ê°€ ë° í™•ìž¥ì´ ì‰¬ì›Œì§€ê²Œ ë©ë‹ˆë‹¤.7. Saga íŒ¨í„´ì„ ë„ìž…í•˜ì§€ ì•Šìœ¼ë©´ ë°œìƒí•˜ëŠ” ë¬¸ì œì 7-1. ë°ì´í„° ë¶ˆì¼ì¹˜ì‹¤íŒ¨ ì‹œ ì ì ˆí•œ ë³´ìƒ íŠ¸ëžœìž­ì…˜ì´ ì—†ë‹¤ë©´, ê²°ì œ ì‹¤íŒ¨ë‚˜ ìž¬ê³  ë¶€ì¡± ë“±ì˜ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ, ì£¼ë¬¸ ìƒíƒœëŠ” â€œì™„ë£Œâ€ì´ì§€ë§Œ ì‹¤ì œë¡œëŠ” ê²°ì œê°€ ë˜ì§€ ì•Šì€ ì£¼ë¬¸ì´ ë°œìƒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.7-2. ì‚¬ìš©ìž ê²½í—˜ ì €í•˜ì£¼ë¬¸ì€ ì™„ë£Œ ìƒíƒœì´ê³  ê²°ì œëŠ” ì‹¤íŒ¨í–ˆì„ ë•Œ, ì œëŒ€ë¡œëœ ë³´ìƒ íŠ¸ëžœìž­ì…˜ ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ â€œì£¼ë¬¸ ì •ìƒ ì²˜ë¦¬â€ë¼ëŠ” ìž˜ëª»ëœ ì •ë³´ë¥¼ ì‚¬ìš©ìžì—ê²Œ ì „ë‹¬í•  ìˆ˜ë„ ìžˆìŠµë‹ˆë‹¤.ðŸŽ¯ ê²°ë¡   Saga íŒ¨í„´ì€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ ë°ì´í„° ì •í•©ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•œ í•„ìˆ˜ ì„¤ê³„ íŒ¨í„´ìœ¼ë¡œ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  ë³´ìƒ íŠ¸ëžœìž­ì…˜ì„ í†µí•´ ì‹¤íŒ¨ ì‹œì—ë„ ì „ì²´ ì‹œìŠ¤í…œì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•  ìˆ˜ ìžˆìœ¼ë©°, ì„œë¹„ìŠ¤ ê°„ ê²°í•©ë„ë¥¼ ë‚®ì¶° í™•ìž¥ì„±ê³¼ ìœ ì—°ì„±ì„ í™•ë³´í•  ìˆ˜ ìžˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.Kafkaì™€ ê°™ì€ ì´ë²¤íŠ¸ ë“œë¦¬ë¸ ê¸°ë°˜ì˜ MSA í™˜ê²½ì—ì„œ Saga íŒ¨í„´ì„ ë„ìž…í•˜ì§€ ì•Šìœ¼ë©´, ë°ì´í„° ë¶ˆì¼ì¹˜ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ì˜¤ë¥˜ê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì•ˆì •ì ì¸ ì‹œìŠ¤í…œì„ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ Saga íŒ¨í„´ê³¼ ê°™ì€ ë¶„ì‚° íŠ¸ëžœìž­ì…˜ ê´€ë¦¬ ê¸°ë²•ì´ í•„ìš”í•©ë‹ˆë‹¤.ðŸ’¡ ì¶”ê°€ë¡œ ê³µë¶€í•˜ë©´ ì¢‹ì„ ë‚´ìš©  CAP ì´ë¡   2-Phase Commit  Outbox íŒ¨í„´]]></content>
      <categories>
        
          <category> Spring Cloud </category>
        
          <category> MSA </category>
        
      </categories>
      <tags>
        
          <tag> Saga pattern </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Spring Cloud Gatewayì™€ JWT - ë¶„ì‚° ì‹œìŠ¤í…œì˜ ì¤‘ì•™ì§‘ì¤‘ì‹ ì¸ì¦]]></title>
      <url>/spring%20cloud/msa/2025/02/19/Spring-Cloud-Gateway-Security/</url>
      <content type="text"><![CDATA[  Spring Cloud Gatewayì™€ JWTë¥¼ í™œìš©í•œ ì¤‘ì•™ ì§‘ì¤‘ì‹ ì¸ì¦ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤!ë“¤ì–´ê°€ê¸°ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ JWTì™€ ê°™ì€ í† í° ê¸°ë°˜ ì¸ì¦ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ Spring Cloud Gatewayì™€ JWT í† í° ê¸°ë°˜ ì¸ì¦ì„ ì‚¬ìš©ì˜ ì´ì ì— ëŒ€í•´ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°–ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ë¶„ì‚° ì‹œìŠ¤í…œ(No Token &amp; No Gateway)ìš°ì„ , ë¶„ì‚° í™˜ê²½ì—ì„œ API Gatewayì™€ í† í° ê¸°ë°˜ ì¸ì¦ ê¸°ìˆ ì„ ê²°í•©í•œ ì¤‘ì•™ì§‘ì¤‘ì‹ ì¸ì¦ ì‹œìŠ¤í…œì„ ë„ìž…í•˜ì§€ ì•ŠëŠ” ê²½ìš° ë°œìƒí•˜ëŠ” ë¬¸ì œì ë“¤ì— ëŒ€í•´ ë¨¼ì € ì‚´íŽ´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.      ì¤‘ì•™ì§‘ì¤‘ì‹ ì¸ì¦ ì‹œìŠ¤í…œì´ ì—†ë‹¤ë©´, ê° ì„œë¹„ìŠ¤ë§ˆë‹¤ ë³„ë„ì˜ ì¸ì¦/ì¸ê°€ ë¡œì§ì„ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” ì½”ë“œì˜ ì¤‘ë³µê³¼ ìœ ì§€ë³´ìˆ˜ì˜ ì–´ë ¤ì›€ì´ ë°œìƒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.        í† í° ëŒ€ì‹  ì‚¬ìš©í•˜ëŠ” ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ ë°©ì‹ì€ ì„œë²„ì— ìƒíƒœ ì •ë³´ë¥¼ ì €ìž¥í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì—, ë¶„ì‚° í™˜ê²½ì—ì„œì˜ ì„œë²„ ê°„ ì„¸ì…˜ ë™ê¸°í™” ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ëŠ” ì‹œìŠ¤í…œ í™•ìž¥ì„±ì— ì–´ë ¤ì›€ì„ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.  ë¶„ì‚° ì‹œìŠ¤í…œ(Gateway + Token ê¸°ë°˜)ê·¸ë ‡ë‹¤ë©´ Spring Cloud Gatewayì™€ JWT ê²°í•©ì˜ ì¤‘ì•™ ì§‘ì¤‘ì‹ ì¸ì¦ ì‹œìŠ¤í…œì€ ì–´ë– í•œ ìž¥ì ì´ ìžˆëŠ”ì§€ ì‚´íŽ´ë³´ê² ìŠµë‹ˆë‹¤.      ëª¨ë“  ìš”ì²­ì— ëŒ€í•œ ê²€ì‚¬ë¥¼ API Gatewayì—ì„œ í•œ ë²ˆì— ìˆ˜í–‰í•  ìˆ˜ ìžˆì–´, ê°œë³„ ì„œë¹„ìŠ¤ë§ˆë‹¤ ì¤‘ë³µëœ ì¸ì¦ ë¡œì§ì„ êµ¬í˜„í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë³´ì•ˆ ì„¤ì •ì˜ ì¼ê´€ì„±ì´ í™•ë³´ë˜ê³ , ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•´ì§‘ë‹ˆë‹¤.        JWTëŠ” í† í° ê¸°ë°˜ ì¸ì¦ ë°©ì‹ìœ¼ë¡œ, ë³„ë„ì˜ ì„¸ì…˜ ê´€ë¦¬ë¥¼ í•˜ì§€ ì•Šê³ ë„ ì‚¬ìš©ìž ì¸ì¦ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ì „ë‹¬ í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ëŠ” ë¶„ì‚° ì‹œìŠ¤í…œ í™˜ê²½ì—ì„œ íš¨ìœ¨ì ì¸ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ê³¼ í™•ìž¥ì„±ì„ ë³´ìž¥í•©ë‹ˆë‹¤.  ì˜ˆì œ ì½”ë“œì´ë²ˆì—ëŠ” ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ ì§ì ‘ Spring Cloud Gatewayì™€ JWTë¥¼ ê²°í•©í•œ ì¸ì¦ í•„í„°ë¥¼ ì‚´íŽ´ë³´ê² ìŠµë‹ˆë‹¤.ë‹¤ìŒ ì½”ë“œëŠ” Spring Cloud Gateway ì—ì„œ ì‚¬ìš©ìž ìš”ì²­ì˜ ë‹´ê²¨ ìžˆëŠ” Authorization í—¤ë”ì˜ JWT í† í°ì´ ìœ íš¨í•œì§€ ê²€ì¦í•˜ëŠ” ì½”ë“œìž…ë‹ˆë‹¤.@Component@Slf4jpublic class AuthorizationHeaderFilter extends AbstractGatewayFilterFactory&lt;AuthorizationHeaderFilter.Config&gt; {    public static class Config {    }    private Environment env;    public AuthorizationHeaderFilter(Environment env) {        super(Config.class);        this.env = env;    }    @Override    public GatewayFilter apply(Config config) {        return (exchange, chain) -&gt; {            ServerHttpRequest request = exchange.getRequest();            if (!request.getHeaders().containsKey(HttpHeaders.AUTHORIZATION)) {                return onError(exchange, "Authorization header is missing", HttpStatus.UNAUTHORIZED);            }            String authorizationHeader = request.getHeaders().get(HttpHeaders.AUTHORIZATION).get(0);            String jwt = authorizationHeader.replace("Bearer", "").trim();            if (isNotValidJwt(jwt)) {                return onError(exchange, "JWT is not valid", HttpStatus.UNAUTHORIZED);            }            return chain.filter(exchange);        };    }    // WebFlux method to handle errors    private Mono&lt;Void&gt; onError(ServerWebExchange exchange, String err, HttpStatus httpStatus) {        exchange.getResponse().setStatusCode(httpStatus);        log.error(err);        return exchange.getResponse().setComplete();    }    private boolean isNotValidJwt(String jwt) {        boolean returnValue = false;        String secretKey = env.getProperty("token.secret");        byte[] keyBytes = Base64.getDecoder().decode(secretKey);        SecretKey key = Keys.hmacShaKeyFor(keyBytes);        String subject = Jwts.parser()                .setSigningKey(key)                .build()                .parseClaimsJws(jwt)                .getBody()                .getSubject();        if (subject == null || subject.isEmpty()) {            returnValue = true;        }        return returnValue;    }}  ìœ„ ì½”ë“œì²˜ëŸ¼ Gatewayì—ì„œ ëª¨ë“  ìš”ì²­ì— ëŒ€í•œ ì¸ì¦ì„ í•œ ë²ˆì— ì²˜ë¦¬í•¨ìœ¼ë¡œì¨ ë³´ì•ˆ ê´€ë¦¬ê°€ ìš©ì´í•´ì§‘ë‹ˆë‹¤.  ê·¸ë¦¬ê³  ê° ì„œë¹„ìŠ¤ì—ì„œ ë³„ë„ì˜ ì„¸ì…˜ ê´€ë¦¬ë¥¼ í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.  ì¸ì¦/ì¸ê°€ ë¡œì§ì„ ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ì²˜ë¦¬í•˜ë¯€ë¡œ ê° ë°±ì—”ë“œ ì„œë¹„ìŠ¤ì˜ ì¤‘ë³µëœ ì½”ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì´ì²˜ëŸ¼ Spring Cloud Gatewayì™€ JWT ì¸ì¦ì˜ ê²°í•©ì€ ë³µìž¡í•œ ë¶„ì‚° í™˜ê²½ì—ì„œ ì•ˆì •ì ì´ê³  íš¨ìœ¨ì ì¸ ì¸ì¦/ì¸ê°€ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•´ì¤ë‹ˆë‹¤.ì¶”ê°€ë¡œ ê³ ë ¤í•´ë³¼ ë§Œí•œ ë‚´ìš©  JWT ì‚¬ìš© ì‹œ ë°œìƒí•  ìˆ˜ ìžˆëŠ” ë³´ì•ˆ ì´ìŠˆì™€ ì´ì— ëŒ€í•œ ëŒ€ì‘ ë°©ë²•ìš”ì•½Spring Cloud Gatewayì™€ JWT ê²°í•© ì‚¬ìš©ì˜ ì´ìœ  ë° ê¸°ëŒ€ íš¨ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.  ì¤‘ì•™ ì§‘ì¤‘ì‹ ë³´ì•ˆ ê´€ë¦¬ë¡œ ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´  ë¶„ì‚° í™˜ê²½ì— ì í•©í•œ stateless ì¸ì¦ ë°©ì‹  í™•ìž¥ì„±ê³¼ ìœ ì—°ì„± í™•ë³´  íš¨ìœ¨ì ì¸ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©]]></content>
      <categories>
        
          <category> Spring Cloud </category>
        
          <category> MSA </category>
        
      </categories>
      <tags>
        
          <tag> JWT </tag>
        
          <tag> Spring Cloud Gateway </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Spring Cloud Gatewayë¥¼ í™œìš©í•œ API Gateway êµ¬ì¶•]]></title>
      <url>/spring%20cloud/msa/2025/02/18/Spring-Cloud-Gateway/</url>
      <content type="text"><![CDATA[  Spring Cloud Gatewayì˜ ì—­í• , ë¼ìš°íŒ… ë° í•„í„° ì²˜ë¦¬ ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤!ðŸ“Œ ë“¤ì–´ê°€ê¸°Gatewayëž€ ë¬´ì—‡ì¸ê°€?GatewayëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ë‚´ë¶€ ì‹œìŠ¤í…œ(ex: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤) ê°„ì˜ ë‹¨ì¼ ì§„ìž…ì  ì—­í• ì„ í•˜ëŠ” ë¯¸ë“¤ ì›¨ì–´ìž…ë‹ˆë‹¤.ëª¨ë“  ì™¸ë¶€ ìš”ì²­ì€ ë¨¼ì € Gatewayë¥¼ í†µí•´ ë“¤ì–´ì˜¤ë©°, ì´ê³³ì—ì„œ ì¸ì¦, ì¸ê°€, ë¡œê¹…, ëª¨ë‹ˆí„°ë§ ë“± ê³µí†µ ê¸°ëŠ¥ì„ ì²˜ë¦¬í•œ í›„ ì ì ˆí•œ ë‚´ë¶€ ì„œë¹„ìŠ¤ë¡œ ìš”ì²­ì„ ì „ë‹¬í•©ë‹ˆë‹¤.ì´ë¥¼ í†µí•´ ê°œë³„ ì„œë¹„ìŠ¤ëŠ” ë³¸ì—°ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì§‘ì¤‘í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.ì™œ Spring Cloud Gatewayë¥¼ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?      Spring Cloud GatewayëŠ” Spring Boot, Spring Security ë“±ê³¼ ìžì—°ìŠ¤ëŸ½ê²Œ ì—°ë™ë˜ë¯€ë¡œ, ê¸°ì¡´ Spring ê¸°ë°˜ ì‹œìŠ¤í…œì— ì‰½ê²Œ ë„ìž…í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.        Netty ê¸°ë°˜ì˜ Spring Cloud GatewayëŠ” ë¹„ë™ê¸°, ë…¼ë¸”ë¡œí‚¹ ë°©ì‹ìœ¼ë¡œ ë™ìž‘í•˜ì—¬ ë†’ì€ ë™ì‹œì„± ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë©°, ì„±ëŠ¥ê³¼ í™•ìž¥ì„± ë©´ì—ì„œ ìš°ìˆ˜í•©ë‹ˆë‹¤.        application.yml ì„¤ì • íŒŒì¼ì— ì„ ì–¸ì  ì„¤ì •ì„ í†µí•´ ì‰½ê²Œ ë¼ìš°íŒ… ê·œì¹™ì„ ì •ì˜í•˜ê³ , ì „/í›„ ì²˜ë¦¬ í•„í„°ë¥¼ ì ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¤ì–‘í•œ ìš”êµ¬ì‚¬í•­ì— ë§žì¶° Gatewayë¥¼ ìœ ì—°í•˜ê²Œ êµ¬ì„±í•  ìˆ˜ ìžˆê²Œ í•´ì¤ë‹ˆë‹¤.  ì´ì™€ ê°™ì´ Spring Cloud GatewayëŠ” Spring ìƒíƒœê³„ì™€ì˜ ì›í™œí•œ í†µí•©ì„ ì§€ì›í•˜ë©°, ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ ë°œìƒí•  ìˆ˜ ìžˆëŠ” ë‹¤ì–‘í•œ ë¬¸ì œ(ì½”ë“œ ì¤‘ë³µ, ë³´ì•ˆ ì·¨ì•½ì , ì„±ëŠ¥ ë° í™•ìž¥ì„± ë¬¸ì œ ë“±)ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ í•´ê²°í•´ì¤ë‹ˆë‹¤.ê¸°ë³¸ ë¼ìš°íŒ… ì„¤ì •application.yml íŒŒì¼ì— ì„ ì–¸ì  ë¼ìš°íŒ… ì„¤ì •ì„ í†µí•´, ìš”ì²­ URLì— ë”°ë¼ ë‚´ë¶€ ì„œë¹„ìŠ¤ë¡œ ìš”ì²­ì„ ì „ë‹¬í•©ë‹ˆë‹¤.spring:  application:    name: gateway-service  cloud:    gateway:      routes:        - id: user-service          uri: http://localhost:8080 # lb://USER-SERVICE          predicates:            - Path=/user-service/test/**            - Method=GET  ìœ„ ê²Œì´íŠ¸ì›¨ì´ ë¼ìš°íŒ… ì„¤ì •ì€ HTTP ë©”ì„œë“œê°€ GET ìš”ì²­ì´ê³ , ê²½ë¡œê°€ /user-service/test/**ì— ë§¤ì¹­ë˜ëŠ” ê²½ìš° http://localhost:8080 ì—ì„œ ì‹¤í–‰ì¤‘ì¸ user-service ë¡œ ë¼ìš°íŒ…í•´ì¤ë‹ˆë‹¤.  ë§Œì•½ ë””ìŠ¤ì»¤ë²„ë¦¬ ì„œë¹„ìŠ¤ì¸ Eurekaë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ë¼ìš°íŒ… URIë¥¼ lb://USER-SERVICE ì²˜ëŸ¼ ì„œë¹„ìŠ¤ ì´ë¦„ìœ¼ë¡œ ìž‘ì„±í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. (lb://{application.name})ì „ì—­ í•„í„°spring:  application:    name: gateway-service  cloud:    gateway:      default-filters:        - name: MyGlobalFilter          args:            preFilter: true            postFilter: true  spring.cloud.gateway.default-filters: ì „ì—­ í•„í„° í´ëž˜ìŠ¤ë¥¼ ì§€ì •í•´ì¤„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ë•Œ í•„í„° ê°ì²´ì— ì¸ìˆ˜(args)ë¥¼ ì „ë‹¬í•´ì¤„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.          name: ì „ì—­ í•„í„° í´ëž˜ìŠ¤ëª…      args: ëª…ì‹œëœ ì¸ìˆ˜ê°’ë“¤ì´ ì „ì—­ í•„í„° ë‚´ë¶€ì˜ ì¤‘ì²© í´ëž˜ìŠ¤ì¸ Configì™€ ë§¤í•‘ëœ í›„, í•„í„° ê¸°ëŠ¥ì„ í•˜ëŠ” apply ë©”ì„œë“œì˜ ì¸ìžë¡œ ì „ë‹¬ë©ë‹ˆë‹¤. (ì½”ë“œë¥¼ ë³´ë©´ ì‰½ê²Œ ì´í•´í•˜ì‹¤ ìˆ˜ ìžˆì„ ê²ë‹ˆë‹¤.)        ðŸ’¡ ì°¸ê³ ë¡œ í•„í„°ì— ì¸ìž ê°’ì„ ì „ë‹¬í•˜ë ¤ë©´ í•„í„°ì— name ì†ì„±ê°’ì„ ì ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ ë‹¤ìŒ ì•„ëž«ì¤„ì— args ë¥¼ ìž‘ì„±í•˜ë©´ ë©ë‹ˆë‹¤.MyGlobalFilterSpring Cloud Gatewayì—ì„œ ë™ìž‘í•˜ëŠ” í•„í„° í´ëž˜ìŠ¤ëŠ” ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” AbstractGatewayFilterFactoryë¥¼ ìƒì†í•˜ê³  apply ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”© í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.ê·¸ë¦¬ê³ , argsë¥¼ ì „ë‹¬ ë°›ì„ ì¤‘ì²© í´ëž˜ìŠ¤(MyGlobalFilter.Config)ë¥¼ ë¶€ëª¨ í´ëž˜ìŠ¤ì˜ ì œë„¤ë¦­ìœ¼ë¡œ ì „ë‹¬ í•´ì¤ë‹ˆë‹¤.@Slf4j@Componentpublic class MyGlobalFilter extends AbstractGatewayFilterFactory&lt;MyGlobalFilter.Config&gt; {    public MyGlobalFilter() {        super(Config.class);    }    @Override    public GatewayFilter apply(Config config) {        return (exchange, chain) -&gt; {            // Pre Filter            if (config.isPreFilter()) log.info("Global Pre Filter executed");            // Post Filter            return chain.filter(exchange).then(Mono.fromRunnable(() -&gt; {                if (config.isPostFilter()) log.info("Global Post Filter executed");            }));        };    }    @Data    public static class Config {        private boolean preFilter;        private boolean postFilter;    }}  MyGlobalFilter í´ëž˜ìŠ¤ ë‚´ë¶€ì˜ ì¤‘ì²© í´ëž˜ìŠ¤ì¸ Config ê°ì²´ì— application.yml ì—ì„œ ì„¤ì •í•œ args ë¥¼ ì „ë‹¬ë°›ê²Œ ë©ë‹ˆë‹¤.  apply ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ return ì „ ì˜ì—­ì€ PreFilter ì´ê³ , return êµ¬ë¬¸ì€ PostFilter ì˜ì—­ìž…ë‹ˆë‹¤.  ìš”ì²­ì„ ë¼ìš°íŒ… í•˜ê¸° ì „ì— PreFilterê°€ ë™ìž‘í•˜ê³ , ìš”ì²­ëœ ë¼ìš°íŒ…ì´ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì—ì„œ ì²˜ë¦¬ë¥¼ ë§ˆì¹œ í›„ ì‘ë‹µì´ ëŒì•„ì˜¤ë©´ ê·¸ì œì„œì•¼ PostFilterê°€ ë™ìž‘í•©ë‹ˆë‹¤.Custom Filterspring:  application:    name: gateway-service  cloud:    gateway:      default-filters:        - name: MyGlobalFilter          args:            preFilter: true            postFilter: true      routes:        - id: user-service          uri: http://localhost:8080          predicates:            - Path=/user-service/**          filters:            - RemoveRequestHeader=Cookie            - RewritePath=/user-service/(?&lt;segment&gt;.*), /$\{segment}            - `MyCustomFilter`            - name: MyLoggingFilter              args:                baseMessage: MyLoggingFilter start                preLogger: true                postLogger: true  spring.cloud.gateway.routes.filters: í•´ë‹¹ ì†ì„±ì— ì„ ì–¸ëœ í•„í„°ë“¤ì€ ë¼ìš°íŒ… ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìš”ì²­ì— ëŒ€í•´ì„œë§Œ í•„í„°ê°€ ìž‘ë™í•©ë‹ˆë‹¤. ì¦‰, ë‹¤ë¥¸ ë¼ìš°íŒ… ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìš”ì²­ì— ëŒ€í•´ì„  í•„í„°ê°€ ë™ìž‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.          ì˜ˆë¥¼ ë“¤ì–´, ìœ„ ì„¤ì •ì—ì„œëŠ” uriê°€ http://localhost:8080 ì´ê³ , path(ê²½ë¡œ)ê°€ /user-service/** ì— ë§¤ì¹­ë˜ëŠ” ìš”ì²­ì— ëŒ€í•´ì„œë§Œ filters ë“¤ì´ ì ìš©ë©ë‹ˆë‹¤.        RemoveRequestHeader, RewritePathì™€ ê°™ì´ ê¸°ë³¸ì ìœ¼ë¡œ ìŠ¤í”„ë§ì—ì„œ ì§€ì›í•˜ëŠ” ì„ ì–¸ì  ì„¤ì •ë„ ì¡´ìž¬í•˜ê³ , MyCustomFilter, MyLoggingFilterì™€ ê°™ì´ ê°œë°œìžê°€ ì •ì˜í•œ ì»¤ìŠ¤í…€ í•„í„°ë¥¼ ì§€ì •í•  ìˆ˜ë„ ìžˆìŠµë‹ˆë‹¤.  âœ… ì„¤ì • íŒŒì¼(application.yml) ë‚´ì—ì„œ ë‚˜ì—´ëœ ë¼ìš°íŠ¸(route)ë‚˜ ê° ë¼ìš°íŠ¸ì— ì •ì˜ëœ í•„í„°(filters)ëŠ” ì„ ì–¸í•œ ìˆœì„œ(ìœ„ì—ì„œ ì•„ëž˜)ëŒ€ë¡œ ì²˜ë¦¬ë˜ëŠ” ê²ƒì´ ì¼ë°˜ì ìž…ë‹ˆë‹¤. ì¦‰, ë³„ë„ì˜ order ì†ì„±ì„ ì§€ì •í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ëŠ” ìœ„ì—ì„œ ì•„ëž˜ë¡œ ìš°ì„ ìˆœìœ„ê°€ ì ìš©ë©ë‹ˆë‹¤.Discovery Serviceì™€ Spring Cloud GatewaySpring Cloud Netflix Eurekaë¥¼ ì‚¬ìš© í™˜ê²½ì´ë¼ë©´, Spring Cloud GatewayëŠ” ë¡œë“œë°¸ëŸ°ì„œì˜ ì—­í• ë„ ìˆ˜í–‰í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì•žì„œ ì‚´íŽ´ë´¤ë˜ user-service ì˜ Uri ê²½ë¡œë¥¼ lb://USER-SERVICE ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ë„¤ìž„ì„ ì ì–´ì£¼ë©´ ë””ìŠ¤ì»¤ë²„ë¦¬ ì„œë¹„ìŠ¤ë¡œë¶€í„° í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ ìœ„ì¹˜ë¥¼ íƒìƒ‰í•˜ì—¬ ë¡œë“œë°¸ëŸ°ì‹± í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.spring:  application:    name: gateway-service  cloud:    gateway:      routes:        - id: user-service          uri: lb://USER-SERVICE          predicates:            - Path=/user-service/test/**            - Method=GETì´ë•Œ, ë§Œì•½ user-service ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë‹¤ì¤‘í™” ë˜ì–´ ìžˆë‹¤ë©´, Spring Cloud GatewayëŠ” ë¼ìš´ë“œ ë¡œë¹ˆ(Round Robin) ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë¡œë“œë°¸ëŸ°ì‹±ì„ ì²˜ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ì™€ ê°™ì´ Spring Cloud GatewayëŠ” ë‹¨ìˆœí•œ API ê²Œì´íŠ¸ì›¨ì´ ê¸°ëŠ¥ì„ ë„˜ì–´, ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì™€ í†µí•©ë˜ì–´ ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ ê°„ì˜ ë¡œë“œë°¸ëŸ°ì‹± ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.ë”°ë¼ì„œ ì‹œìŠ¤í…œì˜ ë¶€í•˜ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ë¶„ì‚°ì‹œì¼œ, ì„œë¹„ìŠ¤ì˜ ê°€ìš©ì„±ê³¼ ì•ˆì •ì„±ì„ ë†’ì—¬ì£¼ê³  ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œì˜ ìš´ì˜ íš¨ìœ¨ì„±ì„ í¬ê²Œ í–¥ìƒì‹œì¼œ ì¤ë‹ˆë‹¤.ðŸŽ¯ ìš”ì•½  í´ë¼ì´ì–¸íŠ¸ì™€ ë‚´ë¶€ ì‹œìŠ¤í…œ ê°„ì˜ ë‹¨ì¼ ì§„ìž…ì  ì—­í• ì„ ìˆ˜í–‰í•˜ë©°, ì¸ì¦, ì¸ê°€, ë¡œê¹…, ëª¨ë‹ˆí„°ë§ ë“± ê³µí†µ ê¸°ëŠ¥ì„ ì¤‘ì•™ì§‘ì¤‘ì ìœ¼ë¡œ ì²˜ë¦¬.  Spring ìƒíƒœê³„ì™€ì˜ ì›í™œí•œ í†µí•©, Netty ê¸°ë°˜ì˜ ë¹„ë™ê¸° ë…¼ë¸”ë¡œí‚¹ ì²˜ë¦¬, ì„ ì–¸ì  ì„¤ì •ì„ í†µí•œ ìœ ì—°í•œ ë¼ìš°íŒ… ë° í•„í„° ê´€ë¦¬ ë“±ìœ¼ë¡œ ë†’ì€ ì„±ëŠ¥ê³¼ í™•ìž¥ì„±ì„ ì œê³µ.  Spring Cloud Netflix Eurekaì™€ ì—°ë™í•˜ì—¬, lb:// ì ‘ë‘ì‚¬ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ë™ì  ë¡œë“œë°¸ëŸ°ì‹±(ë¼ìš´ë“œ ë¡œë¹ˆ ì•Œê³ ë¦¬ì¦˜)ì„ ìˆ˜í–‰, ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ ê°„ì˜ ë¶€í•˜ ë¶„ì‚°ê³¼ ì‹œìŠ¤í…œ ì•ˆì •ì„±ì„ í™•ë³´ðŸ“‚ ì°¸ê³  ìžë£Œ  Spring Cloud Gateway Docs  Netty]]></content>
      <categories>
        
          <category> Spring Cloud </category>
        
          <category> MSA </category>
        
      </categories>
      <tags>
        
          <tag> Spring Cloud Gateway </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Spring Cloud Configë¥¼ ì´ìš©í•œ í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬]]></title>
      <url>/spring%20cloud/msa/2025/02/17/Spring-Cloud-Config-Server/</url>
      <content type="text"><![CDATA[  Spring Cloud Configë¡œ ë¶„ì‚° í™˜ê²½ì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •ì„ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤!Spring Cloud Configëž€?Spring Cloud ConfigëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ í™˜ê²½ì—ì„œ ê° ì„œë¹„ìŠ¤ì˜ ì„¤ì •ì„ ì¤‘ì•™ ì§‘ì¤‘ì‹ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìžˆê²Œ ë„ì™€ì£¼ëŠ” ë„êµ¬ìž…ë‹ˆë‹¤.ì„¤ì • ì •ë³´ë¥¼ ë³„ë„ì˜ Config Serverì—ì„œ ê´€ë¦¬í•˜ê³ , ê° ì„œë¹„ìŠ¤ëŠ” Config Serverë¡œë¶€í„° ì„¤ì •ì„ ì „ë‹¬ë°›ì•„ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„±ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.ì™œ Spring Config Serverê°€ í•„ìš”í•œê°€?ì¼ê´€ì„±MSA í™˜ê²½ì—ì„œëŠ” ê° ì„œë¹„ìŠ¤ê°€ ê°œë³„ì ìœ¼ë¡œ ì„¤ì •ì„ ê´€ë¦¬í•  ê²½ìš° ì„¤ì •ì˜ ì¤‘ë³µ ë° ë¶ˆì¼ì¹˜ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.Config Serverë¥¼ í†µí•´ ì¤‘ì•™ ì§‘ì¤‘ì‹ìœ¼ë¡œ ì„¤ì •ì„ ê´€ë¦¬í•˜ê²Œ ë˜ë©´ ì„¤ì • ì •ë³´ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.ê·¸ëŸ¬ë¯€ë¡œ ë¶„ì‚° ì‹œìŠ¤í…œì˜ ì„¤ì • ë³µìž¡ì„±ì„ í•´ì†Œí•  ìˆ˜ ìžˆê²Œ ë˜ëŠ” ê²ƒì´ì£ .ë™ì  ëŒ€ì‘ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒˆë¡œìš´ ì„¤ì •ì„ ì ìš©í•˜ë ¤ë©´, ë³´í†µ ì• í”„ë¦¬ì¼€ì´ì…˜ì„ ìž¬ì‹œìž‘í•´ì•¼ë§Œ í•©ë‹ˆë‹¤.í•˜ì§€ë§Œ, Config ServerëŠ” ê° ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ì´ ìž¬ì‹œìž‘í•˜ì§€ ì•Šê³ ë„ ë™ì ìœ¼ë¡œ ì„¤ì •ì„ ë³€ê²½í•  ìˆ˜ ìžˆë„ë¡ í•´ì¤ë‹ˆë‹¤.ì´ë¡œì¨ ìš´ì˜ ì¤‘ ë°œìƒí•  ìˆ˜ ìžˆëŠ” ì´ìŠˆì— ë¹ ë¥´ê²Œ ëŒ€ì‘í•  ìˆ˜ ìžˆë‹¤ëŠ” ìž¥ì ì´ ìžˆìŠµë‹ˆë‹¤.ë²„ì „ ê´€ë¦¬ ìš©ì´Config Serverê°€ ì¤‘ì•™ ì§‘ì¤‘ì‹ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ì„¤ì • íŒŒì¼ë“¤ì˜ ì €ìž¥ì†Œë¡œ Gitì„ ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.Gitê³¼ ê°™ì€ ë²„ì „ê´€ë¦¬ ì‹œìŠ¤í…œê³¼ ì—°ë™í•˜ì—¬ ë³€ê²½ ì´ë ¥ì„ ê´€ë¦¬í•˜ê²Œ ë˜ë©´, ì¶”í›„ í•„ìš”ì— ë”°ë¼ ì›í•˜ëŠ” ë²„ì „ìœ¼ë¡œ ë¡¤ë°±ì´ ìš©ì´í•©ë‹ˆë‹¤.ë§Œì•½ Config Serverê°€ ì—†ë‹¤ë©´?ì„¤ì • ê´€ë¦¬ê° ì„œë¹„ìŠ¤ë§ˆë‹¤ ê°œë³„ì ìœ¼ë¡œ ì„¤ì •ì„ ê´€ë¦¬í•˜ë©´, í™˜ê²½ë³„ë¡œ ì¼ê´€ëœ ì„¤ì • ìœ ì§€ê°€ ì–´ë ¤ì›Œì§‘ë‹ˆë‹¤.ìš´ì˜ íš¨ìœ¨ì„± ì €í•˜ë¶„ì‚°ëœ ì„¤ì • íŒŒì¼ì„ í•˜ë‚˜í•˜ë‚˜ ìˆ˜ì •í•˜ê³  ë°°í¬í•´ì•¼ í•˜ë¯€ë¡œ, ê´€ë¦¬ ë¹„ìš©ì´ ëŒ€í­ ì¦ê°€í•˜ì—¬ ìš´ì˜ íš¨ìœ¨ì„±ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤.ë™ì  ë°˜ì˜ ë¶ˆê°€ì„¤ì •ì„ ë³€ê²½í•˜ë ¤ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìž¬ì‹œìž‘í•´ì•¼ í•©ë‹ˆë‹¤.ê·¸ë¦¬ê³  ë³€ê²½ ì‚¬í•­ì´ ì¦‰ê° ë°˜ì˜ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì„œë¹„ìŠ¤ ì¤‘ë‹¨ì´ë‚˜ ì˜¤ë¥˜ì— ëŒ€í•´ ëŒ€ì‘ì´ ëŠë ¤ì§ˆ ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤.  ì´ì™€ ê°™ì´ Spring Cloud ConfigëŠ” ë¶„ì‚° í™˜ê²½ì—ì„œì˜ ì„¤ì • ê´€ë¦¬ë¥¼ ë‹¨ìˆœí™”í•˜ê³ , ìš´ì˜ ì•ˆì •ì„±ì„ ë†’ì—¬ì£¼ëŠ” í•µì‹¬ ê¸°ìˆ ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.Config Server ì„¤ì •í•˜ê¸°Dependencydependencies {	implementation 'org.springframework.cloud:spring-cloud-config-server'}  Config Server ì‚¬ìš©ì„ ìœ„í•´ ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.@EnableConfigServer ì ìš©í•˜ê¸°@SpringBootApplication@EnableConfigServerpublic class ConfigServiceApplication {	public static void main(String[] args) {		SpringApplication.run(ConfigServiceApplication.class, args);	}}  Config Serverì˜ ìžë™ êµ¬ì„±ì„ ìœ„í•´ @EnableConfigServer ì• ë„ˆí…Œì´ì…˜ì„ ì ìš©í•´ì¤ë‹ˆë‹¤.application.ymlspring:  application:    name: config-service  cloud:    config:      server:        git:          uri: https://github.com/Seung-IL-Bang/spring-cloud-ecosystem-remote-config.git#          username: # private ì €ìž¥ì†Œì¸ ê²½ìš°#          password: # private ì €ìž¥ì†Œì¸ ê²½ìš°server:  port: 8888  ìœ„ì™€ ê°™ì´ ì„¤ì •í•˜ë©´ spring.cloud.config.server.git.uri ê²½ë¡œì˜ ë ˆí¬ì§€í† ë¦¬ë¡œë¶€í„° ì„¤ì • íŒŒì¼ë“¤ì„ Config Serverì—ì„œ ì½ì–´ì˜¬ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  private ì €ìž¥ì†Œì¸ ê²½ìš° ì ‘ê·¼ ê°€ëŠ¥í•œ Git ê³„ì •ì˜ usernameê³¼ passwordë¥¼ ìž…ë ¥í•´ì¤ë‹ˆë‹¤. (ì•”í˜¸í™”í•´ì„œ ìž…ë ¥í•´ì•¼ ì•ˆì „í•©ë‹ˆë‹¤.)Config Server ì„¤ì • íŒŒì¼ ì¡°íšŒ  public git ì €ìž¥ì†Œì— ìœ„ì™€ ê°™ì´ test.yml íŒŒì¼ í•˜ë‚˜ë¥¼ ì—…ë¡œë“œ í•´ë†¨ìŠµë‹ˆë‹¤. íŒŒì¼ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.test:  value: 123  ìœ„ íŒŒì¼ì˜ ì„¤ì • ê°’ì„ Config Server ì—ì„œ ì¡°íšŒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.{HOST:PORT}/{filename}/{profile}ë¡œì»¬ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²½ìš° http://localhost:8888/test/default ê²½ë¡œë¡œ Config Serverì— GET ìš”ì²­ì„ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.ë°°í¬ í™˜ê²½ì— ë”°ë¼ í”„ë¡œíŒŒì¼(profile)ë³„ë¡œ ì„¤ì • íŒŒì¼ë“¤ì„ ë‹¤ë¥´ê²Œ ì¡°íšŒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.íŒŒì¼ëª…ì— í”„ë¡œíŒŒì¼ì„ ëª…ì‹œí•˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ ê°’ìœ¼ë¡œ default ê°€ ì ìš© ë©ë‹ˆë‹¤.ì˜ˆì‹œ  ìš´ì˜ í™˜ê²½: {HOST:PORT}/test/prod  ê°œë°œ í™˜ê²½: {HOST:PORT}/test/dev  ë¡œì»¬ í™˜ê²½: {HOST:PORT}/test/local  ìœ„ ì´ë¯¸ì§€ëŠ” Config Serviceë¡œë¶€í„° test.yml ì„¤ì • íŒŒì¼ì„ ì½ì–´ë“¤ì¸ í™”ë©´ìž…ë‹ˆë‹¤.  Config ServerëŠ” ì €ìž¥ì†Œ(Git)ë¡œë¶€í„° ì„¤ì • íŒŒì¼ì„ ì¤‘ì•™ ì§‘ì¤‘ ê´€ë¦¬í•˜ì—¬ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë“¤ì—ê²Œ ì„¤ì •ê°’ë“¤ì„ ì œê³µí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.ðŸ“Œ ìš”ì•½  Spring Cloud ConfigëŠ” ë¶„ì‚° í™˜ê²½ì—ì„œ ê° ì„œë¹„ìŠ¤ì˜ ì„¤ì •ì„ ì¤‘ì•™ ì§‘ì¤‘ì‹ìœ¼ë¡œ ê´€ë¦¬í•´ ì¼ê´€ì„±ê³¼ ë™ì  ë°˜ì˜ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.  Git ì—°ë™ì„ í†µí•´ ë²„ì „ ê´€ë¦¬ì™€ ë¡¤ë°±ì´ ìš©ì´í•˜ì—¬ ìš´ì˜ íš¨ìœ¨ì„±ì„ í¬ê²Œ í–¥ìƒì‹œí‚µë‹ˆë‹¤.ðŸš€ ì •ë¦¬ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” Spring Cloud Config Serverì˜ ê°œë…ê³¼ í•„ìš”ì„±ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.ë‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œëŠ” Spring Cloud ê¸°ë°˜ MSA í™˜ê²½ì—ì„œ ê° ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ë“¤ì´ Config Serverë¡œë¶€í„° íŒŒì¼ì„ ì½ì–´ì˜¤ëŠ” ë°©ë²•ê³¼,Spring Boot Actuator ì™€ Spring Cloud Busë¥¼ ì´ìš©í•œ ì‹¤ì‹œê°„ ì„¤ì • ë°˜ì˜ ë°©ë²•ì— ëŒ€í•´ì„œë„ ì‚´íŽ´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.]]></content>
      <categories>
        
          <category> Spring Cloud </category>
        
          <category> MSA </category>
        
      </categories>
      <tags>
        
          <tag> Spring Cloud Config </tag>
        
          <tag> Git </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Spring Config Serverì™€ Spring Cloud Busë¥¼ í†µí•œ ë™ì  ì„¤ì • ê´€ë¦¬]]></title>
      <url>/spring%20cloud/msa/2025/02/17/Spring-Cloud-Bus/</url>
      <content type="text"><![CDATA[  ë¶„ì‚° í™˜ê²½ì—ì„œ ê° ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ Config Serverë¡œë¶€í„° ì„¤ì • íŒŒì¼ì„ ì½ì–´ì˜¤ëŠ” ë°©ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤!ðŸ“Œ ë“¤ì–´ê°€ê¸°ì´ì „ì— Spring Cloud Config Serverì— ê´€í•œ ë‚´ìš©ì„ ë‹¤ë£¬ í¬ìŠ¤íŠ¸ê°€ ìžˆìŠµë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” Config Serverë¥¼ ì‚¬ìš©í•˜ëŠ” í™˜ê²½ì—ì„œ, Spring Cloud Busì™€ Spring boot Actuatorë¥¼ ì´ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìž¬ì‹œìž‘í•˜ì§€ ì•Šê³ ë„ ì„¤ì • ë³€ê²½ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì˜í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ íƒêµ¬í•´ë³´ê² ìŠµë‹ˆë‹¤!ì‹¤ì‹œê°„ ì„¤ì • ë³€ê²½ì´ ì™œ ì¤‘ìš”í•œê°€?ë¶„ì‚°ëœ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œëŠ” ê°ê°ì˜ ì„œë¹„ìŠ¤ê°€ ê°œë³„ì ìœ¼ë¡œ ìž¬ì‹œìž‘ ì—†ì´ ì„¤ì •ì„ ì—…ë°ì´íŠ¸í•´ì•¼ ìš´ì˜ íš¨ìœ¨ì„±ì´ ë†’ì•„ì§‘ë‹ˆë‹¤.ë™ì  ì„¤ì • ë³€ê²½ì„ í†µí•´ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ì—†ì´ ë¹ ë¥´ê²Œ í™˜ê²½ ë³€í™”ì— ëŒ€ì‘í•  ìˆ˜ ìžˆê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤.ì´ë¡œ ì¸í•´ ì„¤ì • ê°’ë“¤ì˜ ì¼ê´€ì„±ì„ ì‰½ê²Œ ìœ ì§€í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.í•´ë‹¹ ê¸°ìˆ ì´ ì—†ë‹¤ë©´?ì„¤ì •ì„ ë³€ê²½í•  ë•Œë§ˆë‹¤ ê° ì„œë¹„ìŠ¤ë§ˆë‹¤ ìž¬ì‹œìž‘í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ì¡´ìž¬í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ì˜¤íƒ€ë‚˜, ìž˜ëª»ëœ ê°’ì´ ì„¤ì •ëœë‹¤ë©´ ë˜ ë‹¤ì‹œ ìž¬ì‹œìž‘ ê³¼ì •ì„ ë°˜ë³µí•´ì•¼ í•˜ì£ .ë˜í•œ ë³€ê²½ ì‚¬í•­ì´ ì¦‰ê°ì ìœ¼ë¡œ ë°˜ì˜ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì—(ìž¬ì‹œìž‘ìœ¼ë¡œ ì¸í•´), ì„¤ì • ë¶ˆì¼ì¹˜ë¡œ ì¸í•œ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ë§ˆì§€ë§‰ìœ¼ë¡œ, ë¶„ì‚° í™˜ê²½ì—ì„œ ê°œë³„ì ìœ¼ë¡œ ì„¤ì •ì„ ê´€ë¦¬í•˜ê²Œ ëœë‹¤ë©´ ìœ ì§€ë³´ìˆ˜ì˜ ë¹„ìš©ì´ í¬ê²Œ ì¦ê°€í•  ê²ƒìž…ë‹ˆë‹¤.  Config Serverë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìž¬ì‹œìž‘í•˜ì§€ ì•Šê³ ë„ ì„¤ì • ë³€ê²½ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì˜í•  ìˆ˜ ìžˆë„ë¡ ì§€ì›í•˜ëŠ” Spring Cloud Bus, Spring Boot Actuator ê¸°ìˆ  ë„ìž…ì´ í•„ìˆ˜ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì™€ Config Server ì—°ë™í•˜ê¸°í´ë¼ì´ì–¸íŠ¸(ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤)ëŠ” Config Serverì—ì„œ ì„¤ì • íŒŒì¼ì„ ì½ì–´ì˜¬ ìˆ˜ ìžˆì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì—, Config Serverì™€ ì—°ê²°ì„ ì§„í–‰í•´ì•¼ í•©ë‹ˆë‹¤.Dependencyimplementation 'org.springframework.cloud:spring-cloud-starter-config'implementation 'org.springframework.boot:spring-boot-starter-actuator'  Config Serverì™€ ì—°ê²°ì„ ìœ„í•´ spring-cloud-starter-config ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.  Config Serverì—ê²Œ ì„¤ì • íŒŒì¼ ì¡°íšŒ ë˜ëŠ” ê°±ì‹  ìš”ì²­ì„ ìœ„í•´ actuator ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.  actuatorì˜ ì—”ë“œí¬ì¸íŠ¸ë¡œ /refresh, /busrefresh ë¥¼ ì‚¬ìš©í•  ì˜ˆì •ìž…ë‹ˆë‹¤.application.ymlspring:  cloud:    config:      name: # ì½ì–´ì˜¬ íŒŒì¼ëª…  config:    import: optional:configserver:http://localhost:8888  profiles:    active: # í”„ë¡œíŒŒì¼ëª…    management:  endpoints:    web:      exposure:        include: refresh, busrefresh  spring.cloud.config.name: Config Serverë¡œ ë¶€í„° ì½ì–´ì˜¬ íŒŒì¼ëª…ì„ ì§€ì •í•´ì¤ë‹ˆë‹¤.  spring.config.import: Config Server ì—°ê²° URLì„ ì§€ì •í•´ì¤ë‹ˆë‹¤. (ë¡œì»¬ í…ŒìŠ¤íŠ¸: Config Serverê°€ port ë²ˆí˜¸ 8888ë¡œ ì‹¤í–‰ ê°€ì •)  spring.profiles.active: ì½ì–´ì˜¬ íŒŒì¼ì˜ í”„ë¡œíŒŒì¼ì„ ì§€ì •í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. (ê¸°ë³¸ í”„ë¡œíŒŒì¼: default)  management.endpoints.web.exposure.include: actuatorì—ì„œ í™œì„±í™”ì‹œí‚¬ ì—”ë“œí¬ì¸íŠ¸ ìž…ë‹ˆë‹¤.          /refresh: ê°œë³„ í´ë¼ì´ì–¸íŠ¸ë§Œ ì„¤ì •ì„ ê°±ì‹ í•©ë‹ˆë‹¤.      /busrefresh: Bus(RabbitMQ ë˜ëŠ” Kafka)ì— ì—°ê²°ëœ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì˜ ì„¤ì •ì„ ê°±ì‹ í•©ë‹ˆë‹¤.      ì—¬ê¸°ê¹Œì§€ ì„¤ì •ì„ ë§ˆì¹˜ë©´, /refresh ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­ìœ¼ë¡œ Config Serverë¡œ ë¶€í„° ì„¤ì • íŒŒì¼ì„ ì½ì–´ì™€ì„œ í´ë¼ì´ì–¸íŠ¸ì˜ ì„¤ì •ì„ ë™ì ìœ¼ë¡œ ì‹¤ì‹œê°„ ë³€ê²½í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.í•˜ì§€ë§Œ, ì´ê²ƒì€ ê°œë³„ í´ë¼ì´ì–¸íŠ¸ì—ë§Œ ë³€í™”ê°€ ìƒê¹ë‹ˆë‹¤.ë§Œì•½ ë³€ê²½ëœ ì„¤ì • ê°’ì„ ì—¬ëŸ¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë“¤ì—ê²Œ ê³µí†µì ìœ¼ë¡œ ë™ì‹œì— ì ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ì–´ë–¡í•´ì•¼ í• ê¹Œìš”?ê°œë³„ í´ë¼ì´ì–¸íŠ¸ë§ˆë‹¤ /refresh ìš”ì²­ì„ ë‚ ë ¤ì•¼ í• ê¹Œìš”? (ì•„ë§ˆë„ ë§¤ìš° ë²ˆê±°ë¡­ê³  ê·€ì°®ì€ ìž‘ì—…ì¼ ê²ƒìž…ë‹ˆë‹¤.)ì´ëŸ´ ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ Spring Cloud Bus ìž…ë‹ˆë‹¤.Spring Cloud Busëž€?Spring Cloud BusëŠ” ë©”ì‹œì§€ ë¸Œë¡œì»¤(RabbitMQ, Kafka ë“±)ë¥¼ ì´ìš©í•´ ì—¬ëŸ¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê°„ì— ì„¤ì • ë³€ê²½ ì´ë²¤íŠ¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì „íŒŒí•©ë‹ˆë‹¤.ì´ì œ Spring Cloud Bus ë„ ì¶”ê°€ ì„¤ì •í•˜ì—¬ ë™ì‹œì— ì—¬ëŸ¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë“¤ì˜ ì„¤ì • ê°’ë“¤ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì˜í•˜ë„ë¡ í•´ë´…ì‹œë‹¤.Bus ìž‘ë™ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ RabbitMQì™€ Kafka ë‘ ê°œë¥¼ ì´ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ë´¤ìŠµë‹ˆë‹¤.ë‘ ë©”ì‹œì§€ ë¸Œë¡œì»¤ ëª¨ë‘ Busë¥¼ ì‰½ê²Œ êµ¬ì„±í•  ìˆ˜ ìžˆì—ˆìŠµë‹ˆë‹¤.í•˜ì§€ë§Œ ë°±ì—”ë“œ ê°œë°œìžë¼ë©´, ê¸°ìˆ ì„ ì±„íƒí•˜ëŠ” ë° ìžˆì–´ ê·¼ê±°ë¥¼ ê°€ì§€ê³  ìžˆì–´ì•¼ê² ì£ ?ê²°ê³¼ì ìœ¼ë¡œ ì €ëŠ” ê°œì¸ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ ìœ„í•´ Kafkaë¥¼ ì ìš©í•˜ê¸´ í–ˆìŠµë‹ˆë‹¤ë§Œ, ë‘ ë©”ì‹œì§€ ë¸Œë¡œì»¤ ì„¤ì • ë°©ì‹ì— ëŒ€í•´ ëª¨ë‘ ì„¤ëª… í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.Busë¡œ ì‚¬ìš©í•˜ê¸° ì í•©í•œ ë©”ì‹œì§€ ë¸Œë¡œì»¤?ì„¤ì • ë°©ì‹ì„ ì•Œì•„ë³´ê¸° ì „ì—, Spring Cloud Busì˜ ë©”ì‹œì§€ ë¸Œë¡œì»¤ë¡œ RabbitMQì™€ Kafkaë¥¼ ì„ íƒí•  ë•Œ ê³ ë ¤í•  ìˆ˜ ìžˆëŠ” ìž¥ë‹¨ì ì„ ë¹„êµí•´ë³´ê² ìŠµë‹ˆë‹¤.RabbitMQìž¥ì   ë¹„êµì  ê°„ë‹¨í•˜ê²Œ ì„¤ì¹˜ ë° ìš´ì˜í•  ìˆ˜ ìžˆìœ¼ë©°, ê´€ë¦¬ UIë„ ì§ê´€ì ìž…ë‹ˆë‹¤.  AMQPë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ Pub/Sub, Work Queue, RPC ë“± ë‹¤ì–‘í•œ íŒ¨í„´ì„ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìžˆëŠ” ìœ ì—°í•œ ë©”ì‹œì§• íŒ¨í„´ì„ ì œê³µí•©ë‹ˆë‹¤.  ì¼ë°˜ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ í™˜ê²½ì—ì„œëŠ” ì¶©ë¶„í•œ ì„±ëŠ¥ì„ ì œê³µí•˜ë©°, ì†Œê·œëª¨ ì‹œìŠ¤í…œì— ì í•©í•©ë‹ˆë‹¤.ë‹¨ì   ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ì—ëŠ” ì í•©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  Kafkaì— ë¹„í•´ ìˆ˜í‰ í´ëŸ¬ìŠ¤í„° í™•ìž¥ì„±ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤.Kafkaìž¥ì   ëŒ€ìš©ëŸ‰ ë©”ì‹œì§€ë¥¼ ë¹ ë¥´ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìž‡ìœ¼ë©°, í´ëŸ¬ìŠ¤í„° í™•ìž¥ì´ ìš©ì´í•©ë‹ˆë‹¤.  ë©”ì‹œì§€ë¥¼ ë””ìŠ¤í¬ì— ì§€ì†ì ìœ¼ë¡œ ì €ìž¥í•˜ì—¬ ë‚´êµ¬ì„±ì„ ì œê³µí•©ë‹ˆë‹¤.  ìŠ¤íŠ¸ë¦¬ë° ë°ì´í„° ì²˜ë¦¬ì— ìµœì í™”ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.ë‹¨ì   ì´ˆê¸° ì„¤ì •ê³¼ ìš´ì˜ ë° ëª¨ë‹ˆí„°ë§ì´ RabbitMQë³´ë‹¤ ë³µìž¡í•©ë‹ˆë‹¤.  ë©”ì‹œì§€ ì‹œìŠ¤í…œì˜ ê°œë…ê³¼ ìš´ì˜ ì „ëžµì— ëŒ€í•œ Kafka í•™ìŠµ ë¹„ìš©ì´ í•„ìš”í•©ë‹ˆë‹¤.  ë‹¨ìˆœí•œ ì‹œìŠ¤í…œì— ë„ìž…í•˜ê¸°ì—ëŠ” ì˜¤ë²„ì—”ì§€ë‹ˆì–´ë§ì´ ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì„ íƒ ê¸°ì¤€ ì •ë¦¬  ì†Œê·œëª¨ ì‹œìŠ¤í…œì´ë‚˜ ê°„ë‹¨í•œ ë©”ì‹œì§• íŒ¨í„´ì´ í•„ìš”í•˜ë‹¤ë©´ RabbitMQê°€ ë¹ ë¥´ê³  ì‰½ê²Œ ë„ìž…í•  ìˆ˜ ìžˆëŠ” ì„ íƒìž…ë‹ˆë‹¤.  ëŒ€ê·œëª¨ ë¶„ì‚° í™˜ê²½ì´ë‚˜ ë†’ì€ ì²˜ë¦¬ëŸ‰, ë‚´êµ¬ì„±ì´ ìš”êµ¬ë˜ëŠ” ê²½ìš°ì—ëŠ” Kafkaê°€ ì í•©í•©ë‹ˆë‹¤.ë‘ ë©”ì‹œì§€ ë¸Œë¡œì»¤ ëª¨ë‘ Spring Cloud Busë¥¼ í™œìš©í•œ ë™ì  ì„¤ì • ë³€ê²½ì„ ì§€ì›í•˜ë¯€ë¡œ, ì‹œìŠ¤í…œ ê·œëª¨ì™€ ë©”ì‹œì§€ ì²˜ë¦¬ëŸ‰, í™•ìž¥ì„±ì„ ê³ ë ¤í•˜ì—¬ ì ì ˆí•œ ë¸Œë¡œì»¤ë¥¼ ì„ íƒí•˜ì‹œë©´ ë©ë‹ˆë‹¤.Spring Cloud Bus ì„¤ì •Kafkaë¥¼ ì´ìš©í•œ BusDependencyimplementation 'org.springframework.cloud:spring-cloud-starter-bus-kafka'  í´ë¼ì´ì–¸íŠ¸ê°€ Kafkaë¥¼ í†µí•´ Bus ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹  ë° ë°œì‹ í•  ìˆ˜ ìžˆë„ë¡ ì˜ì¡´ì„± ì¶”ê°€í•´ì¤ë‹ˆë‹¤.í´ë¼ì´ì–¸íŠ¸ application.ymlspring:  kafka:    bootstrap-servers: http://localhost:9092 # Kafka URL  cloud:    bus:      destination: bus-topic # Bus ì´ë²¤íŠ¸ë¥¼ ì£¼ê³ ë°›ì„ í† í”½  spring.kafka.bootstrap-servers: Busë¡œ ì´ìš©í•  Kafka ë¸Œë¡œì»¤ ì„œë²„ì˜ URL (í´ëŸ¬ìŠ¤í„°ë§ì´ ëœ ê²½ìš° ,ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì—¬ëŸ¬ ë¸Œë¡œì»¤ URLì„ ëª…ì‹œí•˜ë©´ ë©ë‹ˆë‹¤.)  spring.cloud.bus.destination: Bus ì´ë²¤íŠ¸ë¥¼ Pub/Sub í•  í† í”½ì„ ëª…ì‹œí•´ì¤ë‹ˆë‹¤.  âš ï¸ ìœ„ ì„¤ì •ì€ Config Serverë„ ë§ˆì°¬ê°€ì§€ë¡œ ë™ì¼í•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆì–´ì•¼ í•©ë‹ˆë‹¤!management:  endpoints:    web:      exposure:        include: refresh, busrefresh  í´ë¼ì´ì–¸íŠ¸ì˜ actuator ì—”ë“œí¬ì¸íŠ¸ /busrefreshë¥¼ ì´ìš©í•˜ë©´ ë©”ì‹œì§€ ë¸Œë¡œì»¤ì˜ ì„¤ì •ëœ í† í”½ìœ¼ë¡œ ì´ë²¤íŠ¸ê°€ ë°œì†¡ë©ë‹ˆë‹¤.  í•´ë‹¹ í† í”½ì„ Consume(ì†Œë¹„/êµ¬ë…)í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ë“¤ì€ ëª¨ë‘ Config Serverë¡œ ë¶€í„° ì„¤ì • íŒŒì¼ì˜ ê°±ì‹ ì„ ìš”ì²­í•˜ê²Œ ë©ë‹ˆë‹¤.  ì´ë¡œì¨ ë™ì‹œì— ì—¬ëŸ¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë“¤ì˜ ì„¤ì • ê°’ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤./busrefresh/busrefresh ì„±ê³µ ì‘ë‹µìœ¼ë¡œ 204(no-content) ì‘ë‹µì´ ì˜µë‹ˆë‹¤.bus topic Log/busrefresh ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ì—¬ Kafka í† í”½ì— ë©”ì‹œì§€ê°€ ë„ë‹¬í•˜ë©´ ì•„ëž˜ì™€ ê°™ì€ JSON í¬ë§·ìœ¼ë¡œ ê¸°ë¡ë˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.type í•„ë“œì™€ originService ë¥¼ ì‚´íŽ´ë³´ë©´ ì–´ë–¤ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì´ë²¤íŠ¸ë¥¼ ë°œì†¡í–ˆê³ , ì–´ë–¤ í´ë¼ì´ì–¸íŠ¸ê°€ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í–ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  type: ì–´ë–¤ í´ë¼ì´ì–¸íŠ¸ì—ì„œ /busrefresh ìš”ì²­ì´ ë°œìƒí–ˆê³ , ì–´ë””ì„œ ê·¸ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í–ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.          RefreshRemoteApplicationEvent: /busrefreshë¥¼ í˜¸ì¶œí•œ ì´ë²¤íŠ¸ìž…ë‹ˆë‹¤.      AckRemoteApplicationEvent: /busrefresh ìš”ì²­ì„ ìˆ˜ì‹ í–ˆë‹¤ëŠ” ì‘ë‹µ ì´ë²¤íŠ¸ìž…ë‹ˆë‹¤.        originService: ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•œ í´ë¼ì´ì–¸íŠ¸(ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤)ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„ ì •ë³´ê°€ ë‹´ê²¨ìžˆìŠµë‹ˆë‹¤.[  {    "type": "RefreshRemoteApplicationEvent",    "timestamp": 1738394015516,    "originService": "order-service:default:8082:48ea6afcb8f6479b592a8cf041d2927b",    "destinationService": "**",    "id": "d52e5139-9137-4371-8da9-f5152a3ed8f0"  },  {    "type": "AckRemoteApplicationEvent",    "timestamp": 1738394015600,    "originService": "order-service:default:8082:48ea6afcb8f6479b592a8cf041d2927b",    "destinationService": "**",    "id": "f7c31aa1-a1df-4952-9e6c-a2ddd51c65f9",    "ackId": "d52e5139-9137-4371-8da9-f5152a3ed8f0",    "ackDestinationService": "**",    "event": "org.springframework.cloud.bus.event.RefreshRemoteApplicationEvent"  },  {    "type": "AckRemoteApplicationEvent",    "timestamp": 1738394018002,    "originService": "config-service:8888:5cadfc3cecb50346571c4e594886d273",    "destinationService": "**",    "id": "ce0d38d8-bd5a-43ce-b9cf-ea96456265d1",    "ackId": "d52e5139-9137-4371-8da9-f5152a3ed8f0",    "ackDestinationService": "**",    "event": "org.springframework.cloud.bus.event.RefreshRemoteApplicationEvent"  },  {    "type": "AckRemoteApplicationEvent",    "timestamp": 1738394021382,    "originService": "user-service:default:8080:4938cf08c833b263a04aa56c247721d3",    "destinationService": "**",    "id": "5bb5898f-a570-475d-b6c6-3efa7516b4b6",    "ackId": "d52e5139-9137-4371-8da9-f5152a3ed8f0",    "ackDestinationService": "**",    "event": "org.springframework.cloud.bus.event.RefreshRemoteApplicationEvent"  },  {    "type": "AckRemoteApplicationEvent",    "timestamp": 1738394022065,    "originService": "product-service:8081:2dc75521f12081519f46be8f3441ee00",    "destinationService": "**",    "id": "949d77da-9861-4066-8aca-b9b3aaacb678",    "ackId": "d52e5139-9137-4371-8da9-f5152a3ed8f0",    "ackDestinationService": "**",    "event": "org.springframework.cloud.bus.event.RefreshRemoteApplicationEvent"  }]  ìœ„ Json íŒŒì¼ì„ ì‚´íŽ´ë³´ë©´, order-serviceì—ì„œ /busrefreshë¥¼ í˜¸ì¶œí•œ ê²ƒì„ ì•Œ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  ê·¸ë¦¬ê³  order-service, config-service, user-service, product-service ê°€ í™•ì¸ ì‘ë‹µì„ í•˜ì—¬, ì„¤ì • íŒŒì¼ì´ ê°±ì‹ ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  ì°¸ê³ ë¡œ KafkaëŠ” ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ì´ìš©í•˜ì—¬ êµ¬ë™í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë²ˆ í¬ìŠ¤íŠ¸ëŠ” Kafkaì— ëŒ€í•œ í¬ìŠ¤íŠ¸ê°€ ì•„ë‹ˆë¯€ë¡œ, Kafka ë„ì»¤ ì‹¤í–‰ì— ëŒ€í•œ ë‚´ìš©ì€ ìƒëžµí•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ì—¬ê¸°ê¹Œì§€ Kafkaë¥¼ ì´ìš©í•œ Spring Cloud Bus ë¥¼ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.RabbitMQë¥¼ ì´ìš©í•œ Busì´ë²ˆì—ëŠ” RabbitMQë¥¼ ì´ìš©í•œ Spring Cloud Bus ì„¤ì • ë°©ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.ë™ìž‘ íë¦„ì€ Kafkaì™€ ë™ì¼í•˜ê¸° ë•Œë¬¸ì—, RabbitMQëŠ” ì„¤ì •ë²•ë§Œ ê°„ë‹¨ížˆ ì§šê³  ë„˜ì–´ê°€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.spring:  application:    name: user-service  config:    import: optional:configserver:http://localhost:8888  profiles:    active: default  cloud:    config:      name: test  rabbitmq:    host: localhost # RabbitMQ Host    port: 5672 # RabbitMQ Port    username: guest     password: guestmanagement:  endpoints:    web:      exposure:        include: refresh, busrefresh  Spring Cloud Busë¥¼ ìœ„í•´ì„œ Config Serverì™€ ì—°ê²° ì„¤ì •ê³¼ RabbitMQ ì„¤ì • ê·¸ë¦¬ê³  ì•¡ì¶”ì—ì´í„°ì˜ /busrefresh ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„¤ì •í•´ì£¼ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.  /busrefresh ë¥¼ í˜¸ì¶œí•˜ë©´ RabbitMQì— ë©”ì‹œì§€ë¥¼ ë°œì†¡í•˜ì—¬, RabbitMQ(Bus ì—­í• )ì— ì—°ê²°ëœ ì„œë¹„ìŠ¤ë“¤ì˜ ì„¤ì • íŒŒì¼ë“¤ì„ ê°±ì‹ ì‹œí‚¤ê²Œ ë©ë‹ˆë‹¤.  RabbitMQëŠ” ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ì´ìš©í•˜ì—¬ êµ¬ë™í•˜ì˜€ìŠµë‹ˆë‹¤.ðŸš€ ì •ë¦¬ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” Spring Cloud Busì™€ Spring Boot Actuatorë¥¼ í™œìš©í•˜ì—¬ Config Serverì—ì„œ ì½ì–´ì˜¨ ì„¤ì • íŒŒì¼ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ìž¬ì‹œìž‘ ì—†ì´ ë™ì ìœ¼ë¡œ ê°±ì‹ í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë¤˜ìŠµë‹ˆë‹¤.Kafkaì™€ RabbitMQ ë‘ ê°€ì§€ ë©”ì‹œì§€ ë¸Œë¡œì»¤ë¥¼ í†µí•œ Bus ì„¤ì • ë°©ë²•ê³¼ ê°ê°ì˜ ìž¥ë‹¨ì ì— ëŒ€í•´ì„œë„ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤./refreshì™€ /busrefresh ì—”ë“œí¬ì¸íŠ¸ë¥¼ í™œìš©í•´ ê°œë³„ ì„œë¹„ìŠ¤ì™€ ì „ì²´ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì— ë™ì‹œì— ì„¤ì • ë³€ê²½ ì´ë²¤íŠ¸ë¥¼ ì „íŒŒí•˜ëŠ” ê³¼ì •ë„ ì‚´íŽ´ë´¤ìŠµë‹ˆë‹¤.ðŸŽ¯ ìš”ì•½  Spring Cloud Busì™€ Actuatorë¥¼ ì‚¬ìš©í•˜ë©´ Config Serverì˜ ì„¤ì • ë³€ê²½ì„ ê° ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì— ì‹¤ì‹œê°„ìœ¼ë¡œ ì ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  KafkaëŠ” ëŒ€ìš©ëŸ‰ ì²˜ë¦¬ì™€ í™•ìž¥ì„±ì´ ë›°ì–´ë‚˜ê³ , RabbitMQëŠ” ì„¤ì¹˜ì™€ ìš´ì˜ì´ ê°„íŽ¸í•˜ë‹¤ëŠ” ìž¥ì ì„ ì œê³µí•©ë‹ˆë‹¤.]]></content>
      <categories>
        
          <category> Spring Cloud </category>
        
          <category> MSA </category>
        
      </categories>
      <tags>
        
          <tag> Spring Cloud Config </tag>
        
          <tag> Spring Cloud Bus </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Spring Cloud Netflix - Service Discovery Eureka]]></title>
      <url>/spring%20cloud/msa/2025/02/16/Service-Discovery-Eureka/</url>
      <content type="text"><![CDATA[  ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ê°€ ë¬´ì—‡ì´ê³ , Eurekaê°€ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë´…ì‹œë‹¤!ðŸ“Œ ë“¤ì–´ê°€ê¸°ì„œë¹„ìŠ¤ ê°„ í†µì‹ ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” ì„œë¡œì˜ ìœ„ì¹˜(IP Address í˜¹ì€ ë„ë©”ì¸)ë¥¼ ì•Œê³  ìžˆì–´ì•¼ í•©ë‹ˆë‹¤.MSA í™˜ê²½ì—ëŠ” ìˆ˜ ë§Žì€ ì„œë¹„ìŠ¤ë“¤ì´ ì¡´ìž¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ê·¸ë ‡ë‹¤ë©´ í•œ ì„œë¹„ìŠ¤ì—ì„œ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë“¤ê³¼ í†µì‹  í•˜ê¸° ìœ„í•´ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë“¤ì˜ ëª¨ë“  ì£¼ì†Œë“¤ì„ ì•Œì•„ì•¼ í• ê¹Œìš”?Netflix ê°€ Spring Cloud ìž¬ë‹¨ì— ê¸°ì¦í•œ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬(íƒìƒ‰) ê¸°ìˆ ì¸ EurekaëŠ” ëª¨ë“  ì£¼ì†Œë“¤ì„ ê¸°ì–µí•´ì•¼ í•˜ëŠ” ë¬¸ì œì ì„ ê¹”ë”ížˆ í•´ê²°í•´ ì¤ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ ì„œë¹„ìŠ¤ ë“±ë¡ê³¼ íƒìƒ‰ì´ ì™œ ì¤‘ìš”í•œì§€, ê·¸ë¦¬ê³  ë™ì  ì„œë¹„ìŠ¤ ë“±ë¡ ë° ë¡œë“œë°¸ëŸ°ì‹±ì˜ í•„ìš”ì„±ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ëž€?ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œëŠ” ê°œë³„ ì„œë¹„ìŠ¤ë“¤ì´ ë…ë¦½ì ìœ¼ë¡œ ë°°í¬ë˜ê³  ì‹¤í–‰ì´ ë©ë‹ˆë‹¤.ì´ë•Œ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë“¤ì˜ ìœ„ì¹˜(Host, Port etc)ê°€ ë™ì ìœ¼ë¡œ ë³€ê²½ë˜ê¸° ë•Œë¬¸ì—, í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë¹„ìŠ¤ì˜ ìœ„ì¹˜ë¥¼ ê³ ì •ëœ ì£¼ì†Œë¡œ ì°¸ì¡°í•˜ê¸° ì–´ë ¤ìš´ ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤.ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë¹„ìŠ¤ì˜ ì‹¤ì œ ìœ„ì¹˜ë¥¼ ë™ì ìœ¼ë¡œ íƒìƒ‰í•˜ê³ , ìµœì‹  ì •ë³´ë¥¼ ë°˜ì˜í•  ìˆ˜ ìžˆë„ë¡ í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ íŒ¨í„´ì„œë¹„ìŠ¤ë¥¼ ë™ì ìœ¼ë¡œ íƒìƒ‰í•˜ëŠ” íŒ¨í„´ì—ëŠ” ë‘ ê°€ì§€ê°€ ìžˆìŠµë‹ˆë‹¤.Client Side Discoveryí´ë¼ì´ì–¸íŠ¸ê°€ ì§ì ‘ ì„œë¹„ìŠ¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ ì •ë³´ë¥¼ ê°€ì ¸ì™€ ë¡œë“œë°¸ëŸ°ì‹±ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.Server Side Discoveryí´ë¼ë¦¬ì–¸íŠ¸ì˜ ìš”ì²­ì´ ë¡œë“œ ë°¸ëŸ°ì„œë¥¼ í†µí•´ ì „ë‹¬ë˜ë©°, ì´ ë¡œë“œ ë°¸ëŸ°ì„œê°€ ì„œë¹„ìŠ¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬(Eureka Server)ì—ì„œ ì‹¤ì œ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì„ íƒí•˜ê²Œ ë©ë‹ˆë‹¤.Spring Cloud Gateway ëŠ” ë¡œë“œ ë°¸ëŸ°ì‹± ê¸°ëŠ¥ì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ì„œë²„ ì‚¬ì´ë“œ ë””ìŠ¤ì»¤ë²„ë¦¬ íŒ¨í„´ì„ ì‚¬ìš©í•  ê²½ìš° Spring Cloud Gatewayë¥¼ í™œìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ê²Œì´íŠ¸ì›¨ì´ëŠ” ìœ ë ˆì¹´ ì„œë²„ë¡œë¶€í„° ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì˜ ìœ„ì¹˜ë¥¼ ê°€ì§€ê³ ì™€ ì§ì ‘ ë¡œë“œë°¸ëŸ°ì‹±ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.Eureka Server ì™€ ClientEurekaëŠ” ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ë‘ ê°œë¡œ ë‚˜ë‰˜ì–´ ì—­í• ì´ ê°ê° ë‹¤ë¦…ë‹ˆë‹¤.Eureka Serverìœ ë ˆì¹´ ì„œë²„ì˜ ì—­í• ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.  ëª¨ë“  ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë“¤ì˜ ë“±ë¡ ì •ë³´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.  ì£¼ê¸°ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ì—¬, ì •ìƒ ë™ìž‘í•˜ì§€ ì•ŠëŠ” ì¸ìŠ¤í„´ìŠ¤ëŠ” ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ ì œê±°í•©ë‹ˆë‹¤.  í´ë¼ì´ì–¸íŠ¸ë‚˜ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ê°€ í˜„ìž¬ ì‚¬ìš© ê°€ëŠ¥í•œ ì¸ìŠ¤í„´ìŠ¤ ì •ë³´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìžˆë„ë¡ APIë¥¼ ì œê³µí•©ë‹ˆë‹¤.Eureka Clientìœ ë ˆì¹´ í´ë¼ì´ì–¸íŠ¸ì˜ ì—­í• ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.  ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê¸°ë™ë˜ë©´ì„œ ìžë™ìœ¼ë¡œ Eureka ì„œë²„ì— ìžì‹ ì˜ ì •ë³´ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.  ë“±ë¡ëœ ì •ë³´ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ê°±ì‹ í•˜ì—¬, ì„œë²„ ì¸¡ì—ì„œ ì •ìƒ ë™ìž‘ ì—¬ë¶€ë¥¼ íŒë‹¨í•  ìˆ˜ ìžˆë„ë¡ í•©ë‹ˆë‹¤.  í•„ìš”í•œ ê²½ìš° Eureka ì„œë²„ì—ì„œ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì™€, ë¡œë“œ ë°¸ëŸ°ì‹± ë° ë™ì  í˜¸ì¶œì— í™œìš©í•©ë‹ˆë‹¤.Eureka íŠ¹ìž¥ì   ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ëŠ˜ì–´ë‚˜ê±°ë‚˜ ì¤„ì–´ë“¤ ë•Œ ìžë™ìœ¼ë¡œ ë°˜ì˜ë©ë‹ˆë‹¤.  ìœ ë ˆì¹´ ì„œë²„ ì´ì¤‘í™” êµ¬ì„±ì„ í†µí•´ ìž¥ì•  ë°œìƒ ì‹œì—ë„ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ì§€ì†ì„±ì´ ë³´ìž¥ë©ë‹ˆë‹¤.  ë“±ë¡ ì£¼ê¸°ì™€ íƒ€ìž„ì•„ì›ƒì„ í™œìš©í•˜ì—¬, ì •ìƒ ìƒíƒœë¥¼ ìœ ì§€í•˜ì§€ ì•ŠëŠ” ì¸ìŠ¤í„´ìŠ¤ë“¤ì€ ìžë™ìœ¼ë¡œ ì œê±°ë˜ê³ , ë‹¤ì‹œ íšŒë³µëœ ì¸ìŠ¤í„´ìŠ¤ëŠ” ë‹¤ì‹œ ë“±ë¡ë˜ëŠ” ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜ì´ ìžˆìŠµë‹ˆë‹¤.ë™ì  ì„œë¹„ìŠ¤ ë“±ë¡ ë©”ì»¤ë‹ˆì¦˜ì„œë¹„ìŠ¤ê°€ ê¸°ë™ ì‹œ Eureka Clientê°€ Eureka Serverì— HTTP ìš”ì²­ì„ ë³´ë‚´ì–´ ìžì‹ ì„ ë“±ë¡í•©ë‹ˆë‹¤.ì´í›„ ì£¼ê¸°ì ìœ¼ë¡œ ë“±ë¡ ì •ë³´ë¥¼ ê°±ì‹ í•˜ë©°, ë§Œì•½ ê°±ì‹ ì´ ì‹¤íŒ¨í•˜ë©´ ì¼ì • ì‹œê°„ì´ ì§€ë‚œ í›„ ìžë™ìœ¼ë¡œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ ì œê±°ë©ë‹ˆë‹¤.Eureka ëŒ€ì‹œë³´ë“œ(ë³´í†µ http://localhost:8761)ë¥¼ í†µí•´ í˜„ìž¬ ë“±ë¡ëœ ì¸ìŠ¤í„´ìŠ¤ ëª©ë¡ê³¼ ìƒíƒœ ì •ë³´ë¥¼ í™•ì¸í•˜ì‹¤ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.Eurekeì™€ ê²°í•©ë˜ì–´ ë™ìž‘í•˜ëŠ” Spring Cloud GatewaySpring Cloud GatewayëŠ” Eurekaì™€ ê²°í•©ë˜ì–´ ë¡œë“œ ë°¸ëŸ°ì„œì˜ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì´ ê²Œì´íŠ¸ì›¨ì´ì— ë„ë‹¬í•˜ê²Œ ë˜ë©´, Eurekaì—ì„œ ì¡°íšŒí•œ ì¸ìŠ¤í„´ìŠ¤ ëª©ë¡ì„ ë°”íƒ•ìœ¼ë¡œ ë¼ìš´ë“œ ë¡œë¹ˆ ë°©ì‹ìœ¼ë¡œ ìš”ì²­ì„ ë¶„ì‚° ì²˜ë¦¬í•©ë‹ˆë‹¤.Eureka ì„œë¹„ìŠ¤ í´ëŸ¬ìŠ¤í„°ë§ ë°©ë²•ê³¼ ìž¥ì ë‹¨ì¼ Eureka ì„œë²„ë¡œ ìš´ì˜í•˜ë©´ ìž¥ì•  ì‹œ ì „ì²´ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ì‹œìŠ¤í…œì´ ë§ˆë¹„ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ë”°ë¼ì„œ ì—¬ëŸ¬ ëŒ€ì˜ Eureka ì„œë²„ë¥¼ í´ëŸ¬ìŠ¤í„°ë§í•˜ì—¬ ìš´ì˜í•  í•„ìš”ê°€ ìžˆìŠµë‹ˆë‹¤.Eureka ì„œë²„ë¥¼ í´ëŸ¬ìŠ¤í„°ë§í•˜ê²Œ ë˜ë©´ ì—¬ëŸ¬ Eureka ì„œë²„ê°€ í˜‘ë ¥í•˜ì—¬ ì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— íŠ¹ì • Eureka ì„œë²„ì˜ ìž¥ì• ê°€ ì „ì²´ ì‹œìŠ¤í…œì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ìµœì†Œí™”í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë‘ ëŒ€ ì´ìƒì˜ ì„œë²„ë¡œ êµ¬ì„±í•˜ë©´, ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ë˜ëŠ” ë¡œë“œ ë°¸ëŸ°ì„œë¥¼ í†µí•´ ì–´ëŠ ì„œë²„ì— ì ‘ê·¼í•˜ë“ ì§€ ê°„ì— ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.ë˜í•œ ë‹¤ìˆ˜ì˜ Eureka ì„œë²„ê°€ ìš”ì²­ì„ ë¶„ì‚° ì²˜ë¦¬í•¨ìœ¼ë¡œì¨, ë†’ì€ íŠ¸ëž˜í”½ í™˜ê²½ì—ì„œë„ ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.Eureka ì„œë²„ í´ëŸ¬ìŠ¤í„°ë§ êµ¬ì„± ì˜ˆì‹œapplication.yml ì„¤ì • íŒŒì¼ì— Eureka ì„œë²„ ê°„ì˜ ë™ê¸°í™” ë°©ì‹ ì„¤ì •(Peer Awareness)ì„ true ê°’ìœ¼ë¡œ ì„¤ì •í•˜ê³ , Eureka ì„œë²„ë“¤ì´ í˜¸ìŠ¤íŒ…ë˜ê³  ìžˆëŠ” ìœ„ì¹˜ë“¤ì„ defaultZone ì— ìž‘ì„±í•´ì£¼ë©´ ë©ë‹ˆë‹¤.eureka:  instance:    hostname: localhost  client:    register-with-eureka: false    fetch-registry: false  server:    enable-self-preservation: false  peer:    awareness:      enabled: true    eureka:      serviceUrl:        defaultZone: http://localhost:8761/eureka/,http://localhost:8762/eureka/  ë™ê¸°í™” ë°©ì‹ ì„¤ì •ê³¼ ê´€ë ¨í•˜ì—¬ ê³µì‹ ë¬¸ì„œì—ì„œ ë” ìžì„¸ížˆ í™•ì¸í•˜ì‹¤ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ì •ë¦¬ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì˜ í•„ìš”ì„±ê³¼ Netflix Eurekaë¥¼ í†µí•œ ì¸ìŠ¤í„´ìŠ¤ë“¤ì˜ ë™ì  ìœ„ì¹˜ íƒìƒ‰ ë°©ì•ˆì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.Eurekaë¥¼ ì‚¬ìš©í•˜ë©´ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ë™ì ìœ¼ë¡œ ë“±ë¡ë˜ê³  ìžë™ìœ¼ë¡œ ê´€ë¦¬ë©ë‹ˆë‹¤.ì´ë¡œì¨ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë¹„ìŠ¤ì˜ ì‹¤ì œ ìœ„ì¹˜ë¥¼ ë™ì ìœ¼ë¡œ íƒìƒ‰í•  ìˆ˜ ìžˆê²Œ í•´ì£¼ì–´ ì„œë¹„ìŠ¤ í†µì‹ ì´ ì›í™œí•˜ê²Œ ì´ë£¨ì–´ì§€ë„ë¡ í•´ì¤ë‹ˆë‹¤.ê·¸ë¦¬ê³  í´ëŸ¬ìŠ¤í„°ë§ì„ í†µí•´ ê³ ê°€ìš©ì„±ì„ í™•ë³´í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œë„ ì‚´íŽ´ë³´ì•˜ìŠµë‹ˆë‹¤.ì°¸ê³  ìžë£Œ  Spring Cloud Netflix]]></content>
      <categories>
        
          <category> Spring Cloud </category>
        
          <category> MSA </category>
        
      </categories>
      <tags>
        
          <tag> Service Discovery </tag>
        
          <tag> Eureka </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Spring Cloud FeignClient ë¡œê¹… ë° ì—ëŸ¬ í•¸ë“¤ë§]]></title>
      <url>/spring%20cloud/msa/2025/02/15/Spring-Cloud-FeignClient/</url>
      <content type="text"><![CDATA[  Feign Loggerì™€ ErrorDecoderë¡œ API í†µì‹  ë¡œê¹… ë° ì—ëŸ¬ í•¸ë“¤ë§ ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤!ë“¤ì–´ê°€ê¸°Spring Cloudì˜ FeignClientëŠ” REST API í˜¸ì¶œì„ ê°„íŽ¸í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìžˆëŠ” ê°•ë ¥í•œ ë„êµ¬ìž…ë‹ˆë‹¤.í•˜ì§€ë§Œ API í†µì‹  ì‹œ ë°œìƒí•  ìˆ˜ ìžˆëŠ” ë¬¸ì œë“¤ì„ íš¨ê³¼ì ìœ¼ë¡œ ë””ë²„ê¹…í•˜ê³ , ì‚¬ìš©ìž ì •ì˜ ì—ëŸ¬ í•¸ë“¤ë§ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” ì¶”ê°€ì ì¸ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” Feign Loggerì™€ ErrorDecoderë¥¼ í†µí•´ API í†µì‹ ì˜ ë¡œê¹…ê³¼ ì—ëŸ¬ í•¸ë“¤ë§ì„ ê°•í™”í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì‚´íŽ´ë³´ê² ìŠµë‹ˆë‹¤.Feign LoggerFeign LoggerëŠ” FeignClientê°€ í˜¸ì¶œí•˜ëŠ” APIì˜ ìš”ì²­ê³¼ ì‘ë‹µì„ ë¡œê¹…í•  ìˆ˜ ìžˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.ì´ë¥¼ í†µí•´ API í†µì‹  ì‹œ ë°œìƒí•˜ëŠ” ë¬¸ì œë¥¼ ë³´ë‹¤ ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ë¡œê·¸ ë ˆë²¨ì— ë”°ë¼ ì¶œë ¥ë˜ëŠ” ì •ë³´ê°€ ë‹¤ë¦…ë‹ˆë‹¤.Feign Logger.Levelê¸°ë³¸ì ìœ¼ë¡œ ì•„ë¬´ê²ƒë„ ì„¤ì •í•˜ì§€ ì•Šì€ ê²½ìš°ì—ëŠ” NONE ìƒíƒœìž…ë‹ˆë‹¤.  NONE: ë¡œê¹…ì„ í•˜ì§€ ì•ŠìŒ  BASIC: ìš”ì²­ ë©”ì„œë“œ, URL, ì‘ë‹µ ìƒíƒœ ì½”ë“œ ë“± ê¸°ë³¸ ì •ë³´ë§Œ ë¡œê¹…  HEADERS: BASIC ì •ë³´ì— HTTP í—¤ë”ë„ ë¡œê¹…  FULL: ëª¨ë“  ìš”ì²­ê³¼ ì‘ë‹µ ë°”ë””ë¥¼ í¬í•¨í•œ ìƒì„¸ ì •ë³´ ë¡œê¹…Feign Logger ì„¤ì •í•˜ê¸°ì•„ëž˜ ì½”ë“œëŠ” Logger.Level ì„ FULL ë¡œ ì„¤ì •í•˜ì—¬ ëª¨ë“  ìš”ì²­ê³¼ ì‘ë‹µ ë°”ë””ë¥¼ ë¡œê¹…í•˜ë„ë¡ í•˜ëŠ” ì„¤ì • ì½”ë“œìž…ë‹ˆë‹¤.@Configurationpublic class FeignConfiguration {    @Bean    Logger.Level feignLoggerLevel() {        // FULL ë¡œê·¸ ë ˆë²¨ ì„¤ì •        return Logger.Level.FULL;    }}ErrorDecoderErrorDecoderëŠ” FeignClient í˜¸ì¶œ ì‹œ ì—ëŸ¬ ì‘ë‹µì„ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ì—¬ ì²˜ë¦¬í•  ìˆ˜ ìžˆê²Œ í•´ì£¼ëŠ” ì¸í„°íŽ˜ì´ìŠ¤ìž…ë‹ˆë‹¤.ì‚¬ìš© ëª©ì ìœ¼ë¡œëŠ” ê¸°ë³¸ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ ì™¸ì—, ì‚¬ìš©ìž ì •ì˜ ì˜ˆì™¸ë¡œ ë³€í™˜í•˜ì—¬ ë³´ë‹¤ ì˜ë¯¸ ìžˆëŠ” ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.FeignClient ë¥¼ í†µí•´ ë°œìƒí•˜ëŠ” ëª¨ë“  ì˜ˆì™¸ëŠ” ErrorDecoderë¥¼ ê±°ì¹˜ê²Œ ë©ë‹ˆë‹¤.Custom ErrorDecoder êµ¬í˜„ðŸš¨ ì»¤ìŠ¤í„°ë§ˆì´ì§•ëœ ErrorDecoder ê°€ ë™ìž‘í•˜ê¸° ìœ„í•´ì„œëŠ” ìŠ¤í”„ë§ Bean ìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìžˆì–´ì•¼ í•©ë‹ˆë‹¤.ì•„ëž˜ ì½”ë“œëŠ” ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ ErrorDecoder ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ëž˜ìŠ¤ìž…ë‹ˆë‹¤.@Componentpublic class FeignErrorDecoder implements ErrorDecoder {    @Override    public Exception decode(String methodKey, Response response) {        switch (response.status()) {            case 400:                // 400 ì˜ˆì™¸ì˜ ê²½ìš°, ë³„ë„ì˜ ì‚¬ìš©ìž ì •ì˜ ì˜ˆì™¸ ì²˜ë¦¬ ê°€ëŠ¥                break;            case 404:                // 404 ì˜ˆì™¸ì˜ ê²½ìš°, ì‚¬ìš©ìž ì •ì˜ ì˜ˆì™¸ ë©”ì‹œì§€ ì‘ë‹µ                if (methodKey.contains("getOrders")) {                    return new ResponseStatusException(HttpStatus.valueOf(response.status()), "User's orders are not found");                }                break;            default:                return new Exception(response.reason());        }        return null;    }}String methodKeyì´ íŒŒë¼ë¯¸í„°ëŠ” FeignClient ì¸í„°íŽ˜ì´ìŠ¤ì˜ íŠ¹ì • ë©”ì„œë“œë¥¼ ì‹ë³„í•˜ëŠ” ê³ ìœ í•œ í‚¤ìž…ë‹ˆë‹¤.í˜¸ì¶œí•œ ë©”ì„œë“œì˜ ì´ë¦„ê³¼ ê´€ë ¨ ì •ë³´ë¥¼ í¬í•¨í•˜ì—¬, ì—ëŸ¬ ë°œìƒ ì‹œ ì–´ë–¤ ë©”ì„œë“œ í˜¸ì¶œì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆëŠ”ì§€ ì‹ë³„í•  ìˆ˜ ìžˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.ì»¤ìŠ¤í„°ë§ˆì´ì§•ëœ ì—ëŸ¬ ì²˜ë¦¬ ë¡œì§ì—ì„œ íŠ¹ì • ë©”ì„œë“œì— ë”°ë¥¸ ì—ëŸ¬ í•¸ë“¤ë§ì„ ë‹¤ë¥´ê²Œ ì ìš©í•  ìˆ˜ë„ ìžˆìŠµë‹ˆë‹¤.ì˜ˆì‹œ: MyFeignClient#getUser ì²˜ëŸ¼ ì¸í„°íŽ˜ì´ìŠ¤ ì´ë¦„ê³¼ ë©”ì„œë“œ ì´ë¦„ì„ ì¡°í•©í•œ í˜•íƒœë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.Response responseì´ ê°ì²´ëŠ” FeignClientê°€ API í˜¸ì¶œì„ í†µí•´ ë°›ì€ HTTP ì‘ë‹µì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.HTTP ìƒíƒœ ì½”ë“œ, í—¤ë”, ë°”ë”” ë“±ì˜ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ë˜í•œ ì‘ë‹µ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì—ëŸ¬ ìƒí™©ì— ë§žëŠ” ì˜ˆì™¸ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ì¶”ê°€ ë¡œê¹…ì„ í•  ë•Œ í™œìš©ë©ë‹ˆë‹¤.Spring Cloud Retryì™€ ErrorDecoderFeignClientë¥¼ í†µí•´ API í˜¸ì¶œ ì‹œ ë§Œì•½ ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤ë©´, ê¸°ë³¸ ë˜ëŠ” ì»¤ìŠ¤í„°ë§ˆì´ì§•ëœ ErrorDecoderë¥¼ ê±°ì¹˜ê²Œ ë©ë‹ˆë‹¤.ì˜ˆì™¸ê°€ ë°œìƒí•œ ê²½ìš° ìž¬ì‹œë„ ì²˜ë¦¬ë¥¼ ê³ ë ¤í•´ë³¼ ìˆ˜ ìžˆì„ ê²ƒìž…ë‹ˆë‹¤.Spring CloudëŠ” ìž¬ì‹œë„ ì²˜ë¦¬ì— ëŒ€í•œ ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ê³ , Resilience4j ëŠ” Retry ì˜ êµ¬í˜„ì²´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.ë§Œì•½ Spring Cloud Retry ì„¤ì •ë„ ì ìš©ë˜ì–´ ìžˆë‹¤ë©´ ìž¬ì‹œë„ ì²˜ë¦¬ì™€ ErrorDecoder ì¤‘ ì–´ë–¤ ê²ƒì´ ë” ë¨¼ì € ì²˜ë¦¬ë ê¹Œìš”?FeignClientì—ì„œ ìš”ì²­ì´ ì‹¤íŒ¨í•  ê²½ìš°ì˜ ë™ìž‘ ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤1. ì˜¤ë¥˜ ë°œìƒAPI í˜¸ì¶œ ê²°ê³¼ HTTP ì˜¤ë¥˜(ì˜ˆ: 4xx, 5xx)ê°€ ë°œìƒí•˜ë©´ FeignClientì€ ë¨¼ì € í•´ë‹¹ ì‘ë‹µì„ ë°›ìŠµë‹ˆë‹¤.2. ErrorDecoder ì²˜ë¦¬ë°›ì€ ì‘ë‹µì€ ErrorDecoderì˜ decode ë©”ì„œë“œë¥¼ í†µí•´ ì²˜ë¦¬ë©ë‹ˆë‹¤.ì´ë•Œ ErrorDecoderëŠ” ì‘ë‹µì— ë”°ë¥¸ ì ì ˆí•œ ì˜ˆì™¸(Exception)ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.ë§Œì•½ ì»¤ìŠ¤í„°ë§ˆì´ì§•ëœ ErrorDecoder ë¹ˆì´ ì¡´ìž¬í•œë‹¤ë©´, ErrorDecoder ì¸í„°íŽ˜ì´ìŠ¤ì˜ ê¸°ë³¸ êµ¬í˜„ì²´(Default)ë¥¼ ëŒ€ì²´í•©ë‹ˆë‹¤.3. RetryableException ì—¬ë¶€ì— ë”°ë¥¸ ì²˜ë¦¬  ë§Œì•½ ErrorDecoderê°€ ë°˜í™˜í•˜ëŠ” ì˜ˆì™¸ê°€ RetryableExceptionì¸ ê²½ìš°, Feignì— ì„¤ì •ëœ Retryerê°€ í•´ë‹¹ ì˜ˆì™¸ë¥¼ ê°ì§€í•˜ì—¬ ìž¬ì‹œë„ ë¡œì§ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.  ë°˜ë©´, RetryableExceptionì´ ì•„ë‹Œ ì¼ë°˜ Exceptionì´ë¼ë©´, ìž¬ì‹œë„ ì—†ì´ í˜¸ì¶œì´ ì‹¤íŒ¨í•œ ê²ƒìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.ErrorDecoder.DefaultErrorDecoder ì¸í„°íŽ˜ì´ìŠ¤ ë‚´ë¶€ì— ì¤‘ì²© í´ëž˜ìŠ¤ë¡œ ê¸°ë³¸ êµ¬í˜„ì²´ì¸ Default í´ëž˜ìŠ¤ê°€ ì¡´ìž¬í•©ë‹ˆë‹¤.Default ì˜ decode ë©”ì„œë“œë¥¼ ì‚´íŽ´ë³´ê² ìŠµë‹ˆë‹¤.public static class Default implements ErrorDecoder {    private final RetryAfterDecoder retryAfterDecoder = new RetryAfterDecoder();        ...    public Exception decode(String methodKey, Response response) {        FeignException exception = FeignException.errorStatus(methodKey, response, this.maxBodyBytesLength, this.maxBodyCharsLength);        Long retryAfter = this.retryAfterDecoder.apply((String)this.firstOrNull(response.headers(), "Retry-After"));        return (Exception)(retryAfter != null ? new RetryableException(response.status(), exception.getMessage(), response.request().httpMethod(), exception, retryAfter, response.request()) : exception);    }    private &lt;T&gt; T firstOrNull(Map&lt;String, Collection&lt;T&gt;&gt; map, String key) {        return map.containsKey(key) &amp;&amp; !((Collection)map.get(key)).isEmpty() ? ((Collection)map.get(key)).iterator().next() : null;    }}  decode ë©”ì„œë“œì˜ return êµ¬ë¬¸ì„ ì‚´íŽ´ë³´ë©´ ìµœì¢…ì ìœ¼ë¡œ RetryableException ì˜ˆì™¸ë¥¼ ë°˜í™˜í•˜ëŠ” ì§€, ì•„ë‹ˆë©´ ë‹¤ë¥¸ Exception ì„ ë°˜í™˜í•˜ëŠ”ì§€ì— ë”°ë¼ ìž¬ì‹œë„ ì²˜ë¦¬ê°€ ê²°ì •ë©ë‹ˆë‹¤.  ë§Œì•½ Retry ê°€ ì ìš©ë˜ì–´ ìžˆê³ , ErrorDecoder ê°€ RetryableException ì˜ˆì™¸ë¥¼ ë°œìƒ ë¦¬í„´í•˜ë©´, ìž¬ì‹œë„ ì²˜ë¦¬ê°€ ìˆ˜í–‰ë©ë‹ˆë‹¤.  Long íƒ€ìž…ì˜ retryAfter ë³€ìˆ˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ìž¬ì‹œë„ë¥¼ í•˜ê¸° ì „ì— ì–¼ë§ˆë‚˜ ê¸°ë‹¤ë ¤ì•¼ í•˜ëŠ”ì§€(ì˜ˆ: ì´ˆ ë‹¨ìœ„)ë¥¼ ì•Œë ¤ì£¼ëŠ” ì •ë³´ìž…ë‹ˆë‹¤. í•´ë‹¹ ì •ë³´ëŠ” ì‘ë‹µ í—¤ë”ì— ë‹´ê²¨ì„œ ì „ë‹¬ë©ë‹ˆë‹¤.ðŸ“Œ ìš”ì•½  Feign Loggerë¡œ ìƒì„¸ ë¡œê·¸ë¥¼ ê¸°ë¡í•˜ê³ , Custom ErrorDecoderë¡œ ì‚¬ìš©ìž ì •ì˜ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ êµ¬í˜„í•¨ìœ¼ë¡œì¨ ì„œë¹„ìŠ¤ì˜ ì‹ ë¢°ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìžˆìŒ.  FeignClient ìš”ì²­ ì‹¤íŒ¨ ì‹œ ë¨¼ì € ErrorDecoderë¥¼ ê±°ì³ ì˜ˆì™¸ê°€ ìƒì„±ë˜ê³ , ê·¸ ì˜ˆì™¸ê°€ RetryableExceptionì¸ ê²½ìš°ì—ë§Œ ìž¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜ì´ ë™ìž‘.ì°¸ê³  ë¬¸í—Œ  Spring Cloud OpenFeign  Feign Logging Configuration]]></content>
      <categories>
        
          <category> Spring Cloud </category>
        
          <category> MSA </category>
        
      </categories>
      <tags>
        
          <tag> Feign Logger </tag>
        
          <tag> ErrorDecoder </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Spring Cloud CircuitBreaker]]></title>
      <url>/spring%20cloud/msa/2025/02/11/Spring-Cloud-Client-CircuitBreaker/</url>
      <content type="text"><![CDATA[  ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ ê°„ í†µì‹  ìž¥ì•  ëŒ€ì²˜ ë°©ì‹ ì¤‘ CircuitBreaker ì‚¬ìš© ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ìž!ë“¤ì–´ê°€ê¸°MSA í†µì‹  ì¤‘ ìž¥ì• ê°€ ë°œìƒí•œ ê²½ìš°, ìž¥ì•  ëŒ€ì²˜ ë°©ì‹ ì¤‘ í•˜ë‚˜ì¸ CircuitBreaker ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.CircuitBreaker ë¥¼ ì§ì—­í•˜ìžë©´, íšŒë¡œ ì°¨ë‹¨ê¸°ë¡œ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.íšŒë¡œ ì°¨ë‹¨ê¸°ë¥¼ ì „ë¥˜ì˜ íë¦„ì„ ë§‰ê±°ë‚˜ íë¥´ê²Œ í•˜ëŠ” íë¦„ ì œì–´ê¸°ìž…ë‹ˆë‹¤.CircuitBreakerëŠ” API ìš”ì²­ì˜ íë¦„ì„ ë§‰ê±°ë‚˜ íë¥´ê²Œ í•˜ëŠ” API ìš”ì²­ ì œì–´ê¸°ë¡œ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ë§Œì•½ ì–´ë–¤ ì„œë²„ê°€ ë‹¤ìš´ë˜ë²„ë ¸ë‹¤ë©´, ê·¸ ì„œë²„ì— API í˜¸ì¶œì„ í•˜ë”ë¼ë„ ì‘ë‹µì„ ë°›ì§€ ëª»í•  ê²ƒìž…ë‹ˆë‹¤.ë‹¨ìˆœížˆ ì‘ë‹µì„ ë°›ì§€ ëª»í•˜ëŠ” ê²ƒì— ê·¸ì¹˜ì§€ ì•Šê³ , ì´ ì—ëŸ¬ëŠ” MSA í™˜ê²½ì—ì„œ ì „íŒŒê°€ ë©ë‹ˆë‹¤.ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš©ìžê°€ ìžê¸° ìžì‹ ì˜ ì£¼ë¬¸ ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ” APIê°€ User Serviceì— ìžˆë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì€ User Service -&gt; Order Service ì„œë¹„ìŠ¤ë¥¼ ê±°ì¹˜ë©´ì„œ í•„ìš”í•œ ì •ë³´ë“¤ì„ ì¡°íšŒí•˜ëŠ” APIë¥¼ ì—°ë‹¬ì•„ í˜¸ì¶œí•©ë‹ˆë‹¤. ì´ë•Œ Order Serviceì— ìž¥ì• ê°€ ë°œìƒí•œë‹¤ë©´, User ServiceëŠ” ì‘ë‹µì„ ë°›ì§€ ëª» í•  ê²ƒì´ê³  ê²°êµ­ User Serviceë¥¼ í˜¸ì¶œí•œ í´ë¼ì´ì–¸íŠ¸ë„ ì—ëŸ¬ë¥¼ ì‘ë‹µë°›ê²Œ ë  ê²ƒ ìž…ë‹ˆë‹¤.ì´ëŸ° ìƒí™©ì˜ ê²½ìš°, Order Serviceê°€ íšŒë³µë˜ê¸° ì „ê¹Œì§€ ë°˜ë³µì ìœ¼ë¡œ ìš”ì²­ì„ í•´ë´¤ìž ì—ëŸ¬ ì‘ë‹µë§Œ ë°›ì„ ë¿ìž…ë‹ˆë‹¤.ê·¸ë¦¬ê³  ì£¼ë¬¸ ê´€ë ¨ ë°ì´í„°ë¥¼ ì¡°íšŒ ëª» í–ˆì„ ë¿, ì‚¬ìš©ìžì˜ ì •ë³´ëŠ” User Serviceì—ì„œ ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë‹¨ì§€, ì£¼ë¬¸ ë°ì´í„°ë¥¼ ì¡°íšŒ ëª» í–ˆë‹¤ëŠ” ì´ìœ ë¡œ ì‚¬ìš©ìžì—ê²Œ ì—ëŸ¬ ì‘ë‹µì„ ë³´ë‚´ëŠ” ê²ƒì€ ë¶€ìžì—°ìŠ¤ëŸ° ì²˜ë¦¬ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.ì´ëŸ° ë¬¸ì œì ë“¤ì„ í•´ê²°í•˜ê³ ìž, Spring Cloud ëŠ” CircuitBreakerì˜ ì¶”ìƒí™” ê³„ì¸µì„ ì œê³µí•˜ë©° CircuitBreakì˜ êµ¬í˜„ì²´ í´ëž˜ìŠ¤ë¡œ Resilience4jê°€ ë„ë¦¬ ì‚¬ìš©ë˜ê³  ìžˆìŠµë‹ˆë‹¤.ê·¸ëŸ¬ë©´ Resilience4jì˜ ë§Žì€ ê¸°ëŠ¥ ì¤‘ CircuitBreakerì— ëŒ€í•´ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.Spring Cloud CircuitBreakerìŠ¤í”„ë§ í´ë¼ìš°ë“œëŠ” CircuitBreakerì˜ ì¶”ìƒí™” ê³„ì¸µì„ ì œê³µí•©ë‹ˆë‹¤.ì•„ëž˜ ì½”ë“œëŠ” ìŠ¤í”„ë§ í´ë¼ìš°ë“œê°€ ì œê³µí•˜ëŠ” CircuitBreakerì˜ ì¸í„°íŽ˜ì´ìŠ¤ ìž…ë‹ˆë‹¤.package org.springframework.cloud.client.circuitbreaker;import java.util.function.Function;import java.util.function.Supplier;public interface CircuitBreaker {    default &lt;T&gt; T run(Supplier&lt;T&gt; toRun) {        return this.run(toRun, (throwable) -&gt; {            throw new NoFallbackAvailableException("No fallback available.", throwable);        });    }    &lt;T&gt; T run(Supplier&lt;T&gt; toRun, Function&lt;Throwable, T&gt; fallback);}CircuitBreakerì˜ ì‚¬ìš©ë²•ì— ëŒ€í•´ ê°„ë‹¨ížˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.  ìš°ì„ , CircuitBreaker ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.  êµ¬í˜„ì²´ë¥¼ ìƒì„±í•˜ê³  run ë©”ì„œë“œì— Supplierì™€ Functionì„ ì¸ìžë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.  Supplier ì€ ì‹¤ì œë¡œ ì²˜ë¦¬í•˜ê³ ìž í•˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìž‘ì„±í•´ì£¼ë©´ ë©ë‹ˆë‹¤.  Function ì€ ë§Œì•½ Supplierê°€ ì‹¤íŒ¨í•˜ê±°ë‚˜ íšŒë¡œê°€ ì°¨ë‹¨ëœ ê²½ìš°ì— ì‹¤í–‰í•˜ëŠ” fallback ë©”ì„œë“œë¥¼ ìž‘ì„±í•´ì£¼ë©´ ë©ë‹ˆë‹¤. ì¦‰, ì—ëŸ¬ë¥¼ ì‘ë‹µí•˜ëŠ” ëŒ€ì‹  ë³„ë„ì˜ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì„ ì „ë‹¬í•©ë‹ˆë‹¤.CircuitBreakerFactoryìŠ¤í”„ë§ í´ë¼ìš°ë“œëŠ” CircuitBreakerì˜ Factory íŒ¨í„´ì˜ ì¸í„°íŽ˜ì´ìŠ¤ë„ ì œê³µí•©ë‹ˆë‹¤.Resilience4jëŠ” í•´ë‹¹ Factory ì¸í„°íŽ˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.package org.springframework.cloud.client.circuitbreaker;public abstract class CircuitBreakerFactory&lt;CONF, CONFB extends ConfigBuilder&lt;CONF&gt;&gt; extends AbstractCircuitBreakerFactory&lt;CONF, CONFB&gt; {    public CircuitBreakerFactory() {    }    public abstract CircuitBreaker create(String id);    public CircuitBreaker create(String id, String groupName) {        return this.create(id);    }}Resilience4jì˜ ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ë©´ CircuitBreakerFactory êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.Resilience4j CircuitBreakerìš°ì„  Resilience4j ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.// gradledependencies {  implementation 'org.springframework.cloud:spring-cloud-starter-circuitbreaker-resilience4j:3.2.0'  }ê·¸ ë‹¤ìŒìœ¼ë¡œ CircuitBreakerì˜ ì„¤ì •ì„ êµ¬ì„±í•´ì¤ë‹ˆë‹¤.ë§ˆì§€ë§‰ìœ¼ë¡œ í•´ë‹¹ ì„¤ì •ì„ ê°€ì§„ ì»¤ìŠ¤í…€ CircuitBreakerFactoryë¥¼ Bean ìœ¼ë¡œ ë“±ë¡í•˜ì—¬ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.ì•„ëž˜ ì½”ë“œëŠ” CircuitBreakerì˜ ì„¤ì •ì„ ì»¤ìŠ¤í…€í•œ CircuitBreakerFactoryë¥¼ Bean ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ì½”ë“œìž…ë‹ˆë‹¤.@Beanpublic Customizer&lt;Resilience4JCircuitBreakerFactory&gt; defaultCustomizer() {    return factory -&gt; factory.configureDefault(id -&gt; new Resilience4JConfigBuilder(id)            .timeLimiterConfig(TimeLimiterConfig.custom().timeoutDuration(Duration.ofSeconds(3)).build())            .circuitBreakerConfig(CircuitBreakerConfig.ofDefaults())            .build());}  ê¸°ë³¸ì ìœ¼ë¡œ ì„¤ì •ê°’ìœ¼ë¡œ ì œê³µí•˜ëŠ” CircuitBreakerConfig ê¸°ë³¸ ë² ì´ìŠ¤ë¡œ ì„¤ì •í•´ì¤ë‹ˆë‹¤.  ê·¸ ì™¸ ì»¤ìŠ¤í…€ë§ˆì´ì§• í•˜ê³  ì‹¶ì€ ê°’ë“¤ì€ ë¹Œë”(Builder) íŒ¨í„´ìœ¼ë¡œ ê°ê° ì„¤ì •í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  ìœ„ ì½”ë“œì—ì„œëŠ” ì»¤ìŠ¤í…€ë§ˆì´ì§•í•œ timeLimiterConfig ì„¤ì •ì€ ì§€ì •í•œ ì‹œê°„ ë‚´ì— ìž‘ì—…ì´ ì™„ë£Œë˜ì§€ ì•Šìœ¼ë©´ íƒ€ìž„ì•„ì›ƒì„ ë°œìƒì‹œí‚¤ëŠ” ì„¤ì •ìž…ë‹ˆë‹¤. íƒ€ìž„ì•„ì›ƒì´ ê³„ì† ë°œìƒí•˜ë‹¤ê°€ ìž„ê³„ì¹˜ë¥¼ ë„˜ì–´ê°€ê²Œ ë˜ë©´, íšŒë¡œê°€ ì°¨ë‹¨(Closed)ë©ë‹ˆë‹¤.ê¸°ë³¸ ì„¤ì • ê°’ë“¤ì€ CircuitBreakerConfig.ofDefault()ëŠ” ì•„ëž˜ì™€ ê°™ì€ ì„¤ì •  ê°’ë“¤ë¡œ êµ¬ì„±ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.ê° ì„¤ì •ë“¤ì— ëŒ€í•œ ì˜ë¯¸ëŠ” ê³µì‹ ë¬¸ì„œì— ìž˜ ì •ë¦¬ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.public Builder() {    this.currentTimestampFunction = CircuitBreakerConfig.DEFAULT_TIMESTAMP_FUNCTION;    this.timestampUnit = CircuitBreakerConfig.DEFAULT_TIMESTAMP_UNIT;    this.recordExceptions = new Class[0];    this.ignoreExceptions = new Class[0];    this.failureRateThreshold = 50.0F;    this.minimumNumberOfCalls = 100;    this.writableStackTraceEnabled = true;    this.permittedNumberOfCallsInHalfOpenState = 10;    this.slidingWindowSize = 100;    this.recordResultPredicate = CircuitBreakerConfig.DEFAULT_RECORD_RESULT_PREDICATE;    this.waitIntervalFunctionInOpenState = IntervalFunction.of(Duration.ofSeconds(60L));    this.transitionOnResult = CircuitBreakerConfig.DEFAULT_TRANSITION_ON_RESULT;    this.automaticTransitionFromOpenToHalfOpenEnabled = false;    this.slidingWindowType = CircuitBreakerConfig.DEFAULT_SLIDING_WINDOW_TYPE;    this.slowCallRateThreshold = 100.0F;    this.slowCallDurationThreshold = Duration.ofSeconds(60L);    this.maxWaitDurationInHalfOpenState = Duration.ofSeconds(0L);    this.createWaitIntervalFunctionCounter = 0;}ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ ì ìš© ì½”ë“œì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ CircuitBreakerë¥¼ ì ìš©í•œ ì½”ë“œë¥¼ ê°„ë‹¨ížˆ ì‚´íŽ´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ì•„ëž˜ ì½”ë“œëŠ” userId ë¥¼ í†µí•´ ì‚¬ìš©ìž ì •ë³´ì™€ ì£¼ë¬¸ ì •ë³´ë¥¼ í•©ì³ì„œ ì‘ë‹µí•˜ëŠ” ê°„ë‹¨í•œ ë©”ì„œë“œìž…ë‹ˆë‹¤.@Overridepublic UserDto getUserByUserId(String userId) {    log.info("user-service: íšŒì›IDë¡œ íšŒì›ì •ë³´ ë° ì£¼ë¬¸ ëª©ë¡ ì¡°íšŒ");    Optional&lt;Users&gt; findUser = userRepository.findByUserId(userId);    if (findUser.isEmpty()) {        throw new NoSuchElementException("User not found");    }    UserDto userDto = modelMapper.map(findUser.get(), UserDto.class);    List&lt;ResponseOrder&gt; orders = orderClient.getOrdersByUserId(userId);    userDto.setOrders(orders);    return userDto;}  userId ë¡œ user ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.  ë§Œì•½ userIdì— í•´ë‹¹í•˜ëŠ” Userê°€ ì—†ë‹¤ë©´ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.  user ì—”í‹°í‹°ë¥¼ DTOë¡œ ë§¤í•‘í•©ë‹ˆë‹¤.  CircuitBreakerë¥¼ ì ìš©í•œ OrderClientë¥¼ í†µí•´ userì˜ ì£¼ë¬¸ ëª©ë¡ì„ ì¡°íšŒí•´ì˜µë‹ˆë‹¤.  ì£¼ë¬¸ ëª©ë¡ì„ DTOì— ì„¤ì •í•´ì£¼ê³  ë°˜í™˜í•©ë‹ˆë‹¤.ì—¬ê¸°ì„œ UserService -&gt; OrderService ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìžˆê¸° ë•Œë¬¸ì—, ì£¼ë¬¸ ëª©ë¡ì„ ì¡°íšŒí•´ì˜¤ì§€ ëª» í•˜ê³  ì—ëŸ¬ê°€ ì „íŒŒë  ê°€ëŠ¥ì„±ì´ ìžˆìŠµë‹ˆë‹¤.ì•„ëž˜ ì½”ë“œëŠ” CircuitBreakerFactory ë¡œ ë¶€í„° CircuitBreaker ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì£¼ë¬¸ ëª©ë¡ì„ ì¡°íšŒí•´ì˜¤ëŠ” API í˜¸ì¶œ ë¡œì§(Supplier)ê³¼ í˜¸ì¶œ ì‹¤íŒ¨ ë˜ëŠ” íšŒë¡œ ì°¨ë‹¨ì˜ ê²½ìš° ëŒ€ì‹ í•  ë¡œì§(Fallback Function)ì„ CircuitBreaker ì˜ ì¸ìžë¡œ ì „ë‹¬í•˜ëŠ” ì½”ë“œìž…ë‹ˆë‹¤.@Service@RequiredArgsConstructorpublic class OrderClient {    private final OrderApiService orderApiService;    private final CircuitBreakerFactory circuitBreakerFactory;    public List&lt;ResponseOrder&gt; getOrdersByUserId(String userId) {        CircuitBreaker circuitBreaker = circuitBreakerFactory.create("circuitbreaker");        ResponseEntity&lt;List&lt;ResponseOrder&gt;&gt; orderResponse = circuitBreaker.run(                () -&gt; orderApiService.getOrdersByUserId(userId),                throwable -&gt; new ResponseEntity&lt;&gt;(new ArrayList&lt;&gt;(), null, HttpStatus.INTERNAL_SERVER_ERROR));        return orderResponse.getBody();    }}  íšŒë¡œê°€ ì°¨ë‹¨ë˜ì–´ ìžˆì§€ ì•Šì€ ìƒíƒœì—ì„œ ì •ìƒì ìœ¼ë¡œ API ì‘ë‹µì„ ë°›ìœ¼ë©´ ê¸°ì¡´ íë¦„ëŒ€ë¡œ ì •ìƒ ì‘ë‹µí•©ë‹ˆë‹¤.  ë§Œì•½ Order Serviceê°€ ì‘ë‹µì— ì‹¤íŒ¨í•˜ê±°ë‚˜ íšŒë¡œê°€ ì°¨ë‹¨ë˜ì–´ ìžˆëŠ” ìƒíƒœë¼ë©´ fallback ë©”ì„œë“œë¥¼ ìˆ˜í–‰í•˜ì—¬ ì—ëŸ¬ë¥¼ ì‘ë‹µí•˜ëŠ” ëŒ€ì‹  ìœ„ ì½”ë“œì—ì„œëŠ” ë¹ˆ ë¦¬ìŠ¤íŠ¸(Empty List)ë¥¼ ë°˜í™˜í•˜ë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.  íšŒë¡œì˜ ìƒíƒœ ì „ì´, ì‹¤íŒ¨ ìž„ê³„ì¹˜ ë“± ë” ìžì„¸í•œ ì •ë³´ëŠ” ê³µì‹ ë¬¸ì„œë¥¼ í†µí•´ í™•ì¸í•˜ì‹¤ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.ìŠ¤í”„ë§ AOPì™€ CircuitBreakerCircuitBreaker ì˜ ì—­í• ì€ API ìš”ì²­ì— ëŒ€í•œ íë¦„ ì œì–´ìž…ë‹ˆë‹¤.ê¸°ì¡´ íë¦„ëŒ€ë¡œ í˜ëŸ¬ê°€ê²Œ í•  ì§€, ì•„ë‹ˆë©´ ê¸°ì¡´ ìš”ì²­ì„ ì°¨ë‹¨í•˜ê³  ë‹¤ë¥¸ ì‘ë‹µì„ ëŒ€ì‹  ì²˜ë¦¬ í•  ì§€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.ë§Œì•½ CircuitBreakerì˜ ì—­í• ì´ ë‹´ê¸´ ì½”ë“œê°€ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ì„žì—¬ìžˆë‹¤ë©´ ê°€ë…ì„±ì´ ë–¨ì–´ì§€ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì§ˆ ê²ƒìž…ë‹ˆë‹¤.ë”°ë¼ì„œ ìŠ¤í”„ë§ì€ ì• ë„ˆí…Œì´ì…˜ì„ í™œìš©í•œ @CircuitBreaker ë¥¼ ì œê³µí•©ë‹ˆë‹¤.ì´ëŠ” í”„ë¡ì‹œ íŒ¨í„´ì„ í™œìš©í•œ ìŠ¤í”„ë§ AOPë¥¼ ì ìš©í•œ ì‚¬ë¡€ìž…ë‹ˆë‹¤.ì•„ëž˜ ì½”ë“œëŠ” @CircuitBreakerë¥¼ í™œìš©í•œ ê°„ë‹¨í•œ ì˜ˆì œ ì½”ë“œìž…ë‹ˆë‹¤.@RestControllerpublic class SampleController {    // name: íšŒë¡œ ì°¨ë‹¨ê¸° ì´ë¦„, fallbackMethod: ì‹¤íŒ¨ ì‹œ í˜¸ì¶œí•  ë©”ì„œë“œëª…    @GetMapping("/process")    @CircuitBreaker(name = "myCircuitBreaker", fallbackMethod = "fallbackProcess")    public String process() {                // í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§                // ìž„ì˜ë¡œ ì˜ˆì™¸ ë°œìƒ        if (Math.random() &lt; 0.5) {            throw new RuntimeException("Simulated exception");        }        return "Operation succeeded!";    }    // í´ë°± ë©”ì„œë“œ: ì›ëž˜ ë©”ì„œë“œì™€ ê°™ì€ ë°˜í™˜ íƒ€ìž…, ë™ì¼ íŒŒë¼ë¯¸í„° ëª©ë¡ì— Throwable ì¶”ê°€    public String fallbackProcess(Throwable throwable) {        // ì˜ˆì™¸ ë©”ì‹œì§€ë¥¼ ë¡œê¹…í•˜ê±°ë‚˜ ë³„ë„ì˜ ì²˜ë¦¬ ê°€ëŠ¥        return "Fallback response: " + throwable.getMessage();    }}  ìœ„ ì½”ë“œë¥¼ ë³´ë©´ CircuitBreakerì˜ ì—­í• ì¸ íšŒë¡œ ì°¨ë‹¨ì— ê´€í•œ ì½”ë“œê°€ ì „í˜€ ë³´ì´ì§ˆ ì•ŠìŠµë‹ˆë‹¤. ì¦‰, ìŠ¤í”„ë§ AOPì— ì˜í•´ ê´€ì‹¬ì‚¬ê°€ ì™„ì „ížˆ ë¶„ë¦¬ëœ ê²ƒìž…ë‹ˆë‹¤.  ë”°ë¼ì„œ CircuitBreakerë¥¼ ì ìš©í•˜ë©´ì„œë„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ë” ì§‘ì¤‘ í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.ðŸš€ ì¶”ê°€ ê°œë°œ ë° ê³ ë ¤í•˜ë©´ ì¢‹ì„ ë‚´ìš©  Resilience4jì˜ ë©”íŠ¸ë¦­ ë° ëª¨ë‹ˆí„°ë§ ê¸°ëŠ¥(prometheus, micrometerì™€ì˜ ì—°ë™)  fallback ë¡œì§ ì™¸ì—ë„, ìž¬ì‹œë„(Retry)ë‚˜ ë°±ì˜¤í”„(Backoff) ì „ëžµ ì¡°í•©ðŸ“Œ ìš”ì•½CircuitBreaker ê°œë…:ì„œë¹„ìŠ¤ ìž¥ì•  ì‹œ, ì§€ì†ì ì¸ ìš”ì²­ìœ¼ë¡œ ì¸í•œ ì˜¤ë¥˜ ì „íŒŒë¥¼ ë§‰ê³  ëŒ€ì²´ ë¡œì§(fallback)ì„ ì‹¤í–‰í•˜ì—¬ ì‹œìŠ¤í…œ ì•ˆì •ì„±ì„ ë†’ì´ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.Spring Cloud CircuitBreaker:ë‹¤ì–‘í•œ CircuitBreaker êµ¬í˜„ì²´(ì˜ˆ: Resilience4j)ë¥¼ ì¶”ìƒí™”í•˜ì—¬ ì‚¬ìš©í•˜ê¸° ì‰½ê³ , Spring ìƒíƒœê³„ì™€ í†µí•©ë˜ì–´ ìžˆìœ¼ë©°, AOPë¥¼ í™œìš©í•´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•©ë‹ˆë‹¤.Resilience4j CircuitBreaker:ì„¸ë°€í•œ ì„¤ì •ê³¼ ìµœì í™”ëœ êµ¬í˜„ì²´ë¥¼ ì œê³µí•˜ë©°, ì»¤ìŠ¤í…€ë§ˆì´ì§•í•œ ì„¤ì •ê³¼ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.]]></content>
      <categories>
        
          <category> Spring Cloud </category>
        
          <category> MSA </category>
        
      </categories>
      <tags>
        
          <tag> Circuit Breaker </tag>
        
          <tag> Resilience4j </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Spring Cloud ê¸°ë°˜ ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ ê°„ í†µì‹ ]]></title>
      <url>/spring%20cloud/msa/2025/02/10/Spring-Cloud-%EA%B8%B0%EB%B0%98-%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4-%EA%B5%AC%EC%B6%95-%EA%B3%BC%EC%A0%95/</url>
      <content type="text"><![CDATA[  Spring Cloudë¥¼ í™œìš©í•œ ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ ê°„ í†µì‹  ë°©ì‹ì—ëŠ” ë¬´ì—‡ì´ ìžˆëŠ”ì§€ ì‚´íŽ´ë³´ê² ìŠµë‹ˆë‹¤!ðŸ“Œ ë“¤ì–´ê°€ê¸°e-commerce í”Œëž«í¼ì„ ì£¼ì œë¡œ MSAì™€ Spring Cloud ê¸°ë°˜ì˜ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.ëª¨ë†€ë¦¬ì‹ì´ ì•„ë‹Œ ì‚¬ìš©ìž, ì£¼ë¬¸, ìƒí’ˆ, ê²°ì œ, ë°°ë‹¬ ë“± ê° ë„ë©”ì¸ ë³„ë¡œ MSA ê¸°ë°˜ìœ¼ë¡œ ê°œë°œí–ˆìŠµë‹ˆë‹¤.ëª¨ë†€ë¦¬ì‹ì˜ ê²½ìš° ê° ë„ë©”ì¸ ì„œë¹„ìŠ¤ë³„ë¡œ ì†Œí†µì„ ìœ„í•´ ë„¤íŠ¸ì›Œí¬ë¥¼ ê±°ì¹  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.ì´ì— ë°˜í•´, MSA ê¸°ë°˜ì˜ ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ë“¤ì€ ë„ë©”ì¸ ì„œë¹„ìŠ¤ë¼ë¦¬ í†µì‹ ì„ í•˜ê¸° ìœ„í•´ì„œ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì´ í•„ìˆ˜ì´ë‹¤.ë‹¤ë“¤ ì•„ì‹œë‹¤ì‹œí”¼, ëŒ€í‘œì ì¸ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì—ëŠ” HTTP í†µì‹ ì´ ìžˆìŠµë‹ˆë‹¤.í˜„ëŒ€ ëŒ€ë¶€ë¶„ì˜ í†µì‹ ì€ HTTPì„ ì´ìš©í•œ REST APIë¡œ ì´ë¤„ì§„ë‹¤ê³  ë´ë„ ë¬´ë¦¬ê°€ ì•„ë‹ˆì£ .ê·¸ ì™¸ì—ë„ TCP í†µì‹ , gRPC ë“± ë‹¤ì–‘í•œ ë°©ì‹ì´ ì¡´ìž¬í•©ë‹ˆë‹¤.ì €ëŠ” ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ ê°„ í†µì‹  ë°©ì‹ì„ ì—¬ëŸ¬ ë²ˆ ìˆ˜ì •í•´ì™”ìŠµë‹ˆë‹¤.ì²˜ìŒì—ëŠ” RestTemplate ì„ ì´ìš©í•œ API í†µì‹ , ê·¸ ë‹¤ìŒìœ¼ë¡œ Spring Cloudì—ì„œ ì§€ì›í•˜ëŠ” OpenFeign ì„ í†µí•œ í†µì‹ .ë§ˆì§€ë§‰ ì¢…ì°©ì§€ë¡œ, ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ ê°„ ì¢…ì†ì„±ì„ ì—†ì• ê¸° ìœ„í•œ Kafka ì´ë²¤íŠ¸ ê¸°ë°˜ ë¹„ë™ê¸° í†µì‹ ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.ê° ë°©ì‹ì—ëŠ” ìž¥ë‹¨ì ì´ ìžˆìœ¼ë¯€ë¡œ, ìž¥ë‹¨ì ì„ ì´í•´í•˜ê³  í•´ê²°í•˜ê³ ìž í•˜ëŠ” ë¬¸ì œì— ì–´ë–¤ ë°©ì‹ì´ ìµœì„ ì¼ ì§€ ê²°ì •í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. (ê°œë°œìžì˜ ë•ëª©)API ì†Œê°œìš°ì„ , ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ ê°œë°œí•œ APIë“¤ì— ëŒ€í•´ ë¨¼ì € ì†Œê°œ í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.ê°ê°ì˜ ë„ë©”ì¸ ì„œë¹„ìŠ¤ë“¤ì€ ì„œë¡œ API í†µì‹ ì„ í†µí•´ ìœ ê¸°ì ìœ¼ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤.ê·¸ë¦¬ê³  ê° ì„œë¹„ìŠ¤ ë³„ë¡œ ë°œìƒí•˜ëŠ” ë°ì´í„°ë“¤ì€ ê°ê° ê³ ìœ í•œ ë°ì´í„°ë² ì´ìŠ¤ì— ë°ì´í„°ë¥¼ ì €ìž¥í•˜ê²Œ ë©ë‹ˆë‹¤.ì°¸ê³ ë¡œ, í•´ë‹¹ í”„ë¡œì íŠ¸ì˜ í•µì‹¬ ëª©í‘œëŠ” ë¶„ì‚° í™˜ê²½ì—ì„œì˜ ì¤‘ì•™ ì§‘ì¤‘ì‹ ë¡œê¹… ê´€ë¦¬ ë° íŠ¸ë ˆì´ì‹±ì´ê¸° ë•Œë¬¸ì— ê° ì„œë¹„ìŠ¤ ë³„ë¡œ í•„ìš”í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë“¤ì— ë¹„ì•½í•œ ë¶€ë¶„ì´ ì¡´ìž¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.User Service  íšŒì› ê°€ìž…  ë¡œê·¸ì¸  ìœ ì € ì •ë³´ ì¡°íšŒ  ìœ ì € ëª©ë¡ ì¡°íšŒProduct Service  ìƒí’ˆ ëª©ë¡ ì¡°íšŒ  ìž¬ê³  ì°¨ê°  ìž¬ê³  ì¦ê°€Order Service  ì£¼ë¬¸  ì£¼ë¬¸ ì¡°íšŒ  ì£¼ë¬¸ ëª©ë¡ ì¡°íšŒPayment Service  ê²°ì œ  ê²°ì œ ì·¨ì†ŒDelivery Service  ë°°ì†¡ ì ‘ìˆ˜  ë°°ì†¡RestTemplateRestTemplateì€ Spring ì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” HTTP ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ì‚¬ìš©í•˜ëŠ” ë„êµ¬ìž…ë‹ˆë‹¤.ìž¥ì   ê°„ë‹¨í•˜ê³  ì§ê´€ì ì´ë‹¤.  ë™ê¸° ë°©ì‹ì´ê¸° ë•Œë¬¸ì— íë¦„ì„ ë”°ë¼ê°€ê¸° ì‰½ë‹¤.ë‹¨ì   ìš”ì²­ì„ ë³´ë‚¸ í›„ ì‘ë‹µì„ ë°›ì„ ë•Œê¹Œì§€ ëŒ€ê¸°í•œë‹¤. (try-catchë¡œ ì˜ˆì™¸ ì²˜ë¦¬ + íƒ€ìž„ì•„ì›ƒ ì„¤ì •ì´ í•„ìˆ˜ âš ï¸)  ë¶€í•˜ê°€ í° ì‹œìŠ¤í…œì—ì„œëŠ” ë³‘ëª© í˜„ìƒì´ ë°œìƒí•  ìˆ˜ ìžˆë‹¤.  ì˜ˆì™¸ ë°œìƒ ì‹œ ìž¥ì• ê°€ ì „íŒŒë¨.ì˜ˆì œ ì½”ë“œ@Service@RequiredArgsConstructorpublic class UserServiceImpl implements UserService {    private final RestTemplate restTemplate;    ...    @Override    public UserDto getUserByUserId(String userId) {      ...      ResponseEntity&lt;List&lt;ResponseOrder&gt;&gt; ordersResponse = restTemplate.exchange(        "http://example.com/orders/" + userId,        HttpMethod.GET,        null,        new ParameterizedTypeReference&lt;&gt;() {}      );    }}  RestTemplate ì„ ì‚¬ìš©í•œ ì½”ë“œ ì¼ë¶€ìž…ë‹ˆë‹¤. (ì‚¬ìš©ìžì˜ ì£¼ë¬¸ ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” ìš”ì²­)  ëª‡ ê°œì˜ ì¸ìžë¥¼ ì „ë‹¬í•¨ìœ¼ë¡œì¨ ê°„ë‹¨í•˜ê²Œ HTTP ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.          ìš”ì²­ URL      HTTP ë©”ì„œë“œ      HttpEntity (ìš”ì²­ ë³¸ë¬¸ ë° í—¤ë”)      Class&lt;?&gt; responseType (ì‘ë‹µ íƒ€ìž…)            ðŸš¨ ë‹¤ë§Œ, ë™ê¸° ë°©ì‹(Synchronous)ìœ¼ë¡œ ë™ìž‘í•˜ê¸° ë•Œë¬¸ì—, íŠ¹ì • ì„œë¹„ìŠ¤ê°€ ì¤‘ë‹¨ë˜ê±°ë‚˜ ì‘ë‹µì´ ì§€ì—°ë˜ë©´ ìš”ì²­ì„ ë³´ë‚¸ ì„œë¹„ìŠ¤ë„ ì˜í–¥ì„ ë°›ëŠ”ë‹¤ëŠ” ê²ƒì„ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.  OpenFeignOpenFeignì€ HTTP ìš”ì²­ì„ ë³´ë‚´ëŠ” ìž‘ì—…ì„ ìžë™ìœ¼ë¡œ í•´ì£¼ëŠ” ë„êµ¬ìž…ë‹ˆë‹¤. RestTemplateê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ, ì¸í„°íŽ˜ì´ìŠ¤ë§Œ ë§Œë“¤ë©´ ìš”ì²­ ì½”ë“œê°€ ìžë™ìœ¼ë¡œ ìƒì„±ë˜ëŠ” íŽ¸ì˜ì„±ì„ ì œê³µí•©ë‹ˆë‹¤.ìž¥ì   ì½”ë“œê°€ ê°„ê²°í•¨ (ì¸í„°íŽ˜ì´ìŠ¤ ì •ì˜ë§Œ í•˜ë©´ ë¨)  ë‚´ë¶€ì ìœ¼ë¡œ ë¡œë“œ ë°¸ëŸ°ì‹± ê°€ëŠ¥ (Eurekaì™€ ì—°ë™ ì‹œ URL í•„ìš” ì—†ìŒ)  Feign + Resilience4jë¡œ Circuit Breaker(íšŒë¡œ ì°¨ë‹¨ê¸°) ì ìš© ê°€ëŠ¥. (Fallback ê¸°ëŠ¥ í¬í•¨)  Spring Cloud ìƒíƒœê³„ì™€ ì—°ë™ì´ ì‰¬ì›€.ë‹¨ì   ê¸°ë³¸ì ìœ¼ë¡œ ë™ê¸° ë°©ì‹ì´ë¯€ë¡œ ì‘ë‹µì„ ê¸°ë‹¤ë ¤ì•¼ í•¨.  ì¶”ê°€ì ì¸ ì„¤ì •ì´ í•„ìš”í•  ìˆ˜ë„ ìžˆìŒ (Feign ì¸í„°ì…‰í„°, ë¡œê¹… ë“±)  ì˜ˆì™¸ ë°œìƒ ì‹œ ìž¥ì• ê°€ ì „íŒŒë¨.ì˜ˆì œ ì½”ë“œ@Service@RequiredArgsConstructorpublic class UserServiceImpl implements UserService {    private final OrderServiceClient orderServiceClient;    ...    @Override    public UserDto getUserByUserId(String userId) {      ...      List&lt;ResponseOrder&gt; orderList = orderServiceClient.getOrders(userId);    }}@FeignClient(name = "order-service")public interface OrderServiceClient {    @GetMapping("/orders/{userId}")    List&lt;ResponseOrder&gt; getOrders(@PathVariable("userId") String userId);}  OpenFeign ì„ ì‚¬ìš©í•  ê²½ìš° ì¸í„°íŽ˜ì´ìŠ¤ë§Œ êµ¬í˜„í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— RestTemplate ë³´ë‹¤ ë” ê°„ê²°í•˜ê³  ì§ê´€ì ì´ë‹¤.  Eureka(ë””ìŠ¤ì»¤ë²„ë¦¬ ì„œë¹„ìŠ¤)ì™€ ì—°ë™ ì‹œ, ì„œë¹„ìŠ¤ì˜ ì´ë¦„ë§Œìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìžˆë‹¤.KafkaKafkaëŠ” ë¹„ë™ê¸° ë©”ì‹œì§€ í ì‹œìŠ¤í…œìž…ë‹ˆë‹¤. ë¹„ë™ê¸°ì´ê¸° ë•Œë¬¸ì— ì‘ë‹µì„ ê¸°ë‹¤ë¦´ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ë©”ì‹œì§€ ì²˜ë¦¬ë„ ë°”ë¡œ í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.ìž¥ì   ë¹„ë™ê¸° ë°©ì‹ì´ë¼ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬ ê°€ëŠ¥.  ì—¬ëŸ¬ ì„œë¹„ìŠ¤ ê°„ ë…ë¦½ì ì¸ ìš´ì˜ì´ ê°€ëŠ¥ (ì„œë¡œ ëŠìŠ¨í•œ ê²°í•©ì´ ë¨)  ë°ì´í„° ë³µêµ¬ ë° í™•ìž¥ì„±ì´ ë›°ì–´ë‚¨.ë‹¨ì   ì‹¤ì‹œê°„ ì‘ë‹µì´ í•„ìš”í•œ ê²½ìš°ì—ëŠ” ì ì ˆí•˜ì§€ ì•ŠìŒ.  ëŸ¬ë‹ ì»¤ë¸Œ ì¡´ìž¬ (í”„ë¡œë“€ì„œ, ì»¨ìŠˆë¨¸ ê°œë… ë“± Kafkaì— ëŒ€í•œ ì´í•´ í•„ìš”)  ë©”ì‹œì§€ ì²˜ë¦¬ ìˆœì„œë¥¼ ë³´ìž¥í•˜ë ¤ë©´ ì¶”ê°€ì ì¸ ì„¤ì •ì´ í•„ìš”.ì˜ˆì œ ì½”ë“œ@Service@Slf4j@RequiredArgsConstructorpublic class OrderServiceImpl implements OrderService {    private final OrderRepository orderRepository;    private final OrderEventProducer orderEventProducer;    ...    @Transactional    @Override    public OrderDto createOrder(OrderDto orderDto) {        ...        orderRepository.save(order); // ì£¼ë¬¸ ë°ì´í„° ì €ìž¥         orderEventProducer.send(ORDER_CREATED, orderCreatedEvent); // ORDER_CREATED ë©”ì‹œì§€ ë°œí–‰        ...    }  ì£¼ë¬¸ì´ ìƒì„±ë˜ë©´ ì£¼ë¬¸ ë°ì´í„°ë¥¼ ì €ìž¥í•˜ê³  ì´ì–´ì„œ ì£¼ë¬¸ ìƒì„± ë©”ì‹œì§€ë¥¼ ë°œí–‰í•©ë‹ˆë‹¤.  ë©”ì‹œì§€ëŠ” KafkaTemplate ì„ ì´ìš©í•œ Producer(í”„ë¡œë“€ì„œ)ë¥¼ í†µí•´ ë°œí–‰í•©ë‹ˆë‹¤.@Service@Slf4j@RequiredArgsConstructorpublic class OrderCreatedEventConsumer {    private final ObjectMapper objectMapper;    private final PaymentHandler paymentHandler;    @KafkaListener(topics = "ORDER_CREATED", groupId = "${spring.kafka.consumer.group-id:payment-service-group}")    public void consume(ConsumerRecord&lt;String, String&gt; record) throws JsonProcessingException {        try {            String message = record.value();            log.info("Consumed message: {}", message);            OrderCreatedEvent orderCreatedEvent = objectMapper.readValue(message, OrderCreatedEvent.class);            log.info("Order created event: {}", orderCreatedEvent);            paymentHandler.handle(orderCreatedEvent);         } catch (Exception e) {            log.error("Error Consume OrderCreatedEvent", e);        }    }}  ì£¼ë¬¸ ìƒì„± ë©”ì‹œì§€ê°€ ê²°ì œ ì„œë¹„ìŠ¤ì˜ ì»¨ìŠˆë¨¸(Consumer)ì— ë„ë‹¬í•˜ë©´, ì£¼ë¬¸ì˜ ê²°ì œ ì²˜ë¦¬ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.  ì¦‰, ì£¼ë¬¸ -&gt; ê²°ì œì˜ ê³¼ì •ì´ ë™ê¸°ì‹ì´ ì•„ë‹Œ ë¹„ë™ê¸°ì‹ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.ðŸš€ ìš”ì•½ë¹„êµ ì •ë¦¬ ë° ì‹¤í–‰ íë¦„            ë°©ì‹      ìš”ì²­ ë°©ì‹      ì‘ë‹µ ì²˜ë¦¬      íŠ¹ì§•                  RestTemplate      ì§ì ‘ HTTP ìš”ì²­      ë™ê¸° (ì‘ë‹µ ë°›ì„ ë•Œê¹Œì§€ ëŒ€ê¸°)      ê°„ë‹¨í•˜ì§€ë§Œ ì‘ë‹µ ê¸°ë‹¤ë ¤ì•¼ í•¨              OpenFeign      ì¸í„°íŽ˜ì´ìŠ¤ ê¸°ë°˜ HTTP ìš”ì²­      ë™ê¸° (ì„¤ì • ì‹œ ë¹„ë™ê¸° ê°€ëŠ¥)      ì½”ë“œê°€ ê°„ê²°, Spring Cloudì™€ ì—°ë™ ìš©ì´              Kafka      ë©”ì‹œì§€ ì „ì†¡      ë¹„ë™ê¸° (ë‚˜ì¤‘ì— ë©”ì‹œì§€ ìˆ˜ì‹ )      ëŒ€ëŸ‰ì˜ ë°ì´í„° ì²˜ë¦¬ì— ì í•©      ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ            ì‚¬ìš© ì‚¬ë¡€      ì–´ë–¤ ë°©ì‹ì„ ì„ íƒí• ê¹Œ?                  REST APIì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ      RestTemplate ë˜ëŠ” OpenFeign ì‚¬ìš©              ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê°„ í†µì‹ ì´ ë§Žì„ ë•Œ      OpenFeign ì¶”ì²œ (Spring Cloud ì—°ë™)              ì´ë²¤íŠ¸ ê¸°ë°˜ ë¹„ë™ê¸° ì²˜ë¦¬      Kafka ì‚¬ìš© (ë¹„ë™ê¸° ë©”ì‹œì§•)      ]]></content>
      <categories>
        
          <category> Spring Cloud </category>
        
          <category> MSA </category>
        
      </categories>
      <tags>
        
          <tag> RestTemplate </tag>
        
          <tag> OpenFeign </tag>
        
          <tag> Kafka </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ì„±ì  ê´€ë¦¬ ëª¨ë¸ë§ ì—°ìŠµ (3)]]></title>
      <url>/database/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%20%EC%A4%91%EA%B8%89(modeling)/2024/06/18/grades-manage3/</url>
      <content type="text"><![CDATA[ê³¼ëª©-ê°œê°•-ì„ ìƒë‹˜ ê´€ê³„ë„  ê³¼ëª©ê³¼ ì„ ìƒë‹˜ì€ M:N ê´€ê³„ì´ë‹¤. ê·¸ ê°€ìš´ë°ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” ê´€ê³„ í…Œì´ë¸”ì¸ ê°œê°• í…Œì´ë¸”ì´ ì¡´ìž¬í•œë‹¤.  ê°œê°• í…Œì´ë¸”(OpenLecture)ì˜ PKëŠ” TeacherID , SubjectId , OpenDate ê°€ í•©ì³ì§„ ë³µí•©í‚¤ì´ë‹¤. ì´ì²˜ëŸ¼ ìƒì†í˜• PKë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” í•œ ì„ ìƒë‹˜ì´ ë™ì¼í•œ í•™ë…„ ê³¼ëª©ì„ ì¤‘ë³µìœ¼ë¡œ ê°œê°•í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.  ê°œê°• í…Œì´ë¸”ì˜ Seq ëŒ€ì²´í‚¤ë¥¼ ì„ ì–¸í•˜ì—¬ ì¡°íšŒë¥¼ íŽ¸ë¦¬í•˜ê²Œ ë•ë„ë¡ í–ˆë‹¤.í˜„ìž¬ê¹Œì§€ ì™„ì„±ëœ ERDí•™ë…„ ë§ˆìŠ¤í„° í…Œì´ë¸”ì´ ê°œê°• ê´€ê³„ í…Œì´ë¸”ê³¼ 1:M ê´€ê³„ë¥¼ ë§ºì—ˆë‹¤.  í•™ë…„ë³„ë¡œ ê° ê³¼ëª©ì´ ì¡´ìž¬í•˜ê¸° ë•Œë¬¸ì— ê°œê°• í…Œì´ë¸” PKì— SchoolGradeId ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤. ì´ë ‡ë“¯ ê´€ê³„ í…Œì´ë¸”ì—ëŠ” ì—¬ëŸ¬ ì§‘ë‹¨ìœ¼ë¡œë¶€í„° ì°¸ì¡°ë˜ëŠ” í…Œì´ë¸”ì´ë‹¤.ì„ ìƒë‹˜ í…Œì´ë¸”ì˜ PKê°€ ë°˜ í…Œì´ë¸”ì˜ FKë¡œ 1:M ê´€ê³„ë¥¼ ë§ºê³  ìžˆë‹¤.  ì„ ìƒë‹˜ í…Œì´ë¸”ì˜ PKê°€ ë°˜ í…Œì´ë¸”ì˜ FKë¡œ 1:M ê´€ê³„ë¥¼ ë§ºê³  ìžˆì§€ë§Œ, ì›ì¹™ì ìœ¼ë¡œ 1:1 ê´€ê³„ì´ë‹¤. í•˜ì§€ë§Œ FKë¥¼ ì„¤ì •í•´ì¤€ ëª©ì ì€ ë‹´ìž„ ì„ ìƒë‹˜ì´ ì—†ëŠ” ë°˜ ë°ì´í„°ë¥¼ ë§Œë“¤ì§€ ì•Šê¸° ìœ„í•¨ì´ë‹¤. ì¦‰, ì™¸ëž˜í‚¤ ì œì•½ ì¡°ê±´ì„ ì´ìš©í•˜ì—¬ ë°˜ë“œì‹œ ë‹´ìž„ ì„ ìƒë‹˜ì´ ì¡´ìž¬í•˜ë„ë¡ FKë¡œ TeacherId ë¥¼ ì„¤ì •í•œ ê²ƒì´ë‹¤. (ê´€ê³„ê°€ 1:M ì´ë¼ì„œ ì„¤ì •í•œ ê²ƒì´ ì•„ë‹Œ ê²ƒì„ ì§šê³  ë„˜ì–´ê°€ìž.) ì´ë ‡ë“¯ ê´€ê³„ê°€ 1:Mì€ ì•„ë‹ˆì§€ë§Œ, PKì™€ FK ì„¤ì •ì„ ë§ºì–´ì¤Œìœ¼ë¡œì¨ FKë¡œ ì‚¬ìš©ë˜ëŠ” ì»¬ëŸ¼ì˜ ë„ë©”ì¸ ê°’ì„ ê¸°ì¤€ í…Œì´ë¸”(ì„ ìƒë‹˜ í…Œì´ë¸”) ì˜ ë„ë©”ì¸ìœ¼ë¡œ í•œì •ì§“ê³  ë°˜ë“œì‹œ ê°’ì´ ìž…ë ¥ë˜ë„ë¡ í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë˜ê¸°ë„ í•œë‹¤.  TeacherID ê°€ ë°˜ í…Œì´ë¸”ì— ë“¤ì–´ì˜´ìœ¼ë¡œì¨ ì–¸ì œ ë‹´ìž„ì„ ë§¡ê²Œ ëëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ê°€ ì¡´ìž¬í•´ì•¼ì§€ë§Œ í…Œì´ë¸” í•´ì„ì´ ê°€ëŠ¥í•´ì§„ë‹¤. ë”°ë¼ì„œ AssignedDate ë¼ëŠ” ë‹´ìž„ì„ ë§¡ê²Œëœ ë‚ ì§œ ì»¬ëŸ¼ì„ ì¶”ê°€í•´ì¤€ë‹¤.  ì°¸ê³ ë¡œ StudentId íƒ€ìž…ì„ bigint ë¡œ ë³€ê²½í•´ì¤˜ì•¼ í•œë‹¤. (ì´ˆê¸° ì„¤ê³„ ì˜¤ë¥˜)          ë˜ëŠ” entrance_date ë¥¼ ì¶”ê°€í•˜ë©´ ë§¤ë…„ ì‹ ìž…ìƒì´ ìž…í•™í•  ë•Œë§ˆë‹¤ StudentId ê°€ 1ë²ˆë¶€í„° ë‹¤ì‹œ ì‹œìž‘í•˜ëŠ” ë°©ë²•ë„ ì¡´ìž¬í•œë‹¤. ì´ë ‡ê²Œí•˜ë©´ smallint ë¡œ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•´ë„ ëœë‹¤.        TearcherId ì˜ íƒ€ì´ë¸” tinyint ì—ì„œ int ë¡œ ë°”ê¿”ì£¼ìž. ìƒˆë¡œ ë°œë ¹ì˜¤ê±°ë‚˜ í‡´ì§í•˜ëŠ” ìƒí™©ì´ ë°œìƒí•˜ë©´ tinyint ë§Œìœ¼ë¡œëŠ” ë¶€ì¡±í•  ê²ƒì´ë‹¤. (ì´ˆê¸° ì„¤ê³„ ì˜¤ë¥˜)ìµœì¢… ERD - ìžë™ ì •ë ¬  í•™ìƒê³¼ ê°œê°• í…Œì´ë¸” ê°„ì˜ ì‹œí—˜ ì ìˆ˜ ê´€ê³„ í…Œì´ë¸”ì„ ìƒì„±í•´ì¤€ë‹¤.(M:N ê´€ê³„)          í•™ìƒIDì™€ ê°œê°• í…Œì´ë¸”ì˜ ë³´ì¡°í‚¤(Seq)ë¥¼ PK ë³µí•©í‚¤ë¡œ ìž¡ëŠ”ë‹¤.      ì‹œí—˜ ì ìˆ˜ í…Œì´ë¸”(TB_Score)ì— ì‹œí—˜ ì ìˆ˜(score) ì†ì„±ì„ ì¶”ê°€í•´ì¤€ë‹¤.      ìµœì¢… ERD - ìœ„ì¹˜ ë³€ê²½  ERD í…Œì´ë¸” ìœ„ì¹˜ ì„ ì • íŒ          ë§ˆìŠ¤í„° í…Œì´ë¸” ë˜ëŠ” ê¸°ì¤€ í…Œì´ë¸”ë“¤ì€ ë°”ê¹¥ì— ìœ„ì¹˜ì‹œí‚¨ë‹¤.      ê´€ê³„ í…Œì´ë¸”ë“¤ì€ ê°€ìš´ë°ì— ìœ„ì¹˜í•˜ë„ë¡ í•œë‹¤. ê´€ê³„ê°€ ë§Žì´ ë§žë¬¼ë ¤ìžˆì„ ìˆ˜ë¡ ê°€ìš´ë°ì— ë†“ë„ë¡ í•˜ìž. í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ê³„ í…Œì´ë¸”ì¼ í™•ë¥ ì´ ë†’ë‹¤.        OpenLecture ê°œê°• í…Œì´ë¸”ì˜ ê²½ìš° í•™ë…„, ê³¼ëª©, ì„ ìƒë‹˜ í…Œì´ë¸”ë“¤ì˜ ê´€ê³„ í…Œì´ë¸” ì—­í• ì„ ìˆ˜í–‰í•˜ë©´ì„œ, ë™ì‹œì— ì‹œí—˜ ì ìˆ˜ í…Œì´ë¸”ì˜ ë§ˆìŠ¤í„° í…Œì´ë¸”ë¡œë„ ì´ìš©ë˜ê³  ìžˆë‹¤.  1:M, M:N ê´€ê³„ë¥¼ ëª¨ë¥´ëŠ” ìƒíƒœì—ì„œ ì„¤ê³„ë¥¼ í•˜ë©´ ì‹­ì¤‘íŒ”êµ¬ ì¡°ì¸ í…Œì´ë¸”(=ê²°ê³¼ í…Œì´ë¸”, ì—‘ì…€)ì„ ì„¤ê³„í•œë‹¤. ìž˜ëª»ëœ ì„¤ê³„ë¥¼ í•˜ë©´ ë°ì´í„° ì´ìƒ í˜„ìƒ(ì¤‘ë³µ, ì‚­ì œ, ê°±ì‹ ) ë“±ì´ ë°œìƒí•  ìˆ˜ ìžˆë‹¤.erdcloud íˆ´ì„ ì´ìš©í•˜ì—¬ ì •ë¦¬í•œ ERD~~ERDCloud íˆ´ì—ëŠ” ê°œê°• í…Œì´ë¸”ì˜ ë³´ì¡°í‚¤ë¥¼ ì„±ì  í…Œì´ë¸”ì˜ PKë¡œ ìž¡ëŠ” ë°©ë²•ì´ ì—†ëŠ” ê²ƒ ê°™ë‹¤. ~~]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ê¸‰(Modeling) </category>
        
      </categories>
      <tags>
        
          <tag> Database </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[RDB 1:1 ê´€ê³„]]></title>
      <url>/database/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%20%EC%A4%91%EA%B8%89(modeling)/2024/06/18/1-1-relation/</url>
      <content type="text"><![CDATA[  1:1 ê´€ê³„ì— ëŒ€í•´ ì•Œì•„ë³´ìž.1:1 ê´€ê³„ëŠ” ë¶€ë¶€ ê´€ê³„ì´ë‹¤.1 : 1 ê´€ê³„ëž€ ì–‘ì¸¡ ìž…ìž¥ì—ì„œ ìƒëŒ€ë¥¼ ë³´ë”ë¼ë„ ë°˜ë“œì‹œ ë‹¨ í•˜ë‚˜ì˜Â ê´€ê³„ë¥¼ ê°€ì§€ëŠ” ê²ƒì„ ë§í•œë‹¤.1:1 ê´€ê³„ëŠ” ë¶€ë¶€ê´€ê³„ë¼ê³  ë§í•œë‹¤.ê°€ìž¥ ë‹¨ìˆœí•œ ê´€ê³„ë¡œ ë³´ì´ì§€ë§Œ ì¤‘ê¸‰ ì´ìƒì˜ ê³ ê¸‰ ê¸°ìˆ ì— í•´ë‹¹ëœë‹¤.1:M, M:N ê´€ê³„ë¡œ í•´ê²°í•  ìˆ˜ ì—†ëŠ” ë§Žì€ ë¬¸ì œë“¤ì´ ì´ ê´€ê³„ë¥¼ í†µí•´ì„œ í•´ê²°ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆë‹¤.ì‹ ëž‘, ì‹ ë¶€ 1ëŒ€1 ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚¸ ì—‘ì…€ í‘œ            ì‹ ëž‘ID      ì‹ ëž‘ëª…      ì‹ ë¶€ID      ì‹ ë¶€ëª…                  1      í™ê¸¸ë™      B      ì´ë‚œì˜              2      ê¹€ì¢…ë‚¨      A      í™©ê¸ˆìž              3      ì´í•˜ì„       C      ë°•ìƒìˆœ      ìœ„ í…Œì´ë¸”ì€ ì¡°ì¸ í…Œì´ë¸”ì˜ í˜•íƒœì´ë‹¤. 1:1 ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚˜ëŠ” ë° PKê°€ ì‹ ëž‘ID, ì‹ ë¶€ID ë‘ ê°œë¡œ ìž¡ì•„ì•¼ í•˜ëŠ”ë° PKì˜ ìµœì†Œì„±ì„ ë§Œì¡±í•˜ì§€ ì•ŠëŠ”ê²ƒ ê°™ë‹¤.í…Œì´ë¸”ì„ ë‹¤ì‹œ ì„¤ê³„í•´ë³´ìž.(ë¶€ë¶€ í…Œì´ë¸” ìƒì„±)ë¶€ë¶€ í…Œì´ë¸”            ì—´ ì´ë¦„      ë°ì´í„° í˜•ì‹      NULL í—ˆìš©                  ë¶€ë¶€Id      int      x              ì‹ ëž‘ëª…      varchar(50)      o              ì‹ ë¶€ëª…      varchar(50)      o      INSERT INTO ë¶€ë¶€VALUES (1, 'í™ê¸¸ë™', 'ì–´ìš°ë™'), (2, 'ê¹€ê¸¸ë™', 'í™©ì§„ì´');            Â       ë¶€ë¶€Id      ì‹ ëž‘ëª…      ì‹ ë¶€ëª…                  1      1      í™ê¸¸ë™      ì–´ìš°ë™              2      2      ê¹€ê¸¸ë™      í™©ì§„ì´        ìš°ë¦¬ê°€ ë¶€ë¶€ í…Œì´ë¸”fh í•˜ê³  ì‹¶ì€ ê²ƒì€ ì´ í•˜ë‚˜ì˜ í…Œì´ë¸”ì„ 1:1 ê´€ê³„ë¥¼ ìœ ì§€í•˜ë˜ ë‘ ê°œì˜ ê°ì²´(ì‹ ëž‘, ì‹ ë¶€)ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤.  ì™œ ë¶„ë¦¬í•´ì•¼ ë˜ëŠ”ê°€?  ì‹ ëž‘, ì‹ ë¶€ë³„ë¡œ ê°ê° ìžì‹ ë§Œì˜ íŠ¹ì„±ì´ ì¡´ìž¬í•˜ê¸° ë•Œë¬¸ì— ì„œë¡œ ë§ˆìŠ¤í„° í…Œì´ë¸”ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.1:1 ê´€ê³„ í…Œì´ë¸”ì˜ PK  1:1 ê´€ê³„ëŠ” ì„œë¡œì˜ PKë¥¼ FKë¡œ ì°¸ì¡°í•˜ì§„ ì•Šì§€ë§Œ, ì„œë¡œì˜ PKë¥¼ ìžì‹ ì˜ PKë¡œ ì‚¬ìš©í•˜ëŠ” í˜•íƒœì´ë‹¤. ì¼ì‹¬ë™ì²´ì„œë¡œì˜ PKë¥¼ ìžì‹ ì˜ PKë¡œ ì‚¬ìš©1:1 ê´€ê³„ë¥¼ ë§ºì€ ë‘ í…Œì´ë¸”ì„ ì¡°ì¸í•˜ë©´ ìœ„ì—ì„œ ì‚´íŽ´ë´¤ë˜ ë¶€ë¶€ í…Œì´ë¸”ì˜ ê²°ê³¼(ì—‘ì…€) í…Œì´ë¸”ê³¼ ë™ì¼í•œ ê²°ê³¼ë¥¼ ì–»ì–´ë‚¼ ìˆ˜ ìžˆë‹¤.ë¶€ë¶€ í…Œì´ë¸” VS ì‹ ëž‘,ì‹ ë¶€ ê°œë³„ í…Œì´ë¸”ë¶€ë¶€ í…Œì´ë¸”ì— ëª¨ë“  ì†ì„±ë“¤ì„ ì¶”ê°€í•´ì„œ ì‚¬ìš©í•´ë„ ë¬¸ì œëŠ” ì—†ì§€ë§Œ ë¶€ë¶€ í…Œì´ë¸”ì´ ë‹¤ë¥¸ ê´€ê³„ í…Œì´ë¸”ê³¼ ê´€ê³„ë¥¼ ë§ºê²Œë˜ë©´ ì¡°íšŒ ì‹œ ì“¸ë° ì—†ëŠ” ì»¬ëŸ¼ë“¤ì„ ì œê±° í•´ì¤˜ì•¼ í•˜ëŠ” ë¶ˆíŽ¸í•¨ì´ ì¡´ìž¬í•  ìˆ˜ë„ ìžˆë‹¤.ì‹ ëž‘, ì‹ ë¶€ ê°œë³„ í…Œì´ë¸”ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ê°ê° ì†ì„±ë“¤ì„ ê´€ë¦¬í•˜ê¸°ë„ íŽ¸ë¦¬í•˜ê³ ,ë‹¤ë¥¸ ê´€ê³„ í…Œì´ë¸”ë“¤ê³¼ ê´€ê³„ë¥¼ í™•ìž¥í•´ë‚˜ê°ˆ ìˆ˜ ìžˆë‹¤ëŠ” ìž¥ì ì´ ì¡´ìž¬í•˜ê¸° ë•Œë¬¸ì— ê°œë³„ í…Œì´ë¸”ë¡œ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ë” ì¢‹ë‹¤ê³  ë³¸ë‹¤.  â­ï¸ ì •ë¦¬í•˜ë©´, 1:1 ê´€ê³„ëŠ” ì›ëž˜ ì¼ì‹¬ë™ì²´ë¡œ í•˜ë‚˜ì´ë‹¤. í•˜ì§€ë§Œ í…Œì´ë¸”ì€ ë‘ ê°œë¡œ ê´€ë¦¬ë˜ëŠ” ê²ƒì´ ìœ ìš©í•œ íŽ¸ì´ë‹¤.]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ê¸‰(Modeling) </category>
        
      </categories>
      <tags>
        
          <tag> Database </tag>
        
          <tag> Relation </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[DBì—ì„œ íŠ¸ëžœìž­ì…˜ì´ëž€ ë¬´ì—‡ì¸ê°€?]]></title>
      <url>/database/transaction/db%20engineering/2024/06/15/Transaction/</url>
      <content type="text"><![CDATA[ì •ì˜í•˜ë‚˜ì˜ ìž‘ì—… ë‹¨ìœ„ë¡œ ì·¨ê¸‰ë˜ëŠ” SQL ì¿¼ë¦¬ë“¤ì˜ ëª¨ìŒ.íŠ¸ëžœìž­ì…˜ LifecycleTransaction BEGINTransaction COMMITTransaction ROLLBACKTransaction unexpected ending  = ROLLBACK (e.g. crash)ë§Œì•½ 1000ê°œì˜ ì¿¼ë¦¬, 1000ê°œì˜ ë³€ê²½ì„ ì»¤ë°‹í•œë‹¤ë©´, ì´ ëª¨ë“  ë³€ê²½ì„ ì‹¤ì œë¡œ ë””ìŠ¤í¬ì— ëª¨ë‘ ì“°ëŠ” ê±¸ê¹Œ?ì•„ë‹ˆë©´ ê¸°ë‹¤ë ¸ë‹¤ê°€ ëª¨ë“  ê²ƒì„ ë©”ëª¨ë¦¬ì— ë„£ì€ ë‹¤ìŒ ì»¤ë°‹í•  ë•Œ í•œêº¼ë²ˆì— ë””ìŠ¤í¬ì— ì“°ëŠ” ê±¸ê¹Œ?ê°ê°ì˜ ë°©ë²•ì—ëŠ” ìž¥ë‹¨ì ì´ ìžˆë‹¤.ì²« ë²ˆì§¸ ë°©ë²•ì€ ì»¤ë°‹ì„ ë¹ ë¥´ê²Œ ë§Œë“ ë‹¤.ë‘ ë²ˆì§¸ ë°©ë²•ì€ ì»¤ë°‹ì„ ëŠë¦¬ê²Œ ë§Œë“ ë‹¤.ê²°êµ­ ì´ëŸ¬í•œ ìž¥ë‹¨ì ì„ íŒŒì•…í•˜ë©´ì„œ ê°œë°œì„ í•´ì•¼í•œë‹¤.íŠ¸ëžœìž­ì…˜ ì—­í•   íŠ¸ëžœìž­ì…˜ì€ ë³´í†µ ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸í•  ë•Œ ì‚¬ìš©ëœë‹¤.  ì½ê¸° ì „ìš© íŠ¸ëžœìž­ì…˜ë„ ì¡´ìž¬í•œë‹¤.]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> Transaction </category>
        
          <category> DB Engineering </category>
        
      </categories>
      <tags>
        
          <tag> Transaction </tag>
        
          <tag> Database </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Isolation ê³ ë¦½ì„±]]></title>
      <url>/database/db%20engineering/transaction/2024/06/15/Isolation/</url>
      <content type="text"><![CDATA[Read Phenomenaì—¬ëŸ¬ íŠ¸ëžœìž­ì…˜ì´ ë™ì‹œì— ì‹¤í–‰ëœë‹¤ë©´ ë°ì´í„°ë¥¼ ì½ì–´ë“¤ì¼ ë•Œë§ˆë‹¤ ê°’ì´ ë³€í• ê¹Œ?ë³€í™”ëœ ê°’ì„ ì½ëŠ”ê²Œ ì¢‹ì„ê¹Œ ì•„ë‹ˆë©´ ì¼ê´€ëœ ê°’ì„ ì½ì–´ë“¤ì´ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ?ì‚¬ì‹¤, ì •ë‹µì€ ì—†ì§€ë§Œ ì¼ê´€ëœ ê°’ì„ ì½ì–´ë“¤ì´ëŠ” ê²ƒì´ ë” ë°”ëžŒì§í•˜ë‹¤.íŠ¸ëžœìž­ì…˜ì´ ë™ì‹œì— ìˆ˜í–‰ë˜ë©´ì„œ ì—¬ëŸ¬ ê°€ì§€ ì½ê¸° í˜„ìƒë“¤ì´ ì¡´ìž¬í•˜ëŠ”ë° ì´ê²ƒì„,Read Phenomena ë¼ê³  í•œë‹¤.ì—¬ëŸ¬ íŠ¸ëžœìž­ì…˜ì´ ìˆ˜í–‰ë˜ë”ë¼ë„ ì˜ˆìƒë˜ê³  ë°”ëžŒì§í•œ ê²°ê³¼ë¥¼ ì–»ê¸° ìœ„í•´ì„œ íŠ¸ëžœìž­ì…˜ ê°„ ê³ ë¦½ì„±(Isolation)ì´ í•„ìš”í•œ ê²ƒì´ë‹¤.Dirty ReadsDirty ì˜ ì˜ë¯¸ëŠ” ë°ì´í„°ê°€ ì™„ì „ížˆ flush ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ì™„ì „ížˆ commit ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì¦‰, ë‹¤ë¥¸ íŠ¸ëžœìž­ì…˜ì´ ì“´ ë‚´ìš©ì„ ì½ì§€ë§Œ ì‹¤ì œë¡œ ì•„ì§ ì»¤ë°‹ë˜ì§€ ì•Šì€ ê²ƒì„ ì½ëŠ” í˜„ìƒì„ ë§í•œë‹¤.Non-repeatable ReadsíŠ¸ëžœìž­ì…˜ ë‚´ì—ì„œ ì–´ë–¤ ë°ì´í„°ë¥¼ ì½ì€ ì´í›„, ë™ì¼í•œ ìžì›ì„ ë‹¤ì‹œ ì½ìœ¼ë ¤ê³  í•  ë•Œ ê·¸ ê°’ì´ ë³€ê²½ë˜ì–´ì ¸ ìžˆëŠ” í˜„ìƒì„ ë§í•œë‹¤.Phantom Readsë²”ìœ„ì˜ í•´ë‹¹í•˜ëŠ” ê°’ì„ ì½ì–´ë“¤ì´ëŠ” ì¿¼ë¦¬ê°€ ìžˆì„ ë•Œ, ì²« ë²ˆì§¸ ë²”ìœ„ ì¿¼ë¦¬ë¡œë¶€í„° ì–»ì—ˆë˜ ê²°ê³¼ì— ì—†ì—ˆë˜ ê°’ì´ ë‘ ë²ˆì§¸ ë²”ìœ„ ì¿¼ë¦¬ì—ëŠ” ìƒˆë¡œìš´ í–‰ì´ ì‚½ìž…ë˜ì–´ ì²˜ìŒì—ëŠ” ì—†ë˜ ê°’ì„ ì½ëŠ” í˜„ìƒì„ ë§í•œë‹¤. ì¦‰, ë‹¤ë¥¸ íŠ¸ëžœìž­ì…˜ì˜ ì“°ê¸° ìž‘ì—…ìœ¼ë¡œ ì¸í•´ ì²˜ìŒì— ì½ì§€ ì•Šì•˜ë˜ ê²ƒì„ ë‘ ë²ˆì§¸ ì¿¼ë¦¬ì—ì„œ ì½ê²Œ ëœ ê²ƒì„ ë§í•œë‹¤.Lost Updatesí•œ íŠ¸ëžœìž­ì…˜ ë‚´ì—ì„œ ìˆ˜ì •í•œ ë°ì´í„° ê°’ì„ ì»¤ë°‹í•˜ê¸° ì „ì— ë‹¤ë¥¸ íŠ¸ëžœìž­ì…˜ì´ ì»¤ë°‹ ì „ì˜ ë°ì´í„°ë¥¼ ì½ëŠ” í˜„ìƒì„ ë§í•œë‹¤. ê²°êµ­ ì»¤ë°‹ ì´í›„ ì‹œì ì—ì„œ ë³´ë©´ ë‹¤ë¥¸ íŠ¸ëžœìž­ì…˜ì€ ê³¼ê±°ì˜ ë°ì´í„°ë¥¼ ì½ì–´ë²„ë¦° ê¼´ì´ë‹¤.Dirty Reads ì˜ˆì‹œDirty Reads ì˜ˆì‹œ  TX1 Read =&gt; (Product1, 50), (Product2, 80)  TX2 Update =&gt; Product1ì´ 5ê°œê°€ ë” íŒ”ë ¤ì„œ QNT 5ê°œë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤.(10 -&gt; 15)  TX1 Read =&gt; TX2ì˜ ì»¤ë°‹ë˜ì§€ ì•Šì€ ê°’ì„ ì½ì–´ì„œ 155 í•©ì˜ ê²°ê³¼ë¥¼ ë„ì¶œí–ˆë‹¤. (ì¼ê´€ì„±ì´ ìžˆìœ¼ë ¤ë©´ ì‚¬ì‹¤ 130ì´ë¼ëŠ” í•©ì´ ë‚˜ì™”ì–´ì•¼ í–ˆë‹¤.)  TX2 Rollback =&gt; TX2ì˜ ë¡¤ë°±ìœ¼ë¡œ ì¸í•´ ê²°êµ­ TX1ì´ ì½ì€ 155ê°’(Dirty Value)ì— ëŒ€í•œ ì›ì¸ë„ ì‚¬ë¼ì§„ ì…ˆì´ë‹¤.Non-repeatable Read ì˜ˆì‹œNon-repeatable Read ì˜ˆì‹œ  TX1 Read =&gt; (Product1, 50), (Product2, 80)  TX2 Update =&gt; Product1ì´ 5ê°œê°€ ë” íŒ”ë ¤ì„œ QNT 5ê°œë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤.(10 -&gt; 15)  TX2 COMMIT  TX1 Read =&gt; TX2 ì»¤ë°‹ ì´í›„ read í–ˆê¸° ë•Œë¬¸ì— Dirty Valueë¥¼ ì½ì–´ë“¤ì¸ ê²ƒì€ ì•„ë‹ˆë‹¤. í•˜ì§€ë§Œ ì—¬ì „ížˆ ì¼ê´€ì„±ì´ ê¹¨ì§„ 155ì´ë¼ëŠ” í•©ì„ ë‚´ë†“ê³  ìžˆë‹¤.  ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ê³¼ ì„±ëŠ¥ ì‚¬ì´ì˜ trade-off ë¥¼ ê³ ë ¤í–ˆì„ ë•Œ, Non-repeatable readë¥¼ í—ˆìš©í•˜ë”ë¼ë„ ë¬¸ì œê°€ ìƒê¸°ì§€ ì•ŠëŠ” ìƒí™©ì´ë¼ë©´ Non-repeatable readë¥¼ í—ˆìš©í•  ìˆ˜ë„ ìžˆë‹¤.Phantom Read ì˜ˆì‹œPhantom Read(ìœ ë ¹ ì½ê¸°)ëŠ” ë²”ìœ„ ì¿¼ë¦¬ì—ì„œ ë°œìƒí•œë‹¤. íŠ¹ížˆ where ì ˆì´ ì¡´ìž¬í•  ê²½ìš° ìœ ë ¹ì½ê¸°ê°€ ë°œìƒí•˜ì§€ ì•Šì„ ìˆ˜ ìžˆëŠ” ì˜ˆì‹œë¥¼ ìƒê°í•´ ë‚´ê¸° ì–´ë ¤ìš¸ ì •ë„ë¡œ í”í•˜ê²Œ ë°œìƒ ê°€ëŠ¥í•œ í˜„ìƒì´ë‹¤.Phantom Read ì˜ˆì‹œ  TX1 Read =&gt; (Product1, 50), (Product2, 80)  TX2 Insert =&gt; (Product3, 10ê°œ, 1$) ìƒˆë¡œìš´ ìƒí’ˆ ì‚½ìž…  TX2 COMMIT  TX1 Read =&gt; ìƒˆë¡œ ì‚½ìž…ëœ í–‰ê¹Œì§€ ì¡°íšŒí•˜ê¸° ë•Œë¬¸ì— ì¼ê´€ì„±ì´ ê¹¨ì§„ $140ì˜ ê°’ì„ ë„ì¶œí•œë‹¤.  Non-repeatable Read VS Phantom Read  ë°˜ë³µë˜ì§€ ì•ŠëŠ” ì½ê¸°ëŠ” ê¸°ì¡´ì— ì½ì—ˆë˜ ë°ì´í„°ê°€ ê·¸ ë‹¤ìŒì— ì½ì„ ë•Œ ì¼ê´€ì„±ì´ ê¹¨ì§€ëŠ” ê²½ìš°ì´ê³ , ìœ ë ¹ ì½ê¸°ëŠ” ê¸°ì¡´ì— ì—†ë˜ ë°ì´í„°ê°€ ê·¸ ë‹¤ìŒì— ì½ì„ ë•Œ ìƒˆë¡œ ìƒê¸°ëŠ” ë°ì´í„° ë•Œë¬¸ì— ì¼ê´€ì„±ì´ ê¹¨ì§€ëŠ” ê²½ìš°ì´ë‹¤.Lost Updates ì˜ˆì‹œLost Update ì˜ˆì‹œ  ë‘ ê°œì˜ íŠ¸ëžœìž­ì…˜ TX1, TX2ê°€ ê±°ì˜ ë™ì‹œì— BEGINí•˜ì—¬ ë‘˜ ë‹¤ Product1ì˜ QNTë¥¼ 10ìœ¼ë¡œ ë°”ë¼ë³¸ë‹¤.  TX1 Update =&gt; Product1ì˜ QNTì— 10ì„ ë”í•œë‹¤. (10 -&gt; 20)  TX2 Update =&gt; Product2ì˜ QNTì— 5ë¥¼ ë”í•œë‹¤. (10 -&gt; 15)  TX2 COMMIT =&gt; TX1ì—ì„œ ì—…ë°ì´íŠ¸í•œ ê°’ì´ TX2ì´ ì—…ë°ì´íŠ¸í•œ ê°’ìœ¼ë¡œ ë®ì–´ì“°ì—¬ì¡Œë‹¤.  TX1 Read =&gt; TX1ì´ ì—…ë°ì´íŠ¸í•œ ê°’ì„ í† ëŒ€ë¡œ $180 ê°’ì„ ì–»ì–´ì•¼ í•˜ì§€ë§Œ TX2ì˜ ë®ì–´ì“°ê¸°ë¡œ ì¸í•´ TX1ì˜ ì—…ë°ì´íŠ¸ ê°’ì„ ìžƒì–´ë²„ë¦¬ê³  ì¼ê´€ì„±ì´ ê¹¨ì§„ $155 ê°’ì„ ì–»ê²Œ ë˜ì—ˆë‹¤.ì¼ê´€ì„±(Consistence)ì— ë„ë‹¬í•˜ê¸° ìœ„í•´í•œ íŠ¸ëžœìž­ì…˜ ë‚´ì—ì„œ ì½ëŠ”(read) ë°ì´í„°ë“¤ì˜ ê°’ë“¤ì€ ì¼ê´€ì„±(consistence)ì´ ìœ ì§€ë˜ê¸¸ ê¸°ëŒ€í•œë‹¤. ë‹¤ì‹œ ë§í•´, í•œ íŠ¸ëžœìž­ì…˜ ë‚´ì—ì„œ íŠ¹ì • ë°ì´í„°ì— ëŒ€í•´ 100ë²ˆì˜ ì¡°íšŒë¥¼ í•˜ë”ë¼ë„ 100ë²ˆ ì „ë¶€ ê°™ì€ ê°’ì„ ì–»ì„ ìˆ˜ ìžˆì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì‰½ê²Œ ìƒê°í•˜ë©´ ë‹¤ë¥¸ íŠ¸ëžœìž­ì…˜ì˜ ì˜í–¥ì—†ì´ ë³¸ì¸ íŠ¸ëžœìž­ì…˜ ë‚´ì—ì„œë§Œ ë°ì´í„° ì •ë³´ê°€ ì¼ê´€ë˜ì–´ì•¼ í•œë‹¤ê³  ë³¼ ìˆ˜ ìžˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œ ì‹œìŠ¤í…œì€ ì—¬ëŸ¬ íŠ¸ëžœìž­ì…˜ì´ ë™ì‹œì— ì‹¤í–‰ëœë‹¤. ì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” ì¼ê´€ì„±ì„ ì–»ê¸° ìœ„í•´ ê³ ë¦½ì´ í•„ìš”í•œ ê²ƒì´ë‹¤.Isolation Levels  Isolation Level(ê²©ë¦¬ ìˆ˜ì¤€)ì„ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì€ ê° DBMSë§ˆë‹¤ ë‹¤ë¥´ë‹¤.ì„±ëŠ¥ê³¼ ë°ì´í„°ì˜ ì¼ê´€ì„±, ë‘˜ ì‚¬ì´ì˜ trade-offë¥¼ ê³ ë ¤í•˜ì—¬ ê³ ë¦½ ìˆ˜ì¤€ì„ ì •í•˜ë©´ ëœë‹¤.Read Uncommitted  ê³ ë¦½ì´ ì „í˜€ ì—†ëŠ” ë‹¨ê³„ì´ë‹¤. ì»¤ë°‹ ì—¬ë¶€ì— ìƒê´€ì—†ì´ ë‹¤ë¥¸ íŠ¸ëžœìž­ì…˜ì— ì˜í•´ ë°œìƒëœ ë³€í™”ê°€ ì¦‰ê°ì ìœ¼ë¡œ ë³´ì—¬ì§„ë‹¤.  Dirty readê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì¼ê´€ì„±ì´ ê¹¨ì§„ ê°’ì„ ì¡°íšŒí•  ìˆ˜ ìžˆë‹¤.  íŠ¸ëžœìž­ì…˜ì˜ ì²˜ë¦¬ ì†ë„ëŠ” ê°€ìž¥ ë¹ ë¥´ë‹¤. ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ë•Œ íŠ¸ëžœìž­ì…˜ ê°„ ì–´ë– í•œ ì œì•½ë„ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.Read Committed  í•œ íŠ¸ëžœìž­ì…˜ ì•ˆì˜ ê° ì¿¼ë¦¬ë“¤ì€ ë‹¤ë¥¸ íŠ¸ëžœìž­ì…˜ì´ ì»¤ë°‹ ì™„ë£Œëœ ë³€í™”ë“¤ë§Œ ë³¼ ìˆ˜ ìžˆë‹¤.  ì»¤ë°‹ëœ ë³€ê²½ì‚¬í•­ë§Œ ì½ì§€ë§Œ, Non-Repeatable Read ì™€ ê°™ì€ ì¼ê´€ì„±ì´ ê¹¨ì§ˆ ìˆ˜ë„ ìžˆë‹¤.Repeatable Read  íŠ¸ëžœìž­ì…˜ì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ì¿¼ë¦¬ê°€ í–‰ì„ ì½ì„ ë•Œ, í•´ë‹¹ í–‰ì´ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ íŠ¸ëžœìž­ì…˜ì´ ë³´ìž¥í•œë‹¤.  ë°˜ë³µë˜ì§€ ì•ŠëŠ” ì½ê¸°(Non-repeatable Read)ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ê³ ì•ˆëœ ê²©ë¦¬ ìˆ˜ì¤€ì´ë‹¤.  ë™ì¼í•œ íŠ¸ëžœìž­ì…˜ ë‚´ì—ì„œëŠ” ê°’ì„ ëª‡ ë²ˆì´ë‚˜ ì½ë“  í•­ìƒ ê°™ì€ ê°’ì„ ì½ê²Œ ëœë‹¤.Snapshot  íŠ¸ëžœìž­ì…˜ì˜ ê° ì¿¼ë¦¬ëŠ” íŠ¸ëžœìž­ì…˜ ì‹œìž‘ ì‹œì ê¹Œì§€ ì»¤ë°‹ëœ ë³€ê²½ ì‚¬í•­ë§Œ ë³¼ ìˆ˜ ìžˆë‹¤. ì´ê²ƒì€ ê·¸ ìˆœê°„ì˜ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤ëƒ…ìƒ· ë²„ì „ì˜ ë°ì´í„°ë¥¼ ì½ëŠ” ê²ƒê³¼ ê°™ë‹¤.  PostgreSQLì˜ Repeatable ReadëŠ” Snapshot ê²©ë¦¬ ìˆ˜ì¤€ìœ¼ë¡œ ë™ìž‘í•œë‹¤.  íŠ¸ëžœìž­ì…˜ì´ ì‹œìž‘í•˜ë©´ íƒ€ìž„ ìŠ¤íƒ¬í”„ë¡œ ë²„ì „ì„ í‘œì‹œí•œ ìŠ¤ëƒ…ìƒ·ì„ ìƒì„±í•˜ê³  íŠ¸ëžœìž­ì…˜ì´ ì‹¤í–‰ì¤‘ì— í•­ìƒ í•´ë‹¹ ë²„ì „ ìŠ¤ëƒ…ìƒ·ì˜ ë°ì´í„°ë“¤ì„ ì½ê²Œ ëœë‹¤. ì´ë¡œì¨ ìœ ë ¹ ì½ê¸°ë¥¼ í•´ê²°í•  ìˆ˜ ìžˆë‹¤.Serializable  íŠ¸ëžœìž­ì…˜ì€ í•˜ë‚˜ì”© ì°¨ë¡€ëŒ€ë¡œ ì§ë ¬í™”ëœ ê²ƒì²˜ëŸ¼ ì‹¤í–‰ëœë‹¤.  ëª¨ë“  Read Phenomena í˜„ìƒë“¤ì´ ì‚¬ë¼ì§„ë‹¤.  ì†ë„ê°€ ê°€ìž¥ ëŠë¦° ê²©ë¦¬ ìˆ˜ì¤€ì´ë‹¤.Snapshot vs SerializableSnapshot IsolationíŠ¸ëžœìž­ì…˜ì´ ì‹œìž‘ë  ë•Œ ë°ì´í„°ë² ì´ìŠ¤ì˜ ìŠ¤ëƒ…ìƒ·(ë°ì´í„° ì½ê¸° ì „ìš© ë³µì‚¬ë³¸)ì„ ìƒì„±í•œë‹¤. íŠ¸ëžœìž­ì…˜ ë™ì•ˆ ëª¨ë“  ì½ê¸° ìž‘ì—…ì€ ì´ ìŠ¤ëƒ…ìƒ·ì„ ê¸°ì¤€ìœ¼ë¡œ ìˆ˜í–‰ë˜ë©°, íŠ¸ëžœìž­ì…˜ì´ ìˆ˜í–‰ë˜ëŠ” ë™ì•ˆ ë‹¤ë¥¸ íŠ¸ëžœìž­ì…˜ì˜ ë³€ê²½ì‚¬í•­ì„ ë³´ì§€ ì•ŠëŠ”ë‹¤.íŠ¹ì§•  Non-blocking reads: ì½ê¸° ìž‘ì—…ì€ ë‹¤ë¥¸ í‹€ë‚´ìž­ì…˜ì˜ ì“°ê¸° ìž‘ì—…ì„ ì°¨ë‹¨í•˜ì§€ ì•ŠëŠ”ë‹¤.  Non-blocking writes: ì“°ê¸° ìž‘ì—…ì€ ë‹¤ë¥¸ íŠ¸ëžœìž­ì…˜ì˜ ì½ê¸° ìž‘ì—…ì„ ì°¨ë‹¨í•˜ì§€ ì•ŠëŠ”ë‹¤.  Write Skew: ë‘ íŠ¸ëžœìž­ì…˜ì´ ë™ì‹œì— ê°™ì€ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ í•  ë•Œ ì¶©ëŒì´ ë°œìƒí•  ìˆ˜ ìžˆìœ¼ë©°, ì´ëŠ” ì“°ê¸° ìŠ¤í(write skew) í˜„ìƒìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìžˆë‹¤. ì´ëŠ” ë°ì´í„° ë¶ˆì¼ì¹˜ ë¬¸ì œë¥¼ ìœ ë°œí•  ìˆ˜ ìžˆë‹¤.ì‚¬ìš© ì‚¬ë¡€ë§Žì€ ì½ê¸° ìž‘ì—…ì´ í•„ìš”í•˜ì§€ë§Œ ì•½ê°„ì˜ ì“°ê¸° ìŠ¤íë¥¼ í—ˆìš©í•  ìˆ˜ ìžˆëŠ” ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©ëœë‹¤.Serializable IsolationíŠ¸ëžœìž­ì…˜ì´ ì§ë ¬ì ìœ¼ë¡œ(ì¦‰, ìˆœì°¨ì ìœ¼ë¡œ) ì‹¤í–‰ëœ ê²ƒì²˜ëŸ¼ ë³´ì´ë„ë¡ ë³´ìž¥í•œë‹¤. ì´ëŠ” íŠ¸ëžœìž­ì…˜ ê°„ì˜ ì™„ì „í•œ ê²©ë¦¬ë¥¼ ë³´ìž¥í•˜ë©°, í•œ íŠ¸ëžœìž­ì…˜ì´ ë‹¤ë¥¸ íŠ¸ëžœìž­ì…˜ì˜ ì¤‘ê°„ ìƒíƒœë¥¼ ë³´ì§€ ì•Šë„ë¡ í•œë‹¤.íŠ¹ì§•  Strict isolation: ê°€ìž¥ ë†’ì€ ìˆ˜ì¤€ì˜ ê²©ë¦¬ë¥¼ ì œê³µí•˜ë©°, íŠ¸ëžœìž­ì…˜ ê°„ì˜ ìƒí˜¸ ê°„ì„­ì„ ë°©ì§€í•œë‹¤.  Locking: ì¼ë°˜ì ìœ¼ë¡œ ìž ê¸ˆ(Locking)ì„ ì‚¬ìš©í•˜ì—¬ ë™ì‹œì„±ì„ ì œê³µí•œë‹¤. ì´ë¡œ ì¸í•´ ìž ê¸ˆ ê²½í•©(lock contention)ì´ ë°œìƒí•  ìˆ˜ ìžˆìœ¼ë©°, ì´ëŠ” ì„±ëŠ¥ ì €í•˜ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìžˆë‹¤.  No anomalies: ì½ê¸° ìŠ¤í, ìœ ë ¹ ì½ê¸°, ë°˜ë³µë˜ì§€ ì•ŠëŠ” ì½ê¸°ì™€ ê°™ì€ ì´ìƒ í˜„ìƒì„ ë°©ì§€ í•œë‹¤.ì‚¬ìš© ì‚¬ë¡€ë°ì´í„° ì¼ê´€ì„±ì´ ë§¤ìš° ì¤‘ìš”í•˜ê³  íŠ¸ëžœìž­ì…˜ ê°„ì˜ ì¶©ëŒì„ í—ˆìš©í•  ìˆ˜ ì—†ëŠ” ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©ëœë‹¤.ì£¼ìš” ì°¨ì´ì   ë™ì‹œì„±: Snapshot ê²©ë¦¬ ìˆ˜ì¤€ì€ ë†’ì€ ë™ì‹œì„±ì„ ì œê³µí•˜ì§€ë§Œ, ì“°ê¸° ìŠ¤íì™€ ê°™ì€ ë°ì´í„° ë¶ˆì¼ì¹˜ ë¬¸ì œë¥¼ ìœ ë°œí•  ìˆ˜ ìžˆë‹¤. Serializable ê²©ë¦¬ ìˆ˜ì¤€ì€ ë™ì‹œì„±ì„ ì œí•œí•˜ì§€ë§Œ, ë°ì´í„° ì¼ê´€ì„±ì„ ë°˜ë“œì‹œ ë³´ìž¥í•œë‹¤.  ìž ê¸ˆ: Serializable ê²©ë¦¬ ìˆ˜ì¤€ì€ ìž ê¸ˆì„ ì‚¬ìš©í•˜ì—¬ íŠ¸ëžœìž­ì…˜ ê°„ì˜ ê°„ì„­ì„ ë°©ì§€í•˜ëŠ” ë°˜ë©´, Snapshot ê²©ë¦¬ ìˆ˜ì¤€ì€ ìŠ¤ëƒ…ìƒ·ì„ ì‚¬ìš©í•˜ì—¬ ë™ì¼í•œ ë°ì´í„°ë¥¼ ì½ëŠ” ë™ì•ˆì—ë„ íŠ¸ëžœìž­ì…˜ì´ ì„œë¡œ ê°„ì„­í•˜ì§€ ì•Šë„ë¡ í•œë‹¤.  ì„±ëŠ¥: Snapshot ê²©ë¦¬ ìˆ˜ì¤€ì€ ì¼ë°˜ì ìœ¼ë¡œ ì„±ëŠ¥ì´ ë” ìš°ìˆ˜í•˜ë©°, íŠ¹ížˆ ì½ê¸° ìž‘ì—…ì´ ë§Žì€ í™˜ê²½ì—ì„œ ë”ìš± íš¨ê³¼ì ì´ë‹¤. ë°˜ë©´, Serializable ê²©ë¦¬ ìˆ˜ì¤€ì€ ìž ê¸ˆ ê²½í•©ìœ¼ë¡œ ì¸í•´ ì„±ëŠ¥ì´ ì €í•˜ë  ìˆ˜ ìžˆë‹¤.ìš”ì•½Snapshot ê²©ë¦¬ ìˆ˜ì¤€ì€ ë†’ì€ ë™ì‹œì„±ì„ ì œê³µí•˜ì§€ë§Œ ì¼ë¶€ ë°ì´í„° ë¶ˆì¼ì¹˜ ë¬¸ì œë¥¼ í—ˆìš©í•  ìˆ˜ ìžˆëŠ” í™˜ê²½ì—ì„œ ìœ ìš©í•˜ë©°, Serializable ê²©ë¦¬ ìˆ˜ì¤€ì€ ë°ì´í„° ì¼ê´€ì„±ì´ ìµœìš°ì„ ì¸ í™˜ê²½ì—ì„œ ì‚¬ìš©ëœë‹¤.Isolation Levels vs Read Phenomenaì•„ëž˜ ì´ë¯¸ì§€ëŠ” ê²©ë¦¬ ìˆ˜ì¤€ì— ë”°ë¥¸ Read Phenomena ë°œìƒ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ë‚¸ í‘œì´ë‹¤.  Snapshot levelë„ ìœ„ 4ê°€ì§€ Read Phenomena í˜„ìƒì„ ì˜ˆë°©í•œë‹¤.Database Implementation Of Isolationê° DBMSëŠ” ê²©ë¦¬ ìˆ˜ì¤€ì„ ì„œë¡œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•œë‹¤.ë°ì´í„°ë² ì´ìŠ¤ ê²©ë¦¬ ìˆ˜ì¤€ì„ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì€ ë‚™ê´€ì (Optimistic) ì ‘ê·¼ë²•ê³¼ ë¹„ê´€ì (Pessimistic) ì ‘ê·¼ë²•ìœ¼ë¡œ ë‚˜ë‰œë‹¤. ë‘ ì ‘ê·¼ë²•ì€ íŠ¸ëžœìž­ì…˜ ê°„ì˜ ë™ì‹œì„±ì„ ì œì–´í•˜ëŠ” ë‘ ê°€ì§€ ìƒë°˜ëœ ì „ëžµìœ¼ë¡œ êµ¬ë¶„ëœë‹¤.ë¹„ê´€ì (Pessimistic) ì ‘ê·¼ë²•íŠ¸ëžœìž­ì…˜ì´ ì¶©ëŒí•œ ê°€ëŠ¥ì„±ì´ ìžˆë‹¤ê³  ê°€ì •í•˜ì—¬, ë°ì´í„°ì— ì ‘ê·¼í•  ë•Œë§ˆë‹¤ ìž ê¸ˆì„ ê±¸ì–´ ì¶©ëŒì„ ë°©ì§€í•œë‹¤.ë¹„ê´€ì (Pessimistic) êµ¬í˜„ ë°©ì‹ì€ ë™ì‹œì„±ì„ ì œì–´í•˜ëŠ” ê²ƒì¸ë°, êµ¬ì²´ì ìœ¼ë¡œ ìž ê¸ˆ(Lock)ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.row levle locks, table locks, page locks ë“±ì„ ì‚¬ìš©í•˜ì—¬ Lost Updatesë¥¼ ì˜ˆë°©í•  ìˆ˜ ìžˆë‹¤.ë½ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë¹„ìš©ì´ ë§Žì´ ë“¤ ë¿ë”ëŸ¬ ë‹¤ë¥¸ íŠ¸ëžœìž­ì…˜ë“¤ì´ ëŒ€ê¸° ìƒíƒœì— ë†“ì¼ ìˆ˜ ìžˆê¸° ë•Œë¬¸ì— ì„±ëŠ¥ ì´ìŠˆë¥¼ ì•¼ê¸°í•  ìˆ˜ ìžˆë‹¤.íŠ¹ì§•  Lock-based: ë°ì´í„°ì— ì ‘ê·¼í•˜ëŠ” ì‹œì ì—ì„œ ì½ê¸° ë˜ëŠ” ì“°ê¸° ìž ê¸ˆì„ ì„¤ì •í•˜ì—¬ ë‹¤ë¥¸ íŠ¸ëžœìž­ì…˜ì´ ë™ì‹œì— ë™ì¼í•œ ë°ì´í„°ì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ê²Œ í•œë‹¤.  ì¶©ëŒ ë°©ì§€: ìž ê¸ˆì„ í†µí•´ íŠ¸ëžœìž­ì…˜ ê°„ì˜ ì¶©ëŒì„ ë¯¸ë¦¬ ë°©ì§€í•˜ë©°, ì¶©ëŒì´ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ë‚®ë‹¤.  ì„±ëŠ¥: ìž ê¸ˆìœ¼ë¡œ ì¸í•œ ì˜¤ë²„í—¤ë“œì™€ ìž ê¸ˆ ê²½í•©(lock contention)ìœ¼ë¡œ ì¸í•´ ì„±ëŠ¥ì´ ì €í•˜ë  ìˆ˜ ìžˆë‹¤. ì“°ê¸° ìž‘ì—…ì´ ë§Žê³  ì¶©ëŒ ê°€ëŠ¥ì„±ì´ ë†’ì€ í™˜ê²½ì—ì„œ ì í•©í•˜ë‹¤.  ìž¥ì : íŠ¸ëžœìž­ì…˜ ê°„ì˜ ì¶©ëŒì„ íš¨ê³¼ì ìœ¼ë¡œ ë°©ì§€í•  ìˆ˜ ìžˆìœ¼ë©°, ë°ì´í„° ì¼ê´€ì„±ì„ ë³´ìž¥í•œë‹¤.  ë‹¨ì : ìž ê¸ˆìœ¼ë¡œ ì¸í•œ êµì°© ìƒíƒœê°€ ë°œìƒí•  ìˆ˜ ìžˆìœ¼ë©°, ë†’ì€ ë™ì‹œì„±ì„ ì œê³µí•˜ê¸° ì–´ë µë‹¤.ì‚¬ìš© ì‚¬ë¡€  ì€í–‰ ê±°ëž˜ ì‹œìŠ¤í…œë‚™ê´€ì (Optimistic) ì ‘ê·¼ë²•íŠ¸ëžœìž­ì…˜ì´ ì¶©ëŒí•˜ì§€ ì•Šì„ ê²ƒì´ë¼ê³  ê°€ì •í•˜ì—¬, ì£¼ë¡œ íŠ¸ëžœìž­ì…˜ ì¢…ë£Œ ì‹œì ì— ì¶©ëŒ ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•œë‹¤.ë‚™ê´€ì (Optimistic) êµ¬í˜„ ë°©ì‹ì€ ë½ì„ ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ íŠ¸ëžœìž­ì…˜ë“¤ì´ ëŒ€ê¸°í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë¹„ê´€ì  ë°©ì‹ì— ë¹„í•´ ì„±ëŠ¥ ë¶€ë¶„ì˜ ì´ì ì´ ìžˆë‹¤. ë§Žì´ ì„ í˜¸ë˜ëŠ” ë°©ì‹ì´ë©° NoSQL ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì„ í˜¸ë˜ëŠ” ë°©ì‹ì´ë‹¤.ë³€ê²½ ì‚¬í•­ë“¤ì„ ë©”ëª¨ë¦¬ì— ìœ ì§€í–ˆë‹¤ê°€ íŠ¸ëžœìž­ì…˜ ê°„ ì¶©ëŒì´ ë°œìƒí•˜ë©´ íŠ¸ëžœìž­ì…˜ì„ ë¡¤ë°±ì‹œí‚¨ë‹¤. ì´ë ‡ê²Œ ì¶©ëŒí•˜ì—¬ ë°œìƒí•œ ì˜¤ë¥˜ë¥¼ ì§ë ¬í™” ì˜¤ë¥˜ë¼ê³  ë¶€ë¥¸ë‹¤.íŠ¹ì§•  Lock-free: ë°ì´í„°ì— ëŒ€í•œ ì ‘ê·¼ ì‹œì ì—ì„œ ìž ê¸ˆì„ ê±¸ì§€ ì•Šìœ¼ë©°, ëŒ€ì‹  íŠ¸ëžœìž­ì…˜ì´ ì»¤ë°‹ë˜ê¸° ì „ê¹Œì§€ ë³€ê²½ ì‚¬í•­ì„ ì¶”ì í•œë‹¤.  ì¶©ëŒ ê²€ì‚¬: íŠ¸ëžœìž­ì…˜ì´ ì»¤ë°‹ë  ë•Œ, ë‹¤ë¥¸ íŠ¸ëžœìž­ì…˜ì´ ë™ì¼í•œ ë°ì´í„°ë¥¼ ìˆ˜ì •í–ˆëŠ”ì§€ í™•ì¸í•˜ê³  ì¶©ëŒì´ ë°œìƒí•  ê²½ìš° íŠ¸ëžœìž­ì…˜ì„ ë¡¤ë°±ì‹œí‚¨ë‹¤.  ì„±ëŠ¥: ì½ê¸° ìž‘ì—…ì´ ë§Žê³  ì“°ê¸° ìž‘ì—…ì´ ìƒëŒ€ì ìœ¼ë¡œ ì ì€ ì‹œìŠ¤í…œì—ì„œ ì„±ëŠ¥ì´ ë›°ì–´ë‚˜ë‹¤. ì¶©ëŒì´ ì ì€ í™˜ê²½ì—ì„œ íŠ¹ížˆ ìœ ë¦¬í•˜ë‹¤.  ìž¥ì : ë†’ì€ ë™ì‹œì„±ì„ ì œê³µí•˜ë©°, ìž ê¸ˆìœ¼ë¡œ ì¸í•œ êµì°© ìƒíƒœ(deadlock)ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.  ë‹¨ì : ì¶©ëŒì´ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ëŠ” ê²½ìš° ë¡¤ë°±ì´ ìžì£¼ ì¼ì–´ë‚˜ë©°, ì´ë¡œ ì¸í•´ ì˜¤ë²„í—¤ë“œê°€ ì¦ê°€í•  ìˆ˜ ìžˆë‹¤.ì‚¬ìš© ì‚¬ë¡€  ì˜¨ë¼ì¸ í˜‘ì—… ë„ìš° (ì˜ˆ: Google Docs)ì£¼ìš” ì°¨ì´ì   ìž ê¸ˆ ë°©ì‹          ë‚™ê´€ì  ì ‘ê·¼ë²•: ìž ê¸ˆì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©°, íŠ¸ëžœìž­ì…˜ ì¢…ë£Œ ì‹œì ì— ì¶©ëŒì„ ê²€ì‚¬í•œë‹¤.      ë¹„ê´€ì  ì ‘ê·¼ë²•: ë°ì´í„° ì ‘ê·¼ ì‹œì ì— ìž ê¸ˆì„ ì„¤ì •í•˜ì—¬ ì¶©ëŒì„ ë°©ì§€í•œë‹¤.        ì¶©ëŒ ì²˜ë¦¬          ë‚™ê´€ì  ì ‘ê·¼ë²•: íŠ¸ëžœìž­ì…˜ ì¢…ë£Œ ì‹œì ì— ì¶©ëŒì„ ê²€ì‚¬í•˜ê³ , ì¶©ëŒì´ ë°œìƒí•˜ë©´ ë¡¤ë°±í•œë‹¤.      ë¹„ê´€ì  ì ‘ê·¼ë²•: ìž ê¸ˆì„ í†µí•´ ì¶©ëŒì„ ë¯¸ë¦¬ ë°©ì§€í•œë‹¤.        ë™ì‹œì„±          ë‚™ê´€ì  ì ‘ê·¼ë²•: ë†’ì€ ë™ì‹œì„±ì„ ì œê³µí•˜ë©°, ì½ê¸° ìž‘ì—…ì´ ë§Žì€ í™˜ê²½ì— ì í•©í•˜ë‹¤.      ë¹„ê´€ì  ì ‘ê·¼ë²•: ìž ê¸ˆìœ¼ë¡œ ì¸í•´ ë™ì‹œì„±ì´ ë‚®ì•„ì§ˆ ìˆ˜ ìžˆìœ¼ë©°, ì“°ê¸° ìž‘ì—…ì´ ë§Žì€ í™˜ê²½ì— ì í•©í•˜ë‹¤.        ì„±ëŠ¥          ë‚™ê´€ì  ì ‘ê·¼ë²•: ì¶©ëŒì´ ì ì€ ê²½ìš° ì„±ëŠ¥ì´ ë›°ì–´ë‚˜ë©°, êµì°© ìƒíƒœê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.      ë¹„ê´€ì  ì ‘ê·¼ë²•: ìž ê¸ˆ ê²½í•©ìœ¼ë¡œ ì¸í•´ ì„±ëŠ¥ì´ ì €í•˜ë  ìˆ˜ ìžˆìœ¼ë©°, êµì°© ìƒíƒœê°€ ë°œìƒí•  ìˆ˜ ìžˆë‹¤.      ìš”ì•½ê° ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì€ íŠ¹ì • ê²©ë¦¬ ìˆ˜ì¤€ì„ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì— ë”°ë¼ ë¹„ê´€ì  ë˜ëŠ” ë‚™ê´€ì  ì ‘ê·¼ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìžˆìœ¼ë©°, ì´ëŠ” ì‹œìŠ¤í…œì˜ ë™ì‹œì„± ìš”êµ¬ ì‚¬í•­ê³¼ ì„±ëŠ¥ íŠ¹ì„±ì— ë”°ë¼ ë‹¤ë¥´ë‹¤.ë‚™ê´€ì  ì ‘ê·¼ë²•ì€ ì¶©ëŒì´ ë“œë¬¸ í™˜ê²½ì—ì„œ ë†’ì€ ì„±ëŠ¥ê³¼ ë™ì‹œì„±ì„ ì œê³µí•˜ëŠ” ë°˜ë©´,ë¹„ê´€ì  ì ‘ê·¼ë²•ì€ ë°ì´í„° ì¼ê´€ì„±ì´ ë§¤ìš° ì¤‘ìš”í•˜ê³  ì¶©ëŒ ê°€ëŠ¥ì„±ì´ ë†’ì€ í™˜ê²½ì—ì„œ ì•ˆì •ì„±ì„ ì œê³µí•œë‹¤.ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ íŠ¹ì„±ì— ë”°ë¼ ì ì ˆí•œ ì ‘ê·¼ë²•ì„ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> DB Engineering </category>
        
          <category> Transaction </category>
        
      </categories>
      <tags>
        
          <tag> Transaction </tag>
        
          <tag> Database </tag>
        
          <tag> Isolation </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Atomicity ì›ìžì„±]]></title>
      <url>/database/db%20engineering/transaction/2024/06/15/Atomicity/</url>
      <content type="text"><![CDATA[ì •ì˜íŠ¸ëžœìž­ì…˜ ë‚´ ëª¨ë“  ì¿¼ë¦¬ëŠ” ì„±ê³µí•´ì•¼ í•œë‹¤ëŠ” ê·œì¹™ì´ë‹¤.ì–´ë– í•œ ì´ìœ ë¡œë“  ë‹¨ í•˜ë‚˜ì˜ ì¿¼ë¦¬ë¼ë„ ì‹¤íŒ¨í•œë‹¤ë©´ ë¡¤ë°±ë˜ì–´ì•¼ í•œë‹¤. ì´ê²ƒì´ ì›ìžì„±ì˜ ê·œì¹™ì´ë‹¤.ë§ˆì°¬ê°€ì§€ë¡œ, íŠ¸ëžœìž­ì…˜ì´ ì‹¤í–‰ ë„ì¤‘ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì¤‘ë‹¨ë˜ë”ë¼ë„ ë‹¤ì‹œ ì‹œìž‘í•  ë•Œ ë¡¤ë°±ë˜ì–´ì•¼ í•œë‹¤.ì›ìžì„±ì€ ì¼ê´€ëœ ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœë¥¼ ìœ„í•´ ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤.]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> DB Engineering </category>
        
          <category> Transaction </category>
        
      </categories>
      <tags>
        
          <tag> Actomicity </tag>
        
          <tag> Database </tag>
        
          <tag> Transaction </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ì„±ì  ê´€ë¦¬ ëª¨ë¸ë§ ì—°ìŠµ (2)]]></title>
      <url>/database/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%20%EC%A4%91%EA%B8%89(modeling)/2024/06/10/grades-manage2/</url>
      <content type="text"><![CDATA[ìŠ¤í† ì–´ë“œ í”„ë¡œì‹œì € ìƒì„±ë¬¸ ì˜ˆì‹œCREATE PROCEDURE SP_Insert_SchoolClass	-- ADD the parameters for the stored procedure here	&lt;@Param1, sysname, @p1&gt; &lt;Detatype_For_Param1, , int&gt; = &lt;Defualt_Value_For_Param1, , 0&gt;,	&lt;@Param2, sysname, @p2&gt; &lt;Detatype_For_Param2, , int&gt; = &lt;Defualt_Value_For_Param2, , 0&gt;ASBEGIN	-- SET NOCOUNT ON added to prevent extra result sets from	-- interfering with SELECT statements	SET NOCOUNT ON;		-- INSERT statements for procedure here	SELECT &lt;@Param1, sysname, @p1&gt;, &lt;@Parama2, sysname, @p2&gt;ENDë°˜ í…Œì´ë¸”ì˜ ì €ìž¥ í”„ë¡œì‹œì € ìƒì„±ë¬¸CREATE PROCEDURE SP_Insert_SchoolClass	@SchoolGradeId tinyint,	@SchoolClassId tinyint,	@SchoolClassName varchar(50)ASBEGIN	INSERT INTO TB_SchoolClass (SchoolGradeId, SchoolClassId, SchoolClassName)	VALUES (@SchoolGradeId, @SchoolClassId, @SchoolClassName)ENDìŠ¤í† ì–´ë“œ í”„ë¡œì‹œì € ì‹¤í–‰exec SP_Insert_SchoolClass 1, 1, '1ë°˜'; -- ()ê´„í˜¸ í•„ìš”ì—†ìŒexec SP_Insert_SchoolCalss 1, 2, '2ë°˜';SELECT * FROM TB_SchoolClass;            Â       SchoolGradeId      SchoolClassId      SchoolClassName                  1      1      1      1ë°˜              2      1      2      2ë°˜      ë°˜ í…Œì´ë¸”ì˜ ì—…ë°ì´íŠ¸ í”„ë¡œì‹œì €  SP_Update_SchoolClassName  SP_Update_UseFlagë°˜ í…Œì´ë¸”ì˜ ì¡°íšŒ í”„ë¡œì‹œì €  SP_SchoolClass_GetById(gradeId, classId);  SP_SchoolClass_GetAll();  SP_SchoolClass_GetByGrade(gradeId);í•™ë…„-ë°˜-í•™ìƒ ê´€ê³„ë„  ì‹ ìž…ìƒì˜ ê²½ìš° ì•„ì§ ë°˜ ë°°ì •ì„ ë°›ì§€ ëª»í–ˆì§€ë§Œ í•™ìƒ í…Œì´ë¸”ì— ë“±ë¡í•´ì•¼ ë˜ëŠ” ê²½ìš°ë¥¼ ìœ„í•´ì„œ SchoolClassId ì™€ StudentSeqNoëŠ” NULL í—ˆìš©ì„ í•´ì¤€ë‹¤.  SchoolGradeId , SchoolClassId , SchoolSeqNo ë¥¼ ë¬¶ì–´ì„œ í›„ë³´í‚¤ë¡œ ì„¤ì •í•˜ì—¬ NULLì€ í—ˆìš©í•˜ì§€ë§Œ UNIQUE ë¥¼ ë§Œì¡±ì‹œí‚¤ê¸° ë•Œë¬¸ì— ë°˜ê³¼ ë°˜ë³„ í•™ìƒ ë²ˆí˜¸ì˜ ì¤‘ë³µ ìƒì„± ì²´ê³„ê°€ ê°€ëŠ¥í•´ì§„ë‹¤.  í•™ìƒ í…Œì´ë¸”ì— entrance_date ìž…í•™ë‚ ì§œì™€ graduate_date ì¡¸ì—…ë‚ ì§œë¥¼ ì†ì„±ìœ¼ë¡œ ì„¤ì • ê°€ëŠ¥í•˜ë‹¤. ìž…í•™ë‚ ì§œê°€ ì—†ëŠ” í•™ìƒì€ ì—†ìœ¼ë¯€ë¡œ NOT NULL ì´ì§€ë§Œ, ì•„ì§ ì¡¸ì—…í•˜ì§€ ëª»í•œ í•™ìƒë“¤ì€ ì¡¸ì—…ë‚ ì§œê°€ NULLì´ë‹¤. ë§Œì•½ ì¡¸ì—…ë‚ ì§œì— ë‚ ì§œ ë°ì´í„°ê°€ ë“¤ì–´ê°€ ìžˆìœ¼ë©´ ì¡¸ì—…ìƒì¸ ê²ƒì„ ì¸ì§€í•  ìˆ˜ ìžˆë‹¤.  ë°˜ í…Œì´ë¸”ì˜ UseFlag ëŠ” í˜„ìž¬ ë…„ë„ì— í•´ë‹¹ ë°˜ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì •ë³´ë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•œ ì†ì„±ì´ë‹¤. ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•´ë‹¹ ë°˜ í…Œì´ë¸”ì„ ì‚­ì œí•  ìˆ˜ëŠ” ì—†ë‹¤. í•´ë‹¹ ë°˜ì— ë°°ì •ë˜ì–´ ìžˆë˜ í•™ìƒë“¤ì´ ë¶€ëª¨ê°€ ì—†ëŠ” ìžì‹ì´ ë˜ê¸° ë•Œë¬¸ì—, ì‚­ì œ ë˜ì‹  UseFlag ì˜ ì—…ë°ì´íŠ¸ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ë°˜ì˜ ì‚¬ìš©ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ê¸‰(Modeling) </category>
        
      </categories>
      <tags>
        
          <tag> Database </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ì„±ì  ê´€ë¦¬ ëª¨ë¸ë§ ì—°ìŠµ (1)]]></title>
      <url>/database/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%20%EC%A4%91%EA%B8%89(modeling)/2024/05/27/grades-manage1/</url>
      <content type="text"><![CDATA[  ì¤‘í•™êµ í•™ìƒë“¤ì˜ ì„±ì ì„ ê´€ë¦¬í•˜ëŠ” ì‹œìŠ¤í…œì˜ DBë¥¼ ì„¤ê³„ í•´ë³´ìž!ì„±ì  ê´€ë¦¬ ìš”êµ¬ ì‚¬í•­  ì¤‘í•™êµ(ë‚¨ë…€ê³µí•™) í•™ìƒ ì„±ì ê´€ë¦¬ í”„ë¡œì íŠ¸  ê³¼ëª©ì€ í•™ë…„ë³„ë¡œ ë‹´ë‹¹ ì„ ìƒë‹˜ì´ ë”°ë¡œ ìžˆë‹¤.  ì‹œí—˜ì€ ì¤‘ê°„ê³ ì‚¬, ê¸°ë§ê³ ì‚¬ ë‘ ê°€ì§€ê°€ ìžˆë‹¤.  í•™ìƒë“¤ì€ í•™ë…„, ë°˜ì— ë°°ì •ë˜ë©° ë°˜ë³„ë¡œ í•™ìƒë“¤ì—ê²Œ ê³ ìœ  ë²ˆí˜¸ë¥¼ ë¶€ì—¬í•˜ê³  ìžˆë‹¤.  ê° ë°˜ì—ëŠ” ë‹´ìž„ ì„ ìƒë‹˜ì´ ë°°ì •ë˜ì–´ ìžˆë‹¤. ì„ ìƒë‹˜ ì¤‘ì—ëŠ” ë‹´ìž„ì„ ë§¡ì§€ ì•ŠëŠ” ì„ ìƒë‹˜ë„ ìžˆë‹¤.  í•œ ë°˜ì˜ í•™ìƒì€ ëŒ€ëžµ 40ëª… ì •ë„ì´ê³  ë‚¨ë…€ ê³µí•™ì´ë‹¤.  ì„ì°¨ëŠ” ë‚¨ë…€ ê³µí†µ 1ë“±ë¶€í„° ìˆœì„œëŒ€ë¡œ ì •í•œë‹¤.ë§ˆìŠ¤í„° í…Œì´ë¸”  í•™ìƒ(ë°˜ë‹¹ 40ëª…ì •ë„, ë°˜ë³„ ê³ ìœ  ë²ˆí˜¸ ì¡´ìž¬), í•™ë…„, ë°˜  ê³¼ëª©(í•™ë…„ë³„ ë‹´ë‹¹ ì„ ìƒë‹˜ ë³„ë„ë¡œ ì¡´ìž¬), ì„ ìƒë‹˜(ë‹´ìž„/ë¹„ë‹´ìž„)  ì„±ì (ë°˜ ì„ì°¨/ í•™ë…„ ì„ì°¨) â‡’ ì‹œí—˜ì— ì˜í•œ ê°ì²´ ìƒì„±  ì‹œí—˜(ì¤‘ê°„ê³ ì‚¬, ê¸°ë§ê³ ì‚¬)ê´€ê³„ í…Œì´ë¸”  ì‹œí—˜(ë³´ë‹¤), ë°°ì •(í•˜ë‹¤), ê°œê°•(í•˜ë‹¤)  ë§Œì•½ ì‹¤ë¬´ì—ì„œ ì‹œë‚˜ë¦¬ì˜¤ì— ëª¨ë¥´ëŠ” ë‹¨ì–´ê°€ ìžˆëŠ” ê²½ìš°, ê³ ê°ì—ê²Œ ê·¸ ê°œë…ì„ ë¬¼ì–´ë´ì„œ í™•ì‹¤ížˆ ê°œë…ì„ ìž¡ê³  ì„¤ê³„í•œë‹¤.ë…¼ë¦¬ì  ì„¤ê³„ì˜¨ì „í•œ ëª…ì‚¬ ì„ ë³„í•˜ê¸°ê°€ìž¥ ë¨¼ì € í•´ì•¼í•  ê²ƒì€ ë§ˆìŠ¤í„° í…Œì´ë¸”ë¡œ ì¡´ìž¬í•  ìˆ˜ ìžˆëŠ” ê°ì²´ë“¤ì„ ì„ ë³„í•˜ëŠ” ê²ƒì´ë‹¤.ì¢…ì†ì„±, ìˆ˜ì‹ì–´ ë“±ì„ íŒŒì•…í•˜ì—¬ ë§ˆìŠ¤í„° í…Œì´ë¸”ì˜ ê°ì²´ë¥¼ ì •ë¦¬í•´ë‚˜ê°„ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í•™ìƒê³¼ ê³ ìœ  ë²ˆí˜¸ê°€ ìžˆì„ ë•Œ ê³ ìœ  ë²ˆí˜¸ëŠ” í•™ìƒì— ì¢…ì†ë˜ë¯€ë¡œ í•™ìƒ ê°ì²´ì˜ ì†ì„±ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” ê²ƒì´ ë§žë‹¤. ë˜í•œ, ë‹´ìž„ê³¼ ì„ ìƒë‹˜ì„ ìƒê°í•´ë³´ë©´, ë‹´ìž„ì€ ì„ ìƒë‹˜ì˜ ìˆ˜ì‹ì–´ì´ê¸° ë•Œë¬¸ì— ì„ ìƒë‹˜ ê°ì²´ì˜ ì†ì„±ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” ê²ƒì´ ë§žë‹¤. ì´ë ‡ê²Œ ì¢…ì†ì„± ë˜ëŠ” ìˆ˜ì‹ì–´ ë“±ì„ íŒŒì•…í•˜ì—¬ ëª…ì‚¬ë¡œ ì˜¨ì „ížˆ ì¡´ìž¬í•  ìˆ˜ ìžˆëŠ” ê°ì²´ë¥¼ ê°€ë ¤ë‚¼ ìˆ˜ ìžˆë‹¤. ë§Œì•½ ì†ì„±ìœ¼ë¡œ ë“¤ì–´ê°”ë˜ ì»¬ëŸ¼ì´ ì•Œê³ ë³´ë‹ˆ ë³µìž¡ë„ê°€ ë†’ë‹¤ê³  íŒë‹¨ë˜ë©´ ë§ˆìŠ¤í„° í…Œì´ë¸”ë¡œ ë¶„ë¦¬í•´ë‚´ë©´ ëœë‹¤.  ë” ì´ìƒ ë¶„ì—´í•  ìˆ˜ ì—†ì„ ë§Œí¼ ìž‘ì€ ë‹¨ìœ„ë¡œ ê°ì²´ë¥¼ ë§ˆìŠ¤í„° í…Œì´ë¸”ë¡œ ë§Œë“¤ë©´ ëœë‹¤. ê·¸ë ‡ë‹¤ê³  ë§ˆìŠ¤í„°ê°€ ì•„ë‹Œ ê²ƒì„ ë§ˆìŠ¤í„°ë¡œ ë§Œë“¤ë©´ êµ‰ìž¥ížˆ ì–´ìƒ‰í•´ì§„ë‹¤.1:M ê´€ê³„ ì°¾ê¸°ê·¸ ë‹¤ìŒ í•´ì•¼í•  ê²ƒì€ ë§ˆìŠ¤í„° í…Œì´ë¸” ê°„ì˜ 1:M(ë¶€ìžì§€ê°„) ê´€ê³„ê°€ ìžˆëŠ”ì§€ ì‚´íŽ´ë³´ëŠ” ê²ƒì´ë‹¤.  1:M ê´€ê³„ëŠ” ì§ê´€ì ìœ¼ë¡œ ë³´ì´ê¸° ë§ˆë ¨ì´ë‹¤.ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„ëŠ” ë§Žì€ ê²½í—˜ì¹˜ê°€ í•„ìš”í•œ ì¼ì´ë‹¤. ì²˜ìŒë¶€í„° ìž˜ ëª»í•˜ë”ë¼ë„ ê´œì°®ë‹¤.ê¸°ì¤€ í…Œì´ë¸”ìžì‹ì˜ í¬ì§€ì…˜ì´ ë˜ì§€ ì•ŠëŠ” í…Œì´ë¸”ì„ ì ˆëŒ€ ë§ˆìŠ¤í„° í…Œì´ë¸”ì´ë¼ê³  í•˜ê³  ë‹¤ë¥¸ ë§ë¡œ ê¸°ì¤€ í…Œì´ë¸” ì´ë¼ê³  í•œë‹¤.ê¸°ì¤€ í…Œì´ë¸”ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ê·¸ ì´í•˜ ì—°ê²°ëœ ìžì‹ í…Œì´ë¸”ì— ëª¨ë‘ ë¬¸ì œê°€ ë°œìƒí•œë‹¤. ê¸°ì¤€ í…Œì´ë¸”ê°™ì€ ê²½ìš°ì—ëŠ” í•œ ë²ˆ ìƒì„±ë˜ë©´ ê±°ì˜ ë³€ê²½ì´ ì—†ëŠ” ì„±ê²©ì„ ê°€ì§„ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— DBA ìž…ìž¥ì—ì„œ ê°€ìž¥ ì‹ ê²½ ì¨ì•¼ í•˜ëŠ” ê²ƒì€ ê¸°ì¤€ í…Œì´ë¸”ì— ì˜¤ë¥˜ê°€ ìžˆëŠëƒë¥¼ íŒŒì•…í•´ì•¼ í•œë‹¤. ì˜ˆì œì—ì„œ ê¸°ì¤€ í…Œì´ë¸”ì€ í•™ë…„ìœ¼ë¡œ ë³¼ ìˆ˜ ìžˆë‹¤.  ê¸°ì¤€ í…Œì´ë¸”ì˜ ê²½ìš° í•œ ë²ˆ ìƒì„±ë˜ë©´ ê·¸ ì´í›„ì—ëŠ” ë³€ê²½ë  ì¼ì´ ê±°ì˜ ì—†ë‹¤. ë”°ë¼ì„œ ìƒì„±ëœ ì´í›„ì—ëŠ”  INSERT , DELETE , UPDATE ë¥¼ ë§‰ì•„ë²„ë¦¬ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì¦‰, SELECT ë§Œ ì—´ì–´ì¤˜ì„œ read-only ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.ê³ ì • ê´€ë… ë²„ë¦¬ê¸°ë°ì´í„° íƒ€ìž…ì„ ì •í•  ë•Œ ì£¼ì˜í•´ì•¼ í•  ì ì€ ê³ ì • ê´€ë…ì— ë¹ ì ¸ì„œ ìž˜ëª»ëœ ë°ì´í„° íƒ€ìž…ì„ ì„¤ì •í•´ì£¼ëŠ” ê²ƒì´ë‹¤.ì˜ˆë¥¼ ë“¤ì–´, ë°˜ì´ë¦„ì˜ ê²½ìš° ë³´í†µ 1ë°˜, 2ë°˜, â€¦ ì´ëŸ° ì‹ì¼í…ë°, ê°œë‚˜ë¦¬ë°˜, ë¬´ê¶í™”ë°˜ ì²˜ëŸ¼ ì´ëŸ´ìˆ˜ë„ ìžˆë‹¤. ì´ëŸ´ë•Œ varcharì˜ ê¸€ìžìˆ˜ë¥¼ ì „ìžì— ë§žì·„ì„ ê²½ìš° ê¸€ìžìˆ˜ ë¶€ì¡± ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ë„ ìžˆë‹¤. ë”°ë¼ì„œ, ê³ ì • ê´€ë…ì— ë¹ ì ¸ì„œ ë°ì´í„° íƒ€ìž…ì„ ì„¤ì •í•˜ëŠ” ê²ƒì— ì£¼ì˜í•´ì•¼ í•œë‹¤. ì´ëŸ° ê²ƒì€ í™•ìž¥ì„±ì„ ê³ ë ¤í•˜ì§€ ì•Šì€ ì„¤ê³„ ë°©ì‹ì´ë‹¤.ì½”ë“œ ë ˆë²¨ì—ì„œ í•  ì¼í™•ìž¥ì„±ì„ ê³ ë ¤í•œ ì„¤ê³„ ì´í›„ì—ëŠ” ê°œë°œ ë‹¨ê³„ì—ì„œ ìš”êµ¬ ì‚¬í•­ì— ë§žë„ë¡ ê²€ì¦ ë¡œì§ì„ ì¶”ê°€í•˜ë©´ ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë°˜ì˜ ê°œìˆ˜ëŠ” ìµœëŒ€ 12ë°˜ ê¹Œì§€ ìžˆì–´ì•¼ í•œë‹¤ë©´, tinyintë¡œ ì¶©ë¶„í•˜ë‹¤. ê·¸ë¦¬ê³  ì½”ë“œ ë ˆë²¨ì—ì„œ 1ë°˜ ë¶€í„° 12ë°˜ê¹Œì§€ë§Œ ìž…ë ¥ë˜ë„ë¡ ê²€ì¦ ë¡œì§ì„ ì¶”ê°€í•˜ë©´ ëœë‹¤. ì¦‰, ìž…ë ¥ë˜ëŠ” ê°’ì— ëŒ€í•œ ì»¨íŠ¸ë¡¤ì€ ì„¤ê³„ ë‹¨ê³„ì—ì„œ í•  í•„ìš”ê°€ ì—†ë‹¤.ERD ê·¸ë¦¬ê¸°í•™ë…„ê³¼ ë°˜ 1:M ê´€ê³„  ë°˜IDê°€ í•™ë…„ë³„ë¡œ 1ë°˜, 2ë°˜ â€¦ ì²´ê³„ë¥¼ ê°–ê¸° ìœ„í•´ ìƒì†í˜• PKë¥¼ ì‚¬ìš©í–ˆë‹¤.ì•žì„œ ë§í–ˆë“¯ì´ í•™ë…„ ê¸°ì¤€ í…Œì´ë¸”ì€ ê±°ì˜ ë³€ê²½ë  ì¼ì´ ì—†ìœ¼ë¯€ë¡œ ë¯¸ë¦¬ ê°’ì„ ë„£ì–´ë†”ì„œ DMLì„ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ í•œë‹¤.INSERT INTO í•™ë…„ VALUES (1, '1í•™ë…„'), (2, '2í•™ë…„'), (3, '3í•™ë…„');SELECT * FROM í•™ë…„;í•™ë…„ í…Œì´ë¸”            Â       í•™ë…„ID      í•™ë…„ëª…                  1      1      1í•™ë…„              2      2      2í•™ë…„              3      3      3í•™ë…„      ë°˜ë©´ì—  ë°˜ í…Œì´ë¸”ì€ ê°’ì´ ë°”ë€” ìˆ˜ ìžˆëŠ” ìžˆê¸° ë•Œë¬¸ì— DMLì„ í—ˆìš©í•´ì•¼ í•œë‹¤. ì´ì²˜ëŸ¼ ë¹„ì¦ˆë‹ˆìŠ¤ ìƒí™©ì— ë”°ë¼ ë˜ëŠ” ê³ ê°ì˜ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ DMLì„ í—ˆìš©í•´ì•¼ í•  ì§€ íŒŒì•…í•˜ê³  ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ë„£ì„ì§€ ë§ì§€ ê²°ì •í•˜ë©´ ëœë‹¤.í•™ë…„, ë°˜, í•™ìƒ ê°ì²´í•™ë…„, ë°˜, í•™ìƒ ê°ì²´ë“¤ì— ëŒ€í•´ PKì™€ ìµœì†Œí•œì˜ ì†ì„±ìœ¼ë¡œë§Œ ERDë¥¼ êµ¬ì„±í–ˆë‹¤.  PKì— ì–´ë–¤ ì˜ë¯¸ë¥¼ ë¶€ì—¬í•˜ëŠ” í–‰ë™ì€ ì§€ì–‘í•´ì•¼ í•œë‹¤. í™•ìž¥ì„±ê³¼ ìœ ì—°ì„±ì„ ë§ê°€ëœ¨ë¦¬ëŠ” í–‰ìœ„ì´ë‹¤. PKëŠ” ìœ ë‹ˆí¬í•˜ê³  ë‚«ë„ì´ë©´ ì¶©ë¶„í•˜ë‹¤.  ì˜ˆì•½ì–´ì™€ ê°™ì€ í˜¼ëž€ì„ ë¹šì„ë§Œí•œ ë‹¨ì–´ë¡œëŠ” í…Œì´ë¸”ëª…ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. (ex. í•™ê¸‰, ë°˜ â†’ class ì‚¬ìš© ê¸ˆì§€)  ê° í…Œì´ë¸”ëª…ë“¤ì€ ì¼ê´€ì„±ìžˆê²Œ ìž‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. (ex. í•™ë…„ â†’ school_grade, ë°˜ â†’ school_class)  ì°¸ê³ ë¡œ ìž‘ëª…í•  ë•Œ í…Œì´ë¸”ì€ ì ‘ë‘ì–´ë¡œ TB, ë·°ëŠ” VW, ìŠ¤í† ì–´ë“œ í”„ë¡œì‹œì €ëŠ” SP ê°€ ë¶™ëŠ” ê²½ìš°ë„ ìžˆë‹¤. ì´ë¦„ë§Œ ë³´ê³  í…Œì´ë¸”ì¸ì§€ ë·°ì¸ì§€ ìŠ¤í† ì–´ë“œ í”„ë¡œì‹œì €ì¸ì§€ ë°”ë¡œ íŒŒì•…í•˜ê¸° íŽ¸ë¦¬í•˜ë‹¤.]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ê¸‰(Modeling) </category>
        
      </categories>
      <tags>
        
          <tag> Database </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ë„ì„œëŒ€ì¶œê´€ë¦¬ ëª¨ë¸ë§ ì—°ìŠµ (1)]]></title>
      <url>/database/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%20%EC%A4%91%EA%B8%89(modeling)/2024/05/13/books-loan-management/</url>
      <content type="text"><![CDATA[  ë„ì„œëŒ€ì¶œê´€ë¦¬ ëª¨ë¸ë§ì„ í†µí•´ 1:M, M:N ê´€ê³„ ì„¤ê³„ë¥¼ ì—°ìŠµí•´ë³´ìž.ë„ì„œê´€ì˜ ë„ì„œ ëŒ€ì¶œ ê´€ë¦¬ ìš”êµ¬ ì‚¬í•­  ë„ì„œê´€ì—ëŠ” ê° ì„œê³ /ì„œê°€ì— ë§Žì€ ì±…ë“¤ì´ ìžˆë‹¤  ê³ ê°ë“¤ì€ ì¸í„°ë„·ì„ í†µí•´ì„œ ë¡œê·¸ì¸í•œ í›„ ë„ì„œ ëª©ë¡ì„ ì¡°íšŒí•  ìˆ˜ ìžˆë‹¤  ê³ ê°ë“¤ì€ ì›í•˜ëŠ” ì±…ì„ ëŒ€ì¶œ ë°›ì„ ìˆ˜ ìžˆë‹¤.  ê³ ê°ì€ ì±…ì´ ìžˆì„ ê²½ìš° ëŒ€ì¶œ ì˜ˆì•½ì„ í•  ìˆ˜ ìžˆìœ¼ë©° ëŒ€ì¶œì„ ìœ„í•´ì„œëŠ” ì§ì ‘ ë°©ë¬¸í•´ì„œ ì±…ì„ ì°¾ì•„ì„œ ëŒ€ì¶œì„ í•´ì•¼ í•œë‹¤ë§ˆìŠ¤í„° í…Œì´ë¸”  ì„œê³ , ì„œê°€, ì±…, ê³ ê°, ë„ì„œ ëª©ë¡ê´€ê³„ í…Œì´ë¸”  ë¡œê·¸ì¸, ì¡°íšŒ, ëŒ€ì¶œ, ëŒ€ì¶œ ì˜ˆì•½ì„¤ê³„ ìˆœì„œë…¼ë¦¬ì  ì„¤ê³„ â†’ ë¬¼ë¦¬ì  ì„¤ê³„  ì´ˆê¸°ì—ëŠ” 1:M ê´€ê³„ë¥¼ ì°¾ëŠ” ê²ƒì— ì§‘ì¤‘í•˜ìž. ë§ˆìŠ¤í„° í…Œì´ë¸” ê°„ ì–´ë–¤ ë¹„ì¦ˆë‹ˆìŠ¤ í–‰ìœ„ê°€ ì¡´ìž¬í•˜ëŠ”ì§€ í™•ì‹ í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì—ì„œ M:N ì„ ë”°ì ¸ë´¤ìž í—›ìˆ˜ê³ ì´ë‹¤.ë…¼ë¦¬ì  ì„¤ê³„  í•œê¸€ë¡œ ìž‘ì„±í•˜ì—¬ ê°€ë…ì„±ì„ ë†’ì¸ë‹¤.  ì“¸ë°ì—†ëŠ” ì»¬ëŸ¼ ë“¤ì–´ê°€ì§€ ì•ŠëŠ”ë‹¤.  PK, FK ë° ì—†ì–´ì„œëŠ” ì•ˆë˜ëŠ” ì†ì„± ì •ë„ë¡œë§Œ êµ¬ì„±í•œë‹¤.ë¬¼ë¦¬ì  ì„¤ê³„  ì˜ì–´ë¡œ ì‹¤ì œ ì»¬ëŸ¼ ì´ë¦„ì„ ì§“ëŠ”ë‹¤.  ë°ì´í„° í˜•ì‹ì„ ì œëŒ€ë¡œ ìž¡ì•„ì¤€ë‹¤.  NOT NULL, UNIQUE ë“± ì œì•½ì„ ì„¤ì •í•´ì¤€ë‹¤.  êµ¬ì²´ì ì¸ ì†ì„±ë“¤ì„ ìž‘ì„±í•´ì¤€ë‹¤.ì„œê³ ì™€ ì„œê°€PKë¥¼ ì–´ë–»ê²Œ ìž¡ëŠ”ì§€ì— ë”°ë¼ ì„œê°€IDì˜ ìƒì„±ì²´ê³„ê°€ ë‹¬ë¼ì§„ë‹¤. ì„œê°€2ëŠ” ì„œê³ IDê°€ null í—ˆìš©ì´ë‹¤.ì„œê°€1  ì„œê³ ë¥¼ ë°˜ë“œì‹œ ìž…ë ¥í•´ì•¼ í•˜ëŠ” ê²½ìš° ìƒì†í˜• PKë¥¼ ì‚¬ìš©í•œë‹¤.(ì—ëŸ¬ê°€ ì—†ì§€ë§Œ, ìœµí†µì„±ì´ ì—†ë‹¤.)  ì„œê°€ IDê°€ ê° ì„œê³ ë³„ë¡œ 1ë²ˆë¶€í„° ì‹œìž‘í•œë‹¤.ì„œê°€2  ì„œê°€ë¥¼ ë¨¼ì € ë“±ë¡í•´ì•¼ë˜ëŠ” ê²½ìš°ì—ëŠ” ë…ë¦½í˜• PKë¥¼ ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤.(ìœµí†µì„±ì€ ìžˆì§€ë§Œ ì—ëŸ¬ê°€ ìžˆì„ ìˆ˜ ìžˆë‹¤. ë‚˜ì¤‘ì— ì—…ë°ì´íŠ¸ë¥¼ ìžŠëŠ” ê²½ìš° ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìžˆë‹¤. ê°€ë¹„ì§€ ë°ì´í„°ê°€ ëœë‹¤.)  ì„œê³ ì— ìƒê´€ì—†ì´ ì„œê°€IDëŠ” ê³„ì† ì¦ê°€í•œë‹¤.  DMBS ê°€ ë³´ê¸°ì—ëŠ” ë…ë¦½í˜• PKë¥¼ ì‚¬ìš©í•˜ëŠ” ì„œê°€2ì˜ FKê°€ NULLì¸ ë°ì´í„°ëŠ” ì „í˜€ ë¬¸ì œê°€ ì—†ë‹¤. í•˜ì§€ë§Œ ì‚¬ëžŒë“¤ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ìœ¼ë¡œ ë´¤ì„ ë•ŒëŠ” ì„œê³  ID(FK)ê°€ NULLì¸ ê²ƒì€ ì˜¤ë¥˜ë¡œ í•´ì„ë˜ëŠ” ê²ƒì´ë‹¤.ìƒì†í˜• PKë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•ˆì „í•˜ë‹ˆ ìƒì†í˜• PKë¥¼ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•´ë³´ìž.ì„œê°€ì™€ ì±… 1:M ê´€ê³„ì±…ê³¼ ëª©ì°¨ 1:M ê´€ê³„  ìƒì†í˜• PK í…Œì´ë¸”ì˜ íŠ¹ì§•  ì†ìžê²©ì¸ ì±… í…Œì´ë¸”ì€ ì„œê°€ì˜ PKë¥¼ FKë¡œ ë¬¼ë ¤ë°›ëŠ”ë‹¤. ì¦‰, ì„œê°€ì˜ PKëŠ” ë³µí•©í‚¤(ì„œê³ ID + ì„œê°€ID)ì´ë¯€ë¡œ ì±…ì˜ FKë¡œ ê·¸ëŒ€ë¡œ ê³„ìŠ¹ëœë‹¤.ìƒì†í˜• PKëŠ” ì•ˆì „í•˜ì§€ë§Œ ê·¸ ë§Œí¼ ìœµí†µì„±ì´ ì—†ë‹¤ê³  ë³¼ ìˆ˜ ìžˆë‹¤.ì„œê°€ - ì±… - ëª©ì°¨ë¥¼ ì‚´íŽ´ë³´ë©´, ë³µí•©í‚¤ê°€ ê³„ì† ëˆˆë©ì´ì²˜ëŸ¼ ì»¤ì ¸ì„œ ê³„ìŠ¹ë˜ê³  ìžˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìžˆë‹¤.ì¦‰, ìƒì†í˜• PKëŠ” ê³„ìŠ¹ë  ìˆ˜ë¡ PKì— ì°¸ì—¬í•˜ëŠ” ì»¬ëŸ¼ ê°œìˆ˜ê°€ ëŠ˜ì–´ë‚œë‹¤ëŠ” ë‹¨ì ì´ ìžˆë‹¤.(ì±… - ëŒ€ì¶œ - ê³ ê°) M:N ê´€ê³„ í…Œì´ë¸”  ì±…Seq(AK, Alternate Key)ë¥¼ ì„ ì–¸í•´ì¤˜ì„œ ì±… ì¡°íšŒì™€ ëŒ€ì¶œ í…Œì´ë¸”ì˜ FKë¡œ íŽ¸ë¦¬í•˜ê²Œ í™œìš© ê°€ëŠ¥í•˜ë‹¤. AKë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì¡°íšŒì‹œ PK(ì±…, ì„œê³ , ì„œê°€ ID)ë¥¼ ëª¨ë‘ ìž‘ì„±í•´ì•¼ í•œë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ ëŒ€ì²´í‚¤ê°€ ì—†ë‹¤ë©´ ëŒ€ì¶œ í…Œì´ë¸”ì—ë„ ì „ë¶€ ìž‘ì„±í•´ì•¼ í•œë‹¤.  ëŒ€ì¶œì¼(REG_DATE)ì€ ê´€ê³„ í…Œì´ë¸”ì˜ í•„ìˆ˜ ìš”ì†Œì´ë‹¤. ê³ ê°ì´ ì–´ë–¤ ì±…ì„ ì–¸ì œ ë¹Œë ¸ë‹¤. ë¥¼ ëŒ€ì¶œ í…Œì´ë¸”ì´ í‘œí˜„í•˜ê³  ìžˆê³ , ì´ í•œ ë¬¸ìž¥ì„ í‘œí˜„í•  ìˆ˜ ìžˆë„ë¡ ì±…Seq , ê³ ê°ID , ëŒ€ì¶œì¼ ì„ ë³µí•©í‚¤ë¡œ ìž¡ì•˜ë‹¤.1:1 ê´€ê³„ë¥¼ ì™„ì„±í•˜ê¸° ì „ ì´ˆì•ˆ ERDì±…ê³¼ ë„ì„œëª©ë¡ì€ 1:1 ê´€ê³„ì´ë‹¤.1:1 ê´€ê³„ë¥¼ ì™„ì„±í•´ì•¼ì§€ ì„¤ê³„ê°€ ìµœì¢…ì ìœ¼ë¡œ ì™„ì„±ì´ ëœë‹¤.1:1 ê´€ê³„ ì—†ì´ëŠ” ì„¤ê³„ ì™„ì„±ì´ ì•ˆ ë  ìˆ˜ë„ ìžˆë‹¤.1:1 ê´€ê³„ëŠ” ê¹Šì´ë¥¼ ìš”êµ¬í•˜ëŠ” ê³ ë‚œì´ë„ ê¸°ìˆ ì´ ìš”êµ¬ ë˜ê¸°ë„ í•œë‹¤.]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ê¸‰(Modeling) </category>
        
      </categories>
      <tags>
        
          <tag> Database </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[RDB M:N ê´€ê³„]]></title>
      <url>/database/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%20%EC%A4%91%EA%B8%89(modeling)/2024/05/12/M-N-relation/</url>
      <content type="text"><![CDATA[  ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ M:N ê´€ê³„ì— ëŒ€í•´ ì•Œì•„ë³´ìž!M:N ê´€ê³„M:N ê´€ê³„ëŠ” í•œ ìª½ì—ì„œ ë³´ë©´ 1:M ê´€ê³„ë¡œ ë³´ì¸ë‹¤. ë°˜ëŒ€ íŽ¸ì—ì„œë„ ë§ˆì°¬ê°€ì§€ë¡œ 1:M ê´€ê³„ë¡œ ë³´ì—¬ì§„ë‹¤.M:N ê´€ê³„ ì˜ˆì œí•™ìƒê³¼ ê³¼ëª©ì´ë¼ëŠ” í…Œì´ë¸”ì´ ìžˆì„ ë•Œ í•™ìƒì´ ì—¬ëŸ¬ ê°œ ê³¼ëª©ì„ ìˆ˜ê°•í•˜ëŠ” ìƒí™©ì„ ê°€ì •í•´ë³´ìž.í•™ìƒ ìž…ìž¥ì—ì„œëŠ” ì—¬ëŸ¬ ê°œ ê³¼ëª©ì„ ìˆ˜ê°•í•  ìˆ˜ ìžˆê³ , ê³¼ëª© ìž…ìž¥ì—ì„œëŠ” ì—¬ëŸ¬ í•™ìƒì´ í•´ë‹¹ ê³¼ëª©ì„ ì„ íƒí•  ìˆ˜ ìžˆë‹¤. ì–‘ìª½ì—ì„œ ëª¨ë‘ 1:M ê´€ê³„ë¡œ ë³¼ ìˆ˜ ìžˆìœ¼ë¯€ë¡œ M:N ê´€ê³„ê°€ ì„±ë¦½ëœë‹¤.ê°œë…ìƒìœ¼ë¡œëŠ” M:Nì´ ê°€ëŠ¥í•˜ë‹¤.ì•„ëž˜ ì´ë¯¸ì§€ëŠ” í•™ìƒê³¼ ê³¼ëª©ì´ M:Nìœ¼ë¡œ ê´€ê³„ë¥¼ ë§ºê³  ìžˆë‹¤.í•™ìƒì´ ì—¬ëŸ¬ ê³¼ëª©ì„ ìˆ˜ê°• ê°€ëŠ¥í•˜ë‹¤.M:N ê´€ê³„ë¥¼ í…Œì´ë¸”ë¡œ í‘œí˜„ ì‹œ ë¬¸ì œì ðŸš¨ M:N ê´€ê³„ë¥¼ í’€ì–´ì„œ í•™ìƒ í…Œì´ë¸”ê³¼ ê³¼ëª© í…Œì´ë¸”ë¡œ í‘œí˜„í•´ë³´ë©´ PK ì¤‘ë³µ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.ê¸°ì¡´ ë‘ í…Œì´ë¸”ë¡œëŠ” M:N ê´€ê³„ í‘œí˜„ ë¶ˆê°€ëŠ¥M:N ê´€ê³„ëŠ” ì–‘ìª½ì—ì„œ PK ì¤‘ë³µ ë¬¸ì œê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ê¸°ì¡´ ë‘ ê°œì˜ ê´€ê³„í˜• í…Œì´ë¸”ë¡œëŠ” í‘œí˜„í•  ë°©ë²•ì´ ì—†ë‹¤.  ðŸ’¡ ê´€ê³„ë¼ëŠ” ê²ƒì€ í…Œì´ë¸”ì˜ ì¼ë°˜ ì†ì„±ë¼ë¦¬ ì—°ê²°í•´ì„œ ê´€ê³„ë¥¼ ë§ºëŠ” ê²ƒì´ ì•„ë‹ˆë¼, PKì™€ FK ê°„ì˜ ì—°ê²°ì„ í†µí•´ ê´€ê³„ë¥¼ ë§ºëŠ” ê²ƒì´ë‹¤. ì¦‰, ê´€ê³„ë¥¼ ìœ„í•´ì„  FK ê°€ í•„ìš”í•˜ë‹¤.  ðŸ’¡ M:N ê´€ê³„ì— ì°¸ì—¬í•˜ëŠ” ë‘ ê°ì²´ì˜ í…Œì´ë¸”ë¼ë¦¬ëŠ” ì„ ì²œì ìœ¼ë¡œ ê´€ê³„ê°€ ì—†ë‹¤. ê° í…Œì´ë¸”ì€ ìŠ¤ìŠ¤ë¡œ ì¡´ìž¬í•œë‹¤. ê·¸ëŸ°ë° ì´ë“¤ ì‚¬ì´ì— ì–´ë–¤ ê´€ê³„ë¥¼ ë§ºì–´ì¤Œìœ¼ë¡œì¨ M:N ê´€ê³„ë¥¼ í…Œì´ë¸”ë¡œ í‘œí˜„í•  ìˆ˜ ìžˆê²Œ ëœë‹¤.ì–´ë–»ê²Œ M:N ê´€ê³„ë¥¼ í…Œì´ë¸”ë¡œ í‘œí˜„í•  ê²ƒì¸ê°€?ê²°êµ­ M:N ê´€ê³„ë¥¼ í…Œì´ë¸”ë¡œ í‘œí˜„í•˜ë ¤ë©´ ë˜ í•˜ë‚˜ì˜ í…Œì´ë¸”ì´ í•„ìš”í•˜ë‹¤.í•™ìƒê³¼ ê³¼ëª©ì˜ M:N ê´€ê³„ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ ìˆ˜ê°• í…Œì´ë¸”ì´ ë“±ìž¥í•™ìƒê³¼ ê³¼ëª©ì€ ê°ìž ìŠ¤ìŠ¤ë¡œ ì¡´ìž¬í•˜ëŠ” ì—”í‹°í‹°(ê°œë…, í…Œì´ë¸”)ì´ë‹¤. ê·¸ëŸ¬ë©´ ìˆ˜ê°• í…Œì´ë¸”ì€ ìŠ¤ìŠ¤ë¡œ ì¡´ìž¬í•˜ëŠ” í…Œì´ë¸”ì¼ê¹Œ?NO. ìˆ˜ê°• í…Œì´ë¸”ì€ í•™ìƒê³¼ ê³¼ëª© ì‚¬ì´ì—ì„œ í–‰ìœ„(ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ ë“±ìž¥í•œ í…Œì´ë¸”ì´ë‹¤.â­ï¸ M:N ê´€ê³„ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ê³„ì´ë‹¤.ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ê³„ë¼ëŠ” ê²ƒì€ ë‚˜ì™€ ìƒëŒ€ë°© ê°„ì˜ ì–´ë–¤ ê³„ì•½ ê´€ê³„ë¥¼ ë§ºì–´ì„œ ì›€ì§ì¸ë‹¤ëŠ” ê²ƒì´ë‹¤.ì¦‰, ì£¼ì–´, ëª©ì ì–´, ë™ì‚¬ê°€ í¬í•¨ë˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ í–‰ìœ„ê°€ ì¼ì–´ë‚˜ì„œ M:N ê´€ê³„ë¥¼ í˜•ì„±í•˜ëŠ” ê²ƒì´ë‹¤.ì˜ˆë¥¼ ë“¤ì–´, í•™ìƒ(ì£¼ì–´)ì´ ê³¼ëª©(ëª©ì ì–´)ì„ ìˆ˜ê°•(ë™ì‚¬)í•©ë‹ˆë‹¤. ë¼ëŠ” ìš”êµ¬ì‚¬í•­ ë˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ í–‰ìœ„ê°€ ì¡´ìž¬í•  ë•Œ M:N ê´€ê³„ë¥¼ í•™ìƒ, ê³¼ëª©, ìˆ˜ê°• í…Œì´ë¸”ë¡œ í‘œí˜„ ê°€ëŠ¥í•´ì§€ëŠ” ê²ƒì´ë‹¤.  M:N ê´€ê³„ì—ì„œëŠ” í…Œì´ë¸”ì„ ì½ëŠ” ë°©ë²•ì„ ë°°ìš°ëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤.í•™ìƒê³¼ ê³¼ëª©ì€ ê´€ê³„ê°€ ì—†ë‹¤.ì„ ì²œì ìœ¼ë¡œ ìŠ¤ìŠ¤ë¡œ ì¡´ìž¬í•˜ëŠ” í•™ìƒê³¼ ê³¼ëª©ì—ëŠ” ì‚¬ì‹¤ ì–´ë– í•œ ê´€ê³„ë„ ì—†ë‹¤. í•˜ì§€ë§Œ ì´ ê°ì²´ë“¤ì´ ê´€ê³„ë¥¼ ë§ºëŠ” ìˆœê°„ì´ ì˜¨ë‹¤.ì–¸ì œ???ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(í•™ìƒì´ ê³¼ëª©ì„ ìˆ˜ê°•í•©ë‹ˆë‹¤.)ì´ ë“¤ì–´ì˜¤ëŠ” ìˆœê°„ í•™ìƒê³¼ ê³¼ëª© ì‚¬ì´ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ í–‰ìœ„ë¡œ ì¸í•´ ê´€ê³„ê°€ ë§ºì–´ì§€ëŠ” ê²ƒì´ë‹¤.  â­ï¸ M:N ê´€ê³„ë¼ëŠ” ê²ƒì€ ì–´ë–¤ í–‰ìœ„ê°€ ìžˆì„ ì ì—, ì¦‰ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ë‚˜íƒ€ë‚  ë•Œ ìŠ¤ìŠ¤ë¡œ ì¡´ìž¬í•˜ë˜ ê°ì²´ ê°„ì˜ ê´€ê³„ê°€ ë§ºì–´ì§€ëŠ” ê²ƒì´ë‹¤.ê¸°ì¡´ ê°ì²´ë¼ë¦¬ M:N ê´€ê³„ë¥¼ ì–µì§€ìŠ¤ëŸ½ê²Œ í…Œì´ë¸”ë¡œ í‘œí˜„í•˜ë ¤ë‹¤ ë³´ë‹ˆ PK ì¤‘ë³µ ë¬¸ì œê°€ ë°œìƒí–ˆì—ˆë‹¤. ì´ê²ƒì€ ë‘ ê°ì²´ê°„ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ í–‰ìœ„ë¥¼ ì •ì˜í•˜ëŠ” ì–´ë–¤ í…Œì´ë¸”ì´ ìƒëžµëê¸° ë•Œë¬¸ì— ë°œìƒí•œ ë¬¸ì œì˜€ë˜ ê²ƒì´ë‹¤.Master Tableëª…ì‚¬ë¡œì„œ ìŠ¤ìŠ¤ë¡œ ì¡´ìž¬í•  ìˆ˜ ìžˆëŠ” ê°ì²´(í…Œì´ë¸”)ë“¤ì„ Master Tableì´ë¼ê³  í•œë‹¤.  ex: í•™ìƒ, ê³¼ëª©, ê³ ê°, ìƒí’ˆRelation Tableë™ì‚¬ë¡œì„œ ë¹„ì¦ˆë‹ˆìŠ¤ í–‰ìœ„ë¥¼ ì •ì˜í•˜ì—¬ M:N ê´€ê³„ë¥¼ í‘œí˜„í•˜ëŠ” í…Œì´ë¸”ì„ Relation Tableì´ë¼ê³  í•œë‹¤. ì°¸ê³ ë¡œ ê´€ê³„(Relation) í…Œì´ë¸”ì´ ëª…ì‚¬ë¡œì„œ ë§ˆìŠ¤í„° í…Œì´ë¸”ë¡œ í•´ì„ë  ë•Œë„ ì¡´ìž¬í•œë‹¤.(ê´€ê³„ í…Œì´ë¸”ì˜ PKê°€ ë˜ ë‹¤ë¥¸ ê´€ê³„ í…Œì´ë¸”ì˜ FKë¡œ ì°¸ì¡°ë˜ëŠ” ê²½ìš°ì´ë‹¤.)  ex: ìˆ˜ê°•, ì£¼ë¬¸  ðŸ’¡ REG_DATE  ì°¸ê³ ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ í–‰ìœ„ë¥¼ ì •ì˜í•˜ëŠ” ê´€ê³„(Relation) í…Œì´ë¸”ì€ í•­ìƒ ë‚ ì§œ ì»¬ëŸ¼(REG_DATE)ì´ í•„ìˆ˜ ìš”ì†Œì´ë‹¤. ëˆ„ê°€ ë¬´ì—‡ì„ ì–¸ì œ ~ë¥¼ í–ˆë‹¤. ë¥¼ í‘œí˜„í•  ë•Œ ì–¸ì œë¥¼ ë‚ ì§œ ì»¬ëŸ¼ì´ ë§¡ê²Œ ëœë‹¤.M:Nì€ ê²°êµ­ ìŒë°© 1:M ê´€ê³„ë¡œ í•´ì„ëœë‹¤.  í•™ìƒ - ìˆ˜ê°• í…Œì´ë¸” ê°„ì˜ ê´€ê³„ëŠ” 1:M ê´€ê³„ì´ë‹¤.  ê³¼ëª© - ìˆ˜ê°• í…Œì´ë¸” ê°„ì˜ ê´€ê³„ëŠ” 1:M ê´€ê³„ì´ë‹¤.ê²°êµ­ ë‘ ê°œì˜ ê´€ê³„ë¥¼ í•©ì³ì„œ M:N ê´€ê³„ë¡œ í•´ì„ì´ ë˜ëŠ” ê²ƒì´ë‹¤.M:N ê´€ê³„ë¡œ í•´ì„í•˜ê¸° ì „ì— ì‚´íŽ´ë´ì•¼ í•˜ëŠ” ê²ƒ  ê° Master í…Œì´ë¸” ê°„ ìŒë°©ìœ¼ë¡œ 1:M ê´€ê³„ê°€ ì—†ëŠ”ì§€ ì‚´íŽ´ë´ì•¼ í•œë‹¤.  1:M ê´€ê³„ê°€ ì—†ë‹¤ë©´ ë‘ Master í…Œì´ë¸”ì€ M:N ê´€ê³„ì¸ ê²ƒì´ë‹¤.M:N ê´€ê³„ í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ ì²´ê³„M:N ê´€ê³„ í…Œì´ë¸”ì˜ PKëŠ” ì–´ë–»ê²Œ ìž¡ì•„ì•¼ í• ê¹Œ?ê²°ê³¼ë¶€í„° ë§í•˜ìžë©´, ë¹„ì¦ˆë‹ˆìŠ¤ íŠ¹ì§•ì— ë”°ë¼ ë‹¤ë¥´ë‹¤.ë…ë¦½í˜• PK  FK ì˜ ì¤‘ë³µì„ í—ˆìš©í•´ì•¼ í•˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ìƒí™©ì—ì„œëŠ” ë…ë¦½í˜• PKë¥¼ ì‚¬ìš©í•œë‹¤.ê³ ê°ì€ ë™ì¼í•œ ìƒí’ˆì„ ì—¬ëŸ¬ ë²ˆ êµ¬ë§¤í•  ìˆ˜ ìžˆë‹¤.ì¤‘ë³µì„ í—ˆìš©í•˜ëŠ” ìƒí™©ì—ì„œëŠ” PKë¥¼ ë…ë¦½ì ìœ¼ë¡œ ì„¤ì •í•´ì£¼ìž.ìƒì†í˜• PK  FKì˜ ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ìƒí™©ì—ì„œëŠ” ìƒì†í˜• PKë¥¼ ì‚¬ìš©í•œë‹¤.í•™ìƒì€ ë™ì¼í•œ ê³¼ëª©ì„ ì¤‘ë³µìœ¼ë¡œ ìˆ˜ê°•í•  ìˆ˜ ì—†ë‹¤.ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ìƒí™©ì—ì„œëŠ” FKë¥¼ ë¬¶ì–´ì„œ ë³µí•©í‚¤ë¥¼ PKë¡œ ì„¤ì •í•´ì£¼ìž.  ðŸ’¡ ì„¤ê³„ ì‹œ ì£¼ì˜ ì‚¬í•­  í•˜ë‚˜ì˜ í…Œì´ë¸”ì€ í•˜ë‚˜ì˜ ê°ì²´ë‚˜ ì‚¬ë¬¼ì„ ëª¨ë¸ë§ í•˜ëŠ” ê²ƒì´ë‹¤. ë‘ ê°œ ì´ìƒì˜ ê°ì²´ë¥¼ í•˜ë‚˜ì˜ í…Œì´ë¸”ë¡œ ëª¨ë¸ë§ í•˜ëŠ” ìˆœê°„ ìž˜ëª»ëœ ì„¤ê³„ë¥¼ í•˜ëŠ” ê²ƒì´ë‹¤.ë§Œì•½ ê´€ê³„ í…Œì´ë¸”ì— ì°¸ì—¬í•˜ê³  ìžˆëŠ” ë§ˆìŠ¤í„° í…Œì´ë¸”ì´ ë§Žë‹¤ë©´???í•˜ë‚˜ì˜ ë ˆì½”ë“œë¥¼ ì‹ë³„í•˜ê¸° ìœ„í•´ WHERE ì ˆì— ì—„ì²­ ë§Žì€ FK ë¥¼ ì¡°ê±´ìœ¼ë¡œ ì ìš©í•´ì•¼ì§€ ì‹ë³„í•  ìˆ˜ ìžˆì„ ê²ƒì´ë‹¤.SELECT *FROM ìˆ˜ê°•WHERE í•™ìƒID='1' and ê³¼ëª©ID='c' and f3='2' and f4 ='k'and ...;ì‹¤ë¬´ì—ì„œëŠ” ê´€ê³„ í…Œì´ë¸”ì„ í˜•ì„±í•˜ê³  ìžˆëŠ” ë§ˆìŠ¤í„° í…Œì´ë¸”ì´ ë‹¨ìˆœížˆ 2ê°œì¸ ê²½ìš°ë§Œ ìžˆëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë¬´ìˆ˜ížˆ ë§Žì„ ìˆ˜ë„ ìžˆë‹¤.ì´ëŸ° ê²½ìš° WHEREì ˆì—ì„œ ê°„ë‹¨ížˆ ì¡°íšŒí•˜ê¸° ìœ„í•´ ë³´ì¡°í‚¤(ëŒ€ì²´í‚¤, alternate key)ë¥¼ ì„ ì–¸í•´ì¤˜ì„œ í•˜ë‚˜ì˜ ë ˆì½”ë“œë¥¼ ì‹ë³„í•˜ëŠ” ë° íŽ¸í•¨ì„ ì–»ì„ ìˆ˜ ìžˆë‹¤. ë‹¨, ìƒì†í˜• PK ë¥¼ ê¸°ë³¸í‚¤ë¡œ ì‚¬ìš©í•˜ì—¬ FKì˜ ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì „ì œë¡œ í•´ì•¼ í•œë‹¤.seq ë¼ëŠ” ë³´ì¡°í‚¤ë¥¼ ì„ ì–¸í•´ì¤¬ë‹¤.SELECT *FROM ìˆ˜ê°•WHERE seq=5;ë³´ì¡°í‚¤(ëŒ€ì²´í‚¤)ëŠ” PKì˜ íŠ¹ì§•ì„ ëª¨ë‘ ë§Œì¡±í•˜ì§€ë§Œ PKëŠ” ì•„ë‹ˆë‹¤.UNIQUE í•˜ë©´ì„œ NOT NULLì„ ëª¨ë‘ ë§Œì¡±í•˜ì§€ë§Œ PKë¡œ ë“±ë¡ì´ ì•ˆëœ í‚¤ì´ë‹¤.ë³´ì¡°í‚¤ëŠ” ê´€ê³„ í…Œì´ë¸”ì˜ ì¡°ê±´ì ˆì„ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ ì¡°íšŒë¥¼ íŽ¸ë¦¬í•˜ê²Œ í•œë‹¤.]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ê¸‰(Modeling) </category>
        
      </categories>
      <tags>
        
          <tag> Database </tag>
        
          <tag> Relation </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[RDB 1:M ê´€ê³„ (3)]]></title>
      <url>/database/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%20%EC%A4%91%EA%B8%89(modeling)/2024/05/11/1-M-relation(3)_recursive/</url>
      <content type="text"><![CDATA[  1:M ê´€ê³„ ì¤‘ íŠ¹ì´í•œ ê²½ìš°ì¸ ìž¬ê·€ì  ê´€ê³„ì— ëŒ€í•´ ì•Œì•„ë³´ìž.1:M ìž¬ê·€ì  ê´€ê³„1:M ìž¬ê·€ì  ê´€ê³„ëž€ ë¬´ì—‡ì¼ê¹Œ?íšŒì‚¬ì™€ ë¶€ì„œê°€ ì¡´ìž¬í•  ë•Œ, ë¶€ì„œ ì•„ëž˜ í•˜ìœ„ ë¶€ì„œê°€ ì¡´ìž¬í•˜ëŠ” ê²½ìš° 1:M ìž¬ê·€ì  ê´€ê³„ë¡œ ë³¼ ìˆ˜ ìžˆë‹¤. ìƒìœ„ ë¶€ì„œì™€ í•˜ìœ„ ë¶€ì„œë„ 1:M ê´€ê³„ë¡œ ë³¼ ìˆ˜ ìžˆë‹¤.1:M ìž¬ê·€ì  ê´€ê³„ì˜ ë˜ ë‹¤ë¥¸ ì˜ˆë¡œ ë””ë ‰í† ë¦¬ê°€ ìžˆë‹¤. 1:M ê´€ê³„ê°€ ë°˜ë³µì ìœ¼ë¡œ ì´ì–´ì§€ëŠ” ê´€ê³„ì´ë‹¤.ì•„ëž˜ ì´ë¯¸ì§€ëŠ” íšŒì‚¬ì™€ ìƒìœ„ ë¶€ì„œ, í•˜ìœ„ ë¶€ì„œì˜ ê´€ê³„ë„ë¥¼ ë‚˜íƒ€ë‚¸ ì´ë¯¸ì§€ì´ë‹¤.íšŒì‚¬, ìƒìœ„ ë¶€ì„œ, í•˜ìœ„ ë¶€ì„œ1:M ìž¬ê·€ì  ê´€ê³„ë¥¼ í…Œì´ë¸”ë¡œ ì–´ë–»ê²Œ êµ¬í˜„í• ê¹Œ?ìž¬ê·€ì  ê´€ê³„ì— ë†“ì¸ í…Œì´ë¸”ì„(ë¶€ì„œ) ì¤‘ì‹¬ìœ¼ë¡œ ìƒìœ„, í•˜ìœ„ ê´€ê³„ë¥¼ ì‚´íŽ´ë³´ìž.ìš°ì„ , ìž¬ê·€ì  ê´€ê³„ í…Œì´ë¸”ì„ ì•„ëž˜ì™€ ê°™ì´ ì„¤ê³„í–ˆë‹¤ê³  ê°€ì •í•´ë³´ìž.ì´ˆê¸° ìž¬ê·€ì  ê´€ê³„ í…Œì´ë¸”            Â       ì—´ ì´ë¦„      ë°ì´í„° íƒ€ìž…      NULL í—ˆìš©                  PK      ë¶€ì„œ id      int      x              Â       ë¶€ì„œëª…      varchar(50)      o              FK      í•˜ìœ„ ë¶€ì„œ ID      int      o              FK      ìƒìœ„ ë¶€ì„œ ID      int      o      ì´ë•Œ, ìœ„ í…Œì´ë¸”ì˜ ìƒìœ„ ë¶€ì„œ IDì™€ í•˜ìœ„ ë¶€ì„œ IDê°€ í…Œì´ë¸”ì— í¬í•¨ë˜ì–´ë„ ë¬¸ì œê°€ ì—†ì„ì§€ ê³ ë¯¼í•´ë³´ìž.í•˜ìœ„ ë¶€ì„œì˜ ê²½ìš°  í•˜ìœ„ ë¶€ì„œì˜ ê²½ìš° Mì˜ ìœ„ì¹˜ì— ìžˆê¸° ë•Œë¬¸ì— ìž¬ê·€ì  ê´€ê³„ í…Œì´ë¸”ì— í¬í•¨ì‹œí‚¬ ìˆ˜ ì—†ë‹¤. ê·¸ ì´ìœ ëŠ” í•˜ìœ„ ë¶€ì„œ ID(FK)ë¥¼ í¬í•¨ì‹œí‚¤ë©´ ë¶€ì„œ ID(ìžê¸° ìžì‹ , PK)ì˜ ì¤‘ë³µì´ ë°œìƒí•˜ê¸° ë•Œë¬¸ì´ë‹¤.  ë˜í•œ í•˜ìœ„ ID ì—¬ëŸ¬ ê°œë¥¼ í•˜ë‚˜ì˜ í–‰ìœ¼ë¡œ ì €ìž¥í•  ìˆ˜ ì—†ë‹¤. ê° ì†ì„±ì€ ì›ìžê°’ì„ ê°€ì ¸ì•¼ í•œë‹¤ëŠ” DB ì„¤ê³„ ëŒ€ì›ì¹™ì„ ì§€ì¼œì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.ìƒìœ„ ë¶€ì„œì˜ ê²½ìš°  ìµœìƒìœ„ ë¶€ì„œì˜ ê²½ìš° ìƒìœ„ ë¶€ì„œ IDëŠ” 1(ìžê¸° ìžì‹ )ì˜ ìœ„ì¹˜ì— ìžˆë‹¤. ë”°ë¼ì„œ ë¬¸ì œ ì—†ì´ í…Œì´ë¸”ì— í¬í•¨ì‹œí‚¬ ìˆ˜ ìžˆë‹¤. ì¦‰, ìžê¸° ìžì‹ ì„ ì°¸ì¡°í•˜ëŠ” ê²ƒì´ë‹¤.(self join)  1:M ìž¬ê·€ì  ê´€ê³„ì— ë†“ì¸ ì¤‘ê°„ ìœ„ì¹˜ì˜ í…Œì´ë¸”ì´ë¼ í•˜ë”ë¼ë„ ìƒìœ„ ë¶€ì„œ(ë¶€ëª¨)ëŠ” ë‹¨ í•˜ë‚˜ì´ê¸° ë•Œë¬¸ì—, ìž¬ê·€ì  ê´€ê³„ í…Œì´ë¸”ì— í¬í•¨ì‹œì¼œë„ ì•„ë¬´ ì´ìƒ ì—†ë‹¤.ìµœì¢… ìž¬ê·€ì  ê´€ê³„ í…Œì´ë¸”ìž¬ê·€ì  ê´€ê³„ í…Œì´ë¸”ì˜ ìƒí•˜ ê´€ê³„ë¥¼ ë”°ì ¸ì„œ ë¬¸ì œê°€ ì—†ë„ë¡œ ìˆ˜ì •í•œ í…Œì´ë¸”ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.            Â       ì—´ ì´ë¦„      ë°ì´í„° íƒ€ìž…      NULL í—ˆìš©                  PK      ë¶€ì„œ id      int      x              Â       ë¶€ì„œëª…      varchar(50)      o              FK      ìƒìœ„ ë¶€ì„œ ID      int      o        â­ï¸ SELF JOIN  1:M ìž¬ê·€ì  ê´€ê³„ì²˜ëŸ¼ íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ ê°–ëŠ” í…Œì´ë¸” ìŠ¤í‚¤ë§ˆëŠ” ë°˜ë“œì‹œ SELF JOIN ì²˜ëŸ¼ PKì™€ FK ëª¨ë‘ ë³¸ì¸ì´ ê°–ëŠ”, ì¦‰ ìžê¸° ìžì‹ ì„ ì°¸ì¡°í•˜ëŠ” ìŠ¤í‚¤ë§ˆë¡œ ì„¤ê³„í•´ì•¼ í•œë‹¤.ìƒìœ„ ë¶€ì„œ IDì—ëŠ” NULLì´ ë“¤ì–´ì˜¬ ìˆ˜ ìžˆì„ê¹Œ?ê°€ëŠ¥í•˜ë‹¤.ì˜ˆë¥¼ ë“¤ì–´, FK(ìƒìœ„ ë¶€ì„œ ID)ê°€ ì—†ëŠ” ê²½ìš°ì—ëŠ” ìž¬ê·€ì  ê´€ê³„ì—ì„œ ìµœìƒìœ„ ìœ„ì¹˜ë¡œ ë³¼ ìˆ˜ ìžˆë‹¤.ì¦‰, ìµœìƒìœ„ ë¶€ì„œì˜ ê²½ìš°ì—ëŠ” ìƒìœ„ ë¶€ì„œ IDê°€ NULL ì´ ëœë‹¤.INSERT INTO ë¶€ì„œ1 VALUES (1, 'ì´ë¬´ë¶€', NULL);INSERT INTO ë¶€ì„œ1 VALUES (2, 'ì´ë¬´1ê³¼', 1);INSERT INTO ë¶€ì„œ1 VALUES (3, 'ì´ë¬´2ê³¼', 1);SELECT * FROM ë¶€ì„œ1;ìµœìƒìœ„ ë¶€ì„œì¸ ì´ë¬´ë¶€ ì•„ëž˜ì— ì´ë¬´1ê³¼ì™€ ì´ë¬´2ê³¼ê°€ ì¡´ìž¬í•œë‹¤ê³  í–ˆì„ ë•Œ ì•„ëž˜ì™€ ê°™ì€ ìž¬ê·€ì  ê´€ê³„ í…Œì´ë¸”ì´ ìƒì„±ëœë‹¤.            Â       ë¶€ì„œID      ë¶€ì„œëª…      ìƒìœ„ë¶€ì„œID                  1      1      ì´ë¬´ë¶€      NULL              2      2      ì´ë¬´1ê³¼      1              3      3      ì´ë¬´2ê³¼      1      1:M ìž¬ê·€ì  ê´€ê³„(íŠ¸ë¦¬ êµ¬ì¡°)ë¥¼ SQLë¬¸ì˜ ì…€í”„ ì¡°ì¸ìœ¼ë¡œ ë³´ë©´ ì•„ëž˜ì™€ ê°™ë‹¤.SELECT * FROM ë¶€ì„œ1 aJOIN ë¶€ì„œ1 b on a.ë¶€ì„œID = b.ìƒìœ„ë¶€ì„œID            Â       ë¶€ì„œID      ë¶€ì„œëª…      ìƒìœ„ë¶€ì„œID      ë¶€ì„œID      ë¶€ì„œëª…      ìƒìœ„ë¶€ì„œID                  1      1      ì´ë¬´ë¶€      NULL      2      ì´ë¬´1ê³¼      1              2      1      ì´ë¬´ë¶€      NULL      3      ì´ë¬´2ê³¼      1      ì—¬ê¸°ì„œ ì´ë¬´1ê³¼ì— ë˜ ìž¬ê·€ì ìœ¼ë¡œ ì´ë¬´1íŒ€, ì´ë¬´2íŒ€ì´ ìžˆë‹¤ê³  ê°€ì •í•´ë³´ìž.INSERT INTO ë¶€ì„œ1 VALUES (4, 'ì´ë¬´1íŒ€', 2);INSERT INTO ë¶€ì„œ1 VALUES (5, 'ì´ë¬´2íŒ€', 2);ë§ˆì°¬ê°€ì§€ë¡œ ì…€í”„ì¡°ì¸í•˜ì—¬ íŠ¸ë¦¬ êµ¬ì¡°ë¡œ ì‚´íŽ´ë³´ë©´ ì•„ëž˜ì™€ ê°™ë‹¤.            Â       ë¶€ì„œID      ë¶€ì„œëª…      ìƒìœ„ë¶€ì„œID      ë¶€ì„œID      ë¶€ì„œëª…      ìƒìœ„ë¶€ì„œID                  1      1      ì´ë¬´ë¶€      NULL      2      ì´ë¬´1ê³¼      1              2      1      ì´ë¬´ë¶€      NULL      3      ì´ë¬´2ê³¼      1              3      2      ì´ë¬´1ê³¼      1      4      ì´ë¬´1íŒ€      2              4      2      ì´ë¬´1ê³¼      1      5      ì´ë¬´2íŒ€      2              5      3      ì´ë¬´2ê³¼      1      NULL      NULL      NULL              6      4      ì´ë¬´1íŒ€      2      NULL      NULL      NULL              7      5      ì´ë¬´2íŒ€      2      NULL      NULL      NULL      ìœ„ ì…€í”„ ì¡°ì¸í•œ í…Œì´ë¸”ì„ ë³´ê³  ë‹¤ìŒê³¼ ê°™ì€ ì‚¬ì‹¤ì„ ì•Œ ìˆ˜ ìžˆë‹¤.ì™¼ìª½ í…Œì´ë¸”ì˜ ìƒìœ„ ë¶€ì„œ IDê°€ NULL ì´ë©´ ìµœìƒìœ„ ë¶€ì„œì´ë‹¤. ë°˜ëŒ€ë¡œ ì˜¤ë¥¸ìª½ í…Œì´ë¸”ì˜ ë¶€ì„œ IDê°€ NULLì¸ ê²½ìš° ìµœí•˜ìœ„ ë¶€ì„œì´ë‹¤.  ìµœìƒìœ„ ë¶€ì„œ: ì´ë¬´ë¶€  ìµœí•˜ìœ„ ë¶€ì„œ: ì´ë¬´2ê³¼, ì´ë¬´1íŒ€, ì´ë¬´2íŒ€  ðŸ’¡ ìžê¸° ìžì‹ ì´ ë¶€ëª¨ í…Œì´ë¸”ì´ìž, ìžì‹ í…Œì´ë¸”ì¸ ê²ƒì„ 1:M ìž¬ê·€ì  ê´€ê³„ë¡œ ë³¸ë‹¤.ë§Œì•½ ì´ë¬´1ê³¼ì˜ ê´€ê³„ë„(íŠ¸ë¦¬ êµ¬ì¡°)ë¥¼ ë³´ê³  ì‹¶ë‹¤ë©´?ì…€í”„ ì¡°ì¸ì—ì„œ ì´ë¬´1ê³¼ì˜ ë¶€ì„œ IDë¥¼ WHEREì ˆì— ì ìš©í•˜ì—¬ ì¡°íšŒí•˜ë©´ ëœë‹¤.SELECT * FROM ë¶€ì„œ1 aJOIN ë¶€ì„œ1 b on a.ë¶€ì„œID = b.ìƒìœ„ë¶€ì„œIDWHERE a.ë¶€ì„œID = 2;            Â       ë¶€ì„œID      ë¶€ì„œëª…      ìƒìœ„ë¶€ì„œID      ë¶€ì„œID      ë¶€ì„œëª…      ìƒìœ„ë¶€ì„œID                  1      2      ì´ë¬´1ê³¼      1      4      ì´ë¬´1íŒ€      2              2      2      ì´ë¬´1ê³¼      1      5      ì´ë¬´2íŒ€      2      íšŒì‚¬ì™€ì˜ ê´€ê³„ë„ ì¶”ê°€í•˜ì—¬ ë§ˆë¬´ë¦¬.íšŒì‚¬ í…Œì´ë¸”ì˜ íšŒì‚¬ ID(PK)ë¥¼ ë¶€ì„œ ìž¬ê·€ì  í…Œì´ë¸”ì˜ FKë¡œ ì¶”ê°€í•˜ë©´ ëœë‹¤.ìµœì¢…ì ìœ¼ë¡œ ìž¬ê·€ì  ê´€ê³„(ìƒìœ„ ë¶€ì„œ - í•˜ìœ„ ë¶€ì„œ)ë¥¼ í¬í•¨í•œ íšŒì‚¬ - ë¶€ì„œ ê°„ì˜ 1:M ê´€ê³„ ì™„ì„±ì´ë‹¤.]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ê¸‰(Modeling) </category>
        
      </categories>
      <tags>
        
          <tag> Database </tag>
        
          <tag> Relation </tag>
        
          <tag> Recursion </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[RDB 1:M ê´€ê³„ (2)]]></title>
      <url>/database/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%20%EC%A4%91%EA%B8%89(modeling)/2024/05/11/1-M-relation(2)/</url>
      <content type="text"><![CDATA[  íšŒì‚¬ì™€ ë¶€ì„œ ê°„ì˜ ê´€ê³„ë¥¼ ê³ ë ¤í•˜ì—¬ 1:M ê´€ê³„ ëª¨ë¸ë§ ì—°ìŠµì„ í•´ë³´ìž.í…Œì´ë¸” ì„¤ê³„ ì‹œ ìˆ™ì§€ ì‚¬í•­ì˜ˆì œì— ë“¤ì–´ê°€ê¸°ì— ì•žì„œ, í…Œì´ë¸” ì„¤ê³„ ì‹œ ê³ ë ¤í•˜ë©´ ì¢‹ì„ ê²ƒë“¤ì„ ìˆ™ì§€í•˜ê³  ê°€ìž.      í…Œì´ë¸” ìŠ¤í‚¤ë§ˆë¥¼ ì„¤ê³„í•  ë•ŒëŠ” keyë“¤ì„(ê¸°ë³¸í‚¤, ì™¸ëž˜í‚¤) ë¨¼ì € ê³ ë ¤í•˜ê³  keyë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì–´ë–»ê²Œ ì„¤ê³„í•´ë‚˜ê°ˆì§€ ê³„íšì„ ì„¸ìš´ë‹¤.        ì´ˆê¸° ì„¤ê³„ ì‹œì—ëŠ” ì†ì„±ë“¤ì€ ê°„ë‹¨ížˆ ìž¡ì•„ê°€ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì²˜ìŒë¶€í„° ëª¨ë“  ì†ì„±ë“¤ì„ ìž‘ì„±í•˜ë ¤ë©´ ì •ì‹  ì‚¬ë‚©ë‹¤. í…Œì´ë¸” ì„¤ê³„ì˜ ë³¸ì§ˆì€ keyë“¤ì˜(ê¸°ë³¸í‚¤, ì™¸ëž˜í‚¤) ê´€ê³„ë¥¼ ìž˜ ì„¤ê³„ í•´ë‚˜ê°€ëŠ” ê²ƒì´ë‹¤.        ê³ ê°ìœ¼ë¡œë¶€í„° ì–»ì€ ë°ì´í„°ë“¤ì€ keyë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤. ê³ ê°ìœ¼ë¡œë¶€í„° ì–»ì€ ë°ì´í„°ë“¤ì€ ë¶€ìž¬ ë˜ëŠ” ë³€í™”ì˜ ê°€ëŠ¥ì„±ì´ ì¡´ìž¬í•˜ê¸° ë•Œë¬¸ì— PKì— í¬í•¨ì‹œì¼œ ì˜ë¯¸ë¥¼ ë¶€ì—¬í•˜ëŠ” ê²ƒì€ ìœ„í—˜í•  ìˆ˜ ìžˆë‹¤.        ìˆ«ìž íƒ€ìž…ìœ¼ë¡œ ì¸ì¡° ì‹ë³„ìžë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ìžë™ ì¦ë¶„(AUTO INCREMENT)ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ íŽ¸ë¦¬í•˜ê³  ì•ˆì „í•˜ë‹¤. ë‹¨, ë°ì´í„° ë°œìƒ ê·œëª¨ë¥¼ íŒŒì•…í•˜ì—¬ ë°ì´í„° íƒ€ìž…ì„ ì •í•˜ìž.  1:M ëª¨ë¸ë§ ì˜ˆì œ (íšŒì‚¬ &amp; ë¶€ì„œ)íšŒì‚¬ì™€ ë¶€ì„œ ê°„ì˜ í…Œì´ë¸”ì„ ì„¤ê³„í•˜ê¸° ì „ì— 1:M ì„¤ê³„ ê³¼ì •ì„ ì‚´íŽ´ë³´ìž.ì¼ë‹¨, ê° í…Œì´ë¸”ì˜ ìŠ¤í‚¤ë§ˆë¥¼ ìž‘ì„±í•˜ê³  PKë¥¼ ì •í•´ë³´ìž.íšŒì‚¬ í…Œì´ë¸”company_idë¥¼ PKë¡œ ìž¡ì•˜ë‹¤. ì´ˆê¸°ì— ì†ì„±ì€ ê°„ë‹¨í•˜ê²Œ company_nameë§Œ ìž‘ì„±í–ˆë‹¤.            Â       ì—´ ì´ë¦„      ë°ì´í„° í˜•ì‹      NULL í—ˆìš©      AUTO INCREMENT                  PK      company_id      int      x      o              Â       company_name      varchar(50)      x      x      ë¶€ì„œ í…Œì´ë¸”department_idë¥¼ PKë¡œ ìž¡ì•˜ë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ ì†ì„±ì„ department_nameë§Œ ê°„ë‹¨í•˜ê²Œ ìž¡ì•˜ë‹¤.            Â       ì—´ ì´ë¦„      ë°ì´í„° í˜•ì‹      NULL í—ˆìš©      AUTO INCREMENT                  PK      department_id      smallint      x      o              Â       department_name      varchar(50)      x      x      PK ê²°ì •ì´ ëë‚¬ë‹¤ë©´ ê·¸ ì´í›„ ë‘ í…Œì´ë¸” ê°„ì˜ ê´€ê³„ë¥¼ ë³´ëŠ” ê²ƒì´ë‹¤.  â­ï¸ ê´€ê³„ë¥¼ ë³¼ ë•ŒëŠ” ê° í…Œì´ë¸”ì˜ ìž…ìž¥ì—ì„œ ê´€ê³„ë¥¼ ê³ ë ¤í•´ì•¼ í•œë‹¤.  íšŒì‚¬ ìž…ìž¥ì—ì„œ ë¶€ì„œì™€ì˜ ê´€ê³„, ë¶€ì„œ ìž…ìž¥ì—ì„œ íšŒì‚¬ì™€ì˜ ê´€ê³„ë¥¼ ëª¨ë‘ ì‚´íŽ´ë³¸ ë‹¤ìŒ 1:1 ì¸ì§€ 1:M ì¸ì§€, M:N ì¸ì§€ ê²°ì •í•˜ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ ì–‘ìª½ì—ì„œ ì‚´íŽ´ë´¤ì„ ë•Œ ë°˜ë“œì‹œ ë™ì¼í•œ ê´€ê³„ ì–‘ìƒì´ ë‚˜ì™€ì•¼ í•œë‹¤.íšŒì‚¬ì™€ ë¶€ì„œì˜ ê´€ê³„ëŠ”?ì–‘ìª½ ìž…ìž¥ì—ì„œ ì‚´íŽ´ë´¤ì„ ë•Œ íšŒì‚¬ì™€ ë¶€ì„œì˜ ê´€ê³„ëŠ” 1(íšŒì‚¬):M(ë¶€ì„œ) ê´€ê³„ì´ë‹¤.ì¦‰, 1(íšŒì‚¬)ì˜ PKê°€ M(ë¶€ì„œ)ì˜ FKë¡œ ë‚˜íƒ€ë‚˜ì•¼ í•œë‹¤.            Â       ì—´ ì´ë¦„      ë°ì´í„° í˜•ì‹      NULL í—ˆìš©      AUTO INCREMENT                  PK, FK      company_id      int      x      x              PK      department_id      smallint      x      x              Â       department_name      varchar(50)      x      x      ì´ë ‡ê²Œ PK, FK ë“±ì„ ì„¤ì •í•˜ëŠ” ê³¼ì •ì´ ëë‚˜ë©´ í…Œì´ë¸” ìŠ¤í‚¤ë§ˆì˜ ì£¼ëœ ê³¨ê²©ì„ ì„¤ê³„í–ˆë‹¤ê³  ë³¼ ìˆ˜ ìžˆë‹¤.ì´ ë‹¤ìŒ ê³¼ì •ì´ íšŒì‚¬, ë¶€ì„œì˜ ë‚˜ë¨¸ì§€ ì»¬ëŸ¼(ì†ì„±)ë“¤ì„ ì¡°ì‚¬ ë° ë¶„ì„í•˜ì—¬ ì±„ì›Œë‚˜ê°€ëŠ” ê²ƒì´ë‹¤.íšŒì‚¬ IDì™€ ë¶€ì„œ IDë¥¼ ë¬¶ì–´ì„œ ë³µí•©í‚¤ë¥¼ PKë¡œ ìž¡ìœ¼ë©´ ì–´ë–¤ ì°¨ì´ê°€ ìžˆì„ê¹Œ?ê²°ë¡ ë¶€í„° ë§í•˜ìžë©´, ë¶€ì„œ ID(department_id) ìƒì„± ì²´ê³„ê°€ ë‹¬ë¼ì§„ë‹¤. ë³µí•©í‚¤ë¥¼ PKë¡œ ìž¡ëŠ”ë‹¤ë©´, ê° íšŒì‚¬ë§ˆë‹¤ ë¶€ì„œ IDë¥¼ 1ë²ˆìœ¼ë¡œ ì‹œìž‘í•  ìˆ˜ ìžˆë‹¤. ë³µí•©í‚¤ê°€ ì•„ë‹Œ ë¶€ì„œ IDë§Œì„ PKë¡œ ìž¡ëŠ”ë‹¤ë©´, ìžë™ ì¦ë¶„ì„ ì´ìš©í•´ì„œ PK ê°’ì´ ê³„ì† ì¦ê°€í•˜ëŠ” ìˆ˜ ë°–ì— ì—†ë‹¤. ë”°ë¼ì„œ íšŒì‚¬ë³„ë¡œ ë™ì¼í•œ ë¶€ì„œì— ëŒ€í•´ì„œ ë™ì¼í•œ ë¶€ì„œ IDë¥¼ ë¶€ì—¬í•˜ê³  ì‹¶ìœ¼ë©´ ë¬¶ì–´ì„œ PKë¥¼ ë§Œë“¤ë©´ ëœë‹¤. ì¦‰, ë³µí•©í‚¤ë¥¼ PK(ê¸°ë³¸í‚¤)ë¡œ ìž¡ëŠ” ê²ƒì€ íšŒì‚¬-ë¶€ì„œ ê´€ê³„ì— ìžˆì–´ì„œ ì˜ë¯¸ë¶€ì—¬ íš¨ê³¼ê°€ ìƒê¸´ë‹¤.1:M ê´€ê³„ì—ì„œ ì–´ë–¤ í…Œì´ë¸”ì˜ ë°ì´í„°ê°€ ë¨¼ì € ë“¤ì–´ê°€ì•¼í• ê¹Œ?í•­ìƒ ë°˜ë“œì‹œ ë¶€ëª¨ê°€ ë¨¼ì € ì‚½ìž…ë˜ì–´ì•¼ í•œë‹¤.insert into íšŒì‚¬ values('ì‚¼ì„±ì „ìž');insert into ë¶€ì„œ values(1, 1, 'ì´ë¬´ë¶€');]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ê¸‰(Modeling) </category>
        
      </categories>
      <tags>
        
          <tag> Database </tag>
        
          <tag> Relation </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[RDB 1:M ê´€ê³„ (1)]]></title>
      <url>/database/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%20%EC%A4%91%EA%B8%89(modeling)/2024/05/11/1-M-relation(1)/</url>
      <content type="text"><![CDATA[  ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ 1:M ê´€ê³„ì— ëŒ€í•´ ì•Œì•„ë³´ìž.1:M ê´€ê³„ëŠ” ë¶€ìžì§€ê°„ ê´€ê³„ì´ë‹¤.1:M ê´€ê³„ë¥¼ ë¶€ìžì§€ê°„ìœ¼ë¡œ ë³¼ ìˆ˜ ìžˆë‹¤. ê°€ìž¥ ì¤‘ìš”í•˜ê³  ê·¼ë³¸ì ì¸ ê´€ê³„ì´ë‹¤. ê°€ìž¥ í”í•˜ê²Œ ë‚˜íƒ€ë‚˜ëŠ” ì¼ë°˜ì ì¸ ê´€ê³„ì´ê¸°ë„ í•˜ë‹¤.  íŒŒì¼(íŠ¸ë¦¬) êµ¬ì¡°ë„ 1:M ê´€ê³„ì´ë‹¤.ë¶€ëª¨ì™€ ìžì‹ê°„ 1:M ê´€ê³„ë¥¼ ë§ºê³  ìžˆë‹¤.â“ë§Œì•½ ìžì‹ê³¼ ì†ìžë¼ëŠ” í…Œì´ë¸”ì´ ë˜ ë‹¤ì‹œ 1:M ê´€ê³„ë¥¼ ë§ºëŠ”ë‹¤ê³  í–ˆì„ ë•Œ, ë¶€ëª¨ì™€ ì†ìžê°„ì˜ ê´€ê³„ê°€ ì¡´ìž¬í• ê¹Œ???ë‹µì€, NO ì´ë‹¤.  âœ… ê´€ê³„ëŠ” 3ê°œ í…Œì´ë¸” ê°„ì˜ ê´€ê³„ë¥¼ í‘œí˜„í•˜ì§€ ì•ŠëŠ”ë‹¤. ë°˜ë“œì‹œ 2ê°œ í…Œì´ë¸” ê°„ì˜ ê´€ê³„ì—ë§Œ ê´€ì‹¬ì´ ìžˆë‹¤.PK &amp; FK  ë¶€ëª¨ í…Œì´ë¸”ì˜ PKê°€ ìžì‹ í…Œì´ë¸”ì—ì„œ í‘œí˜„ë˜ëŠ” ê²ƒì„ FK(foreign key)ë¼ê³  í•œë‹¤.  ìžì‹ í…Œì´ë¸”ì˜ FKëŠ” ì¤‘ë³µë  ìˆ˜ ìžˆì§€ë§Œ ë¶€ëª¨ í…Œì´ë¸”ì˜ PKëŠ” ë°˜ë“œì‹œ í•˜ë‚˜ì´ë‹¤.  ðŸš¨ ê¶Œê³ ì‚¬í•­  PK ëª…ì¹­ê³¼ FK ëª…ì¹­ì€ ì¼ì¹˜í•˜ë„ë¡ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.â­ï¸ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤(RDB)ëŠ” ë¶€ëª¨ ì—†ëŠ” ìžì‹ì„ ë§‰ì•„ì¤€ë‹¤.ë¶€ëª¨ ì—†ëŠ” ìžì‹ì„ ë§‰ì•„ì¤€ë‹¤ëŠ” ê²ƒì´ ë¬´ìŠ¨ ëœ»ì¼ê¹Œ?RDBMSëŠ” ë¶€ëª¨ ì—†ëŠ” ìžì‹ì˜ ê´€ê³„ë¥¼ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì œì•½ì´ ì¡´ìž¬í•œë‹¤.  ì–´ë–¤ ë¶€ëª¨ì˜ PKê°€ ìžì‹ í…Œì´ë¸”ì˜ FKë¡œ ì‚¬ìš©ë  ë•Œ, í•´ë‹¹ ë¶€ëª¨ì˜ ë°ì´í„°ë¥¼ DELETE í•  ìˆ˜ ì—†ë‹¤. í•´ë‹¹ ë¶€ëª¨ë¥¼ ì‚­ì œí•˜ë©´ í•´ë‹¹ ë¶€ëª¨ì˜ PKë¥¼ FKë¡œ ë“¤ê³  ìžˆëŠ” ìžì‹ì´ ê³ ì•„ê°€ ë˜ê¸° ë•Œë¬¸ì´ë‹¤.  ë¶€ëª¨ ì—†ëŠ” ìžì‹ì€ INSERT í•  ìˆ˜ ì—†ë‹¤. ì¦‰, FKê°€ ê±¸ë ¤ìžˆëŠ” í…Œì´ë¸”ì— ë°ì´í„°ë¥¼ ì‚½ìž…í•  ë•ŒëŠ” FKë¥¼ ë°˜ë“œì‹œ ì„¤ì •í•´ì¤˜ì•¼ì§€ë§Œ INSERT í•  ìˆ˜ ìžˆë‹¤.â“ë§Œì•½ ë¶€ëª¨ ì—†ëŠ” ìžì‹ ë°ì´í„°ê°€ ìƒê¸°ë©´ ë¬´ìŠ¨ ì¼ì´ ë²Œì–´ì§ˆê¹Œ.ë¶€ëª¨ ì—†ëŠ” ìžì‹ ë°ì´í„°ëŠ” ê°€ë¹„ì§€ ë°ì´í„°(Garbage Data)ê°€ ëœë‹¤. outer joinìœ¼ë¡œ ì¡°íšŒí•  ë•Œ ê°€ë¹„ì§€ ë°ì´í„°ê°€ ë“œëŸ¬ë‚˜ê²Œ ëœë‹¤. ê°€ë¹„ì§€ ë°ì´í„°ê°€ ìƒê¸°ë©´ COUNT í•¨ìˆ˜ì™€ ê°™ì€ ì§‘ê³„ í•¨ìˆ˜ ê²°ê³¼ì— ì¹˜ëª…ì ì¸ ì˜¤ì°¨ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.  âœ… í”„ë¡œê·¸ëž˜ë°ìœ¼ë¡œ ê°€ë¹„ì§€ ë°ì´í„°ë¥¼ ì»¤ë²„ì¹˜ëŠ” í–‰ìœ„ëŠ” ì“°ë ˆê¸° ì½”ë“œë¥¼ ë§Œë“œëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ, DB ìŠ¤í‚¤ë§ˆ ì„¤ê³„ ì‹œ ê´€ê³„ë¥¼ ìž˜ ì„¤ì •í•´ì„œ ê°€ë¹„ì§€ ë°ì´í„°ê°€ ìƒê¸°ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤.1:M ê´€ê³„ PK, FK ì„¤ì • ì˜ˆì œí•™ë…„ê³¼ ë°˜ì´ë¼ëŠ” í…Œì´ë¸”ë“¤ì„ ì„¤ê³„í•´ë³´ìž. í•™ë…„ê³¼ ë°˜ì€ 1:M ê´€ê³„ë¥¼ ì§€ë‹Œë‹¤.í•™ë…„ í…Œì´ë¸”í•™ë…„ ë²ˆí˜¸ë¥¼ PKë¡œ ì„¤ì •í–ˆë‹¤.            Â       ì—´ì´ë¦„      ë°ì´í„° íƒ€ìž…      NULL í—ˆìš©                  PK      í•™ë…„ë²ˆí˜¸      tinyint      x              Â       í•™ë…„ì´ë¦„      varchar(50)      o      insert into í•™ë…„ values(1, '1í•™ë…„');insert into í•™ë…„ values(2, '2í•™ë…„');insert into í•™ë…„ values(3, '3í•™ë…„');select * from í•™ë…„;            Â       í•™ë…„ë²ˆí˜¸      í•™ë…„ì´ë¦„                  1      1      1í•™ë…„              2      2      2í•™ë…„              3      3      3í•™ë…„      ë°˜ í…Œì´ë¸”í˜„ìž¬ PKë§Œ ì„¤ì •ë˜ì–´ ìžˆë‹¤.  ðŸ’¡ í•™ë…„ë²ˆí˜¸ì™€ ë°˜ë²ˆí˜¸ë¥¼ í•¨ê»˜ ë³µí•©í‚¤ë¡œ ì„¤ì •í•œ ì´ìœ ëŠ” í•™ë…„ë³„ë¡œ ë°˜ ë²ˆí˜¸ë¥¼ 1ë°˜ ë¶€í„° ì‹œìž‘í•˜ë„ë¡ í•˜ê¸° ìœ„í•¨ì´ë‹¤. ë§Œì•½, ë°˜ í…Œì´ë¸”ì˜ PKë¡œ ë°˜ ë²ˆí˜¸ë§Œì„ ì„¤ì •í•˜ë©´ ë°˜ ë²ˆí˜¸ì˜ ì¤‘ë³µì´ ë¶ˆê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— í•™ë…„ ë³„ë¡œ 1ë°˜ë¶€í„° ì‹œìž‘í•˜ì§€ ëª»í•œë‹¤. ì´ì²˜ëŸ¼ ë³µí•©í‚¤ë¥¼ ì´ìš©í•˜ë©´ ë‘ ë²ˆì§¸ í•„ë“œ(ë°˜ ë²ˆí˜¸)ì˜ ì¤‘ë³µì„ í—ˆìš©í•  ìˆ˜ ìžˆê²Œ ëœë‹¤.            Â       ì—´ì´ë¦„      ë°ì´í„° íƒ€ìž…      NULL í—ˆìš©                  PK      í•™ë…„ë²ˆí˜¸      tinyint      x              PK      ë°˜ë²ˆí˜¸      tinyint      x              Â       ë°˜ì´ë¦„      varchar(50)      o      insert into ë°˜ values(1, 1, '1ë°˜');insert into ë°˜ values(4, 1, '1ë°˜');select * from ë°˜;ë‘ ë²ˆì§¸ í–‰(row) ë°ì´í„°ëŠ” ë¶€ëª¨ê°€  ì—†ë‹¤.            Â       í•™ë…„ë²ˆí˜¸      ë°˜ë²ˆí˜¸      ë°˜ì´ë¦„                  1      1      1      1ë°˜              2      4      1      1ë°˜      ì™¸ëž˜ í‚¤ ì„¤ì •ì´ ì—†ê¸° ë•Œë¬¸ì— ë¶€ëª¨ ì—†ëŠ” ìžì‹ ë°ì´í„°(ê°€ë¹„ì§€ ë°ì´í„°)ê°€ ì‚½ìž…ë˜ì–´ ë²„ë ¸ë‹¤.ê°€ë¹„ì§€ ë°ì´í„°ë¥¼ ìš°ì„  ì‚­ì œí•´ì£¼ìž.delete from ë°˜ where í•™ë…„ë²ˆí˜¸ = 4;í•™ë…„ í…Œì´ë¸”ì˜ í•™ë…„ë²ˆí˜¸ë¥¼ ë°˜ í…Œì´ë¸”ì˜ í•™ë…„ë²ˆí˜¸ì˜ ì™¸ëž˜í‚¤ë¡œ ì„¤ì •í•´ì¤€ë‹¤.            Â       ì—´ì´ë¦„      ë°ì´í„° íƒ€ìž…      NULL í—ˆìš©                  PK, FK      í•™ë…„ë²ˆí˜¸      tinyint      x              PK      ë°˜ë²ˆí˜¸      tinyint      x              Â       ë°˜ì´ë¦„      varchar(50)      o      ë‹¤ì‹œ INSERT êµ¬ë¬¸ì„ ì‹¤í–‰í•´ë³´ë©´insert into ë°˜ values(1, 1, '1ë°˜');insert into ë°˜ values(4, 1, '1ë°˜');insert into ë°˜ values(3, 1, '3ë°˜');select * from ë°˜;  âœ… FOREIGN KEY ì œì•½ ì¡°ê±´ì— ìœ„ë°°ë˜ëŠ” ë°ì´í„°ëŠ” INSERT ë˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, FKê°€ ì„¤ì •ëœ í…Œì´ë¸”ì€ í•´ë‹¹ FK ê°’ì´ ë¶€ëª¨ í…Œì´ë¸”ì˜ PK ê°’ìœ¼ë¡œ ì¡´ìž¬í•˜ëŠ”ì§€ ë¨¼ì € íƒìƒ‰í•œë‹¤. ê·¸ëŸ¬ê³ ë‚˜ì„œ ë¶€ëª¨(PK)ê°€ ì •ìƒì ìœ¼ë¡œ ìžˆëŠ” ê²½ìš°ì—ë§Œ INSERTê°€ ìˆ˜í–‰ëœë‹¤.            Â       í•™ë…„ë²ˆí˜¸      ë°˜ë²ˆí˜¸      ë°˜ì´ë¦„                  1      1      1      1ë°˜              2      3      1      1ë°˜      í•™ë…„ê³¼ ë°˜ í…Œì´ë¸”ì„ ì¡°ì¸í•˜ì—¬ í•œ ë²ˆì— ì¡°íšŒí•´ë³´ìž.select * from í•™ë…„ ajoin ë°˜ b on a.í•™ë…„ë²ˆí˜¸ = b.í•™ë…„ë²ˆí˜¸;            Â       í•™ë…„ë²ˆí˜¸      í•™ë…„ì´ë¦„      í•™ë…„ë²ˆí˜¸      ë°˜ë²ˆí˜¸      ë°˜ì´ë¦„                  1      1      1í•™ë…„      1      1      1ë°˜              2      3      3í•™ë…„      3      1      1ë°˜      ìš”ì•½ ë° ì •ë¦¬  1:M ê´€ê³„ëŠ” ë¶€ìžì§€ê°„ ê´€ê³„ì´ë‹¤.  PK &amp; FK ì„¤ì •ì´ ì œëŒ€ë¡œ ë˜ì–´ ìžˆë‹¤ë©´ RDBëŠ” ë¶€ëª¨ ì—†ëŠ” ìžì‹ ë°ì´í„° ë°œìƒì„ ë§‰ì•„ì¤€ë‹¤.  PK ì„¤ì • ì „ëžµì— ë”°ë¼ íŠ¹ì • í•„ë“œì˜ ì¤‘ë³µì„ í—ˆìš©í•  ìˆ˜ë„ ìžˆê³  ë°©ì§€í•  ìˆ˜ë„ ìžˆë‹¤.]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ê¸‰(Modeling) </category>
        
      </categories>
      <tags>
        
          <tag> Database </tag>
        
          <tag> Relation </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[PK ì„¤ê³„ ì‹œ ê³ ë ¤ ì‚¬í•­]]></title>
      <url>/database/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%20%EC%A4%91%EA%B8%89(modeling)/2024/05/09/PK-design/</url>
      <content type="text"><![CDATA[  PKë¥¼ ì–´ë–»ê²Œ ì„ ì •í•˜ê³  ì„¤ê³„í•˜ëŠ”ì§€ ì•Œì•„ë³´ìž.1. UNIQUE &amp; NOT NULL ì¸ ì»¬ëŸ¼ë“¤ì„ ì°¾ëŠ”ë‹¤.2. í›„ë³´ ì‹ë³„ìžê°€ ì—†ëŠ” ê²½ìš° ìž„ì˜ì˜ ì‹ë³„ìž(ì¸ì¡° ì‹ë³„ìž)ë¥¼ ë§Œë“¤ì–´ ë¶€ì—¬í•œë‹¤.  ì¸ì¡° ì‹ë³„ìžë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ì€ê·¼ ë§Žë‹¤.  ì¸ì¡° ì‹ë³„ìžë¥¼ PKë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, year + month + sequence number ì²˜ëŸ¼ ë‚ ì§œë¥¼ ì‹ë³„ìžì— ë¶€ì—¬í•˜ì—¬ ë°ì´í„°ë¥¼ íŒŒì•…í•˜ê¸° ì‰½ê²Œ í•  ìˆ˜ ìžˆë‹¤. ì‹œí€€ìŠ¤ ë„˜ë²„ëŠ” ë°ì´í„° ë°œìƒ íšŸìˆ˜(ìˆœì„œ)ë¡œ ë³´ë©´ ëœë‹¤.  year, month, day ë“± ì˜ë¯¸ë¥¼ ë¶€ì—¬í•˜ëŠ” ì •ë„ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ìƒí™©ì— ë”°ë¼ ê²°ì •ëœë‹¤.3. PKì˜ ë°ì´í„° íƒ€ìž… ê²°ì •  ë ˆì½”ë“œì˜ ë°œìƒ ê°€ëŠ¥í•œ ìµœëŒ€ ìˆ˜ë¥¼ ì˜ˆì¸¡í•œë‹¤.          ex) ë°ì´í„°ê°€ 1ë…„ì— ëª‡ ê°œ ì •ë„ ë°œìƒí•˜ëŠ”ê°€?      ex) ë°ì´í„°ê°€ í•œ ë‹¬ì— ëª‡ ê°œ ì •ë„ ë°œìƒí•˜ëŠ”ê°€?        ë°œìƒ ê°€ëŠ¥í•œ ìµœëŒ€ ë ˆì½”ë“œ ìˆ˜ë¥¼ ì»¤ë²„í•  ìˆ˜ ìžˆëŠ” ë°ì´í„° íƒ€ìž…ì„ ì„ ì •í•œë‹¤.          ex) ë§Œì¼ ë ˆì½”ë“œê°€ ìˆ˜ì‹­ ë§Œê°œ ì •ë„ë¼ë©´ 999,999ë¡œ ì»¤ë²„ ê°€ëŠ¥í•˜ë‹¤. int ë˜ëŠ” varchar(6)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬ ê°€ëŠ¥í•˜ë‹¤.      4. PK ë°ì´í„° íƒ€ìž… í›„ë³´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ë‹¤ìŒì„ ê³ ë ¤í•œë‹¤.  int ë“± ìˆ«ìž íƒ€ìž…ì„ PKë¡œ ì±„íƒí•  ê²½ìš° ìžë™ ì¦ë¶„(AUTO INCREMENT) ì†ì„±ì„ ì‚¬ìš©í•˜ë©´ íŽ¸ë¦¬í•˜ë‹¤.  String ì„ PKë¡œ ì±„íƒí•  ê²½ìš° ìˆ«ìžê°€ ì•„ë‹Œ ë¬¸ìžë¥¼ ì„žì–´ì„œ PK ê°’ì— ì˜ë¯¸ë¥¼ ë¶€ì—¬í•  ìˆ˜ ìžˆë‹¤.  íŠ¹ë³„í•œ ì˜ë¯¸ë¥¼ ë¶€ì—¬í•  í•„ìš”ê°€ ì—†ì„ ê²½ìš° ìˆ«ìž íƒ€ìž…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë°”ëžŒì§í•˜ë‹¤.  PKëŠ” ê³ ìœ  ì‹ë³„ìž ê¸°ëŠ¥ìœ¼ë¡œ ì¶©ë¶„í•˜ë‹¤.          PK ê°’ì— ì–´ë–¤ ì˜ë¯¸ë¥¼ ë¶€ì—¬í•˜ëŠ” ê²ƒì€ ë¶€ë‹´ì´ ë  ìˆ˜ ìžˆë‹¤.      ]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ê¸‰(Modeling) </category>
        
      </categories>
      <tags>
        
          <tag> Database </tag>
        
          <tag> Primary Key </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ì£¼ì‹ë³„ìžì™€ í›„ë³´ì‹ë³„ìž]]></title>
      <url>/database/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%20%EC%A4%91%EA%B8%89(modeling)/2024/05/06/pk-candidate/</url>
      <content type="text"><![CDATA[ì£¼ì‹ë³„ìž vs í›„ë³´ì‹ë³„ìžì£¼ì‹ë³„ìžì™€ í›„ë³´ì‹ë³„ìž ëª¨ë‘ ìœ ì¼ì„± ê³¼ ìµœì†Œì„± íŠ¹ì§•ì„ ë§Œì¡±í•œë‹¤. ë‘˜ ì¤‘ NOT NULLì„ ë§Œì¡±ì‹œí‚¤ë©´ì„œ ì ì ˆí•œ í‚¤ë¥¼ ì£¼ì‹ë³„ìžë¡œ ì •í•˜ê²Œ ëœë‹¤. ì£¼ì‹ë³„ìž ì™¸ ì‹ë³„ìžë“¤ì€ í›„ë³´ì‹ë³„ìžê°€ ëœë‹¤. í›„ë³´ì‹ë³„ìžë“¤ì€ NULL ì„ í—ˆìš©í•  ìˆ˜ ìžˆë‹¤ëŠ” ê²ƒì´ ì£¼ì‹ë³„ìžì™€ì˜ ì°¨ì´ì ì´ë‹¤.  ì°¸ê³   í›„ë³´í‚¤ì˜ ì¸ë±ìŠ¤ ìƒì„± ì‹œ ë¬¼ë¦¬ì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ì˜ ìœ ì¼ì„±ì„ ë³´ìž¥í•´ì£¼ê¸° ìœ„í•´ UNIQUE ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ë°”ëžŒì§í•˜ë‹¤. í›„ë³´í‚¤ë“¤ì˜ ì¸ë±ìŠ¤ í…Œì´ë¸”ì„ ë³„ë„ë¡œ ë§Œë“¤ì–´ ë‘ë©´ íŠ¹ì • ë ˆì½”ë“œì— ë¹¨ë¦¬ ì ‘ê·¼í•˜ëŠ” ë° ë„ì›€ì´ ë  ìˆ˜ ìžˆë‹¤.ì–´ë–¤ ê²ƒì„ ì£¼ì‹ë³„ìžë¡œ ì •í•  ê²ƒì¸ì§€?ì¤‘ìš”í•˜ë©´ì„œë„ ì–´ë ¤ìš´ ê²ƒì´ ì£¼ì‹ë³„ìžë¥¼ ì„ ì •í•˜ëŠ” ì¼ì´ë‹¤. ì£¼ì‹ë³„ìžëŠ” í…Œì´ë¸” ì„¤ê³„ ì‹œ ëª…ì‹œì ìœ¼ë¡œ DBì— ì„ ì–¸í•´ì¤˜ì•¼ í•œë‹¤. ì£¼ì‹ë³„ìžë¥¼ ì„ ì–¸í•´ì£¼ë©´ ëŒ€ì‘í•˜ëŠ” ì¸ë±ìŠ¤ í…Œì´ë¸”ì´ ìžë™ìœ¼ë¡œ ìƒì„±ëœë‹¤.ì£¼ì‹ë³„ìžë¥¼ ì–´ë–»ê²Œ ì„ ì •í•˜ëŠ”ì§€ ì•„ëž˜ í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ì˜ˆì œë¥¼ í†µí•´ ì‚´íŽ´ë³´ìž.            ì£¼ë¯¼ ë²ˆí˜¸      ê³ ê°ëª…      í°ë²ˆí˜¸      ì´ë©”ì¼      ì§‘ì£¼ì†Œ      ê³ ê°ë²ˆí˜¸                  000000-xxxxxxx      í™ê¸¸ë™      010-xxxx-oooo      email@gmail.com      ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ 111-1      12345      1. ìœ„ í•„ë“œ ì¤‘ UNIQUE íŠ¹ì§•ì„ ë§Œì¡±í•˜ëŠ” í•„ë“œëŠ”???  ì£¼ë¯¼ ë²ˆí˜¸  í° ë²ˆí˜¸  ì´ë©”ì¼  ê³ ê° ë²ˆí˜¸(=íšŒì‚¬ì—ì„œ ì§€ì •í•œ ê³ ê° ì‹ë³„ ë²ˆí˜¸)  UNIQUE ì†ì„±ì„ ë§Œì¡±í•˜ì§€ ì•Šìœ¼ë©´ ì£¼ì‹ë³„ìžì˜ ìžê²©ì´ ì—†ë‹¤.ê³ ê°ëª…ì€ ë™ëª…ì´ì¸ì´ ì¡´ìž¬í•  ìˆ˜ ìžˆê³ , ì§‘ ì£¼ì†ŒëŠ” í•œ ì§‘ì— ì—¬ëŸ¿ì´ ì‚¬ëŠ” ê²½ìš° ì¤‘ë³µì´ ë°œìƒí•  ìˆ˜ ìžˆë‹¤. ë”°ë¼ì„œ ê³ ê°ëª…ê³¼ ì§‘ ì£¼ì†ŒëŠ” UNIQUE ì†ì„±ì„ ë§Œì¡±í•˜ì§€ ì•ŠëŠ”ë‹¤.2. 1ë²ˆ ì„ ë§Œì¡±í•˜ë©´ì„œ, NOT NULL ì„ ë§Œì¡±í•˜ëŠ” í•„ë“œëŠ”?  ì£¼ë¯¼ ë²ˆí˜¸  ê³ ê° ë²ˆí˜¸  NOT NULL ì†ì„±ì„ ë§Œì¡±í•˜ì§€ ì•Šìœ¼ë©´ ì£¼ì‹ë³„ìžì˜ ìžê²©ì´ ì—†ë‹¤.í•¸ë“œí°ì´ ì—†ëŠ” ì‚¬ëžŒì´ ì¡´ìž¬í•  ìˆ˜ë„ ìžˆê³ , ì´ë©”ì¼ì´ ì—†ëŠ” ì‚¬ëžŒë„ ì¡´ìž¬í•  ìˆ˜ ìžˆê¸° ë•Œë¬¸ì— NOT NULL ì„ ë§Œì¡±í•˜ì§€ ì•Šì„ ìžˆë‹¤.ê²°êµ­ ì£¼ì‹ë³„ìžë¡œ ì±„íƒë  ë§Œí•œ í•„ë“œëŠ” ì£¼ë¯¼ ë²ˆí˜¸, ê³ ê° ë²ˆí˜¸ê°€ ìžˆë‹¤.ê·¸ëŸ¼ ë‘˜ ì¤‘ì— ì–´ë–¤ ê²ƒì´ ì£¼ì‹ë³„ìžë¡œ ì±„íƒí•˜ê¸° ì í•©í• ê¹Œ???ì£¼ë¯¼ ë²ˆí˜¸ ì™€ ê³ ê° ë²ˆí˜¸ ì˜ ë°ì´í„°ê°€ ì–´ë–¤ ì¸¡ë©´ì—ì„œ ì œê³µë˜ëŠ”ì§€ ì‚´íŽ´ë´ì•¼ í•œë‹¤.ì£¼ë¯¼ ë²ˆí˜¸ëŠ” ê³ ê° ìª½ì—ì„œ ì œê³µí•˜ëŠ” ë°ì´í„°ì´ê³ , ê³ ê° ë²ˆí˜¸ëŠ” DBë¥¼ ê´€ë¦¬í•˜ëŠ” ì£¼ì²´(íšŒì‚¬)ì—ì„œ ì œê³µí•˜ëŠ” ë°ì´í„°ë‹¤.  ì¼ë°˜ì ìœ¼ë¡œ ê³ ê°ë“¤ì´ ì œê³µí•˜ëŠ” ë°ì´í„°ë“¤ì€ ì£¼ì‹ë³„ìžë¡œ ì±„íƒ í•˜ì§€ ì•ŠëŠ”ë‹¤.  ê³ ê°ìª½ì—ì„œ ì œê³µí•˜ëŠ” ë°ì´í„°ëŠ” 100% í™•ë¥ ë¡œ ì•ˆì „í•˜ë‹¤ê³  ë³¼ ìˆ˜ ì—†ë‹¤. ë°˜ë©´ì— íšŒì‚¬ì¸¡ì—ì„œ ì œê³µ ë˜ëŠ” ë¶€ì—¬í•˜ëŠ” ë°ì´í„°ëŠ” 100% í™•ë¥ ë¡œ ë³´ìž¥í•  ìˆ˜ ìžˆê¸° ë•Œë¬¸ì— ê³ ê°ìª½ ë°ì´í„°ëŠ” ì£¼ì‹ë³„ìžë¡œ ì±„íƒí•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤.ì£¼ë¯¼ë²ˆí˜¸ ê²½ìš°ì—ë„ 100% í™•ë¥ ë¡œ í™•ì¸í•  ìˆ˜ ìžˆë‹¤ëŠ” ë³´ìž¥ì´ ì—†ë‹¤. ë”°ë¼ì„œ, ê³ ê° ë²ˆí˜¸ë¥¼ ì£¼ì‹ë³„ìžë¡œ ì •í•˜ëŠ” ê²ƒì´ ì í•©í•˜ë‹¤.ê²°ì •ìž vs ì¢…ì†ìžë°©ê¸ˆ ì‚´íŽ´í° í…Œì´ë¸” ìŠ¤í‚¤ë§ˆë¥¼ ê°€ì§€ê³  ê²°ì •ìžì™€ ì¢…ì†ìžë¥¼ êµ¬ë¶„í•´ë³´ìž.  ê²°ì •ìž(Determinant attribute): ì´ ê°’ì„ ì•Œë©´ ë‚˜ë¨¸ì§€ ì†ì„± ê°’ë„ ì•Œ ìˆ˜ ìžˆëŠ”(ì •í•´ì§€ëŠ”) ì†ì„±ì´ë‹¤.          ê³ ê° ë²ˆí˜¸        ì¢…ì†ìž(Dependent attribute): ê²°ì •ìžì— ì˜í•´ ì •í•´ì§€ëŠ” ì†ì„±ì´ë‹¤.          ì£¼ë¯¼ ë²ˆí˜¸      ê³ ê°ëª…      í° ë²ˆí˜¸      ì´ë©”ì¼      ì§‘ ì£¼ì†Œ      Functional Dependency(í•¨ìˆ˜ ì¢…ì†ì„±)ë‘ ê°œì˜ ì• íŠ¸ë¦¬ë·°íŠ¸ ì§‘í•© ê°„ì˜ ì œì•½ì˜ ì¼ì¢…ì´ë‹¤. ì• íŠ¸ë¦¬ë·°íŠ¸ Xì˜ ê°’ ê°ê°ì— ëŒ€í•´ ì‹œê°„ì— ê´€ê³„ì—†ì´ í•­ìƒ ì• íŠ¸ë¦¬ë·°íŠ¸ Yì˜ ê°’ì´ ì˜¤ì§ í•˜ë‚˜ë§Œ ì—°ê´€ë˜ì–´ ìžˆì„ ë•Œ YëŠ” Xì— í•¨ìˆ˜ ì¢…ì†ì´ë¼ í•˜ê³ , X -&gt; Yë¼ê³  í‘œê¸°í•œë‹¤.  ê³ ê° ë²ˆí˜¸ -&gt; ê³ ê°ëª…  ì£¼ë¯¼ ë²ˆí˜¸ -&gt; ê³ ê°ëª…  í° ë²ˆí˜¸ -&gt; ê³ ê°ëª…  ì´ë©”ì¼ -&gt; ê³ ê°ëª…]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ê¸‰(Modeling) </category>
        
      </categories>
      <tags>
        
          <tag> Database </tag>
        
          <tag> Primary Key </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ë°ì´í„° íƒ€ìž…]]></title>
      <url>/database/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%20%EC%A4%91%EA%B8%89(modeling)/2024/05/06/dataType/</url>
      <content type="text"><![CDATA[  ì‹¤ë¬´ì—ì„œ ìžì£¼ ì‚¬ìš©ë˜ëŠ” ë°ì´í„° íƒ€ìž…ì— ëŒ€í•´ ì•Œì•„ë³´ìž!ì •ìˆ˜  Tinyint: ì†Œí˜• í…Œì´ë¸”ì˜ PK íƒ€ìž…ìœ¼ë¡œ ìžì£¼ ì‚¬ìš©ëœë‹¤.  Bigint: ëŒ€ëžµ 920ê²½ ì •ë„ì´ë‹¤.ì‹¤ìˆ˜  ðŸš¨ ìœ„ ë¶€ë™ì†Œìˆ˜ì  íƒ€ìž…ë“¤ì€ ì†Œìˆ˜ì  í‘œí˜„ ì‹œ ê·¼ì‚¬ì¹˜ë¥¼ ë‚˜íƒ€ë‚´ê²Œ ëœë‹¤. í‘œí˜„ ê°€ëŠ¥í•œ ì†Œìˆ«ì  ìžë¦¿ìˆ˜ê°€ ì œí•œë˜ê¸° ë•Œë¬¸ì´ë‹¤.ëˆ ê³„ì‚°ê³¼ ê°™ì´ ì •í™•í•œ ì†Œìˆ˜ì  í‘œí˜„ì´ í•„ìš”í•˜ë‹¤ë©´ decimal íƒ€ìž…ì„ ì‚¬ìš©í•˜ìž.decimal íƒ€ìž…ì€ 4~16byteë¡œ ë¹„êµì  ë©”ëª¨ë¦¬ë¥¼ ë§Žì´ ì‚¬ìš©í•˜ê¸´ í•˜ì§€ë§Œ, ì†Œìˆ˜ì ì„ ì •í™•ížˆ í‘œí˜„í•˜ê¸° ë•Œë¬¸ì—, ëˆ ê³„ì‚°ê³¼ ê°™ì´ ì •í™•í•œ ìˆ˜ì¹˜ë¥¼ ë‹¤ë¤„ì•¼ í•˜ëŠ” ê²½ìš°ì—ëŠ” ì‹¤ìˆ˜ íƒ€ìž…ìœ¼ë¡œ deciaml ì‚¬ìš©ì„ ê¶Œê³ í•˜ê³  ìžˆë‹¤. numeric ì´ë¼ëŠ” íƒ€ìž…ë„ ì¡´ìž¬í•˜ëŠ”ë°, deciaml í•˜ê³  ë˜‘ê°™ë‹¤ê³  ë³´ë©´ëœë‹¤. ê·¸ëŸ¬ë‹ˆê¹ decimal ì„ ê·¸ëƒ¥ ì‚¬ìš©í•˜ìž.ë¬¸ìž  char: ê³ ì •ê¸¸ì´ íƒ€ìž…ì´ë‹¤. char(10) = 'ab'ì™€ ê°™ì´ 2ê¸€ìžë§Œ í• ë‹¹í•´ë„ 10byte ëª¨ë‘ ì‚¬ìš©í•œë‹¤.  varchar: ê°€ë³€ê¸¸ì´ íƒ€ìž…ì´ë‹¤. varchar(50) = 'ab' ì™€ ê°™ì´ 2ê¸€ìžë§Œ í• ë‹¹í•˜ë©´ 2byteë§Œ ì‚¬ìš©í•˜ì—¬ ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. ë”°ë¼ì„œ varcharë¥¼ ë³´í†µ ë§Žì´ ì‚¬ìš©í•œë‹¤. ë³´í†µ 50 ì •ë„ë¡œ í• ë‹¹í•´ì¤€ë‹¤.  Text: ê°€ë³€ê¸¸ì´ íƒ€ìž…ì´ë‹¤. varchar(max)ì™€ ê°™ë‹¤ê³  ë³´ë©´ëœë‹¤. ì—„ì²­ í° ë‚´ìš©ë“¤ì˜ ë¬¸ìžë“¤ì„ ì§‘ì–´ë„£ì„ ë•Œ ì‚¬ìš©í•œë‹¤.  ðŸš¨ ì£¼ì˜  varchar(max)ì™€ Text íƒ€ìž…ì€ í¬ê¸°ê°€ ë§¤ìš° í´ ìˆ˜ ìžˆê¸° ë•Œë¬¸ì— PKë¡œ ì •í•˜ê±°ë‚˜, ì¸ë±ìŠ¤ ìƒì„±í•˜ê±°ë‚˜ ì •ë ¬ ë“±ì„ í•  ìˆ˜ ì—†ê²Œ ë˜ë¯€ë¡œ ì£¼ì˜í•˜ìž. ë§¤ìš° í° ë¬¸ìžì—´ì„ ê°€ì§€ê³  ì¸ë±ì‹±, ì •ë ¬ ë“±ì„ í•˜ëŠ” ê²ƒì€ ì„±ëŠ¥ ìƒ ë§¤ìš° ì•ˆ ì¢‹ê¸° ë•Œë¬¸ì´ë‹¤.ìœ ë‹ˆì½”ë“œ(unicode)ë¬¸ìž íƒ€ìž…ì— ì ‘ë‘ì‚¬ë¡œ në§Œ ë¶™ì—¬ì£¼ë©´ ìœ ë‹ˆì½”ë“œ ë¬¸ìžë°ì´í„°ë¡œ ì¸ì½”ë”©ëœë‹¤.ë‚ ì§œ, ì‹œê°„, í™”í  ë‚ ì§œì™€ ì‹œê°„ì„ í‘œí˜„í•  ë•ŒëŠ” í‘œí˜„í•˜ë ¤ëŠ” ì‹œê°„ ë²”ìœ„ì™€ ë©”ëª¨ë¦¬ëŸ‰ì„ ê³ ë ¤í•˜ì—¬ datetime ê³¼ smalldatetime ë‘˜ ì¤‘ì— í•˜ë‚˜ë¥¼ ì•Œë§žê²Œ ì‚¬ìš©í•˜ìž.  íƒ€ìž„ì¡´ì„ ê³ ë ¤í•œ ê¸€ë¡œë²Œí•œ ì„œë¹„ìŠ¤ì˜ ê²½ìš° timestamp íƒ€ìž…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê¶Œìž¥ë˜ê³  ìžˆë‹¤.  í™”í ë‹¨ìœ„ëŠ” ì‚¬ìš©í•˜ì§€ ë§ìž. ëŒ€ì‹  decimalì„ ì‚¬ìš©í•˜ìž.unique identifierNEWID() í•¨ìˆ˜ëŠ” GUIDë¥¼ ìƒì„±í•´ì¤€ë‹¤. ì´ê²ƒì„ ì‚¬ìš©í•  ë°”ì— ì°¨ë¼ë¦¬ ë²”ìœ„ê°€ ë§¤ìš° í° bigintë¥¼ ì‚¬ìš©í•˜ìž.DECLARE @myid uniqueidentifierSET @myid = NEWID()PRINT 'Value of @myid is: ' + CONVERT(varchar(255), @myid)INSERT INTO TEST(UNIQUEID) VALUES (NEWID())SELECT * FROM TEST  GUID ???  SQL Serverì—ì„œ NEWID() í•¨ìˆ˜ëŠ” ìƒˆë¡œìš´ GUID(ì „ì—­ ê³ ìœ  ì‹ë³„ìž)ë¥¼ ìƒì„±í•´ì¤€ë‹¤. GUIDëŠ” ì „ ì„¸ê³„ì ìœ¼ë¡œ ê³ ìœ í•œ ê°’ì„ ë‚˜íƒ€ë‚´ëŠ” 128ë¹„íŠ¸ ìˆ«ìžì´ë‹¤.]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ê¸‰(Modeling) </category>
        
      </categories>
      <tags>
        
          <tag> Database </tag>
        
          <tag> Data Type </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ ì†Œê°œ]]></title>
      <url>/database/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%20%EC%A4%91%EA%B8%89(modeling)/2024/05/04/IntroRDBMS/</url>
      <content type="text"><![CDATA[  ì´êµì¤€ ê°•ì‚¬ë‹˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ ê°•ì˜ë¥¼ ë“£ê³  ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ê´€í•´ ê°„ëžµížˆ ì •ë¦¬í•˜ê³  ê°€ìž.ë°ì´í„°ë² ì´ìŠ¤ëž€?  êµ¬ì¡°í™”ëœ ë°ì´í„°ë“¤ì˜ ì§‘í•©ì´ë‹¤.ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤  ë°ì´í„°ë“¤ì„ 2ì°¨ì› ë°°ì—´ê³¼ ê°™ì€ í…Œì´ë¸”ì— ì €ìž¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤.ê´€ê³„ ì •ì˜  1:M ê´€ê³„ (ë¶€ìžì§€ê°„ ê´€ê³„)  N:M ê´€ê³„ (ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ê³„)  1:1 ê´€ê³„ (ë¶€ë¶€ ê´€ê³„)ì•žìœ¼ë¡œ ìœ„ ì„¸ ê°œì˜ ê´€ê³„ì— ëŒ€í•´ì„œë„ ì •ë¦¬í•  ì˜ˆì •ì´ë‹¤. ê´€ê³„ëŠ” í…Œì´ë¸” ì„¤ê³„ì‹œ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤.ì£¼ì‹ë³„ìž(Primary Key, ê¸°ë³¸í‚¤)  í•˜ë‚˜ì˜ ë ˆì½”ë“œë¥¼ ê³ ìœ í•˜ê²Œ êµ¬ë¶„í•  ìˆ˜ ìžˆëŠ” ê²ƒìœ¼ë¡œ í•˜ë‚˜ì˜ ì»¬ëŸ¼ ë˜ëŠ” ì—¬ëŸ¬ ê°œì˜ ì»¬ëŸ¼ì´ ëª¨ì—¬ Primary Keyë¥¼ êµ¬ì„±í•œë‹¤.ì£¼ì‹ë³„ìž íŠ¹ì§•  NOT NULL  UNIQUE (ìœ ì¼ì„±)  ìµœì†Œí•œì˜ ì†ì„± ì¡°í•©ìœ¼ë¡œ ì´ë¤„ì§„ë‹¤(ìµœì†Œì„±)  ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë¬´ê²°ì„±ì„ ì„¤ì •í•˜ê³  ê°•í™”í•˜ëŠ” ê²ƒì„ ë„ì™€ì¤€ë‹¤.  í…Œì´ë¸” ê´€ê³„ë¥¼ ì„¤ì •í•˜ë„ë¡ í•´ì¤€ë‹¤.  ê´€ê³„ì— ë°˜ë“œì‹œ PK ê°€ í¬í•¨ëœë‹¤.í…Œì´ë¸” ì„¤ê³„ ì‹œ ê³ ë ¤í•´ì•¼ í•  ë¬¸ì œ ìƒí™©ë“¤ì˜ˆë¥¼ ë“¤ì–´, í•™ìƒ ìˆ˜ê°•ì‹ ì²­ ê´€ë¦¬ í…Œì´ë¸” ì„¤ê³„ë¥¼ ë§Œë“ ë‹¤ê³  ê°€ì •í•´ë³´ìž.ì•„ëž˜ ì´ë¯¸ì§€ì²˜ëŸ¼ í…Œì´ë¸” ì´ˆì•ˆì„ ìž‘ì„±í–ˆë‹¤ê³  í•´ë³´ìž.    í•™ìƒ ìˆ˜ê°•ì‹ ì²­ ê´€ë¦¬ í…Œì´ë¸” ì˜ˆì‹œì´ë•Œ, ì£¼ì˜í•´ì•¼ í•  ì ë“¤ì´ ë¬´ì—‡ì´ ìžˆì„ê¹Œ?í…Œì´ë¸” ë³€ê²½ ì‹œ  ë§Œì¼ ê°™ì€ ê³¼ëª©ì„ ë‹´ë‹¹í•˜ëŠ” ì„ ìƒë‹˜ë“¤ì´ ë‘ ëª… ì´ìƒìœ¼ë¡œ ëŠ˜ì–´ë‚  ê²½ìš° ëŒ€ì²˜ ë°©ë²•ë°ì´í„° ì˜¤ë¥˜ ì‹œ  ê³¼ëª©ëª…ì„ ì˜¤ê¸°í–ˆì„ ê²½ìš° ëŒ€ì²˜ ë°©ë²•  í•™ìƒëª…ì„ ì˜¤ê¸°í–ˆì„ ê²½ìš° ëŒ€ì²˜ ë°©ë²•  í•œ í•™ìƒì´ ë™ì¼í•œ ê³¼ëª©ì„ ë‘ ë²ˆ ì´ìƒ ìˆ˜ê°•ì‹ ì²­ í•œ ê²½ìš° ëŒ€ì²˜ ë°©ë²•  í•œ ê³¼ëª©ë„ ì‹ ì²­í•˜ì§€ ì•Šì€ í•™ìƒì„ ì°¾ì•„ë‚´ëŠ” ë°©ë²•  ë™ëª… ì´ì¸ì´ ì¡´ìž¬í•˜ëŠ” ê²½ìš° í•´ê²° ë°©ë²•  í•œ ê³¼ëª©ì´ íê°•ë˜ì—ˆì„ ë•Œ ëŒ€ì²˜ ë°©ë²•  ìœ„ ë¬¸ì œ ìƒí™©ë“¤ì„ ê³ ë ¤í•˜ì§€ ì•Šê³  í…Œì´ë¸”ì„ ì„¤ê³„í•œë‹¤ë©´, ë¬¸ì œ ìƒí™©ì´ ë°œìƒí–ˆì„ ë•Œ í…Œì´ë¸”ì˜ í•œê³„ì— ë¶€ë”ªíž ê²ƒì´ë‹¤. ê²°êµ­ í…Œì´ë¸” êµ¬ì¡° ìˆ˜ì •ì„ í•  ìˆ˜ ë°–ì— ì—†ê²Œëœë‹¤. í…Œì´ë¸”ì˜ êµ¬ì¡°ì²´ê°€ ë³€ê²½ëœë‹¤ë©´ í•´ë‹¹ í…Œì´ë¸”ì„ ì´ìš©í•˜ê³  ìžˆëŠ” í”„ë¡œê·¸ëž¨ë„ ë‹¤ì‹œ ì½”ë”©í•´ì•¼í•˜ëŠ” ë¶ˆìƒì‚¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.]]></content>
      <categories>
        
          <category> Database </category>
        
          <category> ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ê¸‰(Modeling) </category>
        
      </categories>
      <tags>
        
          <tag> Database </tag>
        
          <tag> RDBMS </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ ë©”ì„œë“œ]]></title>
      <url>/java/%EA%B9%80%EC%98%81%ED%95%9C%20%EC%9E%90%EB%B0%94%20%EC%9E%85%EB%AC%B8/2024/05/01/Java_method/</url>
      <content type="text"><![CDATA[  ìžë°” ë©”ì„œë“œì— ê´€í•´ ì•Œì•„ë³´ìž.ë©”ì„œë“œ ì •ì˜public static int add(int a, int b) {  // ë©”ì„œë“œ ë³¸ë¬¸, ì‹¤í–‰ ì½”ë“œ}ì œì–´ìž ë°˜í™˜íƒ€ìž… ë©”ì„œë“œì´ë¦„(ë§¤ê°œë³€ìˆ˜ ëª©ë¡) {  ë©”ì„œë“œ ë³¸ë¬¸}ìžë°”ì—ì„œëŠ” í•¨ìˆ˜ë¥¼ ë©”ì„œë“œ(Method)ë¼ í•œë‹¤. ë©”ì„œë“œë„ í•¨ìˆ˜ì˜ í•œ ì¢…ë¥˜ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. ì§€ê¸ˆì€ ë‘˜ì„ êµ¬ë¶„í•˜ì§€ ì•Šê³ , ì´ì •ë„ë§Œ ì•Œì•„ë‘ìž.  ë©”ì„œë“œëŠ” í¬ê²Œ ë©”ì„œë“œ ì„ ì–¸ê³¼ ë©”ì„œë“œ ë³¸ë¬¸ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìžˆë‹¤.ë©”ì„œë“œ ì„ ì–¸(Method Declaration)public static int add(int a, int b) ë¶€ë¶„ì—ì„œ ë°˜í™˜íƒ€ìž…, ë©”ì„œë“œ ì´ë¦„, ë§¤ê°œë³€ìˆ˜ ëª©ë¡ë“¤ì„ ë©”ì„œë“œ ì„ ì–¸ë¶€ë¶„ì´ë¼ í•œë‹¤. ë©”ì„œë“œ ì„ ì–¸ ì •ë³´ë¥¼ í†µí•´ ë‹¤ë¥¸ ê³³ì—ì„œ í•´ë‹¹ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìžˆë‹¤.ë©”ì„œë“œ ë³¸ë¬¸(Method Body){  int sum = a + b;  return sum;}  ë©”ì„œë“œê°€ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ì½”ë“œë¸”ë¡ì´ë‹¤.  ë©”ì„œë“œ ë³¸ë¬¸ì€ ë¸”ëž™ë°•ìŠ¤ì´ë‹¤. ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê³³ì—ì„œëŠ” ë©”ì„œë“œ ì„ ì–¸ì€ ì•Œì§€ë§Œ ë³¸ë¬¸ì€ ëª¨ë¥¸ë‹¤.  ë©”ì„œë“œ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ë ¤ë©´ returnë¬¸ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.ë©”ì„œë“œ í˜¸ì¶œê³¼ ìš©ì–´ ì •ë¦¬ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•ŒëŠ” ë©”ì„œë“œì— ë„˜ê¸°ëŠ” ë§¤ê°œë³€ìˆ˜(íŒŒë¼ë¯¸í„°)ì˜ íƒ€ìž…ê³¼ ìˆœì„œ, ê°œìˆ˜ë„ ì¼ì¹˜í•´ì•¼ í•œë‹¤.í˜¸ì¶œ: call("hello", 20);ë©”ì„œë“œ ì •ì˜: int call(String str, int age)ì¸ìˆ˜(argument)ì—¬ê¸°ì„œ "hello", 20ì²˜ëŸ¼ ë„˜ê¸°ëŠ” ê°’ì„ ì˜ì–´ë¡œ Argumentë¼ê³  í•œë‹¤. ì‹¤ë¬´ì—ì„œëŠ” ì•„ê·œë¨¼íŠ¸, ì¸ìˆ˜, ì¸ìžë¼ëŠ” ìš©ì–´ë¥¼ ëª¨ë‘ ì‚¬ìš©í•œë‹¤.ë§¤ê°œë³€ìˆ˜(parameter)ë©”ì„œë“œë¥¼ ì •ì˜í•  ë•Œ ì„ ì–¸í•œ ë³€ìˆ˜ì¸ String str, int ageë¥¼ ë§¤ê°œë³€ìˆ˜ ë˜ëŠ” íŒŒë¼ë¯¸í„°ë¼ í•œë‹¤. ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ì¸ìˆ˜ë¥¼ ë„˜ê¸°ë©´, ê·¸ ì¸ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ì— ëŒ€ìž…ëœë‹¤.  IntelliJ ë‹¨ì¶•í‚¤ tip  ë©”ì„œë“œëª…ì— ì»¤ì„œë¥¼ ì˜¬ë ¤ë†“ê³  cmd + Bë¥¼ ìž…ë ¥í•˜ë©´ í•´ë‹¹ ë©”ì„œë“œ ì„ ì–¸ ë¶€ë¶„ìœ¼ë¡œ ì´ë™í•œë‹¤.ë©”ì„œë“œ í˜¸ì¶œê³¼ ê°’ ì „ë‹¬  â­ï¸ ìžë°”ëŠ” ì›ì‹œí˜•ê³¼ ì°¸ì¡°í˜• ê´€ê³„ì—†ì´ í•­ìƒ ë³€ìˆ˜ì˜ ê°’ì„ ë³µì‚¬í•´ì„œ ëŒ€ìž…í•œë‹¤.ì´ ëŒ€ì›ì¹™ì€ ë°˜ë“œì‹œ ìˆ™ì§€í•´ì•¼ ë³µìž¡í•œ ìƒí™©ì—ë„ ì½”ë“œë¥¼ ë‹¨ìˆœí•˜ê²Œ ì´í•´í•  ìˆ˜ ìžˆë‹¤.public class MethodValue1 {    public static void main(String[] args) {        int number = 5;        System.out.println("1. changeNumber í˜¸ì¶œ ì „, number: " + number);        changeNumber(number);        System.out.println("4. changeNumber í˜¸ì¶œ í›„, number: " + number);    }    public static void changeNumber(int number) {        System.out.println("2. changeNumber ë³€ê²½ ì „, number: " + number);        number = number * 2;        System.out.println("3. changeNumber ë³€ê²½ í›„, number: " + number);    }}1. changeNumber í˜¸ì¶œ ì „, number: 52. changeNumber ë³€ê²½ ì „, number: 53. changeNumber ë³€ê²½ í›„, number: 104. changeNumber í˜¸ì¶œ í›„, number: 5main() ë‚´ë¶€ì˜ numberë³€ìˆ˜ì˜ ê°’ì„ ì½ê³  ë³µì‚¬í•´ì„œ changeNumber ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ì— ì „ë‹¬í•´ì¤€ë‹¤. ë³µì‚¬í•´ì„œ ì „ë‹¬í•´ì£¼ì—ˆê¸° ë•Œë¬¸ì—, changeNumber ë‚´ë¶€ì˜ numberë³€í™”ëŠ” main() ë‚´ë¶€ì˜ number ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ê° ë©”ì„œë“œ ì•ˆì—ì„œ ì‚¬ìš©í•˜ëŠ” numberë³€ìˆ˜ëŠ” ì„œë¡œ ì™„ì „ížˆ ë¶„ë¦¬ëœ ë‹¤ë¥¸ ë³€ìˆ˜ì´ë‹¤. ì´ë¦„ì´ ê°™ì•„ë„ ì™„ì „ížˆ ë‹¤ë¥¸ ë³€ìˆ˜ë‹¤.ë©”ì„œë“œ í˜•ë³€í™˜ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ì¸ìˆ˜ì™€ ë§¤ê°œë³€ìˆ˜ ì‚¬ì´ì—ì„œ ëª…ì‹œì  í˜•ë³€í™˜ ë˜ëŠ” ìžë™ í˜•ë³€í™˜ì´ ì¼ì–´ë‚œë‹¤.ëª…ì‹œì  í˜•ë³€í™˜í° ë²”ìœ„ì—ì„œ ìž‘ì€ ë²”ìœ„ë¡œ ì¸ìˆ˜ë¥¼ ì „ë‹¬í•˜ì—¬ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•ŒëŠ” ëª…ì‹œì  í˜•ë³€í™˜ì´ í•„ìš”í•˜ë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.public class MethodCasting1 {    public static void main(String[] args) {        double number = 1.5;        //printNumber(number); //doubleì„ intì— ëŒ€ìž…í•˜ë¯€ë¡œ ì»´íŒŒì¼ ì˜¤ë¥˜        printNumber((int) number); //ëª…ì‹œì  í˜•ë³€í™˜ì„ ì‚¬ìš©í•´ doubleì„ intë¡œ ë³€í™˜    }    public static void printNumber(int n) {        System.out.println("ìˆ«ìž: " + n); // ìˆ«ìž: 1    }}ìžë™ í˜•ë³€í™˜ìž‘ì€ ë²”ìœ„ì—ì„œ í° ë²”ìœ„ë¡œ ì¸ìˆ˜ë¥¼ ì „ë‹¬í•˜ì—¬ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•ŒëŠ” ìžë™ í˜•ë³€í™˜ì´ ì¼ì–´ë‚œë‹¤. ë‹¨, íƒ€ìž…ì´ ë‹¬ë¼ë„ ìžë™ í˜•ë³€í™˜ì´ ê°€ëŠ¥í•œ ê²½ìš°ì— í˜¸ì¶œí•  ìˆ˜ ìžˆë‹¤.public class MethodCasting2 {    public static void main(String[] args) {        int number = 100;        printNumber(number);    }    public static void printNumber(double n) {        System.out.println("ìˆ«ìž: " + n); // ìˆ«ìž: 100.0    }}ë©”ì„œë“œ ì˜¤ë²„ë¡œë”©  ë©”ì„œë“œ ì˜¤ë²„ë¡œë”©ì´ëž€?  ê°™ì€ ì´ë¦„ì˜ ë©”ì„œë“œë¥¼ ì—¬ëŸ¬ ê°œ ì •ì˜í•˜ë˜ ë§¤ê°œë³€ìˆ˜ì˜ ìœ í˜•, ê°œìˆ˜ ë˜ëŠ” ìˆœì„œê°€ ë‹¤ë¥¸ ê²½ìš°ë¥¼ ê°€ë¦¬í‚¨ë‹¤.public class Calculator {    public int add(int a, int b) {        return a + b;    }    public double add(double a, double b) {        return a + b;    }    public int add(int a, int b, int c) {        return a + b + c;    }}  ì°¸ê³ ë¡œ ë°˜í™˜ íƒ€ìž…ì€ ì˜¤ë²„ë¡œë”© ê·œì¹™ìœ¼ë¡œ ì¸ì •í•˜ì§€ ì•ŠëŠ”ë‹¤.ì˜¤ë²„ë¡œë”© ì‹¤íŒ¨int add(int a, int b)double add(int a, int b)ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜(method signature)ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ = ë©”ì„œë“œ ì´ë¦„ + ë§¤ê°œë³€ìˆ˜ íƒ€ìž…(ìˆœì„œ)ë©”ì„œë“  ì‹œê·¸ë‹ˆì²˜ëŠ” ìžë°”ì—ì„œ ë©”ì„œë“œë¥¼ êµ¬ë¶„í•  ìˆ˜ ìžˆëŠ” ê³ ìœ í•œ ì‹ë³„ìžë‚˜ ì„œëª…ì„ ëœ»í•œë‹¤. ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ëŠ” ë©”ì„œë“œì˜ ì´ë¦„ê³¼ ë§¤ê°œë³€ìˆ˜ íƒ€ìž…(ìˆœì„œ í¬í•¨)ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìžˆë‹¤.ìžë°” ìž…ìž¥ì—ì„œ ê°ê°ì˜ ë©”ì„œë“œë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•  ìˆ˜ ìžˆì–´ì•¼ ì–´ë–¤ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ì§€ ê²°ì •í•  ìˆ˜ ìžˆë‹¤.  ë¨¼ì € ì „ë‹¬ëœ ì¸ìˆ˜ íƒ€ìž…ì— ìµœëŒ€í•œ ë§žëŠ” ë©”ì„œë“œë¥¼ ì°¾ì•„ì„œ ì‹¤í–‰í•˜ê³ , ê·¸ëž˜ë„ ì—†ìœ¼ë©´ í˜• ë³€í™˜ ê°€ëŠ¥í•œ íƒ€ìž…ì˜ ë©”ì„œë“œë¥¼ ì°¾ì•„ì„œ ì‹¤í–‰í•œë‹¤.]]></content>
      <categories>
        
          <category> Java </category>
        
          <category> ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ </category>
        
      </categories>
      <tags>
        
          <tag> Java </tag>
        
          <tag> Method </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ ë°°ì—´ - 2ì°¨ì›]]></title>
      <url>/java/%EA%B9%80%EC%98%81%ED%95%9C%20%EC%9E%90%EB%B0%94%20%EC%9E%85%EB%AC%B8/2024/04/28/Java_array_2D/</url>
      <content type="text"><![CDATA[2ì°¨ì› ë°°ì—´ ì„ ì–¸, ìƒì„± ê·¸ë¦¬ê³  ì‚¬ìš©2ì°¨ì› ë°°ì—´ì€ int[][] arr = new int[2][3]ì™€ ê°™ì´ ì„ ì–¸í•˜ê³  ìƒì„±í•œë‹¤. ê·¸ë¦¬ê³  arr[1][2]ì™€ ê°™ì´ ì‚¬ìš©í•˜ëŠ”ë°, ë¨¼ì € í–‰(row) ë²ˆí˜¸ë¥¼ ì°¾ê³ , ê·¸ ë‹¤ìŒ ì—´(column) ë³€í˜¸ë¥¼ ì°¾ìœ¼ë©´ ëœë‹¤.  arr[í–‰][ì—´], arr[row][column]2ì°¨ì› ë°°ì—´ì„ ì„ ì–¸, ìƒì„±, ì‚¬ìš©í•˜ëŠ” ì˜ˆì œ ì½”ë“œë¥¼ ì‚´íŽ´ë³´ìž.public class ArrayDi0 {    public static void main(String[] args) {        // 2x3 2ì°¨ì› ë°°ì—´ì„ ë§Œë“ ë‹¤.        int[][] arr = new int[2][3]; //í–‰2, ì—´3        arr[0][0] = 1; //0í–‰, 0ì—´        arr[0][1] = 2; //0í–‰, 1ì—´        arr[0][2] = 3; //0í–‰, 2ì—´        arr[1][0] = 4; //1í–‰, 0ì—´        arr[1][1] = 5; //1í–‰, 1ì—´        arr[1][2] = 6; //0í–‰, 2ì—´        //0í–‰ ì¶œë ¥        System.out.print(arr[0][0] + " "); //0ì—´ ì¶œë ¥        System.out.print(arr[0][1] + " "); //1ì—´ ì¶œë ¥        System.out.print(arr[0][2] + " "); //2ì—´ ì¶œë ¥        System.out.println();//í•œ í–‰ì´ ëë‚˜ë©´ ë¼ì¸ì„ ë³€ê²½í•œë‹¤.        //1í–‰ ì¶œë ¥        System.out.print(arr[1][0] + " "); //0ì—´ ì¶œë ¥        System.out.print(arr[1][1] + " "); //1ì—´ ì¶œë ¥        System.out.print(arr[1][2] + " "); //2ì—´ ì¶œë ¥        System.out.println();//í•œ í–‰ì´ ëë‚˜ë©´ ë¼ì¸ì„ ë³€ê²½í•œë‹¤.    }}ë‹¤ìŒì€ ì¤‘ì²©ëœ forë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ì²« ë²ˆì§¸ forë¬¸ì€ rowë¥¼ íƒìƒ‰í•˜ê³ , ë‘ ë²ˆì§¸ forë¬¸ì€ ì—´ì„ íƒìƒ‰í•˜ì—¬ ìž‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ ë¦¬íŒ©í† ë§ í•´ë³´ìž.public class ArrayDi2 {    public static void main(String[] args) {        // 2x3 2ì°¨ì› ë°°ì—´ì„ ë§Œë“ ë‹¤.        int[][] arr = new int[2][3]; //í–‰2, ì—´3        arr[0][0] = 1; //0í–‰, 0ì—´        arr[0][1] = 2; //0í–‰, 1ì—´        arr[0][2] = 3; //0í–‰, 2ì—´        arr[1][0] = 4; //1í–‰, 0ì—´        arr[1][1] = 5; //1í–‰, 1ì—´        arr[1][2] = 6; //0í–‰, 2ì—´        for (int row = 0; row &lt; 2; row++) {            for (int column = 0; column &lt; 3; column++) {                System.out.print(arr[row][column] + " ");            }            System.out.println();//í•œ í–‰ì´ ëë‚˜ë©´ ë¼ì¸ì„ ë³€ê²½í•œë‹¤.        }    }}2ì°¨ì› ë°°ì—´ ê°„ë‹¨í•œ ìƒì„±ê³¼ ì´ˆê¸°í™”1ì°¨ì› ë°°ì—´ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ {}ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨ížˆ ìƒì„±ê³¼ ì´ˆê¸°í™”ë¥¼ í•  ìˆ˜ ìžˆë‹¤.public class ArrayDi3 {    public static void main(String[] args) {        // 2x3 2ì°¨ì› ë°°ì—´ì„ ë§Œë“ ë‹¤.        int[][] arr = new int[][]{            {1,2,3},            {4,5,6}        }; //í–‰2, ì—´3        for (int row = 0; row &lt; arr.length; row++) {            for (int column = 0; column &lt; arr[row].length; column++) {                System.out.print(arr[row][column] + " ");            }            System.out.println();//í•œ í–‰ì´ ëë‚˜ë©´ ë¼ì¸ì„ ë³€ê²½í•œë‹¤.        }    }}new int[][]ë¥¼ ìƒëžµí•˜ì—¬ í•œ ì¤„ë¡œ ì„ ì–¸ê³¼ ì´ˆê¸°í™”ë¥¼ í•  ìˆ˜ ìžˆë‹¤.public class ArrayDi3 {    public static void main(String[] args) {        // 2x3 2ì°¨ì› ë°°ì—´ì„ ë§Œë“ ë‹¤.        int[][] arr = { // new int[][] ìƒëžµ ê°€ëŠ¥            {1,2,3},            {4,5,6}        }; //í–‰2, ì—´3        for (int row = 0; row &lt; arr.length; row++) {            for (int column = 0; column &lt; arr[row].length; column++) {                System.out.print(arr[row][column] + " ");            }            System.out.println();//í•œ í–‰ì´ ëë‚˜ë©´ ë¼ì¸ì„ ë³€ê²½í•œë‹¤.        }    }}  ë¼ì¸ì„ ì ì ˆí•˜ê²Œ ë„˜ê²¨ì£¼ì–´ í–‰ê³¼ ì—´ì´ ëª…í™•í•´ì§€ë„ë¡ ê°„ë‹¨ížˆ ì´ˆê¸°í™”í•˜ëŠ” ê²ƒì´ ì½”ë“œì˜ ê°€ë…ì„±ì„ ë†’ì¸ë‹¤.  {  {1, 2, 3},  {4, 5, 6}}  2ì°¨ì› ë°°ì—´ ê¸¸ì´  arr.lengthëŠ” í–‰ì˜ ê¸¸ì´ë¥¼ ëœ»í•œë‹¤.  arr[row].lengthëŠ” ì—´ì˜ ê¸¸ì´ë¥¼ ëœ»í•œë‹¤.]]></content>
      <categories>
        
          <category> Java </category>
        
          <category> ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ </category>
        
      </categories>
      <tags>
        
          <tag> Java </tag>
        
          <tag> Array </tag>
        
          <tag> Data Structure </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ ë°°ì—´]]></title>
      <url>/java/%EA%B9%80%EC%98%81%ED%95%9C%20%EC%9E%90%EB%B0%94%20%EC%9E%85%EB%AC%B8/2024/04/28/Java_array_1D/</url>
      <content type="text"><![CDATA[ë°°ì—´ì´ í•„ìš”í•œ ì´ìœ ê°™ì€ íƒ€ìž…ì˜ ë³€ìˆ˜ë¥¼ ë°˜ë³µí•´ì„œ ì„ ì–¸í•˜ê³  ë°˜ë³µí•´ì„œ ì‚¬ìš©í•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ê²ƒì´ ë°°ì—´ì´ë‹¤.public class Array1 {   public static void main(String[] args) {       int student1 = 90;       int student2 = 80;       int student3 = 70;       int student4 = 60;       int student5 = 50;			 System.out.println("í•™ìƒ1 ì ìˆ˜: " + student1); 			 System.out.println("í•™ìƒ2 ì ìˆ˜: " + student2); 			 System.out.println("í•™ìƒ3 ì ìˆ˜: " + student3); 			 System.out.println("í•™ìƒ4 ì ìˆ˜: " + student4); 			 System.out.println("í•™ìƒ5 ì ìˆ˜: " + student5);		}}ë°°ì—´ì˜ ì„ ì–¸ê³¼ ìƒì„±  ë°°ì—´ì€ ê°™ì€ íƒ€ìž…ì˜ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° íŽ¸í•˜ê²Œ í•˜ë‚˜ë¡œ ë¬¶ì–´ë‘” ê²ƒì´ë‹¤.public class Array1Ref1 {    public static void main(String[] args) {        int[] students; //ë°°ì—´ ë³€ìˆ˜ ì„ ì–¸        students = new int[5]; //ë°°ì—´ ìƒì„±        //ë³€ìˆ˜ ê°’ ëŒ€ìž…        students[0] = 90;        students[1] = 80;        students[2] = 70;        students[3] = 60;        students[4] = 50;        //ë³€ìˆ˜ ê°’ ì‚¬ìš©        System.out.println("í•™ìƒ1 ì ìˆ˜: " + students[0]);        System.out.println("í•™ìƒ2 ì ìˆ˜: " + students[1]);        System.out.println("í•™ìƒ3 ì ìˆ˜: " + students[2]);        System.out.println("í•™ìƒ4 ì ìˆ˜: " + students[3]);        System.out.println("í•™ìƒ5 ì ìˆ˜: " + students[4]);    }}ì•„ì£¼ ê°„ë‹¨í•´ë³´ì´ëŠ” ë‹¤ìŒ ë‘ ì¤„ì€ ì•„ì£¼ ìžì„¸ížˆ ì‚´íŽ´ë´ì•¼ í•œë‹¤.int[] students; //1. ë°°ì—´ ë³€ìˆ˜ ì„ ì–¸ students = new int[5]; //2. ë°°ì—´ ìƒì„±ë°°ì—´ ë³€ìˆ˜ ì„ ì–¸  ë°°ì—´ì„ ì‚¬ìš©í•˜ë ¤ë©´ int[] studentsì™€ ê°™ì´ ë°°ì—´ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•´ì•¼ í•œë‹¤.  ì¼ë°˜ì ì¸ ë³€ìˆ˜ì™€ ì°¨ì´ì ì€ int[] ì²˜ëŸ¼ íƒ€ìž… ë‹¤ìŒì— ëŒ€ê´„í˜¸[]ê°€ ë“¤ì–´ê°„ë‹¤ëŠ” ì ì´ë‹¤.  ë°°ì—´ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•œë‹¤ê³  í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ” ë°°ì—´ì´ ë§Œë“¤ì–´ì§„ ê²ƒì€ ì•„ë‹ˆë‹¤!          int[] studentsì™€ ê°™ì€ ë°°ì—´ ë³€ìˆ˜ì—ëŠ” ë°°ì—´ì„ ë‹´ì„ ìˆ˜ ìžˆë‹¤.      ë°°ì—´ ìƒì„±  ë°°ì—´ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë°°ì—´ì„ ìƒì„±í•´ì•¼ í•œë‹¤.  new int[5]ë¼ê³  ìž…ë ¥í•˜ë©´ ì´ 5ê°œì˜ intë¥¼ ì €ìž¥í•  ìˆ˜ ìžˆëŠ” ë°°ì—´ ë³€ìˆ˜ê°€ ìƒì„±ëœë‹¤.ë°°ì—´ê³¼ ì´ˆê¸°í™”  new int[5]ë¼ê³  í•˜ë©´ ì´ 5ê°œì˜ intí˜• ë³€ìˆ˜ê°€ ë§Œë“¤ì–´ì§„ë‹¤. ìžë°”ëŠ” ë°°ì—´ì„ ìƒì„±í•  ë•Œ ê·¸ ë‚´ë¶€ê°’ì„ ìžë™ì„ ì´ˆê¸°í™” í•œë‹¤.  ìˆ«ìžëŠ” 0, booleanì€ false, Stringì€ nullë¡œ ì´ˆê¸°í™” ëœë‹¤.ë°°ì—´ ì°¸ì¡°ê°’ ë³´ê´€  new int[5]ë¡œ ë°°ì—´ì„ ìƒì„±í•˜ë©´ ë°°ì—´ì˜ í¬ê¸°ë§Œí¼ ë©”ëª¨ë¦¬ë¥¼ í™•ë³´í•œë‹¤.          intí˜• 5ê°œ: 4byte * 5 =&gt; 20byte        ë°°ì—´ì„ ìƒì„±í•˜ê³  ë‚˜ë©´ ìžë°”ëŠ” ë©”ëª¨ë¦¬ ìƒì—ì„œ í•´ë‹¹ ë°°ì—´ì— ì ‘ê·¼í•  ìˆ˜ ìžˆëŠ” ì°¸ì¡°ê°’(ì£¼ì†Œ)ì„ ë°˜í™˜í•œë‹¤.  ì•žì„œ ì„ ì–¸í•œ ë°°ì—´ ë³€ìˆ˜ì¸ int[] studentsì— ë°°ì—´ì˜ ì°¸ì¡°ê°’ì„ ë³´ê´€í•œë‹¤. ì°¸ì¡°ê°’ì„ í†µí•´ ë©”ëª¨ë¦¬ì— ìžˆëŠ” ì‹¤ì œ ë°°ì—´ì— ì ‘ê·¼í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.int[] students = new int[5]; // 1. ë°°ì—´ ìƒì„±int[] students = x001; // 2. new int[5]ì˜ ê²°ê³¼ë¡œ x001 ì°¸ì¡°ê°’ ë°˜í™˜students = x001; // 3. ë°°ì—´ ë³„ìˆ˜ì— ì°¸ì¡°ê°’ ë³´ê´€ë°°ì—´ ì‚¬ìš©ë°°ì—´ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë³€ìˆ˜ì— []ë¥¼ ë¶™ì´ê³  ëŒ€ê´„í˜¸ ì•ˆì— ë°°ì—´ì˜ ìœ„ì¹˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìˆ«ìžì¸ ì¸ë±ìŠ¤(index)ë¥¼ ë„£ì–´ì£¼ë©´ ëœë‹¤.//ë³€ìˆ˜ ê°’ ëŒ€ìž…students[0] = 90; students[1] = 80;//ë³€ìˆ˜ ê°’ ì‚¬ìš©System.out.println("í•™ìƒ1 ì ìˆ˜: " + students[0]);System.out.println("í•™ìƒ2 ì ìˆ˜: " + students[1]);ë°°ì—´ì— ê°’ ëŒ€ìž…students[0] = 90; //1. ë°°ì—´ì— ê°’ì„ ëŒ€ìž…x001[0] = 90; //2. ë³€ìˆ˜ì— ìžˆëŠ” ì°¸ì¡°ê°’ì„ í†µí•´ ì‹¤ì œ ë°°ì—´ì— ì ‘ê·¼. ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ í•´ë‹¹ ìœ„ì¹˜ì˜ ìš”ì†Œì—ì ‘ê·¼, ê°’ ëŒ€ìž…ë°°ì—´ ê°’ ì½ê¸°//1. ë³€ìˆ˜ ê°’ ì½ê¸°System.out.println("í•™ìƒ1 ì ìˆ˜: " + students[0]);//2. ë³€ìˆ˜ì— ìžˆëŠ” ì°¸ì¡°ê°’ì„ í†µí•´ ì‹¤ì œ ë°°ì—´ì— ì ‘ê·¼. ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ í•´ë‹¹ ìœ„ì¹˜ì˜ ìš”ì†Œì— ì ‘ê·¼System.out.println("í•™ìƒ1 ì ìˆ˜: " + x001[0]);//3. ë°°ì—´ì˜ ê°’ì„ ì½ì–´ì˜´System.out.println("í•™ìƒ1 ì ìˆ˜: " + 90);  ë°°ì—´ì„ ì‚¬ìš©í•˜ë©´ ì´ë ‡ê²Œ ì°¸ì¡°ê°’ì„ í†µí•´ì„œ ì‹¤ì œ ë°°ì—´ì— ì ‘ê·¼í•˜ê³  ì¸ë±ìŠ¤ë¥¼ í†µí•´ì„œ ì›í•˜ëŠ” ìš”ì†Œë¥¼ ì°¾ëŠ”ë‹¤.ì°¸ê³   ë°°ì—´ì€ ì¸ë±ìŠ¤ê°€ 0ë¶€í„° ì‹œìž‘í•œë‹¤. ë”°ë¼ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ì¸ë±ìŠ¤ ë²”ìœ„ëŠ” 0 ~ (n-1)ì´ ëœë‹¤.  ë§Œì•½ ì¸ë±ìŠ¤ í—ˆìš© ë²”ìœ„ë¥¼ ë„˜ì–´ì„ ë‹¤ë©´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: Index 5 outof bounds for length 5 at array.Array1Ref1.main(Array1Ref1.java:14)ê¸°ë³¸í˜• vs ì°¸ì¡°í˜•ìžë°”ì˜ ë³€ìˆ˜ ë°ì´í„° íƒ€ìž…ì€ í¬ê²Œ ê¸°ë³¸í˜•ê³¼ ì°¸ì¡°í˜•ìœ¼ë¡œ ë¶„ë¥˜í•  ìˆ˜ ìžˆë‹¤.  ê¸°ë³¸í˜•(Primitive Type): int, long, double, booleanì²˜ëŸ¼ ë³€ìˆ˜ì— ì‚¬ìš©í•  ê°’ì„ ì§ì ‘ ë„£ì„ ìˆ˜ ìžˆëŠ” ë°ì´í„° íƒ€ìž…ì„ ê¸°ë³¸í˜• ë˜ëŠ” ì›ì‹œí˜•ì´ë¼ í•œë‹¤.  ì°¸ì¡°í˜•(Reference Type): int[] studentsì™€ ê°™ì´ ë°ì´í„°ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ì°¸ì¡°(ì£¼ì†Œ)ë¥¼ ì €ìž¥í•˜ëŠ” ë°ì´í„° íƒ€ìž…ì„ ì°¸ì¡°í˜•ì´ë¼ í•œë‹¤.ì°¸ê³ ê¸°ë³¸í˜•ê³¼ ì°¸ì¡°í˜•ì€ ê°ê° ì–¸ì œ ì‚¬ìš©í• ê¹Œ?ê¸°ë³¸í˜•ì€ ëª¨ë‘ ì‚¬ì´ì¦ˆê°€ ëª…í™•í•˜ê²Œ ì •í•´ì ¸ìžˆë‹¤.int i; // 4bytelong l; // 8bytedouble d; // 8byteë°°ì—´ì€ ë™ì ìœ¼ë¡œ ì‚¬ì´ì¦ˆë¥¼ ë³€ê²½í•  ìˆ˜ ìžˆë‹¤.new int[size]; // size ê°’ì— ë”°ë¼ ë°°ì—´ì˜ í¬ê¸°ê°€ ì •í•´ì§„ë‹¤.  ê¸°ë³¸í˜•ì€ ì„ ì–¸ê³¼ ë™ì‹œì— í¬ê¸°ê°€ ì •í•´ì§„ë‹¤. ë”°ë¼ì„œ í¬ê¸°ë¥¼ ë™ì ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ì—†ë‹¤. ë°˜ë©´ì— ë°°ì—´ê³¼ ê°™ì€ ì°¸ì¡°í˜•ì€ í¬ê¸°ë¥¼ ë™ì ìœ¼ë¡œ í• ë‹¹í•  ìˆ˜ ìžˆë‹¤.  ê¸°ë³¸í˜•ì€ ì‚¬ìš©í•  ê°’ì„ ì§ì ‘ ì €ìž¥í•œë‹¤. ë°˜ë©´ì— ì°¸ì¡°í˜•ì€ ë©”ëª¨ë¦¬ì— ì €ìž¥ëœ ë°°ì—´ì´ë‚˜ ê°ì²´ì˜ ì°¸ì¡°ë¥¼ ì €ìž¥í•œë‹¤. ì´ë¡œ ì¸í•´ ì°¸ì¡°í˜•ì€ ë” ë³µìž¡í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ ë§Œë“¤ê³  ê´€ë¦¬í•  ìˆ˜ ìžˆë‹¤. ë°˜ë©´ ê¸°ë³¸í˜•ì€ ë” ë¹ ë¥´ê³  ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.ë°°ì—´ ë¦¬íŒ©í† ë§ë§¨ ì²˜ìŒ ì˜ˆì œ ì½”ë“œë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ë¦¬íŒ©í† ë§ í•  ìˆ˜ ìžˆë‹¤. ë°°ì—´ ìƒì„± ì½”ë“œ new int[] ì˜†ì— {}ì„ ê°€ì§€ê³  ì´ˆê¸°í™”ë¥¼ í•´ì¤€ë‹¤. ì´ë•Œ ë°°ì—´ì˜ í¬ê¸°ëŠ” ìž‘ì„±í•˜ì§€ ì•ŠëŠ”ë‹¤.public class Array1Ref3 {    public static void main(String[] args) {        int[] students; //ë°°ì—´ ë³€ìˆ˜ ì„ ì–¸        students = new int[]{90, 80, 70, 60, 50}; //ë°°ì—´ ìƒì„±ê³¼ ì´ˆê¸°í™”        //ë³€ìˆ˜ ê°’ ì‚¬ìš©        for (int i = 0; i &lt; students.length; i++) {            System.out.println("í•™ìƒ" + (i + 1) + " ì ìˆ˜: " + students[i]);        }    }}ê°„ë‹¨í•œ ë°°ì—´ ìƒì„±  ë°°ì—´ì€ {}ë§Œ ì‚¬ìš©í•´ì„œ ìƒì„±ê³¼ ë™ì‹œì— ì´ˆê¸°í™” í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ë‹¨, ì´ë•ŒëŠ” ë°°ì—´ ë³€ìˆ˜ì˜ ì„ ì–¸ê³¼ í•œ ì¤„ì— í•¨ê»˜ ì‚¬ìš©í•  ë•Œë§Œ ê°€ëŠ¥í•˜ë‹¤.int[] students = {90, 80, 70, 60, 50};ì˜¤ë¥˜int[] students;students = {90, 80, 70, 60, 50}; // ì´ë ‡ê²Œ ì‚¬ìš©í•˜ì§€ ë§ìž.ê°„ë‹¨í•œ ë°°ì—´ ìƒì„±ì„ í†µí•´ ë¦¬íŒ©í† ë§ í•´ë³´ìž.public class Array1Ref4 {    public static void main(String[] args) {        int[] students = {90, 80, 70, 60, 50};        //ë³€ìˆ˜ ê°’ ì‚¬ìš©        for (int i = 0; i &lt; students.length; i++) {            System.out.println("í•™ìƒ" + (i + 1) + " ì ìˆ˜: " + students[i]);        }    }}ë°°ì—´ì„ ì‚¬ìš©í•œ ë•ë¶„ì— ì˜ˆì œ ì½”ë“œë¥¼ ì „ì²´ì ìœ¼ë¡œ ìž˜ êµ¬ì¡°í™” í•  ìˆ˜ ìžˆì—ˆë‹¤.]]></content>
      <categories>
        
          <category> Java </category>
        
          <category> ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ </category>
        
      </categories>
      <tags>
        
          <tag> Java </tag>
        
          <tag> Array </tag>
        
          <tag> Data Structure </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ í–¥ìƒëœ forë¬¸]]></title>
      <url>/java/%EA%B9%80%EC%98%81%ED%95%9C%20%EC%9E%90%EB%B0%94%20%EC%9E%85%EB%AC%B8/2024/04/28/Java_Enhanced_for/</url>
      <content type="text"><![CDATA[  ì•žì„œ ë°˜ë³µë¬¸ì—ì„œ ì„¤ëª…í•˜ì§€ ì•Šì€ ë‚´ìš©ì¸ í–¥ìƒëœ forë¬¸(Enhanced For Loop)ì— ëŒ€í•´ ì•Œì•„ë³´ìž. í–¥ìƒëœ forë¬¸ì„ ì‚´íŽ´ë³´ê¸° ì „ì— ë°°ì—´ì— ëŒ€í•œ ì´í•´ê°€ ìš°ì„ ë˜ì–´ì•¼ í•œë‹¤.í–¥ìƒëœ forë¬¸ ë˜ëŠ” for-eachë¬¸ì€ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•˜ì—¬ ì‚¬ìš©í•œë‹¤.// í–¥ìƒëœ forë¬¸ ì •ì˜for (ë³€ìˆ˜ : ë°°ì—´ ë˜ëŠ” ì»¬ë ‰ì…˜) {	// ë°°ì—´ ë˜ëŠ” ì»¬ë ‰ì…˜ì˜ ìš”ì†Œë¥¼ ìˆœíšŒí•˜ë©´ì„œ ìˆ˜í–‰í•  ìž‘ì—…}ë‹¤ìŒ í–¥ìƒëœ forë¬¸ ì‚¬ìš© ì˜ˆì œë¥¼ ì‚´íŽ´ë³´ìž.public class EnhancedFor1 {    public static void main(String[] args) {        int[] numbers = {1, 2, 3, 4, 5};        //ì¼ë°˜ forë¬¸        for (int i = 0; i &lt; numbers.length; i++) {            int number = numbers[i];            System.out.println(number);        }        //í–¥ìƒëœ forë¬¸, for-eachë¬¸        for (int number : numbers) {            System.out.println(number);        }        //for-eachë¬¸ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê²½ìš°, ì¦ê°€í•˜ëŠ” index ê°’ í•„ìš”        for (int i = 0; i &lt; numbers.length; i++) {            System.out.println("number" + i + "ë²ˆì˜ ê²°ê³¼ëŠ”: " + numbers[i]);        }    }}í–¥ìƒëœ forë¬¸ ìž¥ì ì‹¤ë¬´ì—ì„œ ë°°ì—´ì€ ì²˜ìŒë¶€í„° ëê¹Œì§€ ìˆœì„œëŒ€ë¡œ ì½ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§Žë‹¤. ê·¸ëŸ°ë° ì¼ë°˜ forë¬¸ ì‚¬ìš© í•  ê²½ìš° ë°°ì—´ì˜ ê°’ì„ ì½ê¸° ìœ„í•´ int i ì™€ ê°™ì€ ì¸ë±ìŠ¤ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•´ì•¼ í•œë‹¤. ê·¸ë¦¬ê³  i &lt; numbers.length ì™€ ê°™ì´ ë°°ì—´ì˜ ë ì¡°ê±´ì„ ì§€ì •í•´ì£¼ì–´ì•¼ í•œë‹¤. ê°œë°œìž ìž…ìž¥ì—ì„œëŠ” ê·¸ëƒ¥ ë°°ì—´ì„ ìˆœì„œëŒ€ë¡œ ì²˜ìŒë¶€í„° ëê¹Œì§€ íƒìƒ‰í•˜ê³  ì‹¶ì€ë° ë„ˆë¬´ ë²ˆìž¡í•œ ì¼ì„ í•´ì£¼ì–´ì•¼ í•œë‹¤. ê·¸ëž˜ì„œ í–¥ìƒëœ forë¬¸ì´ ë“±ìž¥í–ˆë‹¤.  í–¥ìƒëœ forë¬¸ì€ ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ ë°°ì—´ì˜ ìš”ì†Œë¥¼ ìˆœíšŒí•  ìˆ˜ ìžˆê¸° ë•Œë¬¸ì— ì½”ë“œê°€ ê°„ê²°í•˜ê³  ê°€ë…ì„±ì´ ì¢‹ë‹¤.í–¥ìƒëœ forë¬¸ì„ ì‚¬ìš©í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°í–¥ìƒëœ forë¬¸ì€ ì¸ë±ìŠ¤ ê°’ì´ ê°ì¶”ì–´ì ¸ ìžˆê¸° ë•Œë¬¸ì— ì‚¬ìš©í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°ê°€ ìžˆë‹¤. ì¦‰, int iì™€ ê°™ì€ ì¸ë±ìŠ¤ ê°’ì„ ì§ì ‘ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°ì—ëŠ” í–¥ìƒëœ forë¬¸ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.//for-eachë¬¸ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê²½ìš°, ì¦ê°€í•˜ëŠ” index ê°’ í•„ìš”for (int i = 0; i &lt; numbers.length; i++) {    System.out.println("number" + i + "ë²ˆì˜ ê²°ê³¼ëŠ”: " + numbers[i]);}ë‹¨ì¶•í‚¤ tip  iter: ì§ì „ì— ì„ ì–¸ëœ ë°°ì—´ ë˜ëŠ” ì»¬ë ‰ì…˜ì„ ê°€ì§€ê³  í–¥ìƒëœ forë¬¸ì„ ìžë™ì™„ì„± ì‹œì¼œì¤€ë‹¤.]]></content>
      <categories>
        
          <category> Java </category>
        
          <category> ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ </category>
        
      </categories>
      <tags>
        
          <tag> Java </tag>
        
          <tag> Loop Statement </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ í˜•ë³€í™˜]]></title>
      <url>/java/%EA%B9%80%EC%98%81%ED%95%9C%20%EC%9E%90%EB%B0%94%20%EC%9E%85%EB%AC%B8/2024/04/26/Java_casting/</url>
      <content type="text"><![CDATA[  Java í˜•ë³€í™˜ì´ ì–¸ì œ ì–´ë–»ê²Œ ë°œìƒí•˜ëŠ”ì§€ ì•Œì•„ë³´ìž.ëŒ€ìž…ê³¼ í˜•ë³€í™˜  ìž‘ì€ ë²”ìœ„ì—ì„œ í° ë²”ìœ„ë¡œëŠ” ë‹¹ì—°ížˆ ê°’ì„ ë„£ì„ ìˆ˜ ìžˆë‹¤.          int -&gt; long -&gt; double        í° ë²”ìœ„ì—ì„œ ìž‘ì€ ë²”ìœ„ë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.          ì˜¤ë²„í”Œë¡œìš°      ì†Œìˆ˜ì  ë²„ë¦¼        JavaëŠ” ìž‘ì€ ë²”ìœ„ì—ì„œ í° ë²”ìœ„ë¡œ ëŒ€ìž…í•  ë•Œ ìžë™ í˜•ë³€í™˜ì´ ì¼ì–´ë‚œë‹¤.ìžë™ í˜•ë³€í™˜ìž‘ì€ ë²”ìœ„ ìˆ«ìž íƒ€ìž…ì—ì„œ í° ë²”ìœ„ ìˆ«ìž íƒ€ìž…ìœ¼ë¡œ ëŒ€ìž…í•  ë•Œ ê°œë°œìžê°€ ì§ì ‘ í˜•ë³€í™˜ì„ í•˜ì§€ ì•Šì•„ë„ ìžë™ìœ¼ë¡œ í˜•ë³€í™˜ì´ ì¼ì–´ë‚œë‹¤. ì´ê²ƒì„ ìžë™ í˜•ë³€í™˜ ë˜ëŠ” ë¬µì‹œì  í˜•ë³€í™˜ì´ë¼ í•œë‹¤.int intValue = 10;double doubleValue = intValue;// double doubleValue = (double) intValue // ìžë™ í˜•ë³€í™˜System.out.println(doubleValue); // 10.0ëª…ì‹œì  í˜•ë³€í™˜í° ë²”ìœ„ì—ì„œ ìž‘ì€ ë²”ìœ„ë¡œ ëŒ€ìž…í•  ë•ŒëŠ” ë°˜ë“œì‹œ ëª…ì‹œì  í˜•ë³€í™˜ì´ í•„ìš”í•˜ë‹¤.  ðŸš¨ ì£¼ì˜  í° ë²”ìœ„ì—ì„œ ìž‘ì€ ë²”ìœ„ë¡œ ëŒ€ìž…í•  ê²½ìš° ëª…ì‹œì  í˜•ë³€í™˜ì„ í•˜ì§€ ì•Šìœ¼ë©´ ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. ì»´íŒŒì¼ ì˜¤ë¥˜ëŠ” ë¬¸ì œë¥¼ ê°€ìž¥ ë¹¨ë¦¬ ë°œê²¬í•  ìˆ˜ ìžˆëŠ” ì¢‹ì€ ì˜¤ë¥˜ì´ë‹¤.java: incompatible types: possible lossy conversion from double to int ëª…ì‹œì  í˜•ë³€í™˜ì€ ë³€ê²½í•˜ê³  ì‹¶ì€ ë°ì´í„° íƒ€ìž…ì„ (int) ì™€ ê°™ì´ ê´„í˜¸ë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ë³€ìˆ˜ì•žì— ìž…ë ¥í•˜ë©´ ëœë‹¤. ì˜ì–´ë¡œëŠ” ìºìŠ¤íŒ…(casting)ì´ë¼ê³  í•œë‹¤.public class Casting {   public static void main(String[] args) {      double doubleValue = 1.5;      int intValue = 0;			//intValue = doubleValue; // ì»´íŒŒì¼ ì˜¤ë¥˜ ë°œìƒ 			intValue = (int) doubleValue; // ëª…ì‹œì  í˜•ë³€í™˜ 			System.out.println(intValue); // ì¶œë ¥:1	 } }í˜•ë³€í™˜ê³¼ ì˜¤ë²„í”Œë¡œìš°í˜•ë³€í™˜ì„ í•  ë•Œ ë§Œì•½ ìž‘ì€ ìˆ«ìžê°€ í‘œí˜„í•  ìˆ˜ ìžˆëŠ” ë²”ìœ„ë¥¼ ë„˜ì–´ì„œë©´ ì–´ë–»ê²Œ ë ê¹Œ?package casting;public class Casting {	public static void main(String[] args) {		long maxIntValue = 2147483647; //int ìµœê³ ê°’		long maxIntOver = 2147483648L; //int ìµœê³ ê°’ + 1(ì´ˆê³¼) 		int intValue = 0;				intValue = (int) maxIntValue; //í˜•ë³€í™˜		System.out.println("maxIntValue casting=" + intValue); //ì¶œë ¥:2147483647				intValue = (int) maxIntOver; //í˜•ë³€í™˜		System.out.println("maxIntOver casting=" + intValue); //ì¶œë ¥:-2147483648 	}}ì¶œë ¥ê²°ê³¼ maxIntValue casting=2147483647 maxIntOver  casting=-2147483648  long maxIntValue = 2147483647 ì •ìˆ˜ ë²”ìœ„ì˜ ìµœëŒ€ê°’ì„ ê°€ì§„ long íƒ€ìž…ì„ intë¡œ ìºìŠ¤íŒ…í•  ë•ŒëŠ” ì•„ë¬´ëŸ° ë¬¸ì œê°€ ì—†ë‹¤.  long maxIntOver = 2147483648L ì •ìˆ˜ ë²”ìœ„ ìµœëŒ€ê°’ì„ ë„˜ê¸´ ë¦¬í„°ëŸ´ì€ Lì„ ë¶™ì—¬ì„œ long íƒ€ìž…ìœ¼ë¡œ ë°›ê³  ìžˆë‹¤. ì´ ê²½ìš° intë¡œ í‘œí˜„í•  ìˆ˜ ìžˆëŠ” ë²”ìœ„ë¥¼ ì´ˆê³¼í–ˆê¸° ë•Œë¬¸ì— long -&gt; int ìºìŠ¤íŒ…ì‹œ ì˜¤ë²„í”Œë¡œìš° ë¬¸ì œê°€ ë°œìƒí•œë‹¤.  ðŸ’¡ ì¤‘ìš”í•œ ê²ƒì€ ì˜¤ë²„í”Œë¡œìš° ìžì²´ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ë§‰ì•„ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì˜¤ë²„í”Œë¡œìš°ê°€ ë°œìƒí•œ ê²°ê³¼ë¥¼ ê°€ì§€ê³  ì–´ë–»ê²Œ í•  ìƒê°ì„ í•˜ì§€ ë§ìž. ë³€ìˆ˜ íƒ€ìž…ì„ int -&gt; longìœ¼ë¡œ ì‚¬ì´ì¦ˆë¥¼ ëŠ˜ë¦¬ë©´ ì˜¤ë²„í”Œë¡œìš° ë¬¸ì œë¥¼ ê°„ë‹¨ížˆ í•´ê²°í•  ìˆ˜ ìžˆë‹¤.ê³„ì‚°ê³¼ í˜•ë³€í™˜ëŒ€ìž…ë¿ë§Œ ì•„ë‹ˆë¼ ê³„ì‚°ì‹ì—ì„œë„ í˜•ë³€í™˜ì´ ì¼ì–´ë‚œë‹¤.ìžë°”ì—ì„œ ê³„ì‚°ì—ì„œì˜ í˜•ë³€í™˜ì€ ë‹¤ìŒ 2ê°€ì§€ë¥¼ ê¼­ ê¸°ì–µí•˜ìž.  ê°™ì€ íƒ€ìž…ë¼ë¦¬ì˜ ê³„ì‚°ì€ ê°™ì€ íƒ€ìž…ì˜ ê²°ê³¼ë¥¼ ë‚¸ë‹¤.          int + int -&gt; int        ì„œë¡œ ë‹¤ë¥¸ íƒ€ìž…ì˜ ê³„ì‚°ì€ í° ë²”ìœ„ë¡œ ìžë™ í˜•ë³€í™˜ì´ ì¼ì–´ë‚œë‹¤.          int + long -&gt; long + long      int + double -&gt; double + double      String + number literal â†’ String + String ë¬¸ìžì—´ê³¼ ìˆ«ìž ë¦¬í„°ëŸ´ì„ ë”í•  ê²½ìš° ìˆ«ìž ë¦¬í„°ëŸ´ì´ ë¬¸ìžì—´ë¡œ ìºìŠ¤íŒ…ëœë‹¤.      ]]></content>
      <categories>
        
          <category> Java </category>
        
          <category> ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ </category>
        
      </categories>
      <tags>
        
          <tag> Java </tag>
        
          <tag> Casting </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ ìŠ¤ì½”í”„]]></title>
      <url>/java/%EA%B9%80%EC%98%81%ED%95%9C%20%EC%9E%90%EB%B0%94%20%EC%9E%85%EB%AC%B8/2024/04/22/Java_scope/</url>
      <content type="text"><![CDATA[  ë³€ìˆ˜ëŠ” ì„ ì–¸í•œ ìœ„ì¹˜ì— ë”°ë¼ ì§€ì—­ ë³€ìˆ˜, ë©¤ë²„ ë³€ìˆ˜(í´ëž˜ìŠ¤ ë³€ìˆ˜, ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜)ì™€ ê°™ì´ ë¶„ë¥˜ëœë‹¤. ì´ë²ˆì—ëŠ” ì§€ì—­ ë³€ìˆ˜(Local Variable, ë¡œì»¬ ë³€ìˆ˜)ì™€ ìŠ¤ì½”í”„ì— ê´€í•´ì„œ ì •ë¦¬í•´ë³´ìž.ì§€ì—­ ë³€ìˆ˜ì§€ì—­ ë³€ìˆ˜ì˜ ì§€ì—­ì€ ë°”ë¡œ ë³€ìˆ˜ê°€ ì„ ì–¸ëœ ì½”ë“œ ë¸”ë¡ {}ì´ë‹¤. ì§€ì—­ ë³€ìˆ˜ëŠ” ìžì‹ ì´ ì„ ì–¸ëœ ì½”ë“œ ë¸”ë¡ {} ì•ˆì—ì„œë§Œ ìƒì¡´í•  ìˆ˜ ìžˆê³ , ìžì‹ ì´ ì„ ì–¸ëœ ì½”ë“œ ë¸”ë¡ì„ ë²—ì–´ë‚˜ë©´ ì œê±°ëœë‹¤.Scopeë³€ìˆ˜ì˜ ì ‘ê·¼ ê°€ëŠ¥í•œ ë²”ìœ„ë¥¼ ìŠ¤ì½”í”„(scope)ë¼ê³  í•œë‹¤. ì¦‰, ë³€ìˆ˜ê°€ ì„ ì–¸ëœ ì½”ë“œ ë¸”ë¡ì˜ ë²”ìœ„ë¥¼ ê°€ë¦¬í‚¨ë‹¤. {}EXpublic class Scope1 {    public static void main(String[] args) {        int m = 10; // ë³€ìˆ˜ m ìƒì„±        if (true) {            int x = 20; // ë³€ìˆ˜ x ìƒì„±            System.out.println("x = " + x);            System.out.println("m = " + m);        } // x ì œê±°        // x ì ‘ê·¼ ë¶ˆê°€ëŠ¥        System.out.println("m = " + m);    } // m ì œê±°}â­ï¸ ìŠ¤ì½”í”„ ì¡´ìž¬ ì´ìœ   ë³€ìˆ˜ë¥¼ ì„ ì–¸í•œ ì‹œì ë¶€í„° ë³€ìˆ˜ë¥¼ ê³„ì† ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ í•´ë„ ë˜ì§€ ì•Šì„ê¹Œ? ì™œ ë³µìž¡í•˜ê²Œ ì ‘ê·¼ ë²”ìœ„(ìŠ¤ì½”í”„)ë¼ëŠ” ê°œë…ì„ ë§Œë“¤ì—ˆì„ê¹Œ?ì•„ëž˜ ì˜ˆì œ ì½”ë“œë¥¼ ë³´ê³  ì´ìœ ë¥¼ ìƒê°í•´ë³´ìž.Bad Examplepackage scope;public class Scope2 {     public static void main(String[] args) {         int m = 10;         int temp = 0;         if (m &gt; 0) {						 temp = m * 2;             System.out.println("temp = " + temp);         }         System.out.println("m = " + m);     }}ìœ„ ì½”ë“œëŠ” ì¢‹ì€ ì½”ë“œë¼ê³  ë³´ê¸° ì–´ë µë‹¤. ì™œëƒí•˜ë©´ ìž„ì‹œ ë³€ìˆ˜ temp ëŠ” if ì¡°ê±´ì ˆì—ì„œë§Œ ìž„ì‹œë¡œ ìž ê¹ ì‚¬ìš©í•˜ëŠ” ë³€ìˆ˜ì´ë‹¤. ê·¸ëŸ°ë° temp ë³€ìˆ˜ëŠ” main() ì½”ë“œ ë¸”ë¡ì— ì„ ì–¸ë˜ì–´ ìžˆë‹¤. ì´ë ‡ê²Œ ë˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.  ë¹„íš¨ìœ¨ì ì¸ ë©”ëª¨ë¦¬ ì‚¬ìš©: main() ì½”ë“œ ë¸”ë¡ì´ ì¢…ë£Œë  ë•Œ ê¹Œì§€ temp ë³€ìˆ˜ëŠ” ë©”ëª¨ë¦¬ì— ìœ ì§€ë˜ëŠ” ë¹„íš¨ìœ¨ì ì¸ ë©”ëª¨ë¦¬ ì‚¬ìš©ì´ ë°œìƒí•œë‹¤.  ì½”ë“œ ë³µìž¡ì„± ì¦ê°€: ifì ˆì´ ëë‚˜ë”ë¼ë„ ì—¬ì „ížˆ tempì— ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤. ì˜ˆì œ ì½”ë“œëŠ” ë‹¨ìˆœí•˜ì§€ë§Œ, ì‹¤ë¬´ ì½”ë“œëŠ” ë§¤ìš° ë³µìž¡í•˜ê¸° ë•Œë¬¸ì— ì ‘ê·¼ ê°€ëŠ¥í•œ temp ë³€ìˆ˜ë¥¼ ê³„ì† ì‹ ê²½ì„ ì¨ì•¼í•´ì„œ ë³µìž¡ì„±ì´ ì¦ê°€í•œë‹¤.Good Example package scope; public class Scope3 {     public static void main(String[] args) {         int m = 10;         if (m &gt; 0) {             int temp = m * 2;             System.out.println("temp = " + temp);         }         System.out.println("m = " + m);     }}temp ë¥¼ if ì½”ë“œ ë¸”ë¡ ì•ˆì—ì„œ ì„ ì–¸í–ˆë‹¤. ì´ì œ temp ëŠ” if ì½”ë“œ ë¸”ë¡ ì•ˆìœ¼ë¡œ ìŠ¤ì½”í”„ê°€ ì¤„ì–´ë“ ë‹¤. ë•ë¶„ì— temp ë³€ìˆ˜ë¥¼ ë©”ëª¨ë¦¬ì—ì„œ ë¹¨ë¦¬ ì œê±°í•˜ì—¬ ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³ , temp ë³€ìˆ˜ë¥¼ ìƒê°í•´ì•¼ í•˜ëŠ” ë²”ìœ„ë¥¼ ì¤„ì—¬ì„œ ë” ìœ ì§€ë³´ìˆ˜ í•˜ê¸° ì¢‹ì€ ì½”ë“œë¡œ ë§Œë“¤ì—ˆë‹¤.whileë¬¸ vs forë¬¸ with ìŠ¤ì½”í”„ ê´€ì ìŠ¤ì½”í”„ ê´€ì ì—ì„œ whileë¬¸ê³¼ forë¬¸ì„ ë¹„êµí•´ë³´ìž.while package loop; public class While {     public static void main(String[] args) {         int sum = 0;         int endNum = 3;         int i = 1;         while (i &lt;= endNum) {             sum = sum + i;             System.out.println("i=" + i + " sum=" + sum);             i++;         }         // ... ì•„ëž˜ ë” ë§Žì€ ì½”ë“œë“¤ì´ ìžˆë‹¤ê³  ê°€ì •     }}forpackage loop; public class For {     public static void main(String[] args) {         int sum = 0;         int endNum = 3;         for (int i = 1; i &lt;= endNum; i++) {             sum = sum + i;             System.out.println("i=" + i + " sum=" + sum);         }				//... ì•„ëž˜ì— ë” ë§Žì€ ì½”ë“œë“¤ì´ ìžˆë‹¤ê³  ê°€ì • 		}}ìŠ¤ì½”í”„ ê´€ì ì—ì„œ ì¹´ìš´í„° ë³€ìˆ˜ ië¥¼ ë¹„êµí•´ë³´ìž.  whileë¬¸ì˜ ê²½ìš° ë³€ìˆ˜ iì˜ ìŠ¤ì½”í”„ê°€ main() ë©”ì„œë“œ ì „ì²´ê°€ ëœë‹¤. ë°˜ë©´ì— forë¬¸ì˜ ê²½ìš° ë³€ìˆ˜ iì˜ ìŠ¤ì½”í”„ê°€ forë¬¸ ì•ˆìœ¼ë¡œ í•œì •ëœë‹¤.  ë”°ë¼ì„œ forë¬¸ì˜ iì™€ ê°™ì´ ë°˜ë³µë¬¸ ì•ˆì—ì„œë§Œ ì‚¬ìš©ë˜ëŠ” ì¹´ìš´í„° ë³€ìˆ˜ê°€ ìžˆë‹¤ë©´ whileë¬¸ ë³´ë‹¤ forë¬¸ì„ ì‚¬ìš©í•´ì„œ ìŠ¤ì½”í”„ì˜ ë²”ìœ„ë¥¼ ì œí•œí•˜ëŠ” ê²ƒì´ ë©”ëª¨ë¦¬ ì‚¬ìš©ê³¼ ìœ ì§€ë³´ìˆ˜ ê´€ì ì—ì„œ ë” ì¢‹ë‹¤.ì •ë¦¬  ë³€ìˆ˜ëŠ” ê¼­ í•„ìš”í•œ ë²”ìœ„ë¡œ í•œì •í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ë³€ìˆ˜ì˜ ìŠ¤ì½”í”„ëŠ” ê¼­ í•„ìš”í•œ ê³³ìœ¼ë¡œ í•œì •í•´ì„œ ì‚¬ìš©í•˜ìž. ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ë” ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì¢‹ì€ ì½”ë“œë¥¼ ë§Œë“¤ ìˆ˜ ìžˆë‹¤.  ê¹€ì˜í•œë‹˜ ë§ì”€  ì¢‹ì€ í”„ë¡œê·¸ëž¨ì€ ë¬´í•œí•œ ìžìœ ê°€ ìžˆëŠ” í”„ë¡œê·¸ëž¨ì´ ì•„ë‹ˆë¼ ì ì ˆí•œ ì œì•½ì´ ìžˆëŠ” í”„ë¡œê·¸ëž¨ì´ë‹¤.]]></content>
      <categories>
        
          <category> Java </category>
        
          <category> ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ </category>
        
      </categories>
      <tags>
        
          <tag> Java </tag>
        
          <tag> Scope </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ ë°˜ë³µë¬¸]]></title>
      <url>/java/%EA%B9%80%EC%98%81%ED%95%9C%20%EC%9E%90%EB%B0%94%20%EC%9E%85%EB%AC%B8/2024/04/21/Java_loop/</url>
      <content type="text"><![CDATA[  ìžë°”ëŠ” ë‹¤ìŒ 3ê°€ì§€ ë°˜ë³µë¬¸ì„ ì œê³µí•œë‹¤.  while, do-while, forwhilewhile (ì¡°ê±´ì‹) {  // ì½”ë“œ}ìž¥ì   ë£¨í”„ì˜ ì¡°ê±´ì´ ë£¨í”„ ë‚´ë¶€ì—ì„œ ë³€ê²½ë˜ëŠ” ê²½ìš°, while ë£¨í”„ëŠ” ì´ë¥¼ ê´€ë¦¬í•˜ê¸° ì‰½ë‹¤.  for ë£¨í”„ë³´ë‹¤ ë” ë³µìž¡í•œ ì¡°ê±´ê³¼ ì‹œë‚˜ë¦¬ì˜¤ì— ì í•©í•˜ë‹¤.  ì¡°ê±´ì´ ì¶©ì¡±ë˜ëŠ” ë™ì•ˆ ê³„ì†í•´ì„œ ë£¨í”„ë¥¼ ì‹¤í–‰í•˜ë©°, ì¢…ë£Œ ì‹œì ì„ ëª…í™•í•˜ê²Œ ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì— ìœ ìš©í•˜ë‹¤.ë‹¨ì   ì´ˆê¸°í™”, ì¡°ê±´ ì²´í¬, ë°˜ë³µ í›„ì˜ ìž‘ì—…ì´ ë¶„ì‚°ë˜ì–´ ìžˆì–´ ì½”ë“œë¥¼ ì´í•´í•˜ê±°ë‚˜ ìž‘ì„±í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìžˆë‹¤.  ë£¨í”„ ë³€ìˆ˜ê°€ while ë¸”ë¡ ë°”ê¹¥ì—ì„œë„ ì ‘ê·¼ ê°€ëŠ¥í•˜ë¯€ë¡œ, ì´ ë³€ìˆ˜ë¥¼ ì‹¤ìˆ˜ë¡œ ë³€ê²½í•˜ëŠ” ìƒí™©ì´ ë°œìƒí•  ìˆ˜ ìžˆë‹¤.do - whiledo {  // ì½”ë“œ} while (ì¡°ê±´ì‹);do-while ë¬¸ì€ while ë¬¸ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ, ì¡°ê±´ì— ìƒê´€ì—†ì´ ë¬´ì¡°ê±´ í•œ ë²ˆì€ ì½”ë“œë¥¼ ì‹¤í–‰í•œë‹¤.forfor (1.ì´ˆê¸°ì‹; 2.ì¡°ê±´ì‹; 4.ì¦ê°ì‹) { 	// 3.ì½”ë“œ}ìž¥ì   ì´ˆê¸°í™”, ì¡°ê±´ ì²´í¬, ë°˜ë³µ í›„ì˜ ìž‘ì—…ì„ í•œ ì¤„ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìžˆì–´ íŽ¸ë¦¬í•˜ë‹¤.  ì •í•´ì§„ íšŸìˆ˜ë§Œí¼ì˜ ë°˜ë³µì„ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©í•˜ê¸° ì í•©í•˜ë‹¤.  ë£¨í”„ ë³€ìˆ˜ì˜ ë²”ìœ„ê°€ for ë£¨í”„ ë¸”ë¡ì— ì œí•œë˜ë¯€ë¡œ, ë‹¤ë¥¸ ê³³ì—ì„œ ì´ ë³€ìˆ˜ë¥¼ ì‹¤ìˆ˜ë¡œ ë³€ê²½í•  ê°€ëŠ¥ì„±ì´ ì ë‹¤.ë‹¨ì   ë£¨í”„ì˜ ì¡°ê±´ì´ ë£¨í”„ ë‚´ë¶€ì—ì„œ ë³€ê²½ë˜ëŠ” ê²½ìš°, for ë£¨í”„ëŠ” ê´€ë¦¬í•˜ê¸° ì–´ë µë‹¤.  ë³µìž¡í•œ ì¡°ê±´ì„ ê°€ì§„ ë°˜ë³µë¬¸ì„ ìž‘ì„±í•˜ê¸°ì—ëŠ” whileë¬¸ì´ ë” ì í•©í•  ìˆ˜ ìžˆë‹¤.break, continuebreak ì™€ continue ëŠ” ë°˜ë³µë¬¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ” í‚¤ì›Œë“œë‹¤. break ëŠ” ë°˜ë³µë¬¸ì„ ì¦‰ì‹œ ì¢…ë£Œí•˜ê³  ë‚˜ê°„ë‹¤. continue ëŠ” ë°˜ë³µë¬¸ì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì„ ê±´ë„ˆë›°ê³  ë‹¤ìŒ ë°˜ë³µìœ¼ë¡œ ì§„í–‰í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤. ëª¨ë“  ë°˜ë³µë¬¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.forë¬¸ vs whileë¬¸forë¬¸ì€ ë°˜ë³µ íšŸìˆ˜ì— ì§ì ‘ì ì¸ ì˜í–¥ì„ ì£¼ëŠ” ë³€ìˆ˜ë¥¼ ì„ ì–¸ë¶€í„°, ê°’ ë³€í™”, ì¡°ê±´ì‹ì— í™œìš©ê¹Œì§€ ê°€ëŠ¥í•˜ë‹¤. ì¦‰, forë¬¸ì€ whileë¬¸ì„ ì¡°ê¸ˆ ë” íŽ¸í•˜ê²Œ ë‹¤ë£° ìˆ˜ ìžˆë„ë¡ êµ¬ì¡°í™”í•œ ê²ƒì´ë‹¤. forë¬¸ì„ ì‚¬ìš©í•˜ë©´ ê°œë°œìžëŠ” ë°˜ë³µ íšŸìˆ˜ì™€ ê´€ë ¨ëœ ì½”ë“œë¥¼ ë‚˜ë¨¸ì§€ ì½”ë“œì™€ ëª…í™•í•˜ê²Œ êµ¬ë¶„í•  ìˆ˜ ìžˆë‹¤. ë°˜ë©´ì— whileë¬¸ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë°˜ë³µ íšŸìˆ˜ ë³€ìˆ˜ì¸ ië¥¼ ì„ ì–¸í•˜ëŠ” ë¶€ë¶„ê³¼ ++i ë³€í™”í•˜ëŠ” ë¶€ë¶„ì´ ë¶„ì‚°ë˜ì–´ ìžˆë‹¤.  ðŸ’¡ ìš”ì•½  ì •í•´ì§„ íšŸìˆ˜ë§Œí¼ ë°˜ë³µì„ ìˆ˜í–‰í•´ì•¼ í•˜ë©´ forë¬¸ì„ ì‚¬ìš©í•˜ê³  ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ whileë¬¸ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ë¬¼ë¡  ì´ê²ƒì´ í•­ìƒ ì •ë‹µì€ ì•„ë‹ˆë‹¤.]]></content>
      <categories>
        
          <category> Java </category>
        
          <category> ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ </category>
        
      </categories>
      <tags>
        
          <tag> Java </tag>
        
          <tag> Loop Statement </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ ì¡°ê±´ë¬¸]]></title>
      <url>/java/%EA%B9%80%EC%98%81%ED%95%9C%20%EC%9E%90%EB%B0%94%20%EC%9E%85%EB%AC%B8/2024/04/20/Java_condition/</url>
      <content type="text"><![CDATA[ifë¬¸ê³¼ else ifë¬¸ifë¬¸ì— else ifë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì„œë¡œ ì—°ê´€ëœ ì¡°ê±´ì¼ ë•Œ ì‚¬ìš©í•œë‹¤. ê·¸ëŸ°ë° ì„œë¡œ ê´€ë ¨ì´ ì—†ëŠ” ë…ë¦½ ì¡°ê±´ì´ë©´ else ifë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ifë¬¸ì„ ê°ê° ë”°ë¡œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.// ì˜ˆì‹œ1. if-else ì‚¬ìš©: ì„œë¡œ ì—°ê´€ëœ ì¡°ê±´ì´ì–´ì„œ, í•˜ë‚˜ë¡œ ë¬¶ì„ ë•Œ if (condition1) {	// ìž‘ì—…1 ìˆ˜í–‰} else if (condition2) {	// ìž‘ì—…2 ìˆ˜í–‰ }	// ì˜ˆì‹œ2. if ê°ê° ì‚¬ìš©: ë…ë¦½ ì¡°ê±´ì¼ ë•Œ if (condition1) {	// ìž‘ì—…1 ìˆ˜í–‰ }if (condition2) { 	// ìž‘ì—…2 ìˆ˜í–‰}else if í•µì‹¬ì€ ìˆœì„œëŒ€ë¡œ ë§žëŠ” ì¡°ê±´ ì„ ì°¾ì•„ë³´ê³ , ë§žëŠ” ì¡°ê±´ì´ ìžˆìœ¼ë©´ ë”± 1ê°œë§Œ ì‹¤í–‰ì´ ë˜ëŠ” ê²ƒì´ë‹¤. ë˜í•œ ë¶ˆí•„ìš”í•œ ì¡°ê±´ ê²€ì‚¬ë¥¼ í”¼í•˜ê³  ì½”ë“œì˜ íš¨ìœ¨ì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìžˆë‹¤.  ðŸ’¡ ì°¸ê³   if, else if, else ë¬¸ ë‹¤ìŒì— ì‹¤í–‰í•  ëª…ë ¹ì–´ê°€ í•˜ë‚˜ë§Œ ìžˆì„ ê²½ìš°ì—ëŠ” {} ì¤‘ê´„í˜¸ë¥¼ìƒëžµí• ìˆ˜ìžˆë‹¤.if (true) System.out.println("ì¤‘ê´„í˜¸ ìƒëžµ ê°€ëŠ¥");ì¼ë°˜ì ìœ¼ë¡œ ifë¬¸ì˜ ëª…ë ¹ì´ í•œ ê°œë§Œ ìžˆì„ ê²½ìš°ì—ë„ ë‹¤ìŒê³¼ ê°™ì€ ì´ìœ ë¡œ ì¤‘ê´„í˜¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.  ê°€ë…ì„±: ì¡°ê±´ë¬¸ì˜ ë²”ìœ„ê°€ ëª…í™•í•˜ê²Œ í‘œì‹œëœë‹¤.  ìœ ì§€ë³´ìˆ˜ì„±: ifë¬¸ ì•ˆì— ì½”ë“œë¥¼ ì¶”ê°€ ì‹œ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥ì„±ì´ ë‚®ë‹¤.switchë¬¸switchë¬¸ì€ ifë¬¸ì„ ì¢€ ë” íŽ¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ” ê¸°ëŠ¥ì´ë‹¤.ë‹¨, ifë¬¸ì€ ë¹„êµ ì—°ì‚°ìžë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆì§€ë§Œ switchë¬¸ì€ ë‹¨ìˆœížˆ ê°’ì´ ê°™ì€ì§€ë§Œ ë¹„êµ ê°€ëŠ¥í•˜ë‹¤.switch (ì¡°ê±´ì‹) { 	case value1:		 // ì¡°ê±´ì‹ì˜ ê²°ê³¼ ê°’ì´ value1ì¼ ë•Œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ     break;	case value2:		 // ì¡°ê±´ì‹ì˜ ê²°ê³¼ ê°’ì´ value2ì¼ ë•Œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ     break;  default:		 // ì¡°ê±´ì‹ì˜ ê²°ê³¼ ê°’ì´ ìœ„ì˜ ì–´ë–¤ ê°’ì—ë„ í•´ë‹¹í•˜ì§€ ì•Šì„ ë•Œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ }  ðŸš¨ break ë¬¸ì´ ì—†ë‹¤ë©´?  breakë¥¼ ë§Œë‚˜ê¸° ì „ê¹Œì§€ ì•„ëž˜ case ë¬¸ë“¤ì„ ì—°ì†í•´ì„œ ê³„ì† ì‹¤í–‰í•œë‹¤.ìžë°” 14 switchì‚¬ì‹¤ ifë¬¸ì´ ë” í° ë²”ì£¼ì˜ ì¡°ê±´ì„ ë‹¤ë£° ìˆ˜ ìžˆê¸°ë„ í•˜ê³  switchë¬¸ì´ ì—„ì²­ ê°„ê²°í•˜ë‹¤ê³  ë³´ê¸° ì–´ë µë‹¤.ê·¸ëž˜ì„œ ìžë°” 14ë²„ì „ë¶€í„° ìƒˆë¡œìš´ switchë¬¸ì´ ì •ì‹ìœ¼ë¡œ ë„ìž…ë˜ì—ˆë‹¤.int coupon = switch (grade) {   case 1 -&gt; 1000;   case 2 -&gt; 2000;   case 3 -&gt; 3000;   default -&gt; 500; }ê¸°ì¡´ switch ë¬¸ê³¼ ì°¨ì´ì   -&gt; ë¥¼ ì‚¬ìš©í•œë‹¤.  break ë¬¸ ì—†ì´ ì„ íƒëœ ë°ì´í„°ë¥¼ ë°˜í™˜í•œë‹¤.ìƒˆë¡œìš´ switch ë¬¸ì€ ë” ë§Žì€ ë‚´ìš©ì„ ë‹¤ë£¨ê³  ìžˆì§€ë§Œ, ìžì„¸í•œ ë‚´ìš©ì€ ë³„ë„ë¡œ ë‹¤ë£¬ë‹¤.ì‚¼í•­ ì—°ì‚°ìžì°¸ê³¼ ê±°ì§“ì— ë”°ë¼ì„œ íŠ¹ì • ê°’ì„ êµ¬í•˜ëŠ” ê²½ìš° ì‚¼í•­ ì—°ì‚°ìž ë˜ëŠ” ì¡°ê±´ ì—°ì‚°ìžë¼ê³  ë¶ˆë¦¬ëŠ” ?, : ì—°ì‚°ìžë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤. ì´ ì—°ì‚°ìžë¥¼ ì‚¬ìš©í•˜ë©´ if ë¬¸ê³¼ ë¹„êµí•´ì„œ ì½”ë“œë¥¼ ë‹¨ìˆœí™” í•  ìˆ˜ ìžˆë‹¤.(ì¡°ê±´ì‹) ? ì°¸ì¸ ê²½ìš° ë¦¬í„´ ê°’ : ê±°ì§“ì¸ ê²½ìš° ë¦¬í„´ ê°’]]></content>
      <categories>
        
          <category> Java </category>
        
          <category> ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ </category>
        
      </categories>
      <tags>
        
          <tag> Java </tag>
        
          <tag> Condition Statement </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ ì—°ì‚°ìž]]></title>
      <url>/java/%EA%B9%80%EC%98%81%ED%95%9C%20%EC%9E%90%EB%B0%94%20%EC%9E%85%EB%AC%B8/2024/04/16/Java_Operator/</url>
      <content type="text"><![CDATA[  ê¹€ì˜í•œ ìžë°” ìž…ë¬¸íŽ¸ â€œì—°ì‚°ìžâ€ ê°•ì˜ì—ì„œ ì¤‘ìš”í•˜ê±°ë‚˜ ìƒˆë¡­ê²Œ ê¹¨ë‹¬ì€ ê²ƒë“¤ë§Œ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•˜ìž.ì—°ì‚°ìžìžì£¼ ì‚¬ìš©í•˜ëŠ” ì—°ì‚°ìž  ì‚°ìˆ  ì—°ì‚°ìž: +, -, *, /, %  ì¦ê° ì—°ì‚°ìž: ++, --  ë¹„êµ ì—°ì‚°ìž: ==, !=, &gt;, &lt;, &gt;=, &lt;=  ë…¼ë¦¬ ì—°ì‚°ìž: &amp;&amp;, ||, !  ëŒ€ìž… ì—°ì‚°ìž: =, -=, +=, /=, %=  ì‚¼í•­ ì—°ì‚°ìž: ? :  ê°ì²´ íƒ€ìž… í™•ì¸ ì—°ì‚°ìž: instanceof  ê·¸ ì™¸ : new, [] (ë°°ì—´ ì¸ë±ìŠ¤), . (ê°ì²´ ë©¤ë²„ ì ‘ê·¼), () (ë©”ì†Œë“œ í˜¸ì¶œ)ì‹¤ë¬´ì—ì„œ ê±°ì˜ ì‚¬ìš©í•  ì¼ì´ ì—†ëŠ” ì—°ì‚°ìž  ë¹„íŠ¸ ì—°ì‚°ìž: &amp;, |, ^, ~, &lt;&lt;, &gt;&gt;, &gt;&gt;&gt;ì—°ì‚°ìž ìš°ì„ ìˆœìœ„ì—°ì‚°ìžê°€ ë§Žì€ ìˆ˜ì‹ì—ëŠ” ê´„í˜¸ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ëª…í™•í•˜ê³  ì´í•´í•˜ê¸° ì‰½ë‹¤.2 * 2 + 3 * 3(2 * 2) + (3 * 3)ìœ„ ë‘ ê°œì˜ ê°„ë‹¨í•œ ìˆ˜ì‹ì„ ë¹„êµí•´ë³¼ ë•Œ í™•ì‹¤ížˆ ê´„í˜¸ê°€ í¬í•¨ëœ ê²ƒì´ ë” ì´í•´í•˜ê¸° ì‰½ë‹¤.  ì½”ë“œë¥¼ ëª‡ìž ì¤„ì—¬ì„œ ëª¨í˜¸í•˜ê±°ë‚˜ ë³µìž¡í•´ ì§€ëŠ” ê²ƒ ë³´ë‹¤ëŠ” ì½”ë“œê°€ ë” ë§Žë”ë¼ë„ ëª…í™•í•˜ê³  ë‹¨ìˆœí•œ ê²ƒì´ ë” ìœ ì§€ë³´ìˆ˜ í•˜ê¸° ì¢‹ë‹¤.ëŒ€ë¶€ë¶„ì˜ ê°œë°œìžë“¤ì€ ì—°ì‚°ìž ìš°ì„ ìˆœìœ„ë¥¼ ì™¸ìš°ì§€ ì•Šì„ ê²ƒì´ë‹¤.(ë‚˜ ë˜í•œ.. ì™¸ìš°ì§€ ì•ŠëŠ”ë‹¤.)ì—°ì‚°ìž ìš°ì„ ìˆœìœ„ë¥¼ ì™¸ìš°ì§€ ë§ê³  ì•„ëž˜ ë‘ ê°€ì§€ë§Œ ìƒê°í•˜ìž.  ìƒì‹ì„ ì—ì„œ ìš°ì„ ìˆœìœ„ë¥¼ ê²°ì •í•˜ìž.  ì• ë§¤í•˜ë©´ ê´„í˜¸() ë¥¼ ì‚¬ìš©í•˜ìž.  ê°œë°œì—ì„œ ê°€ìž¥ ì¤‘ìš”í•œ ê²ƒì€ ë‹¨ìˆ¨í•¨ê³¼ ëª…í™•í•¨ì´ë‹¤. ì• ë§¤í•˜ê±°ë‚˜ ë³µìž¡í•˜ë©´ ì•ˆëœë‹¤.ë¬¸ìžì—´ ë¹„êµë¬¸ìžì—´ì´ ê°™ì€ì§€ ë¹„êµí•  ë•ŒëŠ” == ì´ ì•„ë‹ˆë¼ .equals() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. == ë¥¼ ì‚¬ìš©í•˜ë©´ ì„±ê³µí•  ë•Œë„ ìžˆì§€ë§Œ ì‹¤íŒ¨í•  ë•Œë„ ìžˆë‹¤.String str1 = "hello";String str2 = "hello";System.out.println(str1 == str2) // trueSystem.out.println(str1.equals(str2)) // trueString str3 = new String("hello");String str4 = new String("hello");System.out.println(str3 == str4) // falseSystem.out.println(str3.equals(str4)) // trueë¬¸ìžì—´ ë¦¬í„°ëŸ´ ê°’ ë¹„êµì‹œì—ëŠ” == ìœ¼ë¡œë„ ê´œì°®ì§€ë§Œ, ë¬¸ìžì—´ ê°ì²´ë¥¼ ë¹„êµí•  ë•ŒëŠ” ì˜ˆìƒì¹˜ ëª» í•œ ê²°ê³¼ê°€ ë‚˜ì˜¤ê²Œ ëœë‹¤. ê°ê° ë‹¤ë¥¸ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ê³  ìžˆê¸° ë•Œë¬¸ì´ë‹¤.  âœ… equals()ë¥¼ ì‚¬ìš©í•˜ë©´ ë¬¸ìžì—´ì˜ ì‹¤ì œ ë‚´ìš©ì„ ë¹„êµí•˜ì—¬ ì¼ì¹˜ ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìžˆìœ¼ë¯€ë¡œ, ì˜ˆìƒì¹˜ ëª»í•œ ê²°ê³¼ë‚˜ ë²„ê·¸ë¥¼ ë°©ì§€í•˜ê³  ì •í™•í•œ ë¹„êµë¥¼ í•  ìˆ˜ ìžˆë‹¤.]]></content>
      <categories>
        
          <category> Java </category>
        
          <category> ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ </category>
        
      </categories>
      <tags>
        
          <tag> Java </tag>
        
          <tag> Operator </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ ë³€ìˆ˜]]></title>
      <url>/java/%EA%B9%80%EC%98%81%ED%95%9C%20%EC%9E%90%EB%B0%94%20%EC%9E%85%EB%AC%B8/2024/04/15/Java_Variable/</url>
      <content type="text"><![CDATA[  ê¹€ì˜í•œ ìžë°” ìž…ë¬¸íŽ¸ â€œë³€ìˆ˜â€ ê°•ì˜ì—ì„œ ì¤‘ìš”í•˜ê±°ë‚˜, ìƒˆë¡­ê²Œ ê¹¨ë‹¬ì€ ê²ƒë“¤ë§Œ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•˜ìž.ðŸ’£ ì‹¤ë¬´ì—ì„œ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë³€ìˆ˜ íƒ€ìž…  byte : í‘œí˜„ ê¸¸ì´ê°€ ë„ˆë¬´ ìž‘ë‹¤. íŒŒì¼ ì „ì†¡, ë³µì‚¬ ë“± íŒŒì¼ì„ ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ë‹¤ë£° ë•Œ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.  short : í‘œí˜„ ê¸¸ì´ê°€ ë„ˆë¬´ ìž‘ë‹¤.  float : í‘œí˜„ ê¸¸ì´ì™€ ì •ë°€ë„ê°€ ë‚®ë‹¤.  char : ë¬¸ìž í•˜ë‚˜ë¥¼ í‘œí˜„í•  ì¼ì€ ê±°ì˜ ì—†ë‹¤. ë¬¸ìž í•˜ë‚˜ë¼ë„ ë¬¸ìžì—´ Stringì„ ì‚¬ìš©í•˜ìž.â­ï¸ ì‹¤ë¬´ì—ì„œ ìžì£¼ ì‚¬ìš©í•˜ëŠ” íƒ€ìž…  ì •ìˆ˜ int, long  ì‹¤ìˆ˜ double  ë¶ˆë¦°í˜• boolean  ë¬¸ìžì—´ String  ðŸ’¡ ìžë°”ëŠ” ì •ìˆ˜ ê¸°ë³¸ ë¦¬í„°ëŸ´ë¡œ int ë¥¼ ì‚¬ìš©í•œë‹¤. ìžë°”ëŠ” 4byte(int)ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê³„ì‚°í•˜ë„ë¡ ì„¤ê³„ë˜ì–´ ìžˆë‹¤.  ðŸ’¡ ë©”ëª¨ë¦¬ ìš©ëŸ‰ì€ ë§¤ìš° ì €ë ´í•´ì¡Œë‹¤. ë”°ë¼ì„œ ë©”ëª¨ë¦¬ ìš©ëŸ‰ì„ ì•½ê°„ ì ˆì•½í•˜ê¸° ë³´ë‹¤ëŠ” ê°œë°œ ì†ë„ë‚˜ íš¨ìœ¨ì— ì´ˆì ì„ ë§žì¶”ëŠ” ê²ƒì´ ë” íš¨ê³¼ì ì´ë‹¤.ìƒˆë¡­ê²Œ ê¹¨ë‹¬ì€ ì‚¬ì‹¤  ì •ìˆ˜ ë¦¬í„°ëŸ´ì€ ê¸°ë³¸ìœ¼ë¡œ int ì´ë‹¤. intì˜ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ëŠ” ì •ìˆ˜ ë¦¬í„°ëŸ´(long)ì˜ ê²½ìš° ëŒ€ë¬¸ìž Lì„ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤.  ë¹„ìŠ·í•˜ê²Œ, ì‹¤ìˆ˜ ë¦¬í„°ëŸ´ì€ double ì´ë‹¤. float ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ì†Œë¬¸ìž fë¥¼ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤.  ìžë°” í”„ë¡œì íŠ¸ì—ì„œ srcê°€ package ì„ ì–¸ ì‹œìž‘ ê²½ë¡œì´ë‹¤.  ìžë°” íŒŒì¼ì´ ìœ„ì¹˜í•˜ëŠ” íŒ¨í‚¤ì§€ì™€ package [path] ì„ ì–¸ ìœ„ì¹˜ê°€ ê°™ì•„ì•¼ í•œë‹¤.]]></content>
      <categories>
        
          <category> Java </category>
        
          <category> ê¹€ì˜í•œ ìžë°” ìž…ë¬¸ </category>
        
      </categories>
      <tags>
        
          <tag> Java </tag>
        
          <tag> Variable </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Why is kafka fast?]]></title>
      <url>/kafka/2024/01/01/Why_is_kafka_fast/</url>
      <content type="text"><![CDATA[  Kafkaë¥¼ ë¹ ë¥´ê²Œ í•˜ëŠ” Zero Copyì— ëŒ€í•´ ì•Œì•„ë³´ìž.KafkaëŠ” ì™œ ë¹ ë¥¸ ê²ƒì¼ê¹Œ?ì•„ëž˜ì™€ ê°™ì€ ì´ìœ  ë“±ìœ¼ë¡œ Kafkaì˜ ì„±ëŠ¥ì´ ì¢‹ë‹¤. ì˜¤ëŠ˜ì€ Zero Copy ì— ëŒ€í•´ì„œ ìžì„¸ížˆ ì•Œì•„ë³´ìž.  íŒŒí‹°ì…˜ íŒŒì¼ì€ OS íŽ˜ì´ì§€ìºì‹œ ì‚¬ìš©  Zero Copy  ë¸Œë¡œì»¤ê°€ í•˜ëŠ” ì¼ì´ ë¹„êµì  ë‹¨ìˆœ  ë¬¶ì–´ì„œ ë³´ë‚´ê¸°, ë¬¶ì–´ì„œ ë°›ê¸° (batch) ê°€ëŠ¥Zero Copy?  Zero Copyëž€?  Zero CopyëŠ” CPUê°€ í•œ ë©”ëª¨ë¦¬ ì˜ì—­ì—ì„œ ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ì˜ì—­ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³µì‚¬í•˜ëŠ” ìž‘ì—…ì„ ìˆ˜í–‰í•˜ì§€ ì•Šê±°ë‚˜ ë¶ˆí•„ìš”í•œ ë°ì´í„° ë³µì‚¬ë¥¼ í”¼í•˜ëŠ” ì»´í“¨í„° ìž‘ì—…ì„ ë§í•œë‹¤.Read without zero copy VS Read with zero copywhat zero-copy means / Ref: ByteByteGoìœ„ ì´ë¯¸ì§€ì—ì„œ Zero Copyë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš° ë¶ˆí•„ìš”í•œ ë°ì´í„° copyê°€ ë°œìƒí•˜ì§€ ì•Šê³  ë°”ë¡œ NIC Bufferë¥¼ í†µí•´ messageë¥¼ consume í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤. ì´ ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ ì‹œê°„ì´ ì•½ 65% ë‹¨ì¶•ëœë‹¤ê³  í•œë‹¤.Reference  System Design Interview  kafka ì¡°ê¸ˆ ì•„ëŠ” ì²™í•˜ê¸° 1(ê°œë°œìžìš©), ìµœë²”ê· ]]></content>
      <categories>
        
          <category> Kafka </category>
        
      </categories>
      <tags>
        
          <tag> Kafka </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
</search>
